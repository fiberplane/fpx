[{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/452","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/452/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/452/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/452/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/452","id":2334144485,"node_id":"I_kwDOHoY85M6LIDfl","number":452,"title":"Introspection of PG varchar array types generates broken schema -- drizzle runner is crippled as a result","user":{"login":"jasongonzales23","id":243861,"node_id":"MDQ6VXNlcjI0Mzg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/243861?v=4","gravatar_id":"","url":"https://api.github.com/users/jasongonzales23","html_url":"https://github.com/jasongonzales23","followers_url":"https://api.github.com/users/jasongonzales23/followers","following_url":"https://api.github.com/users/jasongonzales23/following{/other_user}","gists_url":"https://api.github.com/users/jasongonzales23/gists{/gist_id}","starred_url":"https://api.github.com/users/jasongonzales23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasongonzales23/subscriptions","organizations_url":"https://api.github.com/users/jasongonzales23/orgs","repos_url":"https://api.github.com/users/jasongonzales23/repos","events_url":"https://api.github.com/users/jasongonzales23/events{/privacy}","received_events_url":"https://api.github.com/users/jasongonzales23/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-06-04T18:36:17Z","updated_at":"2024-06-04T18:36:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"drizzle-kit: v0.21.4\r\ndrizzle-orm: v0.30.10\r\n\r\nUsing pg driver.\r\n\r\nWhen I initially ran `pnpm drizzle-kit introspect` a column was defined like so:\r\n\r\n`zip: varchar(\"zip\", { length: 255)[ }),`\r\n\r\nI manually fixed and pushed:\r\n` zip: varchar(\"zip\", { length: 255 }).array(),`\r\n\r\nBut when I run drizzle studio the schema is still broken in the initial way and I can't figure out how to fix it.\r\n\r\nSchema attached in the bug report. Would love to use Drizzle Runner it seems like it will really speed up my team as we learn Drizzle.\r\n\r\nThanks y'all!\r\n\r\n[bug-report.zip](https://github.com/user-attachments/files/15568947/bug-report.zip)\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/452/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/452/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/451","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/451/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/451/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/451/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/451","id":2333899656,"node_id":"I_kwDOHoY85M6LHHuI","number":451,"title":"[BUG]: Push is comparing schema objects against Supabase's schemas. ","user":{"login":"stefanosandes","id":6722075,"node_id":"MDQ6VXNlcjY3MjIwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/6722075?v=4","gravatar_id":"","url":"https://api.github.com/users/stefanosandes","html_url":"https://github.com/stefanosandes","followers_url":"https://api.github.com/users/stefanosandes/followers","following_url":"https://api.github.com/users/stefanosandes/following{/other_user}","gists_url":"https://api.github.com/users/stefanosandes/gists{/gist_id}","starred_url":"https://api.github.com/users/stefanosandes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stefanosandes/subscriptions","organizations_url":"https://api.github.com/users/stefanosandes/orgs","repos_url":"https://api.github.com/users/stefanosandes/repos","events_url":"https://api.github.com/users/stefanosandes/events{/privacy}","received_events_url":"https://api.github.com/users/stefanosandes/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-06-04T16:08:23Z","updated_at":"2024-06-04T16:09:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\r\n\r\n0.30.10\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.21.1\r\n\r\n### Describe the Bug\r\n\r\nWhen I run `drizzle-kit push` in an empty Supabase database, it is comparing my schema with Supabase's own schemas.\r\n\r\n![image](https://github.com/drizzle-team/drizzle-orm/assets/6722075/bec17d26-cf06-4b44-92f4-41e054761c43)\r\n\r\nI tried to specify schemaFilter in drizzle.config.ts, but dont worked.\r\n\r\n### Expected behavior\r\n\r\nDrizzle should not consider about other schemas than the main schema, unless it is specified.\r\n\r\n### Environment & setup\r\n\r\n```\r\nOS: macOS 14.4.1  arm64\r\nNode: v20.12.1\r\n```\r\n\r\nThis issue was originally opened on the drizzle-orm repo. https://github.com/drizzle-team/drizzle-orm/issues/2312","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/451/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/450","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/450/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/450/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/450/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/450","id":2331864503,"node_id":"I_kwDOHoY85M6K_W23","number":450,"title":"Studio crashes when running any query","user":{"login":"Makistos","id":132604,"node_id":"MDQ6VXNlcjEzMjYwNA==","avatar_url":"https://avatars.githubusercontent.com/u/132604?v=4","gravatar_id":"","url":"https://api.github.com/users/Makistos","html_url":"https://github.com/Makistos","followers_url":"https://api.github.com/users/Makistos/followers","following_url":"https://api.github.com/users/Makistos/following{/other_user}","gists_url":"https://api.github.com/users/Makistos/gists{/gist_id}","starred_url":"https://api.github.com/users/Makistos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Makistos/subscriptions","organizations_url":"https://api.github.com/users/Makistos/orgs","repos_url":"https://api.github.com/users/Makistos/repos","events_url":"https://api.github.com/users/Makistos/events{/privacy}","received_events_url":"https://api.github.com/users/Makistos/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-06-03T19:16:29Z","updated_at":"2024-06-03T19:16:29Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Studio crashes no matter how simple the query is when using the Drizzle runner. SQL queries work properly.\r\n\r\n[bug-report(2).zip](https://github.com/user-attachments/files/15538626/bug-report.2.zip)\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/450/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/449","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/449/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/449/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/449/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/449","id":2331725139,"node_id":"I_kwDOHoY85M6K-01T","number":449,"title":"[Improvement: STUDIO] Show warning when ``pg`` dependency is not installed","user":{"login":"dotarjun","id":71163609,"node_id":"MDQ6VXNlcjcxMTYzNjA5","avatar_url":"https://avatars.githubusercontent.com/u/71163609?v=4","gravatar_id":"","url":"https://api.github.com/users/dotarjun","html_url":"https://github.com/dotarjun","followers_url":"https://api.github.com/users/dotarjun/followers","following_url":"https://api.github.com/users/dotarjun/following{/other_user}","gists_url":"https://api.github.com/users/dotarjun/gists{/gist_id}","starred_url":"https://api.github.com/users/dotarjun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotarjun/subscriptions","organizations_url":"https://api.github.com/users/dotarjun/orgs","repos_url":"https://api.github.com/users/dotarjun/repos","events_url":"https://api.github.com/users/dotarjun/events{/privacy}","received_events_url":"https://api.github.com/users/dotarjun/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-06-03T17:52:54Z","updated_at":"2024-06-03T17:52:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"There are multiple issues regarding this which can easily be dealt with by having that warning shown in the console. \r\n\r\nCase in point: \r\nhttps://discord.com/channels/1043890932593987624/1247244064567590914\r\nhttps://discord.com/channels/1043890932593987624/1246938578399924225\r\nhttps://discord.com/channels/1043890932593987624/1244930484912521287","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/449/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/448","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/448/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/448/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/448/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/448","id":2329885832,"node_id":"I_kwDOHoY85M6K3zyI","number":448,"title":"[BUG]: Generates using clause without quoting the column name","user":{"login":"Vorelli","id":46127615,"node_id":"MDQ6VXNlcjQ2MTI3NjE1","avatar_url":"https://avatars.githubusercontent.com/u/46127615?v=4","gravatar_id":"","url":"https://api.github.com/users/Vorelli","html_url":"https://github.com/Vorelli","followers_url":"https://api.github.com/users/Vorelli/followers","following_url":"https://api.github.com/users/Vorelli/following{/other_user}","gists_url":"https://api.github.com/users/Vorelli/gists{/gist_id}","starred_url":"https://api.github.com/users/Vorelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Vorelli/subscriptions","organizations_url":"https://api.github.com/users/Vorelli/orgs","repos_url":"https://api.github.com/users/Vorelli/repos","events_url":"https://api.github.com/users/Vorelli/events{/privacy}","received_events_url":"https://api.github.com/users/Vorelli/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-06-02T22:10:32Z","updated_at":"2024-06-02T23:15:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Config:\r\n`{\r\n  dialect: 'postgresql',\r\n  schema: './schema/**/*.ts',\r\n  out: '../drizzle',\r\n}`\r\nOriginal:\r\n`CREATE INDEX IF NOT EXISTS \"applicationsDateAppliedIdx\" ON \"applications\" USING btree (dateApplied);`\r\nExpected:\r\n`CREATE INDEX IF NOT EXISTS \"applicationsDateAppliedIdx\" ON \"applications\" USING btree (\"dateApplied\");`","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/448/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/448/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/447","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/447/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/447/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/447/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/447","id":2327753012,"node_id":"I_kwDOHoY85M6KvrE0","number":447,"title":"[Bug]: `extensionsFilters: [\"postgis\"]` does not work","user":{"login":"MellKam","id":51422045,"node_id":"MDQ6VXNlcjUxNDIyMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/51422045?v=4","gravatar_id":"","url":"https://api.github.com/users/MellKam","html_url":"https://github.com/MellKam","followers_url":"https://api.github.com/users/MellKam/followers","following_url":"https://api.github.com/users/MellKam/following{/other_user}","gists_url":"https://api.github.com/users/MellKam/gists{/gist_id}","starred_url":"https://api.github.com/users/MellKam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MellKam/subscriptions","organizations_url":"https://api.github.com/users/MellKam/orgs","repos_url":"https://api.github.com/users/MellKam/repos","events_url":"https://api.github.com/users/MellKam/events{/privacy}","received_events_url":"https://api.github.com/users/MellKam/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-05-31T12:40:00Z","updated_at":"2024-06-03T18:52:29Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I tried to use `drizzle-kit push` with new extensionsFilter for postgis, but it still propmts me to delete postgis tables\r\n\r\n```bash\r\nWarning  Found data-loss statements:\r\n¬∑ You're about to delete geometry_columns table with 13 items\r\n¬∑ You're about to delete spatial_ref_sys table with 8500 items\r\n\r\nTHIS ACTION WILL CAUSE DATA LOSS AND CANNOT BE REVERTED\r\n```\r\n\r\nor thinks that I wanted to rename them\r\n\r\n```\r\nIs conference_categories table created or renamed from another table?\r\n‚ùØ + conference_categories                     create table\r\n  ~ geography_columns ‚Ä∫ conference_categories rename table\r\n  ~ geometry_columns ‚Ä∫ conference_categories  rename table\r\n  ~ spatial_ref_sys ‚Ä∫ conference_categories   rename table\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/447/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/446","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/446/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/446/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/446/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/446","id":2327555774,"node_id":"I_kwDOHoY85M6Ku66-","number":446,"title":"`drizzle-kit generate` doesn't detect changes to columns when table has been renamed","user":{"login":"shroudedcode","id":29176678,"node_id":"MDQ6VXNlcjI5MTc2Njc4","avatar_url":"https://avatars.githubusercontent.com/u/29176678?v=4","gravatar_id":"","url":"https://api.github.com/users/shroudedcode","html_url":"https://github.com/shroudedcode","followers_url":"https://api.github.com/users/shroudedcode/followers","following_url":"https://api.github.com/users/shroudedcode/following{/other_user}","gists_url":"https://api.github.com/users/shroudedcode/gists{/gist_id}","starred_url":"https://api.github.com/users/shroudedcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shroudedcode/subscriptions","organizations_url":"https://api.github.com/users/shroudedcode/orgs","repos_url":"https://api.github.com/users/shroudedcode/repos","events_url":"https://api.github.com/users/shroudedcode/events{/privacy}","received_events_url":"https://api.github.com/users/shroudedcode/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-31T10:59:14Z","updated_at":"2024-05-31T10:59:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I just did a rather large migration where I renamed one of the core concepts in my application. This resulted in multiple tables (e.g., `houses` became `buildings`) and a few properties on those tables (e.g., `house_id` became `building_id`) being renamed.\r\n\r\nAfter running `drizzle-kit generate`, I was asked which tables to drop/rename, and I selected all the relevant tables there. Then, the migration was generated, and I thought I was done.\r\n\r\nThat's when I realized that the columns in those tables hadn't been touched. The snapshot had been updated and now included the names of the renamed columns but the `.sql` file didn't contain any statements to modify them.\r\n\r\n### Expected behavior\r\n\r\n`generate` first asks about the renamed tables and then does another diffing pass and asks about the renamed columns in those tables. The resulting migration updates both the table and the column names and the snapshots is updated as expected.\r\n\r\n**Alternatively** (this could be a temporary fix): The resulting migration only updates the table names but the snapshot also reflects that (i.e., the old column names are retained). This would allow running `generate` again to then update the column names as part of a second migration.\r\n\r\n### Actual behavior\r\n\r\n`generate` only asks about the renamed tables. The resulting migration only updates the table names and the snapshot is brought into an incorrect out-of-sync state (which means that a second `generate` pass couldn't fix the drift).\r\n\r\n### Version\r\n\r\nI used version `0.21.2` of `drizzle-kit`.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/446/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/445","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/445/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/445/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/445/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/445","id":2327393215,"node_id":"I_kwDOHoY85M6KuTO_","number":445,"title":"Drizzle Database showing problem after run the drizzle ","user":{"login":"Tarunroy20","id":169477207,"node_id":"U_kgDOChoEVw","avatar_url":"https://avatars.githubusercontent.com/u/169477207?v=4","gravatar_id":"","url":"https://api.github.com/users/Tarunroy20","html_url":"https://github.com/Tarunroy20","followers_url":"https://api.github.com/users/Tarunroy20/followers","following_url":"https://api.github.com/users/Tarunroy20/following{/other_user}","gists_url":"https://api.github.com/users/Tarunroy20/gists{/gist_id}","starred_url":"https://api.github.com/users/Tarunroy20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tarunroy20/subscriptions","organizations_url":"https://api.github.com/users/Tarunroy20/orgs","repos_url":"https://api.github.com/users/Tarunroy20/repos","events_url":"https://api.github.com/users/Tarunroy20/events{/privacy}","received_events_url":"https://api.github.com/users/Tarunroy20/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-05-31T09:40:52Z","updated_at":"2024-06-04T02:17:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"may data base is not showing after giving the command , \"npx drizzle-kit studio\" in Terminal\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/445/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/444","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/444/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/444/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/444/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/444","id":2326084347,"node_id":"I_kwDOHoY85M6KpTr7","number":444,"title":"`drizzle-kit generate` fails to update the snapshot when no SQL is generated (renaming an enum)","user":{"login":"gburtini","id":780031,"node_id":"MDQ6VXNlcjc4MDAzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/780031?v=4","gravatar_id":"","url":"https://api.github.com/users/gburtini","html_url":"https://github.com/gburtini","followers_url":"https://api.github.com/users/gburtini/followers","following_url":"https://api.github.com/users/gburtini/following{/other_user}","gists_url":"https://api.github.com/users/gburtini/gists{/gist_id}","starred_url":"https://api.github.com/users/gburtini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gburtini/subscriptions","organizations_url":"https://api.github.com/users/gburtini/orgs","repos_url":"https://api.github.com/users/gburtini/repos","events_url":"https://api.github.com/users/gburtini/events{/privacy}","received_events_url":"https://api.github.com/users/gburtini/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-30T16:27:05Z","updated_at":"2024-05-30T16:55:00Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"MVP reproduction instructions\r\n\r\nStart from a naive schema that contains an `pgEnum`\r\n```ts\r\nimport {\r\n  pgTable,\r\n  uuid,\r\n  pgEnum,\r\n} from \"drizzle-orm/pg-core\";\r\n\r\nexport const statusEnum = pgEnum(\"status\", [\r\n  \"active\",\r\n  \"inactive\",\r\n]);\r\n\r\nexport const persons = pgTable(\"user\", {\r\n  id: uuid(\"id\").primaryKey(),\r\n  status: statusEnum(\"status\"),\r\n});\r\n```\r\n\r\nGenerate the migration by running `drizzle-kit generate`.\r\n\r\n<details>\r\n<summary>Click here to see the generated migration</summary>\r\n\r\n```sql\r\nDO $$ BEGIN\r\n CREATE TYPE \"public\".\"status\" AS ENUM('active', 'inactive');\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n--> statement-breakpoint\r\nCREATE TABLE IF NOT EXISTS \"user\" (\r\n\t\"id\" uuid PRIMARY KEY NOT NULL,\r\n\t\"status\" \"status\"\r\n);\r\n```\r\n</details>\r\n\r\nThen, rename the enum and make no other changes to the database.\r\n\r\n```ts\r\nexport const statusEnum = pgEnum(\"newName\", [\r\n  \"active\",\r\n  \"inactive\",\r\n]);\r\n```\r\n\r\nThe expected behavior here is that it renames the enum, and indeed, when you run `drizzle-kit generate` it asks if the field was renamed. Select the rename option (vs. the 'its new' option, it works fine)\r\n\r\n```bash\r\n$ npx drizzle-kit generate\r\ndrizzle-kit: v0.21.4\r\ndrizzle-orm: v0.30.10\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file 'drizzle.config.ts'\r\n~ status ‚Ä∫ newName enum will be renamed/moved\r\n--- all enum conflicts resolved ---\r\n\r\n1 tables\r\nuser 2 columns 0 indexes 0 fks\r\n\r\nNo schema changes, nothing to migrate üò¥\r\n```\r\n\r\nIt identifies that there's a rename to do, says \"enum will be renamed\" and then exits with no schema changes. This seems to be because it decides that no SQL needs to be emitted.\r\n\r\nNow, the problem: because that does not result in an update to the `snapshot` state, the next time you run, it asks the same question. \r\n\r\nOn a team with multiple engineers contributing schema changes, it effectively defers that original decision (\"was this renamed?\") to the next engineer who makes a change.\r\n\r\nI think if there's no SQL emitted, it should generate a blank or no-op SQL file and an updated snapshot anyway. That way the state of the codebase can adequately capture the decision made (and, e.g., be committed to git).\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/444/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/444/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/443","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/443/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/443/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/443/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/443","id":2325615029,"node_id":"I_kwDOHoY85M6KnhG1","number":443,"title":"proposal: make drizzle-kit generate command smarter","user":{"login":"fccoelho7","id":4829072,"node_id":"MDQ6VXNlcjQ4MjkwNzI=","avatar_url":"https://avatars.githubusercontent.com/u/4829072?v=4","gravatar_id":"","url":"https://api.github.com/users/fccoelho7","html_url":"https://github.com/fccoelho7","followers_url":"https://api.github.com/users/fccoelho7/followers","following_url":"https://api.github.com/users/fccoelho7/following{/other_user}","gists_url":"https://api.github.com/users/fccoelho7/gists{/gist_id}","starred_url":"https://api.github.com/users/fccoelho7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fccoelho7/subscriptions","organizations_url":"https://api.github.com/users/fccoelho7/orgs","repos_url":"https://api.github.com/users/fccoelho7/repos","events_url":"https://api.github.com/users/fccoelho7/events{/privacy}","received_events_url":"https://api.github.com/users/fccoelho7/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-30T12:55:15Z","updated_at":"2024-05-30T15:28:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"let's suppose I need to change a column type from int to uuid. currently, the generated migration only changes the column type, what will break.\r\n\r\n```sql\r\nALTER TABLE \"users\" ALTER COLUMN \"id\" SET DATA TYPE uuid\r\n```\r\n\r\nBut I assume it should generate something like that:\r\n\r\n```sql\r\n-- Step 1: Add a new UUID column\r\nALTER TABLE \"users\" ADD COLUMN \"new_id\" uuid DEFAULT gen_random_uuid();\r\n\r\n-- Step 2: Populate the new UUID column for existing rows\r\nUPDATE \"users\" SET \"new_id\" = gen_random_uuid();\r\n\r\n-- Step 3: Drop the original integer id column\r\nALTER TABLE \"users\" DROP COLUMN \"id\";\r\n\r\n-- Step 4: Rename the new UUID column to id\r\nALTER TABLE \"users\" RENAME COLUMN \"new_id\" TO \"id\";\r\n\r\n-- Step 5: Set the new id column as primary key (if it was previously the primary key)\r\nALTER TABLE \"users\" ADD PRIMARY KEY (\"id\");\r\n```\r\n\r\ndoes it make sense?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/443/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/443/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/442","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/442/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/442/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/442/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/442","id":2323331619,"node_id":"I_kwDOHoY85M6Kezoj","number":442,"title":"drizzle-orm with d1-http","user":{"login":"worenga","id":315413,"node_id":"MDQ6VXNlcjMxNTQxMw==","avatar_url":"https://avatars.githubusercontent.com/u/315413?v=4","gravatar_id":"","url":"https://api.github.com/users/worenga","html_url":"https://github.com/worenga","followers_url":"https://api.github.com/users/worenga/followers","following_url":"https://api.github.com/users/worenga/following{/other_user}","gists_url":"https://api.github.com/users/worenga/gists{/gist_id}","starred_url":"https://api.github.com/users/worenga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/worenga/subscriptions","organizations_url":"https://api.github.com/users/worenga/orgs","repos_url":"https://api.github.com/users/worenga/repos","events_url":"https://api.github.com/users/worenga/events{/privacy}","received_events_url":"https://api.github.com/users/worenga/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-29T13:25:23Z","updated_at":"2024-05-30T14:11:50Z","closed_at":"2024-05-30T14:11:50Z","author_association":"NONE","active_lock_reason":null,"body":"Is it possible to operate drizzle orm with the d1-http driver from drizzle-kit? Can we add an example on how to do that?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/442/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/441","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/441/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/441/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/441/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/441","id":2321974561,"node_id":"I_kwDOHoY85M6KZoUh","number":441,"title":"[BUG]: Introspect doesn't put SQL defaults in sql wrapper","user":{"login":"Sukairo-02","id":71607800,"node_id":"MDQ6VXNlcjcxNjA3ODAw","avatar_url":"https://avatars.githubusercontent.com/u/71607800?v=4","gravatar_id":"","url":"https://api.github.com/users/Sukairo-02","html_url":"https://github.com/Sukairo-02","followers_url":"https://api.github.com/users/Sukairo-02/followers","following_url":"https://api.github.com/users/Sukairo-02/following{/other_user}","gists_url":"https://api.github.com/users/Sukairo-02/gists{/gist_id}","starred_url":"https://api.github.com/users/Sukairo-02/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sukairo-02/subscriptions","organizations_url":"https://api.github.com/users/Sukairo-02/orgs","repos_url":"https://api.github.com/users/Sukairo-02/repos","events_url":"https://api.github.com/users/Sukairo-02/events{/privacy}","received_events_url":"https://api.github.com/users/Sukairo-02/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-28T21:47:33Z","updated_at":"2024-05-28T21:47:48Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Kit:  `0.21.4`\r\nDatabase: `PostgreSQL`\r\n\r\nDescription: Introspection of table with SQL script as default generates invalid schema\r\n\r\nSource table:\r\n```SQL\r\nCREATE SEQUENCE actor_actor_id_seq\r\n    INCREMENT BY 1\r\n    NO MAXVALUE\r\n    NO MINVALUE\r\n    CACHE 1;\r\n\r\nCREATE TABLE actor (\r\n    actor_id integer DEFAULT nextval('actor_actor_id_seq'::regclass) NOT NULL\r\n);\r\n```\r\nResult:\r\n```Typescript\r\nexport const actor = pgTable(\"actor\", {\r\n\tactor_id: integer(\"actor_id\").default(nextval('actor_actor_id_seq'::regclass)).primaryKey().notNull()\r\n});\r\n```\r\nExpected:\r\n```Typescript\r\nexport const actor = pgTable(\"actor\", {\r\n\tactor_id: integer(\"actor_id\").default(sql`nextval('actor_actor_id_seq'::regclass)`).primaryKey().notNull()\r\n});\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/441/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/440","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/440/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/440/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/440/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/440","id":2321965116,"node_id":"I_kwDOHoY85M6KZmA8","number":440,"title":"[BUG]: Introspect doesn't properly process identifiers with spaces","user":{"login":"Sukairo-02","id":71607800,"node_id":"MDQ6VXNlcjcxNjA3ODAw","avatar_url":"https://avatars.githubusercontent.com/u/71607800?v=4","gravatar_id":"","url":"https://api.github.com/users/Sukairo-02","html_url":"https://github.com/Sukairo-02","followers_url":"https://api.github.com/users/Sukairo-02/followers","following_url":"https://api.github.com/users/Sukairo-02/following{/other_user}","gists_url":"https://api.github.com/users/Sukairo-02/gists{/gist_id}","starred_url":"https://api.github.com/users/Sukairo-02/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sukairo-02/subscriptions","organizations_url":"https://api.github.com/users/Sukairo-02/orgs","repos_url":"https://api.github.com/users/Sukairo-02/repos","events_url":"https://api.github.com/users/Sukairo-02/events{/privacy}","received_events_url":"https://api.github.com/users/Sukairo-02/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-28T21:39:51Z","updated_at":"2024-05-28T21:39:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Kit:  `0.21.4`\r\nDatabase: `PostgreSQL`\r\n\r\nDescription: Introspection of table with columns with names containing spaces produces invalid identifiers.  \r\n\r\nSource table:\r\n```SQL\r\nCREATE TABLE example (\r\n    \"example id\" integer \r\n);\r\n```\r\nResult:\r\n```Typescript\r\nexport const example = pgTable(\"example\", {\r\n\texample id: integer(\"example id\"),\r\n});\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/440/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/439","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/439/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/439/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/439/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/439","id":2317858511,"node_id":"I_kwDOHoY85M6KJ7bP","number":439,"title":"Feature request: accept custom migration content from stdin","user":{"login":"tom-sherman","id":9257001,"node_id":"MDQ6VXNlcjkyNTcwMDE=","avatar_url":"https://avatars.githubusercontent.com/u/9257001?v=4","gravatar_id":"","url":"https://api.github.com/users/tom-sherman","html_url":"https://github.com/tom-sherman","followers_url":"https://api.github.com/users/tom-sherman/followers","following_url":"https://api.github.com/users/tom-sherman/following{/other_user}","gists_url":"https://api.github.com/users/tom-sherman/gists{/gist_id}","starred_url":"https://api.github.com/users/tom-sherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tom-sherman/subscriptions","organizations_url":"https://api.github.com/users/tom-sherman/orgs","repos_url":"https://api.github.com/users/tom-sherman/repos","events_url":"https://api.github.com/users/tom-sherman/events{/privacy}","received_events_url":"https://api.github.com/users/tom-sherman/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-26T17:31:45Z","updated_at":"2024-05-26T17:31:45Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I want to generate a drizzle-kit custom migration from the output of supabase diff like so:\r\n\r\n```\r\nsupabase db diff | drizzle-kit generate --custom\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/439/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/438","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/438/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/438/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/438/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/438","id":2317681982,"node_id":"I_kwDOHoY85M6KJQU-","number":438,"title":"[FEATURE] config dialect: export type","user":{"login":"alpapan","id":608484,"node_id":"MDQ6VXNlcjYwODQ4NA==","avatar_url":"https://avatars.githubusercontent.com/u/608484?v=4","gravatar_id":"","url":"https://api.github.com/users/alpapan","html_url":"https://github.com/alpapan","followers_url":"https://api.github.com/users/alpapan/followers","following_url":"https://api.github.com/users/alpapan/following{/other_user}","gists_url":"https://api.github.com/users/alpapan/gists{/gist_id}","starred_url":"https://api.github.com/users/alpapan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpapan/subscriptions","organizations_url":"https://api.github.com/users/alpapan/orgs","repos_url":"https://api.github.com/users/alpapan/repos","events_url":"https://api.github.com/users/alpapan/events{/privacy}","received_events_url":"https://api.github.com/users/alpapan/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-26T12:28:02Z","updated_at":"2024-05-26T12:30:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"using \r\n```\r\n    \"drizzle-orm\": \"^0.30.10\",\r\n    \"drizzle-kit\": \"^0.21.4\",\r\n```\r\n\r\ni'm trying to dynamically setup the config for drizzle-kit and this includes passing the dialect as string (e.g. 'postgresql')\r\n\r\nsadly this wont work \r\n```\r\n  dialect: db_conn.dialect // a string, croaks as it is not a drizzle-kit Dialect type\r\n```\r\n\r\nwhile the Dialect type is exportable from drizzle-orm this is not the same as drizzle-kit\r\n(drizzle-orm uses 'pg' while drizzle-kit uses 'postgresql')\r\n\r\nthe dialect property is typed locally in drizzle-kit\r\n```\r\ndeclare const dialect: zod.ZodEnum<[\"postgresql\", \"mysql\", \"sqlite\"]>;\r\ntype Dialect = TypeOf<typeof dialect>;\r\n```\r\n\r\nso this works fine:\r\n```\r\nimport { defineConfig } from 'drizzle-kit';\r\nimport type { Dialect } from 'drizzle-kit';\r\nexport default defineConfig({\r\n  dialect: db_conn.dialect as Dialect,\r\n[..]\r\n```\r\n\r\nthere is a warning however as Dialect from drizzle-kit is only available locally\r\ndo you think you could export the Dialect then we can use it without warnings?\r\n\r\n(btw, was it intentional for the Dialect types of drizzle-kit and drizzle-orm to differ?)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/438/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/437","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/437/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/437/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/437/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/437","id":2317593099,"node_id":"I_kwDOHoY85M6KI6oL","number":437,"title":"drizzle-kit: \"\"import.meta\" is not available\" error","user":{"login":"PurpleTape","id":9420536,"node_id":"MDQ6VXNlcjk0MjA1MzY=","avatar_url":"https://avatars.githubusercontent.com/u/9420536?v=4","gravatar_id":"","url":"https://api.github.com/users/PurpleTape","html_url":"https://github.com/PurpleTape","followers_url":"https://api.github.com/users/PurpleTape/followers","following_url":"https://api.github.com/users/PurpleTape/following{/other_user}","gists_url":"https://api.github.com/users/PurpleTape/gists{/gist_id}","starred_url":"https://api.github.com/users/PurpleTape/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PurpleTape/subscriptions","organizations_url":"https://api.github.com/users/PurpleTape/orgs","repos_url":"https://api.github.com/users/PurpleTape/repos","events_url":"https://api.github.com/users/PurpleTape/events{/privacy}","received_events_url":"https://api.github.com/users/PurpleTape/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-26T08:57:39Z","updated_at":"2024-05-26T08:57:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I am using drizzle-kit in my project with the Vite development server. At the same time, the schema files are located in different directories of my project, inside the src folder.\r\n\r\nWhen I try to execute the drizzle-kit pull or drizzle-kit generate command, an error occurs:\r\n\r\n```\r\n> drizzle-kit push\r\n\r\ndrizzle-kit: v0.21.2\r\ndrizzle-orm: v0.30.10\r\n\r\nNo config path provided, using default path\r\nReading config file '/my-app-path/drizzle.config.ts'\r\nUsing 'pg' driver for database querying\r\n{\r\n  column: 54,\r\n  file: '/my-app-path/src/utils/libs/i18n/i18n.ts',\r\n  length: 11,\r\n  line: 22,\r\n  lineText: \"const modules: Record<string, { default: unknown }> = import.meta.glob('/translations/*.json', {\",\r\n  namespace: '',\r\n  suggestion: ''\r\n}\r\n\"import.meta\" is not available with the \"cjs\" output format and will be empty\r\nTypeError: import_meta.glob is not a function\r\n    at Object.<anonymous> (/my-app-path/src/utils/libs/i18n/i18n.ts:22:67)\r\n    at Module._compile (node:internal/modules/cjs/loader:1233:14)\r\n    at Module._compile (/my-app-path/node_modules/drizzle-kit/bin.cjs:11751:31)\r\n    at Module._extensions..js (node:internal/modules/cjs/loader:1287:10)\r\n    at Object.newLoader [as .ts] (/my-app-path/node_modules/drizzle-kit/bin.cjs:11755:13)\r\n    at Module.load (node:internal/modules/cjs/loader:1091:32)\r\n    at Module._load (node:internal/modules/cjs/loader:938:12)\r\n    at Module.require (node:internal/modules/cjs/loader:1115:19)\r\n    at require (node:internal/modules/helpers:130:18)\r\n    at Object.<anonymous> (/my-app-path/src/utils/libs/i18n/index.ts:2:15)\r\n```\r\n\r\nThis is most likely due to the fact that when it try to run schema files, files containing Vite-specific code are run too.\r\n\r\nPlease specify is there a way to fix this?\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/437/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/436","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/436/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/436/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/436/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/436","id":2316471866,"node_id":"I_kwDOHoY85M6KEo46","number":436,"title":"dbCredentials.ssl flag does not work.","user":{"login":"Ymirke","id":36711026,"node_id":"MDQ6VXNlcjM2NzExMDI2","avatar_url":"https://avatars.githubusercontent.com/u/36711026?v=4","gravatar_id":"","url":"https://api.github.com/users/Ymirke","html_url":"https://github.com/Ymirke","followers_url":"https://api.github.com/users/Ymirke/followers","following_url":"https://api.github.com/users/Ymirke/following{/other_user}","gists_url":"https://api.github.com/users/Ymirke/gists{/gist_id}","starred_url":"https://api.github.com/users/Ymirke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ymirke/subscriptions","organizations_url":"https://api.github.com/users/Ymirke/orgs","repos_url":"https://api.github.com/users/Ymirke/repos","events_url":"https://api.github.com/users/Ymirke/events{/privacy}","received_events_url":"https://api.github.com/users/Ymirke/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-25T00:32:26Z","updated_at":"2024-05-25T12:53:54Z","closed_at":"2024-05-25T12:53:54Z","author_association":"NONE","active_lock_reason":null,"body":"Adding \"ssl: true\" does not work for the defineConfig argument.\r\n\r\n\r\n## Does not work:\r\n```ts\r\nimport { defineConfig } from \"drizzle-kit\";\r\n\r\nexport default defineConfig({\r\n  dialect: \"postgresql\",\r\n  schema: \"./src/db/*\",\r\n  out: \"./migrations\",\r\n  verbose: true,\r\n  dbCredentials: {\r\n    url: \"<psql-connect-string>\",\r\n    ssl: true,\r\n  },\r\n});\r\n```\r\n### Error recieved:\r\n```\r\n> next@0.1.0 migrate <project-path>\r\n> drizzle-kit migrate\r\n\r\ndrizzle-kit: v0.21.4\r\ndrizzle-orm: v0.30.10\r\n\r\nNo config path provided, using default path\r\nReading config file '<project-path>/drizzle.config.ts'\r\nUsing 'postgres' driver for database querying\r\n[‚£∑] applying migrations...PostgresError: SSL/TLS required\r\n    at ErrorResponse (/<project-path>/node_modules/.pnpm/drizzle-kit@0.21.4/node_modules/drizzle-kit/bin.cjs:71410:27)\r\n    at handle (/<project-path>/node_modules/.pnpm/drizzle-kit@0.21.4/node_modules/drizzle-kit/bin.cjs:71187:7)\r\n    at Socket.data (/<project-path>/node_modules/.pnpm/drizzle-kit@0.21.4/node_modules/drizzle-kit/bin.cjs:71010:9)\r\n    at Socket.emit (node:events:514:28)\r\n    at addChunk (node:internal/streams/readable:376:12)\r\n    at readableAddChunk (node:internal/streams/readable:349:9)\r\n    at Readable.push (node:internal/streams/readable:286:10)\r\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23)\r\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  severity_local: 'FATAL',\r\n  code: '28000'\r\n}\r\n```\r\n\r\n\r\n## Works:\r\n```ts\r\nimport { defineConfig } from \"drizzle-kit\";\r\n\r\nexport default defineConfig({\r\n  dialect: \"postgresql\",\r\n  schema: \"./src/db/*\",\r\n  out: \"./migrations\",\r\n  verbose: true,\r\n  dbCredentials: {\r\n    url: \"<psql-connect-string>?ssl=true\",\r\n  },\r\n});\r\n```\r\n\r\n### These should be equivalent.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/436/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/435","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/435/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/435/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/435/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/435","id":2315697192,"node_id":"I_kwDOHoY85M6KBrwo","number":435,"title":"Drizzle Studio: Error: Connection terminated unexpectedly","user":{"login":"johnforte","id":1409638,"node_id":"MDQ6VXNlcjE0MDk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/1409638?v=4","gravatar_id":"","url":"https://api.github.com/users/johnforte","html_url":"https://github.com/johnforte","followers_url":"https://api.github.com/users/johnforte/followers","following_url":"https://api.github.com/users/johnforte/following{/other_user}","gists_url":"https://api.github.com/users/johnforte/gists{/gist_id}","starred_url":"https://api.github.com/users/johnforte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johnforte/subscriptions","organizations_url":"https://api.github.com/users/johnforte/orgs","repos_url":"https://api.github.com/users/johnforte/repos","events_url":"https://api.github.com/users/johnforte/events{/privacy}","received_events_url":"https://api.github.com/users/johnforte/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"assignees":[{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/milestones/1","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/milestone/1","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/milestones/1/labels","id":11103408,"node_id":"MI_kwDOHoY85M4AqWyw","number":1,"title":"v0.21.5","description":"- [x] support full set of SSL params in kit config, provide types from `node:tls` connection\r\n- [x] fix: [#435](https://github.com/drizzle-team/drizzle-kit-mirror/issues/435)\r\n- [x] fix: [#2341](https://github.com/drizzle-team/drizzle-orm/issues/2341)\r\n- [x] fix: [#422](https://github.com/drizzle-team/drizzle-kit-mirror/issues/422)\r\n- [x] fix: [#432](https://github.com/drizzle-team/drizzle-kit-mirror/issues/432)\r\n- [x] fix: [#423](https://github.com/drizzle-team/drizzle-kit-mirror/issues/423)\r\n- [x] update zod schemas for database credentials and write tests to all the positive/negative cases","creator":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":4,"state":"open","created_at":"2024-05-27T13:39:25Z","updated_at":"2024-05-31T09:50:29Z","due_on":null,"closed_at":null},"comments":2,"created_at":"2024-05-24T15:35:17Z","updated_at":"2024-05-31T09:50:16Z","closed_at":"2024-05-31T09:50:16Z","author_association":"NONE","active_lock_reason":null,"body":"```\r\nDrizzle Studio is up and running on https://local.drizzle.studio\r\nnode:events:491\r\n      throw er; // Unhandled 'error' event\r\n      ^\r\n\r\nError: Connection terminated unexpectedly\r\n    at Connection3.<anonymous> (node_modules/drizzle-kit/bin.cjs:62051:78)\r\n    at Object.onceWrapper (node:events:627:28)\r\n    at Connection3.emit (node:events:513:28)\r\n    at Socket.<anonymous> (node_modules/drizzle-kit/bin.cjs:61519:17)\r\n    at Socket.emit (node:events:525:35)\r\n    at TCP.<anonymous> (node:net:757:14)\r\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)\r\nEmitted 'error' event on Client2 instance at:\r\n    at Client2._handleErrorEvent (node_modules/drizzle-kit/bin.cjs:62228:14)\r\n    at Connection3.<anonymous> (node_modules/drizzle-kit/bin.cjs:62063:20)\r\n    at Object.onceWrapper (node:events:627:28)\r\n    [... lines matching original stack trace ...]\r\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)\r\n\r\n```\r\nHappens when I don't interact with the db studio for a while, seems it needs some keep alive packet to be sent.\r\n\r\nI am using neon.tech.\r\ndrizzle-kit: v0.21.1\r\ndrizzle-orm: v0.30.10","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/435/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/434","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/434/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/434/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/434/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/434","id":2314184307,"node_id":"I_kwDOHoY85M6J76Zz","number":434,"title":"BUG: `drizzle-kit generate` TypeError: Right-hand side of 'instanceof' is not an object","user":{"login":"dinwwwh","id":64189902,"node_id":"MDQ6VXNlcjY0MTg5OTAy","avatar_url":"https://avatars.githubusercontent.com/u/64189902?v=4","gravatar_id":"","url":"https://api.github.com/users/dinwwwh","html_url":"https://github.com/dinwwwh","followers_url":"https://api.github.com/users/dinwwwh/followers","following_url":"https://api.github.com/users/dinwwwh/following{/other_user}","gists_url":"https://api.github.com/users/dinwwwh/gists{/gist_id}","starred_url":"https://api.github.com/users/dinwwwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dinwwwh/subscriptions","organizations_url":"https://api.github.com/users/dinwwwh/orgs","repos_url":"https://api.github.com/users/dinwwwh/repos","events_url":"https://api.github.com/users/dinwwwh/events{/privacy}","received_events_url":"https://api.github.com/users/dinwwwh/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2024-05-24T02:14:36Z","updated_at":"2024-05-27T13:14:32Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"This issue occurs on `\"drizzle-kit\": \"0.22.0-407e2e6\"` and when the column uses `default` fn.\r\n\r\n```ts\r\n  const Notes = schema.table('notes', {\r\n    id: uuid('id')\r\n      .notNull()\r\n      .primaryKey()\r\n      .default(sql`uuid_generate_v4()`), //---- this line\r\n\r\n    url: varchar('url', { length: 256 }).notNull().unique(),\r\n    title: varchar('title', { length: 256 }),\r\n    description: varchar('description', { length: 1024 }),\r\n    markdown: varchar('markdown', { length: 65536 }).notNull(),\r\n\r\n    createdAt: timestamp('created_at')\r\n      .notNull()\r\n      .defaultNow(), //---- this line\r\n    updatedAt: timestamp('updated_at')\r\n      .notNull()\r\n      .defaultNow() //---- this line\r\n      .$onUpdate(() => new Date()), \r\n  })\r\n```\r\n\r\nfull error \r\n\r\n```sh\r\npnpm drizzle-kit generate\r\n\r\ndrizzle-kit: v0.22.0\r\ndrizzle-orm: v0.31.0-7a05232\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/home/dinwwwh/noteask/apps/tenant-api/drizzle.config.ts'\r\nTypeError: Right-hand side of 'instanceof' is not an object\r\n    at is (/home/dinwwwh/noteask/node_modules/.pnpm/drizzle-orm@0.31.0-7a05232_@cloudflare+workers-types@4.20240512.0_@neondatabase+serverless@0.9.3/node_modules/src/entity.ts:17:6)\r\n    at /home/dinwwwh/noteask/node_modules/.pnpm/drizzle-kit@0.22.0-407e2e6/node_modules/drizzle-kit/bin.cjs:15797:44\r\n    at Array.forEach (<anonymous>)\r\n    at generatePgSnapshot (/home/dinwwwh/noteask/node_modules/.pnpm/drizzle-kit@0.22.0-407e2e6/node_modules/drizzle-kit/bin.cjs:15758:17)\r\n    at serializePg (/home/dinwwwh/noteask/node_modules/.pnpm/drizzle-kit@0.22.0-407e2e6/node_modules/drizzle-kit/bin.cjs:16998:14)\r\n    at async preparePgMigrationSnapshot (/home/dinwwwh/noteask/node_modules/.pnpm/drizzle-kit@0.22.0-407e2e6/node_modules/drizzle-kit/bin.cjs:17124:26)\r\n    at async prepareAndMigratePg (/home/dinwwwh/noteask/node_modules/.pnpm/drizzle-kit@0.22.0-407e2e6/node_modules/drizzle-kit/bin.cjs:22445:48)\r\n    at async Command.<anonymous> (/home/dinwwwh/noteask/node_modules/.pnpm/drizzle-kit@0.22.0-407e2e6/node_modules/drizzle-kit/bin.cjs:121802:5)\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/434/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/434/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/433","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/433/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/433/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/433/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/433","id":2313834251,"node_id":"I_kwDOHoY85M6J6k8L","number":433,"title":"`memoizee@0.4.16` broke `drizzle-kit`, maybe pin dep to exact version","user":{"login":"vjpr","id":281413,"node_id":"MDQ6VXNlcjI4MTQxMw==","avatar_url":"https://avatars.githubusercontent.com/u/281413?v=4","gravatar_id":"","url":"https://api.github.com/users/vjpr","html_url":"https://github.com/vjpr","followers_url":"https://api.github.com/users/vjpr/followers","following_url":"https://api.github.com/users/vjpr/following{/other_user}","gists_url":"https://api.github.com/users/vjpr/gists{/gist_id}","starred_url":"https://api.github.com/users/vjpr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vjpr/subscriptions","organizations_url":"https://api.github.com/users/vjpr/orgs","repos_url":"https://api.github.com/users/vjpr/repos","events_url":"https://api.github.com/users/vjpr/events{/privacy}","received_events_url":"https://api.github.com/users/vjpr/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-23T20:59:14Z","updated_at":"2024-05-23T20:59:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"https://github.com/medikoo/memoizee/issues/135","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/433/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/433/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/432","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/432/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/432/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/432/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/432","id":2312706251,"node_id":"I_kwDOHoY85M6J2RjL","number":432,"title":"Unable to run sqlite migrations local.","user":{"login":"tobiasfoerg","id":33451332,"node_id":"MDQ6VXNlcjMzNDUxMzMy","avatar_url":"https://avatars.githubusercontent.com/u/33451332?v=4","gravatar_id":"","url":"https://api.github.com/users/tobiasfoerg","html_url":"https://github.com/tobiasfoerg","followers_url":"https://api.github.com/users/tobiasfoerg/followers","following_url":"https://api.github.com/users/tobiasfoerg/following{/other_user}","gists_url":"https://api.github.com/users/tobiasfoerg/gists{/gist_id}","starred_url":"https://api.github.com/users/tobiasfoerg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tobiasfoerg/subscriptions","organizations_url":"https://api.github.com/users/tobiasfoerg/orgs","repos_url":"https://api.github.com/users/tobiasfoerg/repos","events_url":"https://api.github.com/users/tobiasfoerg/events{/privacy}","received_events_url":"https://api.github.com/users/tobiasfoerg/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"assignees":[{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/milestones/1","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/milestone/1","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/milestones/1/labels","id":11103408,"node_id":"MI_kwDOHoY85M4AqWyw","number":1,"title":"v0.21.5","description":"- [x] support full set of SSL params in kit config, provide types from `node:tls` connection\r\n- [x] fix: [#435](https://github.com/drizzle-team/drizzle-kit-mirror/issues/435)\r\n- [x] fix: [#2341](https://github.com/drizzle-team/drizzle-orm/issues/2341)\r\n- [x] fix: [#422](https://github.com/drizzle-team/drizzle-kit-mirror/issues/422)\r\n- [x] fix: [#432](https://github.com/drizzle-team/drizzle-kit-mirror/issues/432)\r\n- [x] fix: [#423](https://github.com/drizzle-team/drizzle-kit-mirror/issues/423)\r\n- [x] update zod schemas for database credentials and write tests to all the positive/negative cases","creator":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":4,"state":"open","created_at":"2024-05-27T13:39:25Z","updated_at":"2024-05-31T09:50:29Z","due_on":null,"closed_at":null},"comments":2,"created_at":"2024-05-23T11:46:00Z","updated_at":"2024-05-31T09:50:23Z","closed_at":"2024-05-31T09:50:23Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\ni am not able to run local sqlite migrations.\r\nI allways receive the following error:\r\n```console\r\n~/xxxxx> pnpm drizzle-kit migrate                                                                                                                        \r\ndrizzle-kit: v0.21.4\r\ndrizzle-orm: v0.30.10\r\n\r\nNo config path provided, using default path\r\nReading config file '/home/xxxxx/drizzle.config.ts'\r\n Invalid input  Either \"turso\", \"libsql\", \"better-sqlite\" are available options for \"--driver\"\r\n```\r\n\r\nMy config is:\r\n```ts\r\n// drizzle.config.ts\r\nimport { defineConfig } from \"drizzle-kit\";\r\nimport { globSync } from \"fast-glob\";\r\n\r\nconst path = globSync(\".wrangler/state/v3/d1/**/*.sqlite\");\r\n\r\nexport default defineConfig({\r\n\tschema: \"./app/db.server/schema.ts\",\r\n\tout: \"./migrations\",\r\n\tdialect: \"sqlite\",\r\n\tstrict: true,\r\n\tmigrations: {\r\n\t\ttable: \"__schema_migrations\",\r\n\t},\r\n\tdbCredentials: {\r\n\t\turl: path[0],\r\n\t},\r\n});\r\n```\r\nand i have `\"@libsql/client\": \"^0.6.0\",` as dev dependency.\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/432/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/432/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/431","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/431/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/431/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/431/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/431","id":2312545543,"node_id":"I_kwDOHoY85M6J1qUH","number":431,"title":"Error on `drizzle-kit push`, Cannot read properties of undefined (reading 'type') ","user":{"login":"FranCanias","id":64666669,"node_id":"MDQ6VXNlcjY0NjY2NjY5","avatar_url":"https://avatars.githubusercontent.com/u/64666669?v=4","gravatar_id":"","url":"https://api.github.com/users/FranCanias","html_url":"https://github.com/FranCanias","followers_url":"https://api.github.com/users/FranCanias/followers","following_url":"https://api.github.com/users/FranCanias/following{/other_user}","gists_url":"https://api.github.com/users/FranCanias/gists{/gist_id}","starred_url":"https://api.github.com/users/FranCanias/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FranCanias/subscriptions","organizations_url":"https://api.github.com/users/FranCanias/orgs","repos_url":"https://api.github.com/users/FranCanias/repos","events_url":"https://api.github.com/users/FranCanias/events{/privacy}","received_events_url":"https://api.github.com/users/FranCanias/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2024-05-23T10:28:55Z","updated_at":"2024-06-01T08:16:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi! i have this error when i do 'npx drizzle-kit push', i fixed it adding a question mark on 'node_modules/drizzle-kit/bin.cjs:111813:123' \r\n\r\nthis is the following error im getting in the terminal: \r\n\r\n```\r\nnpx drizzle-kit push               \r\ndrizzle-kit: v0.21.4\r\ndrizzle-orm: v0.30.10\r\n\r\nNo config path provided, using default path\r\nReading config file '/Users/x/x/x/drizzle.config.ts'\r\n[‚úì] Pulling schema from database...Reading schema files:\r\n/Users/x/x/x/src/server/schema.ts\r\n\r\nTypeError: Cannot read properties of undefined (reading 'type')\r\n    at /Users/x/x/x/node_modules/drizzle-kit/bin.cjs:111813:123\r\n    at Array.filter (<anonymous>)\r\n    at filterStatements (/Users/x/x/x/node_modules/drizzle-kit/bin.cjs:111793:25)\r\n    at mysqlPush (/Users/x/x/x/node_modules/drizzle-kit/bin.cjs:114380:34)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async Command.<anonymous> (/Users/x/x/x/node_modules/drizzle-kit/bin.cjs:121465:7)\r\n``` \r\n\r\nnpx: 10.2.4\r\nnode: v20.11.0\r\n\r\nthe line i modified to fix it is the following: \r\n```javascript\r\nif (unsquashed.columns.length === 1 && currentSchema.tables[statement.tableName].columns[unsquashed.columns[0]]?/* <---- Added question mark */.type === \"serial\" && prevSchema.tables[statement.tableName].columns[unsquashed.columns[0]].type === \"serial\" && currentSchema.tables[statement.tableName].columns[unsquashed.columns[0]].name === unsquashed.columns[0]) {\r\n``` ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/431/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/430","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/430/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/430/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/430/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/430","id":2311851036,"node_id":"I_kwDOHoY85M6JzAwc","number":430,"title":"Drizzle studio connects terminates unexpectedly","user":{"login":"SamSoham","id":98308722,"node_id":"U_kgDOBdwScg","avatar_url":"https://avatars.githubusercontent.com/u/98308722?v=4","gravatar_id":"","url":"https://api.github.com/users/SamSoham","html_url":"https://github.com/SamSoham","followers_url":"https://api.github.com/users/SamSoham/followers","following_url":"https://api.github.com/users/SamSoham/following{/other_user}","gists_url":"https://api.github.com/users/SamSoham/gists{/gist_id}","starred_url":"https://api.github.com/users/SamSoham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SamSoham/subscriptions","organizations_url":"https://api.github.com/users/SamSoham/orgs","repos_url":"https://api.github.com/users/SamSoham/repos","events_url":"https://api.github.com/users/SamSoham/events{/privacy}","received_events_url":"https://api.github.com/users/SamSoham/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-23T03:17:21Z","updated_at":"2024-05-23T14:57:43Z","closed_at":"2024-05-23T14:57:43Z","author_association":"NONE","active_lock_reason":null,"body":"While running the drizzle studio from terminal it's connection automatically closes throwing error message \"Error: Connection terminated unexpectedly\"","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/430/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/429","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/429/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/429/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/429/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/429","id":2311606396,"node_id":"I_kwDOHoY85M6JyFB8","number":429,"title":"Issues with ESBuild Register ","user":{"login":"mothershipper","id":57678801,"node_id":"MDQ6VXNlcjU3Njc4ODAx","avatar_url":"https://avatars.githubusercontent.com/u/57678801?v=4","gravatar_id":"","url":"https://api.github.com/users/mothershipper","html_url":"https://github.com/mothershipper","followers_url":"https://api.github.com/users/mothershipper/followers","following_url":"https://api.github.com/users/mothershipper/following{/other_user}","gists_url":"https://api.github.com/users/mothershipper/gists{/gist_id}","starred_url":"https://api.github.com/users/mothershipper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mothershipper/subscriptions","organizations_url":"https://api.github.com/users/mothershipper/orgs","repos_url":"https://api.github.com/users/mothershipper/repos","events_url":"https://api.github.com/users/mothershipper/events{/privacy}","received_events_url":"https://api.github.com/users/mothershipper/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-05-22T22:36:10Z","updated_at":"2024-05-29T17:57:29Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"There's an issue with `esbuild-register` that's impacting our ability to use drizzle-kit, the TL;DR; is esbuild-register doesn't seem to [resolve the project's tsconfig file correctly](https://github.com/egoist/esbuild-register/issues/38).\r\n\r\nDid some instrumenting and observed that it fails to bubble up looking for a `tsconfig.json` for the project when running `drizzle-kit`:\r\n\r\n```\r\nReading config file '/Users/jack/dev/marketplace/backend/libs/database/drizzle.config.ts'\r\nloading /Users/jack/dev/marketplace/backend/libs/database/tsconfig.json\r\nloading /Users/jack/dev/marketplace/backend/configs/tsconfig.json\r\nloading /Users/jack/dev/marketplace/backend/configs/tsconfig.json\r\nloading /Users/jack/dev/marketplace/backend/configs/tsconfig.json\r\nloading /Users/jack/dev/marketplace/backend/configs/tsconfig.json\r\nloading /Users/jack/dev/marketplace/backend/configs/tsconfig.json\r\nloading /Users/jack/dev/marketplace/backend/configs/application/tsconfig.json\r\nError: Transform failed with 4 errors:\r\n ... ERROR: Transforming JavaScript decorators to the configured target environment (\"es2021\") is not supported yet\r\n```\r\n\r\nIt seems like `esbuild-register` searches the local directory of the file under compilation for a `tsconfig.json`, and if not found, uses the default tsconfig settings. Our problem is that `backend` is a nest project that makes heavy use of decorators. `experimentalDecorators` is not a default tsconfig option and hence esbuild fails to compile the drizzle config file.\r\n\r\nThe original `esbuild-register` issue suggested this can be worked around by doing the tsconfig resolution yourself and passing that as an option to esbuild, bypassing its resolution of the `tsconfig.json`. ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/429/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/428","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/428/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/428/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/428/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/428","id":2311177835,"node_id":"I_kwDOHoY85M6JwcZr","number":428,"title":"drizzle-kit introspect hangs with 0.21.3 (postgres)","user":{"login":"rghamilton3","id":2868423,"node_id":"MDQ6VXNlcjI4Njg0MjM=","avatar_url":"https://avatars.githubusercontent.com/u/2868423?v=4","gravatar_id":"","url":"https://api.github.com/users/rghamilton3","html_url":"https://github.com/rghamilton3","followers_url":"https://api.github.com/users/rghamilton3/followers","following_url":"https://api.github.com/users/rghamilton3/following{/other_user}","gists_url":"https://api.github.com/users/rghamilton3/gists{/gist_id}","starred_url":"https://api.github.com/users/rghamilton3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rghamilton3/subscriptions","organizations_url":"https://api.github.com/users/rghamilton3/orgs","repos_url":"https://api.github.com/users/rghamilton3/repos","events_url":"https://api.github.com/users/rghamilton3/events{/privacy}","received_events_url":"https://api.github.com/users/rghamilton3/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-22T18:09:17Z","updated_at":"2024-05-22T19:39:08Z","closed_at":"2024-05-22T19:39:08Z","author_association":"NONE","active_lock_reason":null,"body":"This is the same as #426 but for introspection. Downgrading to 0.21.2 works.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/428/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/427","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/427/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/427/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/427/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/427","id":2311162863,"node_id":"I_kwDOHoY85M6JwYvv","number":427,"title":"Corrupted schema data generated by `introspect`","user":{"login":"serhii-kucherenko","id":21200035,"node_id":"MDQ6VXNlcjIxMjAwMDM1","avatar_url":"https://avatars.githubusercontent.com/u/21200035?v=4","gravatar_id":"","url":"https://api.github.com/users/serhii-kucherenko","html_url":"https://github.com/serhii-kucherenko","followers_url":"https://api.github.com/users/serhii-kucherenko/followers","following_url":"https://api.github.com/users/serhii-kucherenko/following{/other_user}","gists_url":"https://api.github.com/users/serhii-kucherenko/gists{/gist_id}","starred_url":"https://api.github.com/users/serhii-kucherenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serhii-kucherenko/subscriptions","organizations_url":"https://api.github.com/users/serhii-kucherenko/orgs","repos_url":"https://api.github.com/users/serhii-kucherenko/repos","events_url":"https://api.github.com/users/serhii-kucherenko/events{/privacy}","received_events_url":"https://api.github.com/users/serhii-kucherenko/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-05-22T18:01:47Z","updated_at":"2024-06-05T08:12:24Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I generated schema from the existing supabase and got a lot of unknown functions that I assume should be different or at least auto-imported from zod (for example).\r\nIt's a HUGE blocker to proceed with the drizzle further for my project.\r\nLet me know if you can help me.\r\nThanks.\r\n\r\n### Schreenshots\r\n1. Table from supabase schema: \"auth\"\r\n2. Table from supabase schema: \"public\"\r\n\r\n------\r\n\r\n<img width=\"929\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/21200035/19e9521e-0877-4f18-bfa8-8c453a12c996\">\r\n\r\n<img width=\"1061\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/21200035/608891fd-3e25-417f-b255-5a85c6119d35\">\r\n\r\n\r\n\r\n### Dependencies\r\n\r\n```\r\n\"drizzle-kit\": \"0.21.3\",\r\n\"drizzle-orm\": \"0.30.10\",\r\n\"drizzle-zod\": \"0.5.1\",\r\n\"ts-node\": \"10.9.2\",\r\n\"typescript\": \"5.4.5\"\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/427/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/426","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/426/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/426/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/426/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/426","id":2311134861,"node_id":"I_kwDOHoY85M6JwR6N","number":426,"title":"drizzle-kit migrate hangs with 0.21.3 (postgres)","user":{"login":"mdurling","id":3439869,"node_id":"MDQ6VXNlcjM0Mzk4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/3439869?v=4","gravatar_id":"","url":"https://api.github.com/users/mdurling","html_url":"https://github.com/mdurling","followers_url":"https://api.github.com/users/mdurling/followers","following_url":"https://api.github.com/users/mdurling/following{/other_user}","gists_url":"https://api.github.com/users/mdurling/gists{/gist_id}","starred_url":"https://api.github.com/users/mdurling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdurling/subscriptions","organizations_url":"https://api.github.com/users/mdurling/orgs","repos_url":"https://api.github.com/users/mdurling/repos","events_url":"https://api.github.com/users/mdurling/events{/privacy}","received_events_url":"https://api.github.com/users/mdurling/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-22T17:44:16Z","updated_at":"2024-05-22T19:40:43Z","closed_at":"2024-05-22T19:40:43Z","author_association":"NONE","active_lock_reason":null,"body":"When upgrading to `drizzle-kit@0.21.3`, the `drizzle-kit migrate` command hangs indefinitely at `[‚°ø] applying migrations...`\r\n\r\nMigrations are applied successfully if I downgrade back to `drizzle-kit@0.21.2`","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/426/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/425","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/425/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/425/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/425/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/425","id":2309201286,"node_id":"I_kwDOHoY85M6Jo52G","number":425,"title":"Bug - ENUM modification not showing correctly in database and migrations","user":{"login":"AravjitSachdeva","id":28838506,"node_id":"MDQ6VXNlcjI4ODM4NTA2","avatar_url":"https://avatars.githubusercontent.com/u/28838506?v=4","gravatar_id":"","url":"https://api.github.com/users/AravjitSachdeva","html_url":"https://github.com/AravjitSachdeva","followers_url":"https://api.github.com/users/AravjitSachdeva/followers","following_url":"https://api.github.com/users/AravjitSachdeva/following{/other_user}","gists_url":"https://api.github.com/users/AravjitSachdeva/gists{/gist_id}","starred_url":"https://api.github.com/users/AravjitSachdeva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AravjitSachdeva/subscriptions","organizations_url":"https://api.github.com/users/AravjitSachdeva/orgs","repos_url":"https://api.github.com/users/AravjitSachdeva/repos","events_url":"https://api.github.com/users/AravjitSachdeva/events{/privacy}","received_events_url":"https://api.github.com/users/AravjitSachdeva/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-21T22:10:50Z","updated_at":"2024-05-21T22:10:50Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Addition to ENUMs are reflected in the database and the migration files, but if I remove any values from the enum, SQL statements to remove those values are not generated and the old value can still be used in the database. \r\n\r\n\r\nExample - \r\nLet's say this is my enum\r\n\r\n```\r\nexport const alertType = [\r\n  'GEOFENCE',\r\n  'SPEEDING',\r\n  'BATTERY_LEVEL',\r\n  'MILEAGE',\r\n  'POWER_DISCONNECT',\r\n] as const; \r\n\r\nexport const alertTypeEnum = pgEnum('alert_types', alertType); \r\n\r\n```\r\nIf I update the enum field BATTERY_LEVEL to LOW_BATTERY, the migration adds the LOW_BATTERY field to the enum but does not remove BATTERY_LEVEL. \r\n\r\nSQL Generated - \r\n`ALTER TYPE \"alert_types\" ADD VALUE 'BATTERY_LEVEL';\r\n` \r\n\r\nExpected Behavior \r\nBATTERY_LEVEL field from the ENUM should be removed. ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/425/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/425/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/424","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/424/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/424/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/424/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/424","id":2307794689,"node_id":"I_kwDOHoY85M6JjicB","number":424,"title":"generate `create foreign key` sql after `create index` sql on migration","user":{"login":"alexzhang1030","id":49969959,"node_id":"MDQ6VXNlcjQ5OTY5OTU5","avatar_url":"https://avatars.githubusercontent.com/u/49969959?v=4","gravatar_id":"","url":"https://api.github.com/users/alexzhang1030","html_url":"https://github.com/alexzhang1030","followers_url":"https://api.github.com/users/alexzhang1030/followers","following_url":"https://api.github.com/users/alexzhang1030/following{/other_user}","gists_url":"https://api.github.com/users/alexzhang1030/gists{/gist_id}","starred_url":"https://api.github.com/users/alexzhang1030/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexzhang1030/subscriptions","organizations_url":"https://api.github.com/users/alexzhang1030/orgs","repos_url":"https://api.github.com/users/alexzhang1030/repos","events_url":"https://api.github.com/users/alexzhang1030/events{/privacy}","received_events_url":"https://api.github.com/users/alexzhang1030/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-21T09:16:03Z","updated_at":"2024-05-21T09:18:06Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":" Currently, migrations will generate `create foreign key` before `create index`, which causes errors when consuming generations if some foreign keys rely on fields that are not created index by default.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/424/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/423","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/423/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/423/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/423/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/423","id":2307739232,"node_id":"I_kwDOHoY85M6JjU5g","number":423,"title":"error: unknown option '--config'","user":{"login":"s97712","id":13390001,"node_id":"MDQ6VXNlcjEzMzkwMDAx","avatar_url":"https://avatars.githubusercontent.com/u/13390001?v=4","gravatar_id":"","url":"https://api.github.com/users/s97712","html_url":"https://github.com/s97712","followers_url":"https://api.github.com/users/s97712/followers","following_url":"https://api.github.com/users/s97712/following{/other_user}","gists_url":"https://api.github.com/users/s97712/gists{/gist_id}","starred_url":"https://api.github.com/users/s97712/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s97712/subscriptions","organizations_url":"https://api.github.com/users/s97712/orgs","repos_url":"https://api.github.com/users/s97712/repos","events_url":"https://api.github.com/users/s97712/events{/privacy}","received_events_url":"https://api.github.com/users/s97712/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"assignees":[{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/milestones/1","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/milestone/1","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/milestones/1/labels","id":11103408,"node_id":"MI_kwDOHoY85M4AqWyw","number":1,"title":"v0.21.5","description":"- [x] support full set of SSL params in kit config, provide types from `node:tls` connection\r\n- [x] fix: [#435](https://github.com/drizzle-team/drizzle-kit-mirror/issues/435)\r\n- [x] fix: [#2341](https://github.com/drizzle-team/drizzle-orm/issues/2341)\r\n- [x] fix: [#422](https://github.com/drizzle-team/drizzle-kit-mirror/issues/422)\r\n- [x] fix: [#432](https://github.com/drizzle-team/drizzle-kit-mirror/issues/432)\r\n- [x] fix: [#423](https://github.com/drizzle-team/drizzle-kit-mirror/issues/423)\r\n- [x] update zod schemas for database credentials and write tests to all the positive/negative cases","creator":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":4,"state":"open","created_at":"2024-05-27T13:39:25Z","updated_at":"2024-05-31T09:50:29Z","due_on":null,"closed_at":null},"comments":5,"created_at":"2024-05-21T08:50:44Z","updated_at":"2024-05-31T09:50:29Z","closed_at":"2024-05-31T09:50:29Z","author_association":"NONE","active_lock_reason":null,"body":"When I run `drizzle-kit --config schema/drizzle.config.ts \"generate\"`,I get the error error: `unknown option '--config'`\r\nThe config option can only be placed at the end.\r\n\r\nI want to reuse the config option as shown in the example below.\r\n\r\n\r\n```json5\r\n// package.json\r\n\"scripts\": {\r\n    \"db:kit\": \"drizzle-kit --config schema/drizzle.config.ts\",\r\n    \"db:migrate\": \"pnpm db:kit migrate\",\r\n    \"db:push\": \"pnpm db:kit push\",\r\n    \"db:studio\": \"pnpm db:kit studio\",\r\n}\r\n```\r\nBut it seems very difficult.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/423/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/422","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/422/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/422/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/422/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/422","id":2307630386,"node_id":"I_kwDOHoY85M6Ji6Uy","number":422,"title":"Add `driver` back to `drizzle.config`","user":{"login":"lirc571","id":111728589,"node_id":"U_kgDOBqjXzQ","avatar_url":"https://avatars.githubusercontent.com/u/111728589?v=4","gravatar_id":"","url":"https://api.github.com/users/lirc571","html_url":"https://github.com/lirc571","followers_url":"https://api.github.com/users/lirc571/followers","following_url":"https://api.github.com/users/lirc571/following{/other_user}","gists_url":"https://api.github.com/users/lirc571/gists{/gist_id}","starred_url":"https://api.github.com/users/lirc571/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lirc571/subscriptions","organizations_url":"https://api.github.com/users/lirc571/orgs","repos_url":"https://api.github.com/users/lirc571/repos","events_url":"https://api.github.com/users/lirc571/events{/privacy}","received_events_url":"https://api.github.com/users/lirc571/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/milestones/1","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/milestone/1","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/milestones/1/labels","id":11103408,"node_id":"MI_kwDOHoY85M4AqWyw","number":1,"title":"v0.21.5","description":"- [x] support full set of SSL params in kit config, provide types from `node:tls` connection\r\n- [x] fix: [#435](https://github.com/drizzle-team/drizzle-kit-mirror/issues/435)\r\n- [x] fix: [#2341](https://github.com/drizzle-team/drizzle-orm/issues/2341)\r\n- [x] fix: [#422](https://github.com/drizzle-team/drizzle-kit-mirror/issues/422)\r\n- [x] fix: [#432](https://github.com/drizzle-team/drizzle-kit-mirror/issues/432)\r\n- [x] fix: [#423](https://github.com/drizzle-team/drizzle-kit-mirror/issues/423)\r\n- [x] update zod schemas for database credentials and write tests to all the positive/negative cases","creator":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":4,"state":"open","created_at":"2024-05-27T13:39:25Z","updated_at":"2024-05-31T09:50:29Z","due_on":null,"closed_at":null},"comments":11,"created_at":"2024-05-21T08:05:37Z","updated_at":"2024-06-04T03:03:21Z","closed_at":"2024-05-31T09:50:19Z","author_association":"NONE","active_lock_reason":null,"body":"With the recent updates in drizzle-kit, it is now impossible to select a driver when multiple drivers for the same dialect are installed.\r\n\r\nE.g. in a mono-repo setup, I have both `@libsql/client` and `better-sqlite3` installed (used in different packages), but I can no longer use `better-sqlite3` because `@libsql/client` is selected [by default](https://orm.drizzle.team/kit-docs/upgrade-21#changelog) when `dialect` is set to `sqlite`.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/422/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/422/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/421","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/421/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/421/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/421/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/421","id":2307118023,"node_id":"I_kwDOHoY85M6Jg9PH","number":421,"title":"Bug Report: UUID Casting Issue in Drizzle KIT with PostgreSQL preventing updates and deletes","user":{"login":"angelgarrido","id":10210591,"node_id":"MDQ6VXNlcjEwMjEwNTkx","avatar_url":"https://avatars.githubusercontent.com/u/10210591?v=4","gravatar_id":"","url":"https://api.github.com/users/angelgarrido","html_url":"https://github.com/angelgarrido","followers_url":"https://api.github.com/users/angelgarrido/followers","following_url":"https://api.github.com/users/angelgarrido/following{/other_user}","gists_url":"https://api.github.com/users/angelgarrido/gists{/gist_id}","starred_url":"https://api.github.com/users/angelgarrido/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/angelgarrido/subscriptions","organizations_url":"https://api.github.com/users/angelgarrido/orgs","repos_url":"https://api.github.com/users/angelgarrido/repos","events_url":"https://api.github.com/users/angelgarrido/events{/privacy}","received_events_url":"https://api.github.com/users/angelgarrido/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-05-21T02:12:30Z","updated_at":"2024-05-22T21:09:28Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Bug Report: UUID Casting Issue in Drizzle Kit (Studio) with PostgreSQL\r\n\r\n#### Issue Description\r\nIt seems the system is not casting correctly UUID fields as ::UUID, and that prevents update or deleting created records using drizzle-kit studio. \r\n\r\n#### Environment\r\n- **PostgreSQL Database**: Deployed in ServerlessV2 with Data API\r\n- **AWS SDK**: \r\n  - `@aws-sdk/client-rds-data`: `^3.577.0`\r\n- **Drizzle Versions**: \r\n  - `drizzle-kit`: `^0.21.1-674c9c2`\r\n  - `drizzle-orm`: `^0.30.10`\r\n\r\n#### Configuration\r\n\r\n```typescript\r\nimport { Resource } from \"sst\";\r\nimport { defineConfig } from \"drizzle-kit\";\r\n\r\nexport default defineConfig({\r\n  driver: \"aws-data-api\",\r\n  dialect: \"postgresql\",\r\n  dbCredentials: {\r\n    database: Resource.DatabaseRel.database,\r\n    secretArn: Resource.DatabaseRel.secretArn,\r\n    resourceArn: Resource.DatabaseRel.clusterArn,\r\n  },\r\n  schema: [\"./packages/**/*.sql.ts\"],\r\n  out: \"./packages/core/migrations\",\r\n});\r\n```\r\n#### Model Definition\r\n\r\n```typescript\r\nimport { pgTable, uuid, text, timestamp } from \"drizzle-orm/pg-core\";\r\n\r\nexport const user = pgTable(\"user\", {\r\n    userId: uuid(\"user_id\").defaultRandom().primaryKey().notNull(),\r\n    name: text(\"name\"),\r\n    lastName: text(\"last_name\"),\r\n    lastName2: text(\"last_name_2\"),\r\n    stytchId: text(\"stytch_id\"),\r\n    createdAt: timestamp(\"created_at\", { mode: 'string' }).defaultNow(),\r\n    updatedAt: timestamp(\"updated_at\", { mode: 'string' }).defaultNow(),\r\n    deletedAt: timestamp(\"deleted_at\", { mode: 'string' }),\r\n});\r\n```\r\n\r\n####  Detailed error messages\r\n\r\nThese are the error details from frontend and backend: \r\n```\r\nERROR: operator does not exist: uuid = text; \r\nHint: No operator matches the given name and argument types. \r\nYou might need to add explicit type casts.; \r\nPosition: 36; \r\nSQLState: 42883\r\n```\r\nAnd this error in backend: \r\n\r\n```\r\nDatabaseErrorException: ERROR: operator does not exist: uuid = text; \r\nHint: No operator matches the given name and argument types. \r\nYou might need to add explicit type casts.; \r\nPosition: 36; \r\nSQLState: 42883\r\n    at de_DatabaseErrorExceptionRes (/path/to/node_modules/@aws-sdk/client-rds-data/dist-cjs/index.js:871:21)\r\n    at de_CommandError (/path/to/node_modules/@aws-sdk/client-rds-data/dist-cjs/index.js:791:19)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async /path/to/node_modules/@smithy/middleware-serde/dist-cjs/index.js:35:20\r\n    at async /path/to/node_modules/drizzle-kit/bin.cjs:47263:22\r\n    at async /path/to/node_modules/drizzle-kit/bin.cjs:47021:42\r\n    at async /path/to/node_modules/drizzle-kit/bin.cjs:41232:26\r\n    at AwsDataApiPreparedQuery.values (/path/to/node_modules/src/aws-data-api/pg/session.ts:111:18)\r\n    at async proxy (/path/to/node_modules/drizzle-kit/bin.cjs:103612:31)\r\n    at async /path/to/node_modules/drizzle-kit/bin.cjs:112188:26 {\r\n  '$fault': 'client',\r\n  '$metadata': {\r\n    httpStatusCode: 400,\r\n    requestId: '74d34f91-340c-478a-9830-3a6070a2d800',\r\n    extendedRequestId: undefined,\r\n    cfId: undefined,\r\n    attempts: 1,\r\n    totalRetryDelay: 0\r\n  }\r\n}\r\n```\r\n\r\nThis issue seems to be related to UUID handling in Drizzle kit. Please investigate and advise on any potential fixes or workarounds. Thank you!\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/421/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/420","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/420/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/420/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/420/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/420","id":2306042042,"node_id":"I_kwDOHoY85M6Jc2i6","number":420,"title":"[BUG] Can't create composite primary key on existing table with 0.21","user":{"login":"aldebout","id":822800,"node_id":"MDQ6VXNlcjgyMjgwMA==","avatar_url":"https://avatars.githubusercontent.com/u/822800?v=4","gravatar_id":"","url":"https://api.github.com/users/aldebout","html_url":"https://github.com/aldebout","followers_url":"https://api.github.com/users/aldebout/followers","following_url":"https://api.github.com/users/aldebout/following{/other_user}","gists_url":"https://api.github.com/users/aldebout/gists{/gist_id}","starred_url":"https://api.github.com/users/aldebout/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aldebout/subscriptions","organizations_url":"https://api.github.com/users/aldebout/orgs","repos_url":"https://api.github.com/users/aldebout/repos","events_url":"https://api.github.com/users/aldebout/events{/privacy}","received_events_url":"https://api.github.com/users/aldebout/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-05-20T13:46:38Z","updated_at":"2024-05-22T14:50:37Z","closed_at":"2024-05-22T14:50:37Z","author_association":"NONE","active_lock_reason":null,"body":"With 0.21.2, after following the migration guide including running `up`, `generate` fails to create a migration for the following change to an existing table (only change):\r\n```\r\n+ (t) => ({\r\n+     pk: primaryKey({ columns: [t.userId, t.courseId] }),\r\n+   })\r\n```\r\n\r\nError: `TypeError: Cannot read properties of undefined (reading 'compositePrimaryKeys')`. \n\nDialect is postgres. \r\n\r\n`userId` and `courseId` are both FKs to other tables, the table I'm creating the PK on is a M2M join table.\r\n\r\nReverting back to 0.20.18 I have no issue generating the migration.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/420/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/419","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/419/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/419/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/419/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/419","id":2304459639,"node_id":"I_kwDOHoY85M6JW0N3","number":419,"title":"Support js api to generate migration","user":{"login":"s97712","id":13390001,"node_id":"MDQ6VXNlcjEzMzkwMDAx","avatar_url":"https://avatars.githubusercontent.com/u/13390001?v=4","gravatar_id":"","url":"https://api.github.com/users/s97712","html_url":"https://github.com/s97712","followers_url":"https://api.github.com/users/s97712/followers","following_url":"https://api.github.com/users/s97712/following{/other_user}","gists_url":"https://api.github.com/users/s97712/gists{/gist_id}","starred_url":"https://api.github.com/users/s97712/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s97712/subscriptions","organizations_url":"https://api.github.com/users/s97712/orgs","repos_url":"https://api.github.com/users/s97712/repos","events_url":"https://api.github.com/users/s97712/events{/privacy}","received_events_url":"https://api.github.com/users/s97712/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-19T06:39:39Z","updated_at":"2024-05-21T07:09:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"This will make it more flexible.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/419/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/418","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/418/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/418/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/418/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/418","id":2303110181,"node_id":"I_kwDOHoY85M6JRqwl","number":418,"title":"Enable DDL statement logging during `migrate` command","user":{"login":"DougSchmidt-Leeward","id":113546515,"node_id":"U_kgDOBsSVEw","avatar_url":"https://avatars.githubusercontent.com/u/113546515?v=4","gravatar_id":"","url":"https://api.github.com/users/DougSchmidt-Leeward","html_url":"https://github.com/DougSchmidt-Leeward","followers_url":"https://api.github.com/users/DougSchmidt-Leeward/followers","following_url":"https://api.github.com/users/DougSchmidt-Leeward/following{/other_user}","gists_url":"https://api.github.com/users/DougSchmidt-Leeward/gists{/gist_id}","starred_url":"https://api.github.com/users/DougSchmidt-Leeward/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DougSchmidt-Leeward/subscriptions","organizations_url":"https://api.github.com/users/DougSchmidt-Leeward/orgs","repos_url":"https://api.github.com/users/DougSchmidt-Leeward/repos","events_url":"https://api.github.com/users/DougSchmidt-Leeward/events{/privacy}","received_events_url":"https://api.github.com/users/DougSchmidt-Leeward/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-05-17T16:07:26Z","updated_at":"2024-05-21T07:11:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Logging the DDL statements executed during a migration will greatly help troubleshooting, debugging, and manually recovering from a failed migration.\r\n\r\nThe current behaviour just appears to log the last error received from the database driver. If the error contains some identifiable context, maybe that helps, but if the error is more generic, we are completely lost.\r\n\r\nCurrent behaviour when an error occurs:\r\n- We don't know which migration files were executed (ie. `0012_funky_horse_calipers.sql` worked but `0013_sad_panda_noises.sql` failed)\r\n- We don't know which DDL statement within a migration fail caused the error.\r\n\r\nI suggest that when `config.verbose` is false, the `migrate` command should just log the name of each migration file before its DDL statements are executed. When `config.verbose` is true, the `migrate` command should also log each DDL right before it is executed. Then the `migration` command output should be detailed enough to troubleshoot the problem.\r\n\r\nHere is an example error (caused by a manual edit of a migration file which was pushed without a local test)\r\n```\r\nnpx drizzle-kit migrate --config=drizzle.config.ts\r\ndrizzle-kit: v0.21.2\r\ndrizzle-orm: v0.30.10\r\n\r\nCustom config path was provided, using 'drizzle.config.ts'\r\nReading config file '{redacted}/drizzle.config.ts'\r\nUsing 'pg' driver for database querying\r\n[‚£∑] applying migrations...error: type \"bermy\" does not exist\r\n    at /{redacted}/node_modules/drizzle-kit/bin.cjs:62266:21\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at <anonymous> ({redacted}/node_modules/src/pg-core/dialect.ts:89:7)\r\n    at NodePgSession.transaction ({redacted}/node_modules/src/node-postgres/session.ts:155:19)\r\n    at PgDialect.migrate ({redacted}/node_modules/src/pg-core/dialect.ts:82:3)\r\n    at migrate ({redacted}/node_modules/src/node-postgres/migrator.ts:10:2) {\r\n  length: 93,\r\n  severity: 'ERROR',\r\n  code: '42704',\r\n  detail: undefined,\r\n  hint: undefined,\r\n  position: '209',\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: undefined,\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: 'parse_type.c',\r\n  line: '271',\r\n  routine: 'typenameType'\r\n}\r\n```\r\n\r\nMy drizzle.config.ts is:\r\n```ts\r\nimport 'dotenv/config';\r\nimport type { Config } from 'drizzle-kit';\r\n\r\nexport default {\r\n  schema: './src/db/schema/schema.ts',\r\n  out: './src/db/migrations',\r\n  dialect: 'postgresql',\r\n  dbCredentials: {\r\n    url: process.env.DATABASE_URL as string,\r\n  },\r\n  verbose: true,\r\n  strict: true,\r\n} satisfies Config;\r\n```\r\n\r\nThanks for the great work so far!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/418/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/417","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/417/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/417/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/417/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/417","id":2302961243,"node_id":"I_kwDOHoY85M6JRGZb","number":417,"title":"Improper escaping of string containing quotes for `introspect` on SQLite (libsql)","user":{"login":"bradobro","id":354176,"node_id":"MDQ6VXNlcjM1NDE3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/354176?v=4","gravatar_id":"","url":"https://api.github.com/users/bradobro","html_url":"https://github.com/bradobro","followers_url":"https://api.github.com/users/bradobro/followers","following_url":"https://api.github.com/users/bradobro/following{/other_user}","gists_url":"https://api.github.com/users/bradobro/gists{/gist_id}","starred_url":"https://api.github.com/users/bradobro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bradobro/subscriptions","organizations_url":"https://api.github.com/users/bradobro/orgs","repos_url":"https://api.github.com/users/bradobro/repos","events_url":"https://api.github.com/users/bradobro/events{/privacy}","received_events_url":"https://api.github.com/users/bradobro/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-17T14:56:21Z","updated_at":"2024-05-17T15:18:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Summary**: pulling schema from a local SQLite database creates schema statements that don't parse as TypeScript.\r\n\r\n**Example**: \r\n```js\r\n// generates field definitions including this:\r\n{\r\n\ttype: text(\"type\").default(\"sql`(\"base\")`\").notNull(),\r\n        //  unescaped double quotes:     ^        ^  break parsing.  \r\n}\r\n```\r\n\r\n**Environment**:\r\n\r\nPackage Versions:\r\n    \"drizzle-kit\": \"^0.21.2\"\r\n    \"drizzle-orm\": \"^0.30.10\"\r\n    \"@libsql/client\": \"^0.6.0\"\r\n    \"typescript\": \"^5.0.0\"\r\n\r\nRuntimes:\r\n- Node.js `v21.7.1`\r\n- Bun `1.1.8`\r\n\r\nOS/Hardware:\r\n- MacOS Sonoma 14.4.1\r\n- MacBook Air M1\r\n\r\n**Recreating**\r\nHere's a SQL to create a table that will cause some offenders:\r\n\r\n```sql\r\nCREATE TABLE `_collections` (\r\n\t\t\t\t`id`         TEXT PRIMARY KEY NOT NULL,\r\n\t\t\t\t`system`     BOOLEAN DEFAULT FALSE NOT NULL,\r\n\t\t\t\t`type`       TEXT DEFAULT \"base\" NOT NULL,\r\n\t\t\t\t`created` TEXT DEFAULT \"\" NOT NULL,\r\n\t\t\t\t`updated` TEXT DEFAULT \"\" NOT NULL,\r\n\t\t\t\t`name`       TEXT UNIQUE NOT NULL,\r\n\t\t\t\t`schema`     JSON DEFAULT \"[]\" NOT NULL,\r\n\t\t\t\t`indexes`    JSON DEFAULT \"[]\" NOT NULL,\r\n\t\t\t\t`listRule`   TEXT DEFAULT NULL,\r\n\t\t\t\t`viewRule`   TEXT DEFAULT NULL,\r\n\t\t\t\t`createRule` TEXT DEFAULT NULL,\r\n\t\t\t\t`updateRule` TEXT DEFAULT NULL,\r\n\t\t\t\t`deleteRule` TEXT DEFAULT NULL,\r\n\t\t\t\t`options`    JSON DEFAULT \"{}\" NOT NULL\r\n\t\t\t);\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/417/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/416","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/416/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/416/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/416/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/416","id":2302711481,"node_id":"I_kwDOHoY85M6JQJa5","number":416,"title":"[BUG] Drizzle Kit doesn't create a __drizzle_migrations table","user":{"login":"brogeby","id":49376982,"node_id":"MDQ6VXNlcjQ5Mzc2OTgy","avatar_url":"https://avatars.githubusercontent.com/u/49376982?v=4","gravatar_id":"","url":"https://api.github.com/users/brogeby","html_url":"https://github.com/brogeby","followers_url":"https://api.github.com/users/brogeby/followers","following_url":"https://api.github.com/users/brogeby/following{/other_user}","gists_url":"https://api.github.com/users/brogeby/gists{/gist_id}","starred_url":"https://api.github.com/users/brogeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brogeby/subscriptions","organizations_url":"https://api.github.com/users/brogeby/orgs","repos_url":"https://api.github.com/users/brogeby/repos","events_url":"https://api.github.com/users/brogeby/events{/privacy}","received_events_url":"https://api.github.com/users/brogeby/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-17T13:08:10Z","updated_at":"2024-05-17T14:01:08Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"As the title says, I'm not getting a migrations table when running migrations. I have tried both drizzle-kit generate / push and going through suggested script via drizzle-orm. I'm using node-postgres as driver.\r\ndrizzle-kit: 0.21.1\r\ndrizzle-orm: 0.30.10\r\n\r\nMy config:\r\n```JavaScript\r\n// drizzle.config.js\r\nimport 'dotenv/config'\r\nimport { defineConfig } from 'drizzle-kit'\r\n\r\n/** @type { import(\"drizzle-kit\").Config } */\r\nexport default defineConfig({\r\n  schema: 'src/db/schema.*',\r\n  out: 'src/db/migrations',\r\n  dialect: 'postgresql',\r\n  dbCredentials: {\r\n    url: process.env.DATABASE_URL,\r\n  },\r\n  verbose: true,\r\n  strict: false,\r\n  schemaFilter: ['public'],\r\n})\r\n\r\n// index.ts\r\nimport { drizzle } from 'drizzle-orm/node-postgres'\r\nimport { Client } from 'pg'\r\nimport * as schema from './schema'\r\n\r\nexport const client = new Client(process.env.DATABASE_URL)\r\nexport const db = drizzle(client, { schema })\r\n\r\n// migrate.ts\r\nimport 'dotenv/config'\r\nimport { resolve } from 'path'\r\nimport { client, db } from './'\r\nimport { migrate } from 'drizzle-orm/node-postgres/migrator'\r\nexport default async () => {\r\n  await client.connect()\r\n  await migrate(db, { migrationsFolder: resolve(__dirname, './migrations') })\r\n  await client.end()\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/416/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/416/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/415","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/415/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/415/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/415/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/415","id":2302643878,"node_id":"I_kwDOHoY85M6JP46m","number":415,"title":"[BUG]: tablesFilter doesn't work when using views","user":{"login":"brogeby","id":49376982,"node_id":"MDQ6VXNlcjQ5Mzc2OTgy","avatar_url":"https://avatars.githubusercontent.com/u/49376982?v=4","gravatar_id":"","url":"https://api.github.com/users/brogeby","html_url":"https://github.com/brogeby","followers_url":"https://api.github.com/users/brogeby/followers","following_url":"https://api.github.com/users/brogeby/following{/other_user}","gists_url":"https://api.github.com/users/brogeby/gists{/gist_id}","starred_url":"https://api.github.com/users/brogeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brogeby/subscriptions","organizations_url":"https://api.github.com/users/brogeby/orgs","repos_url":"https://api.github.com/users/brogeby/repos","events_url":"https://api.github.com/users/brogeby/events{/privacy}","received_events_url":"https://api.github.com/users/brogeby/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-17T12:37:12Z","updated_at":"2024-05-17T13:10:17Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I have a Postgres DB with a couple of tables and views autogenerated from my hosting service. I wish to ignore these all together. However, when I run generate and push, I get prompted \"Is <tablename> table created or renamed from another table?\" and then a list of the views and tables.\r\ndrizzle-kit: 0.21.1\r\ndrizzle-orm: 0.30.10\r\n\r\nExample:\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/49376982/81abdd5f-0297-4a0b-bd6e-4dd77e65d094)\r\n\r\nIn the example, spatial_ref_sys is a table and the rest is views.\r\n\r\nHeres my config:\r\n```JavaScript\r\n// config.drizzle.js\r\nimport 'dotenv/config'\r\n\r\nimport { defineConfig } from 'drizzle-kit'\r\n\r\nconst DATABASE_URL =\r\n  process.env.DATABASE_URL || process.env.POSTGRESQL_ADDON_URI\r\n\r\nexport default defineConfig({\r\n  schema: 'src/db/schema.*',\r\n  out: 'src/db/migrations',\r\n  dialect: 'postgresql',\r\n  dbCredentials: {\r\n    url: DATABASE_URL,\r\n  },\r\n  verbose: true,\r\n  strict: false,\r\n  tablesFilter: [\r\n    '!geography_columns',\r\n    '!geometry_columns',\r\n    '!raster_columns',\r\n    '!spatial_ref_sys',\r\n    '!pg_stat_statements',\r\n    '!raster_overviews',\r\n    '!pg_stat_statements_info',\r\n  ],\r\n  schemaFilter: ['public'],\r\n})\r\n```\r\n\r\nCurrent workaround is to declare the autogenerated views + tables in schema as pgTable's in my schemas and manually create them in my local DB ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/415/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/414","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/414/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/414/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/414/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/414","id":2302310141,"node_id":"I_kwDOHoY85M6JOnb9","number":414,"title":"[BUG] check throws a zod validation error","user":{"login":"rphlmr","id":20722140,"node_id":"MDQ6VXNlcjIwNzIyMTQw","avatar_url":"https://avatars.githubusercontent.com/u/20722140?v=4","gravatar_id":"","url":"https://api.github.com/users/rphlmr","html_url":"https://github.com/rphlmr","followers_url":"https://api.github.com/users/rphlmr/followers","following_url":"https://api.github.com/users/rphlmr/following{/other_user}","gists_url":"https://api.github.com/users/rphlmr/gists{/gist_id}","starred_url":"https://api.github.com/users/rphlmr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rphlmr/subscriptions","organizations_url":"https://api.github.com/users/rphlmr/orgs","repos_url":"https://api.github.com/users/rphlmr/repos","events_url":"https://api.github.com/users/rphlmr/events{/privacy}","received_events_url":"https://api.github.com/users/rphlmr/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-17T10:00:59Z","updated_at":"2024-05-17T12:43:52Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"```\r\ndrizzle-kit: v0.21.2\r\ndrizzle-orm: v0.30.10\r\n```\r\n\r\n`drizzle-kit check`  throws a zod validation error.\r\n\r\n```\r\ndotenv -e .env -- drizzle-kit check --config=drizzle.server.config.ts\r\ndrizzle-kit: v0.21.2\r\ndrizzle-orm: v0.30.10\r\n\r\nReading config file '/Users/rphlmr/workspaces/rphlmr/drizzle-play/drizzle.server.config.ts'\r\nZodError: [\r\n  {\r\n    \"code\": \"invalid_union\",\r\n    \"unionErrors\": [\r\n      {\r\n        \"issues\": [\r\n          {\r\n            \"code\": \"invalid_literal\",\r\n            \"expected\": \"5\",\r\n            \"path\": [\r\n              \"version\"\r\n            ],\r\n            \"message\": \"Invalid literal value, expected \\\"5\\\"\"\r\n          },\r\n          {\r\n            \"received\": \"postgresql\",\r\n            \"code\": \"invalid_enum_value\",\r\n            \"options\": [\r\n              \"sqlite\"\r\n            ],\r\n            \"path\": [\r\n              \"dialect\"\r\n            ],\r\n            \"message\": \"Invalid enum value. Expected 'sqlite', received 'postgresql'\"\r\n          },\r\n          {\r\n            \"code\": \"unrecognized_keys\",\r\n            \"keys\": [\r\n              \"schema\"\r\n            ],\r\n            \"path\": [\r\n              \"tables\",\r\n              \"public.playground\"\r\n            ],\r\n            \"message\": \"Unrecognized key(s) in object: 'schema'\"\r\n          },\r\n          {\r\n            \"code\": \"unrecognized_keys\",\r\n            \"keys\": [\r\n              \"schemaTo\"\r\n            ],\r\n            \"path\": [\r\n              \"tables\",\r\n              \"public.user\",\r\n              \"foreignKeys\",\r\n              \"user_id_users_id_fk\"\r\n            ],\r\n            \"message\": \"Unrecognized key(s) in object: 'schemaTo'\"\r\n          },\r\n          {\r\n            \"code\": \"unrecognized_keys\",\r\n            \"keys\": [\r\n              \"nullsNotDistinct\"\r\n            ],\r\n            \"path\": [\r\n              \"tables\",\r\n              \"public.user\",\r\n              \"uniqueConstraints\",\r\n              \"user_username_unique\"\r\n            ],\r\n            \"message\": \"Unrecognized key(s) in object: 'nullsNotDistinct'\"\r\n          },\r\n          {\r\n            \"code\": \"unrecognized_keys\",\r\n            \"keys\": [\r\n              \"schema\"\r\n            ],\r\n            \"path\": [\r\n              \"tables\",\r\n              \"public.user\"\r\n            ],\r\n            \"message\": \"Unrecognized key(s) in object: 'schema'\"\r\n          },\r\n          {\r\n            \"code\": \"unrecognized_keys\",\r\n            \"keys\": [\r\n              \"schemas\"\r\n            ],\r\n            \"path\": [],\r\n            \"message\": \"Unrecognized key(s) in object: 'schemas'\"\r\n          }\r\n        ],\r\n        \"name\": \"ZodError\"\r\n      },\r\n      {\r\n        \"issues\": [\r\n          {\r\n            \"received\": \"postgresql\",\r\n            \"code\": \"invalid_enum_value\",\r\n            \"options\": [\r\n              \"sqlite\"\r\n            ],\r\n            \"path\": [\r\n              \"dialect\"\r\n            ],\r\n            \"message\": \"Invalid enum value. Expected 'sqlite', received 'postgresql'\"\r\n          },\r\n          {\r\n            \"code\": \"unrecognized_keys\",\r\n            \"keys\": [\r\n              \"schema\"\r\n            ],\r\n            \"path\": [\r\n              \"tables\",\r\n              \"public.playground\"\r\n            ],\r\n            \"message\": \"Unrecognized key(s) in object: 'schema'\"\r\n          },\r\n          {\r\n            \"code\": \"unrecognized_keys\",\r\n            \"keys\": [\r\n              \"schemaTo\"\r\n            ],\r\n            \"path\": [\r\n              \"tables\",\r\n              \"public.user\",\r\n              \"foreignKeys\",\r\n              \"user_id_users_id_fk\"\r\n            ],\r\n            \"message\": \"Unrecognized key(s) in object: 'schemaTo'\"\r\n          },\r\n          {\r\n            \"code\": \"unrecognized_keys\",\r\n            \"keys\": [\r\n              \"nullsNotDistinct\"\r\n            ],\r\n            \"path\": [\r\n              \"tables\",\r\n              \"public.user\",\r\n              \"uniqueConstraints\",\r\n              \"user_username_unique\"\r\n            ],\r\n            \"message\": \"Unrecognized key(s) in object: 'nullsNotDistinct'\"\r\n          },\r\n          {\r\n            \"code\": \"unrecognized_keys\",\r\n            \"keys\": [\r\n              \"schema\"\r\n            ],\r\n            \"path\": [\r\n              \"tables\",\r\n              \"public.user\"\r\n            ],\r\n            \"message\": \"Unrecognized key(s) in object: 'schema'\"\r\n          },\r\n          {\r\n            \"code\": \"unrecognized_keys\",\r\n            \"keys\": [\r\n              \"schemas\"\r\n            ],\r\n            \"path\": [],\r\n            \"message\": \"Unrecognized key(s) in object: 'schemas'\"\r\n          }\r\n        ],\r\n        \"name\": \"ZodError\"\r\n      }\r\n    ],\r\n    \"path\": [],\r\n    \"message\": \"Invalid input\"\r\n  }\r\n]\r\n    at handleResult (/Users/rphlmr/workspaces/rphlmr/drizzle-play/node_modules/drizzle-kit/bin.cjs:2012:24)\r\n    at ZodUnion.safeParse (/Users/rphlmr/workspaces/rphlmr/drizzle-play/node_modules/drizzle-kit/bin.cjs:2105:16)\r\n    at snapshots.reduce.malformed (/Users/rphlmr/workspaces/rphlmr/drizzle-play/node_modules/drizzle-kit/bin.cjs:5650:38)\r\n    at Array.reduce (<anonymous>)\r\n    at validateWithReport (/Users/rphlmr/workspaces/rphlmr/drizzle-play/node_modules/drizzle-kit/bin.cjs:5638:32)\r\n    at checkHandler (/Users/rphlmr/workspaces/rphlmr/drizzle-play/node_modules/drizzle-kit/bin.cjs:112243:18)\r\n    at Command.<anonymous> (/Users/rphlmr/workspaces/rphlmr/drizzle-play/node_modules/drizzle-kit/bin.cjs:113663:3) {\r\n  issues: [\r\n    {\r\n      code: 'invalid_union',\r\n      unionErrors: [Array],\r\n      path: [],\r\n      message: 'Invalid input'\r\n    }\r\n  ],\r\n  addIssue: [Function (anonymous)],\r\n  addIssues: [Function (anonymous)],\r\n  errors: [\r\n    {\r\n      code: 'invalid_union',\r\n      unionErrors: [Array],\r\n      path: [],\r\n      message: 'Invalid input'\r\n    }\r\n  ]\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/414/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/414/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/413","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/413/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/413/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/413/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/413","id":2302170437,"node_id":"I_kwDOHoY85M6JOFVF","number":413,"title":"[BUG & FIX] pg introspection: columns order in multicolumn indexes is not guaranteed","user":{"login":"damaafer","id":28108584,"node_id":"MDQ6VXNlcjI4MTA4NTg0","avatar_url":"https://avatars.githubusercontent.com/u/28108584?v=4","gravatar_id":"","url":"https://api.github.com/users/damaafer","html_url":"https://github.com/damaafer","followers_url":"https://api.github.com/users/damaafer/followers","following_url":"https://api.github.com/users/damaafer/following{/other_user}","gists_url":"https://api.github.com/users/damaafer/gists{/gist_id}","starred_url":"https://api.github.com/users/damaafer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/damaafer/subscriptions","organizations_url":"https://api.github.com/users/damaafer/orgs","repos_url":"https://api.github.com/users/damaafer/repos","events_url":"https://api.github.com/users/damaafer/events{/privacy}","received_events_url":"https://api.github.com/users/damaafer/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-17T08:52:23Z","updated_at":"2024-05-31T13:14:54Z","closed_at":"2024-05-31T13:14:54Z","author_association":"NONE","active_lock_reason":null,"body":"In the function `fromDatabase2` from file `src/serializer/pgSerializer.ts`  (names taken from `bin.cjs`)\r\n\r\nThe query fetching indexes from postgres database retrieves rows without specifying the order:\r\n```typescript\r\nconst dbIndexes = await db2.query(\r\n              `SELECT t.relname as table_name, i.relname AS index_name, ix.indisunique AS is_unique, a.attname AS column_name\r\n          FROM pg_class t\r\n          JOIN pg_index ix ON t.oid = ix.indrelid\r\n          JOIN pg_class i ON i.oid = ix.indexrelid\r\n          JOIN pg_attribute a ON a.attrelid = t.oid AND a.attnum = ANY(ix.indkey)\r\n          JOIN pg_namespace ns ON ns.oid = t.relnamespace\r\n          WHERE ns.nspname = '${tableSchema}'\r\n            AND t.relname = '${tableName}'\r\n            and ix.indisprimary = false;`\r\n            );\r\n```\r\n\r\nThen, indexes in json schema are constructed by pushing columns in that (random) order.\r\n```typescript\r\nindexToReturn[indexName4].columns.push(indexColumnName);\r\n```\r\n\r\n### Bug:\r\nColumns order of multicolumn indexes is not guaranteed (this produce false positives in `drizzle-kit push`).\r\n\r\n### Fix:\r\norder rows by position of columns in indexes: \r\n```typescript\r\nconst dbIndexes = await db2.query(\r\n              `SELECT t.relname as table_name, i.relname AS index_name, ix.indisunique AS is_unique, a.attname AS column_name, array_position(ix.indkey, a.attnum) as column_position\r\n          FROM pg_class t\r\n          JOIN pg_index ix ON t.oid = ix.indrelid\r\n          JOIN pg_class i ON i.oid = ix.indexrelid\r\n          JOIN pg_attribute a ON a.attrelid = t.oid AND a.attnum = ANY(ix.indkey)\r\n          JOIN pg_namespace ns ON ns.oid = t.relnamespace\r\n          WHERE ns.nspname = '${tableSchema}'\r\n            AND t.relname = '${tableName}'\r\n            AND ix.indisprimary = false\r\n          ORDER BY column_position;`\r\n            );\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/413/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/412","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/412/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/412/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/412/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/412","id":2301256201,"node_id":"I_kwDOHoY85M6JKmIJ","number":412,"title":"[BUG] generate postgresql not detecting removed NOT NULL constraint","user":{"login":"alanhamlett","id":522344,"node_id":"MDQ6VXNlcjUyMjM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/522344?v=4","gravatar_id":"","url":"https://api.github.com/users/alanhamlett","html_url":"https://github.com/alanhamlett","followers_url":"https://api.github.com/users/alanhamlett/followers","following_url":"https://api.github.com/users/alanhamlett/following{/other_user}","gists_url":"https://api.github.com/users/alanhamlett/gists{/gist_id}","starred_url":"https://api.github.com/users/alanhamlett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alanhamlett/subscriptions","organizations_url":"https://api.github.com/users/alanhamlett/orgs","repos_url":"https://api.github.com/users/alanhamlett/repos","events_url":"https://api.github.com/users/alanhamlett/events{/privacy}","received_events_url":"https://api.github.com/users/alanhamlett/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-16T20:12:35Z","updated_at":"2024-05-29T21:02:48Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I changed the schema to remove `.notNull()` from 2 columns on a table (`varchar` and `integer`) but no changes are detected.\r\n\r\nEven adding `.notNull()` to the columns in my schema then running `drizzle-kit generate` detects no changes. It's like null constraints are now skipped when generating migrations. It was working in the previous version of drizzle-kit, broke after upgrading drizzle-kit to `v0.21.2`.\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/412/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/412/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/411","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/411/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/411/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/411/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/411","id":2301053697,"node_id":"I_kwDOHoY85M6JJ0sB","number":411,"title":"[BUG] Composite unique index not created in the migration file","user":{"login":"sromicevelyn","id":98606499,"node_id":"U_kgDOBeCdow","avatar_url":"https://avatars.githubusercontent.com/u/98606499?v=4","gravatar_id":"","url":"https://api.github.com/users/sromicevelyn","html_url":"https://github.com/sromicevelyn","followers_url":"https://api.github.com/users/sromicevelyn/followers","following_url":"https://api.github.com/users/sromicevelyn/following{/other_user}","gists_url":"https://api.github.com/users/sromicevelyn/gists{/gist_id}","starred_url":"https://api.github.com/users/sromicevelyn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sromicevelyn/subscriptions","organizations_url":"https://api.github.com/users/sromicevelyn/orgs","repos_url":"https://api.github.com/users/sromicevelyn/repos","events_url":"https://api.github.com/users/sromicevelyn/events{/privacy}","received_events_url":"https://api.github.com/users/sromicevelyn/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-16T18:16:52Z","updated_at":"2024-05-16T18:33:59Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Used drizzle-kit version: `0.21.2`\r\n\r\nI have the following drizzle schema defined:\r\n\r\n```\r\nmysqlTable(\r\n  'audits',\r\n  {\r\n    id: int('id').primaryKey().autoincrement(),\r\n    col1: bigint('IMEI', { mode: 'bigint' }).notNull(),\r\n    col2: bigint('ICCID', { mode: 'bigint' }).notNull(),\r\n    col3: varchar('sc_ver', { length: 20 }).default(null),\r\n    created_at: datetime('created_at', { mode: 'date' }).default(new Date()),\r\n  },\r\n  (t) => ({\r\n    audits_col1_col2_col3UniqueConstraint: unique('constraint_audits_col1_col2_col3').on(\r\n      t.col1,\r\n      t.col2,\r\n      t.col3,\r\n    ),\r\n    audits_col1_col2_col3UniqueIdx: uniqueIndex('idx_audits_col1_col2_col3').on(\r\n      t.col1,\r\n      t.col2,\r\n      t.col3,\r\n    ),\r\n  }),\r\n);\r\n\r\n```\r\n\r\n\r\nWhen i run migrations, drizzle kit generates the following SQL DDL:\r\n\r\n```\r\nCREATE TABLE `audits` (\r\n\t`id` int AUTO_INCREMENT NOT NULL,\r\n\t`IMEI` bigint NOT NULL,\r\n\t`ICCID` bigint NOT NULL,\r\n\t`sc_ver` varchar(20) DEFAULT null,\r\n\t`created_at` datetime DEFAULT CURRENT_TIMESTAMP,\r\n\tCONSTRAINT `audits_id` PRIMARY KEY(`id`),\r\n\tCONSTRAINT `constraint_audits_col1_col2_col3` UNIQUE(`IMEI`,`ICCID`,`sc_ver`),\r\n\tCONSTRAINT `idx_audits_col1_col2_col3` UNIQUE(`IMEI`,`ICCID`,`sc_ver`)\r\n);\r\n```\r\n\r\nAs it can be seen, it generates the unique constraint twice and the composite unique index has not been generated.\r\n\r\n\r\nBut generated meta snapshot looks correctly generated:\r\n\r\n\r\n```\r\n{\r\n  \"version\": \"5\",\r\n  \"dialect\": \"mysql\",\r\n  \"id\": \"f8d0f7ec-5a5d-4a8b-b3d8-75e4f379d26b\",\r\n  \"prevId\": \"00000000-0000-0000-0000-000000000000\",\r\n  \"tables\": {\r\n    \"audits\": {\r\n      \"name\": \"audits\",\r\n      \"columns\": {\r\n        \"id\": {\r\n          \"name\": \"id\",\r\n          \"type\": \"int\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": true\r\n        },\r\n        \"col1\": {\r\n          \"name\": \"col1\",\r\n          \"type\": \"bigint\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"col2\": {\r\n          \"name\": \"col2\",\r\n          \"type\": \"bigint\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": true,\r\n          \"autoincrement\": false\r\n        },\r\n        \"col3\": {\r\n          \"name\": \"col3\",\r\n          \"type\": \"varchar(20)\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false,\r\n          \"default\": null\r\n        },\r\n        \"created_at\": {\r\n          \"name\": \"created_at\",\r\n          \"type\": \"datetime\",\r\n          \"primaryKey\": false,\r\n          \"notNull\": false,\r\n          \"autoincrement\": false,\r\n          \"default\": \"CURRENT_TIMESTAMP\"\r\n        }\r\n      },\r\n      \"indexes\": {\r\n        \"idx_audits_col1_col2_col3\": {\r\n          \"name\": \"idx_audits_col1_col2_col3\",\r\n          \"columns\": [\"col1\", \"col2\", \"col3\"],\r\n          \"isUnique\": true\r\n        }\r\n      },\r\n      \"foreignKeys\": {},\r\n      \"compositePrimaryKeys\": {\r\n        \"audits_id\": {\r\n          \"name\": \"audits_id\",\r\n          \"columns\": [\"id\"]\r\n        }\r\n      },\r\n      \"uniqueConstraints\": {\r\n        \"constraint_audits_col1_col2_col3\": {\r\n          \"name\": \"constraint_audits_col1_col2_col3\",\r\n          \"columns\": [\"col1\", \"col2\", \"col3\"]\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"_meta\": {\r\n    \"schemas\": {},\r\n    \"tables\": {},\r\n    \"columns\": {}\r\n  }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/411/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/411/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/410","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/410/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/410/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/410/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/410","id":2297460571,"node_id":"I_kwDOHoY85M6I8Hdb","number":410,"title":"[BUG]: value.getTime is not a function","user":{"login":"hmh6a","id":45771971,"node_id":"MDQ6VXNlcjQ1NzcxOTcx","avatar_url":"https://avatars.githubusercontent.com/u/45771971?v=4","gravatar_id":"","url":"https://api.github.com/users/hmh6a","html_url":"https://github.com/hmh6a","followers_url":"https://api.github.com/users/hmh6a/followers","following_url":"https://api.github.com/users/hmh6a/following{/other_user}","gists_url":"https://api.github.com/users/hmh6a/gists{/gist_id}","starred_url":"https://api.github.com/users/hmh6a/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmh6a/subscriptions","organizations_url":"https://api.github.com/users/hmh6a/orgs","repos_url":"https://api.github.com/users/hmh6a/repos","events_url":"https://api.github.com/users/hmh6a/events{/privacy}","received_events_url":"https://api.github.com/users/hmh6a/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-15T10:16:31Z","updated_at":"2024-05-15T13:02:34Z","closed_at":"2024-05-15T13:02:34Z","author_association":"NONE","active_lock_reason":null,"body":"### Bug Report: Error when using time-related queries\r\n\r\n#### Description\r\nWhen attempting to use time-related queries with `drizzle-kit`, I encounter an error. Specifically, the error occurs when trying to fetch records from the `visits` table where the `createdAt` timestamp is greater than or equal to the current time.\r\n\r\n#### Code Snippets\r\nHere is the code that produces the error:\r\n\r\n```ts\r\nconst visits = await db.query.visits.findMany({\r\n    where: gte(tables.visits.createdAt, Date.now()),\r\n})\r\n```\r\n\r\nSchema definition for the `visits` table:\r\n\r\n```javascript\r\nexport const visits = sqliteTable('visits', {\r\n    id: integer('id').primaryKey({ autoIncrement: true }),\r\n    // ....\r\n    createdAt: integer('created_at', { mode: 'timestamp' }).notNull().default(new Date().getTime()),\r\n})\r\n```\r\n\r\n#### Error Message\r\n```\r\nError: value.getTime is not a function\r\n```\r\n\r\n#### versions\r\n\r\n```json\r\n\"drizzle-orm\": \"0.30.10\",\r\n\"drizzle-kit\": \"0.21.2\",\r\n\"bun\": \"1.1.7\"\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/410/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/409","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/409/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/409/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/409/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/409","id":2296913138,"node_id":"I_kwDOHoY85M6I6Bzy","number":409,"title":"[BUG] Initial migration should use IF NOT EXISTS","user":{"login":"jschuur","id":92457,"node_id":"MDQ6VXNlcjkyNDU3","avatar_url":"https://avatars.githubusercontent.com/u/92457?v=4","gravatar_id":"","url":"https://api.github.com/users/jschuur","html_url":"https://github.com/jschuur","followers_url":"https://api.github.com/users/jschuur/followers","following_url":"https://api.github.com/users/jschuur/following{/other_user}","gists_url":"https://api.github.com/users/jschuur/gists{/gist_id}","starred_url":"https://api.github.com/users/jschuur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jschuur/subscriptions","organizations_url":"https://api.github.com/users/jschuur/orgs","repos_url":"https://api.github.com/users/jschuur/repos","events_url":"https://api.github.com/users/jschuur/events{/privacy}","received_events_url":"https://api.github.com/users/jschuur/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-15T05:40:54Z","updated_at":"2024-05-23T05:56:20Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The initial migration file generated with `drizzle-kit generate` for an existing project seemed to use a `CREATE TABLE table_name (..)` format, rather than\r\n`CREATE TABLE IF NOT EXISTS table_name (...)`.\r\n\r\nAt least this was the case for me for a turso/sqlite driver/dialect config and drizzle-kit: v0.21.2.\r\n\r\n`drizzle-kit introspect` also did not add `IF NOT EXISTS`.\r\n\r\nShouldn't `IF NOT EXISTS` be use here, so that it can gracefully skip existing tables? The same should apply to index generating statements.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/409/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/409/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/408","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/408/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/408/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/408/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/408","id":2295453825,"node_id":"I_kwDOHoY85M6I0diB","number":408,"title":"[Bug] TypeError: Cannot read properties of undefined (reading 'toString')","user":{"login":"sohhamm","id":54359257,"node_id":"MDQ6VXNlcjU0MzU5MjU3","avatar_url":"https://avatars.githubusercontent.com/u/54359257?v=4","gravatar_id":"","url":"https://api.github.com/users/sohhamm","html_url":"https://github.com/sohhamm","followers_url":"https://api.github.com/users/sohhamm/followers","following_url":"https://api.github.com/users/sohhamm/following{/other_user}","gists_url":"https://api.github.com/users/sohhamm/gists{/gist_id}","starred_url":"https://api.github.com/users/sohhamm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohhamm/subscriptions","organizations_url":"https://api.github.com/users/sohhamm/orgs","repos_url":"https://api.github.com/users/sohhamm/repos","events_url":"https://api.github.com/users/sohhamm/events{/privacy}","received_events_url":"https://api.github.com/users/sohhamm/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-14T13:22:09Z","updated_at":"2024-05-14T13:22:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\r\n-  \"drizzle-kit\": \"^0.21.1\"\r\n\r\n### Describe the Bug\r\nI'm using Supabase as my managed PostgreSQL service which is my source of truth, therefore I'm only using the introspect feature of drizzle-kit, this used to work fine in the version 0.20.x, now I'm getting the error\r\n\r\n<img width=\"962\" alt=\"Screenshot 2024-05-14 at 6 48 58‚ÄØPM\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/54359257/dca0a32a-04b6-4322-b853-19897c1ff064\">\r\n\r\n### Expected behavior\r\nIdeally work seamlessly as the previous version\r\n\r\n### Environment & setup\r\n \r\ndrizzle.config.ts\r\n\r\n`ts\r\nimport 'dotenv/config'\r\nimport {defineConfig} from 'drizzle-kit'\r\n\r\nif (!process.env.DATABASE_URL) {\r\n  console.log('üî¥ Cannot find database url')\r\n}\r\n\r\nexport default defineConfig({\r\n  schema: './migrations/schema.ts',\r\n  out: './migrations',\r\n  dbCredentials: {\r\n    url: process.env.DATABASE_URL,\r\n  },\r\n  verbose: true,\r\n  strict: true,\r\n  dialect: 'postgresql',\r\n})`","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/408/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/408/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/407","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/407/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/407/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/407/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/407","id":2295242084,"node_id":"I_kwDOHoY85M6Izp1k","number":407,"title":"introspect schemaFilter doesn't work for data types","user":{"login":"bageren","id":17334330,"node_id":"MDQ6VXNlcjE3MzM0MzMw","avatar_url":"https://avatars.githubusercontent.com/u/17334330?v=4","gravatar_id":"","url":"https://api.github.com/users/bageren","html_url":"https://github.com/bageren","followers_url":"https://api.github.com/users/bageren/followers","following_url":"https://api.github.com/users/bageren/following{/other_user}","gists_url":"https://api.github.com/users/bageren/gists{/gist_id}","starred_url":"https://api.github.com/users/bageren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bageren/subscriptions","organizations_url":"https://api.github.com/users/bageren/orgs","repos_url":"https://api.github.com/users/bageren/repos","events_url":"https://api.github.com/users/bageren/events{/privacy}","received_events_url":"https://api.github.com/users/bageren/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-14T12:02:56Z","updated_at":"2024-05-28T20:48:30Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm filtering out a schema using `schemaFilter` in the config. It seems to work for everything except data types - it's still including those from the filtered out schema.\r\n\r\ndrizzle-kit version: 0.21.1\r\ndialect: postgresql","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/407/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/406","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/406/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/406/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/406/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/406","id":2293102095,"node_id":"I_kwDOHoY85M6IrfYP","number":406,"title":"[BUG] \"Please install latest version of drizzle-orm\"","user":{"login":"DwieDave","id":15933094,"node_id":"MDQ6VXNlcjE1OTMzMDk0","avatar_url":"https://avatars.githubusercontent.com/u/15933094?v=4","gravatar_id":"","url":"https://api.github.com/users/DwieDave","html_url":"https://github.com/DwieDave","followers_url":"https://api.github.com/users/DwieDave/followers","following_url":"https://api.github.com/users/DwieDave/following{/other_user}","gists_url":"https://api.github.com/users/DwieDave/gists{/gist_id}","starred_url":"https://api.github.com/users/DwieDave/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DwieDave/subscriptions","organizations_url":"https://api.github.com/users/DwieDave/orgs","repos_url":"https://api.github.com/users/DwieDave/repos","events_url":"https://api.github.com/users/DwieDave/events{/privacy}","received_events_url":"https://api.github.com/users/DwieDave/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2024-05-13T15:07:41Z","updated_at":"2024-06-05T09:47:32Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\nI can't make the current drizzle-kit version work with my setup.\r\nNo matter what command I try I am getting this error:\r\n<img width=\"466\" alt=\"grafik\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/15933094/a19b7f2e-056a-4dd3-9cc0-047cb9654728\">\r\n\r\nI am suspecting that npm workspaces might interfere here.\r\nWhen I installed both packages (kit and orm) in one of the workspaces (called backend) with the commands:\r\n```bash\r\nnpm i -w backend drizzle-orm@latest\r\nnpm i -w backend -D drizzle-kit@latest\r\n```\r\n\r\n`drizzle-kit` is located in the `node_modules` directory in the project root and `drizzle-orm` is located in the backend-workspaces `node_modules`.\r\n\r\nHeres what my sub-packages package.json entries look like:\r\n   `\"drizzle-orm\": \"^0.30.10\"`\r\n\r\nand under devDependencies:\r\n    `\"drizzle-kit\": \"^0.21.1\"`\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/406/reactions","total_count":8,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/406/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/405","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/405/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/405/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/405/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/405","id":2292991288,"node_id":"I_kwDOHoY85M6IrEU4","number":405,"title":"[BUG] drizzle studio shows wrong timestamp UTC","user":{"login":"christophmeise","id":12641968,"node_id":"MDQ6VXNlcjEyNjQxOTY4","avatar_url":"https://avatars.githubusercontent.com/u/12641968?v=4","gravatar_id":"","url":"https://api.github.com/users/christophmeise","html_url":"https://github.com/christophmeise","followers_url":"https://api.github.com/users/christophmeise/followers","following_url":"https://api.github.com/users/christophmeise/following{/other_user}","gists_url":"https://api.github.com/users/christophmeise/gists{/gist_id}","starred_url":"https://api.github.com/users/christophmeise/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christophmeise/subscriptions","organizations_url":"https://api.github.com/users/christophmeise/orgs","repos_url":"https://api.github.com/users/christophmeise/repos","events_url":"https://api.github.com/users/christophmeise/events{/privacy}","received_events_url":"https://api.github.com/users/christophmeise/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-13T14:22:00Z","updated_at":"2024-05-13T14:22:00Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I have a timestamp defined in mysql with drizzle schema.\r\n\r\n```\r\nscheduledAt: timestamp(\"scheduledAt\")\r\n``` \r\n\r\nWhen I insert a date it is shown incorrectly in drizzle studio.\r\n\r\nIt shows in drizzle studio: 2024-05-13T13:00:00.000Z\r\nWhen I go into PlanetScale I see that the actual stored value is: 2024-05-13T15:00:00.000Z\r\n\r\nThere is a two hour difference with all my dates shown only in drizzle studio which is not correct.\r\nBoth dates are in ISO 8601, so it should be the same regardless of any possible timezone issues.\r\n\r\nThe date is stored correctly in the database, so it should only be an issue with displaying the value in drizzle studio.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/405/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/404","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/404/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/404/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/404/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/404","id":2292432439,"node_id":"I_kwDOHoY85M6Io743","number":404,"title":"[BUG] A number value is specified as the default for a column of type char","user":{"login":"Karibash","id":40270352,"node_id":"MDQ6VXNlcjQwMjcwMzUy","avatar_url":"https://avatars.githubusercontent.com/u/40270352?v=4","gravatar_id":"","url":"https://api.github.com/users/Karibash","html_url":"https://github.com/Karibash","followers_url":"https://api.github.com/users/Karibash/followers","following_url":"https://api.github.com/users/Karibash/following{/other_user}","gists_url":"https://api.github.com/users/Karibash/gists{/gist_id}","starred_url":"https://api.github.com/users/Karibash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Karibash/subscriptions","organizations_url":"https://api.github.com/users/Karibash/orgs","repos_url":"https://api.github.com/users/Karibash/repos","events_url":"https://api.github.com/users/Karibash/events{/privacy}","received_events_url":"https://api.github.com/users/Karibash/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-13T10:31:46Z","updated_at":"2024-05-13T10:31:46Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\r\n\r\n0.30.10\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.21.0\r\n\r\n### What type of `database` are you using?\r\n\r\nMySQL\r\n\r\n### Describe the Bug\r\n\r\nWhen the default value of a column of type varchar is a numeric string, the default function is passed a numeric value instead of a string when the introspect command is used to generate the schema.\r\n\r\nThis is caused by casting a string to a number without checking whether the column is of type char.\r\n\r\n```ts\r\nconst newColumn = {\r\n  default: columnDefault === null ? void 0 : /^-?[\\d.]+(?:e-?\\d+)?$/.test(columnDefault) && !columnType.startsWith(\"decimal\") ? Number(columnDefault) : isDefaultAnExpression ? clearDefaults(columnDefault, collation) : `'${columnDefault}'`,\r\n  autoincrement: isAutoincrement,\r\n  name: columnName,\r\n  type: changedType,\r\n  primaryKey: false,\r\n  notNull: !isNullable,\r\n  onUpdate\r\n};\r\n```\r\n\r\n### Expected behavior\r\n\r\nIf the column is a char type, the default is also specified as a string.\r\n\r\n### Patch\r\n\r\nThe following patch can be applied as a workaround until this issue is resolved.\r\n\r\n```diff\r\ndiff --git a/bin.cjs b/bin.cjs\r\nindex fef2511d2e2d69c877fc925c281d88aa828f150f..c0ecbb07b62c35b08b8ddf709a7b0a7b67e13aa7 100755\r\n--- a/bin.cjs\r\n+++ b/bin.cjs\r\n@@ -15246,7 +15246,7 @@ We have encountered a collision between the index name on columns ${source_defau\r\n           onUpdate = true;\r\n         }\r\n         const newColumn = {\r\n-          default: columnDefault === null ? void 0 : /^-?[\\d.]+(?:e-?\\d+)?$/.test(columnDefault) && !columnType.startsWith(\"decimal\") ? Number(columnDefault) : isDefaultAnExpression ? clearDefaults(columnDefault, collation) : `'${columnDefault}'`,\r\n+          default: columnDefault === null ? void 0 : /^-?[\\d.]+(?:e-?\\d+)?$/.test(columnDefault) && !['decimal', 'char', 'varchar'].some(type => columnType.startsWith(type)) ? Number(columnDefault) : isDefaultAnExpression ? clearDefaults(columnDefault, collation) : `'${columnDefault}'`,\r\n           autoincrement: isAutoincrement,\r\n           name: columnName,\r\n           type: changedType,\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/404/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/403","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/403/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/403/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/403/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/403","id":2292262070,"node_id":"I_kwDOHoY85M6IoSS2","number":403,"title":"[BUG] When using double type columns, import is not inserted","user":{"login":"Karibash","id":40270352,"node_id":"MDQ6VXNlcjQwMjcwMzUy","avatar_url":"https://avatars.githubusercontent.com/u/40270352?v=4","gravatar_id":"","url":"https://api.github.com/users/Karibash","html_url":"https://github.com/Karibash","followers_url":"https://api.github.com/users/Karibash/followers","following_url":"https://api.github.com/users/Karibash/following{/other_user}","gists_url":"https://api.github.com/users/Karibash/gists{/gist_id}","starred_url":"https://api.github.com/users/Karibash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Karibash/subscriptions","organizations_url":"https://api.github.com/users/Karibash/orgs","repos_url":"https://api.github.com/users/Karibash/repos","events_url":"https://api.github.com/users/Karibash/events{/privacy}","received_events_url":"https://api.github.com/users/Karibash/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-13T09:15:12Z","updated_at":"2024-05-13T09:19:11Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\r\n\r\n0.30.10\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.21.0\r\n\r\n### What type of `database` are you using?\r\n\r\nMySQL\r\n\r\n### Describe the Bug\r\n\r\nWhen generating a schema with the introspect command for a database that has columns with double type columns, import is not inserted.\r\n\r\nThis is because double is not taken into account in the logic that determines whether or not to insert an import.\r\n\r\n```ts\r\nconst columnImports = Object.values(it.columns).map((col) => {\r\n  let patched = importsPatch[col.type] ?? col.type;\r\n  patched = patched.startsWith(\"varchar(\") ? \"varchar\" : patched;\r\n  patched = patched.startsWith(\"char(\") ? \"char\" : patched;\r\n  patched = patched.startsWith(\"binary(\") ? \"binary\" : patched;\r\n  patched = patched.startsWith(\"decimal(\") ? \"decimal\" : patched;\r\n  patched = patched.startsWith(\"smallint(\") ? \"smallint\" : patched;\r\n  patched = patched.startsWith(\"enum(\") ? \"mysqlEnum\" : patched;\r\n  patched = patched.startsWith(\"datetime(\") ? \"datetime\" : patched;\r\n  patched = patched.startsWith(\"varbinary(\") ? \"varbinary\" : patched;\r\n  patched = patched.startsWith(\"int(\") ? \"int\" : patched;\r\n  return patched;\r\n})\r\n```\r\n\r\n### Expected behavior\r\n\r\nIf a column uses type double, import is correctly inserted.\r\n\r\n### Patch\r\n\r\nThe following patch can be applied as a workaround until this issue is resolved.\r\n\r\n```diff\r\ndiff --git a/bin.cjs b/bin.cjs\r\nindex fef2511d2e2d69c877fc925c281d88aa828f150f..12c700646dd7e88184b6a38f604d26f3fa32953a 100755\r\n--- a/bin.cjs\r\n+++ b/bin.cjs\r\n@@ -107701,6 +107701,7 @@ var init_introspect_mysql = __esm({\r\n             patched = patched.startsWith(\"datetime(\") ? \"datetime\" : patched;\r\n             patched = patched.startsWith(\"varbinary(\") ? \"varbinary\" : patched;\r\n             patched = patched.startsWith(\"int(\") ? \"int\" : patched;\r\n+            patched = patched.startsWith(\"double(\") ? \"double\" : patched;\r\n             return patched;\r\n           }).filter((type) => {\r\n             return mysqlImportsList.has(type);\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/403/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/402","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/402/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/402/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/402/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/402","id":2292154434,"node_id":"I_kwDOHoY85M6In4BC","number":402,"title":"[BUG] If the index name is the same as the generated name, it will be empty and a type error will occur","user":{"login":"Karibash","id":40270352,"node_id":"MDQ6VXNlcjQwMjcwMzUy","avatar_url":"https://avatars.githubusercontent.com/u/40270352?v=4","gravatar_id":"","url":"https://api.github.com/users/Karibash","html_url":"https://github.com/Karibash","followers_url":"https://api.github.com/users/Karibash/followers","following_url":"https://api.github.com/users/Karibash/following{/other_user}","gists_url":"https://api.github.com/users/Karibash/gists{/gist_id}","starred_url":"https://api.github.com/users/Karibash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Karibash/subscriptions","organizations_url":"https://api.github.com/users/Karibash/orgs","repos_url":"https://api.github.com/users/Karibash/repos","events_url":"https://api.github.com/users/Karibash/events{/privacy}","received_events_url":"https://api.github.com/users/Karibash/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-13T08:23:33Z","updated_at":"2024-05-13T09:18:13Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\r\n\r\n0.30.10\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.21.0\r\n\r\n### What type of `database` are you using?\r\n\r\nMySQL\r\n\r\n### Describe the Bug\r\n\r\nWhen generating a schema from an existing DB using the introspect command, the index name will be empty if it is identical to the generated name.\r\n\r\n```ts\r\ncreateTableIndexes2 = (tableName, idxs, casing2) => {\r\n  let statement = \"\";\r\n  idxs.forEach((it) => {\r\n    let idxKey = it.name.startsWith(tableName) && it.name !== tableName ? it.name.slice(tableName.length + 1) : it.name;\r\n    idxKey = idxKey.endsWith(\"_index\") ? idxKey.slice(0, -\"_index\".length) + \"_idx\" : idxKey;\r\n    idxKey = casing2(idxKey);\r\n    const indexGeneratedName = indexName(tableName, it.columns);\r\n    const escapedIndexName = indexGeneratedName === it.name ? \"\" : `\"${it.name}\"`;\r\n    statement += `\t\t${idxKey}: `;\r\n    statement += it.isUnique ? \"uniqueIndex(\" : \"index(\";\r\n    statement += `${escapedIndexName})`;\r\n    statement += `.on(${it.columns.map((it2) => `table.${casing2(it2)}`).join(\", \")}),`;\r\n    statement += `\r\n    `;\r\n  });\r\n  return statement;\r\n};\r\n```\r\n\r\nHowever, since the index and uniqueIndex functions must take a string as an argument, a type error occurs.\r\n\r\nhttps://github.com/drizzle-team/drizzle-orm/blob/a78eefe08e127922565486143e0150a718b27e8a/drizzle-orm/src/mysql-core/indexes.ts#L102-L108\r\n\r\n### Expected behavior\r\n\r\nTo avoid type errors, you must always pass the index name.\r\n\r\n### Patch\r\n\r\nThe following patch can be applied as a workaround until this issue is resolved.\r\n\r\n```diff\r\ndiff --git a/bin.cjs b/bin.cjs\r\nindex fef2511d2e2d69c877fc925c281d88aa828f150f..b2bf7b5982518fda91b1ce21efd87e4eb41c58e3 100755\r\n--- a/bin.cjs\r\n+++ b/bin.cjs\r\n@@ -108063,11 +108063,9 @@ import { sql } from \"drizzle-orm\"\r\n         let idxKey = it.name.startsWith(tableName) && it.name !== tableName ? it.name.slice(tableName.length + 1) : it.name;\r\n         idxKey = idxKey.endsWith(\"_index\") ? idxKey.slice(0, -\"_index\".length) + \"_idx\" : idxKey;\r\n         idxKey = casing2(idxKey);\r\n-        const indexGeneratedName = indexName(tableName, it.columns);\r\n-        const escapedIndexName = indexGeneratedName === it.name ? \"\" : `\"${it.name}\"`;\r\n         statement += `\t\t${idxKey}: `;\r\n         statement += it.isUnique ? \"uniqueIndex(\" : \"index(\";\r\n-        statement += `${escapedIndexName})`;\r\n+        statement += `\"${it.name}\")`;\r\n         statement += `.on(${it.columns.map((it2) => `table.${casing2(it2)}`).join(\", \")}),`;\r\n         statement += `\r\n `;\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/402/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/401","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/401/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/401/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/401/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/401","id":2292043459,"node_id":"I_kwDOHoY85M6Inc7D","number":401,"title":"[BUG]:\"drizzle-kit generate\" doesn't generate a migration file when a column is added.","user":{"login":"alirv90","id":150251725,"node_id":"U_kgDOCPSozQ","avatar_url":"https://avatars.githubusercontent.com/u/150251725?v=4","gravatar_id":"","url":"https://api.github.com/users/alirv90","html_url":"https://github.com/alirv90","followers_url":"https://api.github.com/users/alirv90/followers","following_url":"https://api.github.com/users/alirv90/following{/other_user}","gists_url":"https://api.github.com/users/alirv90/gists{/gist_id}","starred_url":"https://api.github.com/users/alirv90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alirv90/subscriptions","organizations_url":"https://api.github.com/users/alirv90/orgs","repos_url":"https://api.github.com/users/alirv90/repos","events_url":"https://api.github.com/users/alirv90/events{/privacy}","received_events_url":"https://api.github.com/users/alirv90/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-13T07:25:34Z","updated_at":"2024-05-14T23:18:15Z","closed_at":"2024-05-14T23:18:15Z","author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\r\n\r\n0.30.10\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.21.1\r\n\r\n### Describe the Bug\r\n\r\n\"drizzle-kit generate\" doesn't generate a migration file when a column is added.\r\n\r\ndrizzle-kit generate work well when I init schema and modify existing field, but when I add a new column, it don't generate any thing.\r\n\r\n[My GitHub repo](https://github.com/alirv90/drizzle-kit-play/tree/main)\r\n\r\n```\r\nrzz@Nguyens drizzle-kit-play % pnpm generate\r\n\r\n> @ generate /Users/rzz/Workspace/drizzle-kit-play\r\n> drizzle-kit generate\r\n\r\ndrizzle-kit: v0.21.1\r\ndrizzle-orm: v0.30.10\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/Users/rzz/Workspace/drizzle-kit-play/drizzle.config.ts'\r\n1 tables\r\nusers 3 columns 0 indexes 0 fks\r\n\r\n[‚úì] Your SQL migration file ‚ûú drizzle/0000_bumpy_mother_askani.sql üöÄ\r\n\r\n\r\n# Make email is unique\r\n\r\nrzz@Nguyens drizzle-kit-play % pnpm generate\r\n\r\n> @ generate /Users/rzz/Workspace/drizzle-kit-play\r\n> drizzle-kit generate\r\n\r\ndrizzle-kit: v0.21.1\r\ndrizzle-orm: v0.30.10\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/Users/rzz/Workspace/drizzle-kit-play/drizzle.config.ts'\r\n1 tables\r\nusers 3 columns 1 indexes 0 fks\r\n\r\n[‚úì] Your SQL migration file ‚ûú drizzle/0001_thankful_nova.sql üöÄ\r\n\r\n# Add password field\r\n\r\nrzz@Nguyens drizzle-kit-play % pnpm generate\r\n\r\n> @ generate /Users/rzz/Workspace/drizzle-kit-play\r\n> drizzle-kit generate\r\n\r\ndrizzle-kit: v0.21.1\r\ndrizzle-orm: v0.30.10\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/Users/rzz/Workspace/drizzle-kit-play/drizzle.config.ts'\r\n1 tables\r\nusers 4 columns 1 indexes 0 fks\r\n\r\nNo schema changes, nothing to migrate üò¥\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/401/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/401/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/400","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/400/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/400/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/400/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/400","id":2291828129,"node_id":"I_kwDOHoY85M6ImoWh","number":400,"title":"PostgreSQL, text array, migrations. `drizzle-kit generate` produces invalid syntax in migration `ALTER` statement","user":{"login":"gburtini","id":780031,"node_id":"MDQ6VXNlcjc4MDAzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/780031?v=4","gravatar_id":"","url":"https://api.github.com/users/gburtini","html_url":"https://github.com/gburtini","followers_url":"https://api.github.com/users/gburtini/followers","following_url":"https://api.github.com/users/gburtini/following{/other_user}","gists_url":"https://api.github.com/users/gburtini/gists{/gist_id}","starred_url":"https://api.github.com/users/gburtini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gburtini/subscriptions","organizations_url":"https://api.github.com/users/gburtini/orgs","repos_url":"https://api.github.com/users/gburtini/repos","events_url":"https://api.github.com/users/gburtini/events{/privacy}","received_events_url":"https://api.github.com/users/gburtini/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-13T05:03:17Z","updated_at":"2024-05-13T15:20:13Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"An ALTER migration generated with `drizzle-kit generate` from a table schema like this:\r\n\r\n```ts\r\npgTable(\"users\", {\r\n  ...\r\n  permissions: text(\"permissions\").array().notNull().default([]),\r\n});\r\n```\r\n\r\nProduces a migration that looks like this:\r\n\r\n```sql\r\nALTER TABLE \"users\" ADD COLUMN \"permissions\" text[] DEFAULT   NOT NULL;\r\n```\r\n\r\nWhich produces an error in all recent Postgres versions I could test out including [16.3](https://www.postgresql.org/about/news/postgresql-163-157-1412-1315-and-1219-released-2858/).\r\n \r\n```\r\nERROR:  syntax error at or near \"NOT\"\r\nLINE 1: ... \"users\" ADD COLUMN \"permissions\" text[] DEFAULT   NOT NULL;\r\n```\r\n\r\nThe correct syntax would include a `{}` Postgres [array literal](https://www.postgresql.org/docs/current/arrays.html#ARRAYS-INPUT).\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/400/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/399","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/399/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/399/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/399/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/399","id":2291542665,"node_id":"I_kwDOHoY85M6IliqJ","number":399,"title":"[bug] `drizzle-kit push` fails on local sqlite3 attempt due to presence of @libsql/client package","user":{"login":"greg-hammond","id":45513541,"node_id":"MDQ6VXNlcjQ1NTEzNTQx","avatar_url":"https://avatars.githubusercontent.com/u/45513541?v=4","gravatar_id":"","url":"https://api.github.com/users/greg-hammond","html_url":"https://github.com/greg-hammond","followers_url":"https://api.github.com/users/greg-hammond/followers","following_url":"https://api.github.com/users/greg-hammond/following{/other_user}","gists_url":"https://api.github.com/users/greg-hammond/gists{/gist_id}","starred_url":"https://api.github.com/users/greg-hammond/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg-hammond/subscriptions","organizations_url":"https://api.github.com/users/greg-hammond/orgs","repos_url":"https://api.github.com/users/greg-hammond/repos","events_url":"https://api.github.com/users/greg-hammond/events{/privacy}","received_events_url":"https://api.github.com/users/greg-hammond/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-12T23:14:40Z","updated_at":"2024-05-25T10:02:21Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Attempting to run `drizzle-kit push` on a local sqlite3 db fails... because my project also has `@libsql/client` installed.\r\n\r\nI have both `better-sqlite3` and `@libsql/client` packages installed... as I want to be able to run dev locally or remotely... as well as push locally or remotely.  I have different npm scripts that set up a `DB_ENV` variable to control how the config operates (see config file below).\r\n\r\nInspecting the code in the `connectToSQLite` function - it will attempt to create a libsql client based on the _presence_ of the `@libsql/client` package... and so my url field ends up being treated as a real url, rather than my local db location path, and so `parseUri` fails with `LibsqlError: URL_INVALID: The URL is not in a valid format`.\r\n\r\nIn this case, it seems that checking for the presence of a specific library being installed is a somewhat poor proxy for deciding what to do.  Would it be better to drive things more directly from config settings, rather than by checking which package(s) are installed? \r\n\r\n\r\nversions:\r\n \r\n```\r\n\"drizzle-kit\": \"^0.21.1\",\r\n\"drizzle-orm\": \"^0.30.10\",\r\n```\r\n\r\nMy `drizzle.config.ts`:\r\n\r\n```\r\nimport type { Config } from 'drizzle-kit'\r\nimport dotenv from 'dotenv'\r\n\r\ndotenv.config()\r\n\r\nconst remoteDB = process.env.DB_ENV === 'remote'\r\n\r\nconst config: Config = {\r\n\tschema: './src/db/schema/*',\r\n\tout: './drizzle/migrations',\r\n\tdialect: 'sqlite',\r\n\t...(remoteDB ? { driver: 'turso' } : {}),\r\n\t...(remoteDB\r\n\t\t? {\r\n\t\t\t\tdbCredentials: {\r\n\t\t\t\t\turl: process.env.DB_URL!,\r\n\t\t\t\t\tauthToken: process.env.DB_AUTH,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t: { dbCredentials: { url: './src/db/dev.db' } }),\r\n\tverbose: true,\r\n\tstrict: true,\r\n}\r\n\r\nexport default config\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/399/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/398","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/398/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/398/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/398/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/398","id":2291346839,"node_id":"I_kwDOHoY85M6Iky2X","number":398,"title":"Change the schema creation SQL in PostgreSQL","user":{"login":"syhily","id":1761698,"node_id":"MDQ6VXNlcjE3NjE2OTg=","avatar_url":"https://avatars.githubusercontent.com/u/1761698?v=4","gravatar_id":"","url":"https://api.github.com/users/syhily","html_url":"https://github.com/syhily","followers_url":"https://api.github.com/users/syhily/followers","following_url":"https://api.github.com/users/syhily/following{/other_user}","gists_url":"https://api.github.com/users/syhily/gists{/gist_id}","starred_url":"https://api.github.com/users/syhily/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syhily/subscriptions","organizations_url":"https://api.github.com/users/syhily/orgs","repos_url":"https://api.github.com/users/syhily/repos","events_url":"https://api.github.com/users/syhily/events{/privacy}","received_events_url":"https://api.github.com/users/syhily/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-12T14:01:52Z","updated_at":"2024-05-12T14:01:52Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Currently the generated migration may contains a schema SQL if I use `pgSchema`.\r\n\r\nFor example, `export const schema = pgSchema('duoshuo');` will generate `CREATE SCHEMA \"duoshuo\";` in the migration file.\r\n\r\nI think we should change it to `CREATE SCHEMA IF NOT EXISTS \"duoshuo\";`.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/398/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/397","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/397/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/397/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/397/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/397","id":2291293061,"node_id":"I_kwDOHoY85M6IkluF","number":397,"title":"[bug]: `drizzle-kit push` is not detecting changes correctly (Turso)","user":{"login":"JoshStwrt","id":89259829,"node_id":"MDQ6VXNlcjg5MjU5ODI5","avatar_url":"https://avatars.githubusercontent.com/u/89259829?v=4","gravatar_id":"","url":"https://api.github.com/users/JoshStwrt","html_url":"https://github.com/JoshStwrt","followers_url":"https://api.github.com/users/JoshStwrt/followers","following_url":"https://api.github.com/users/JoshStwrt/following{/other_user}","gists_url":"https://api.github.com/users/JoshStwrt/gists{/gist_id}","starred_url":"https://api.github.com/users/JoshStwrt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JoshStwrt/subscriptions","organizations_url":"https://api.github.com/users/JoshStwrt/orgs","repos_url":"https://api.github.com/users/JoshStwrt/repos","events_url":"https://api.github.com/users/JoshStwrt/events{/privacy}","received_events_url":"https://api.github.com/users/JoshStwrt/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2024-05-12T11:34:16Z","updated_at":"2024-05-14T18:36:58Z","closed_at":"2024-05-14T18:23:19Z","author_association":"NONE","active_lock_reason":null,"body":"I'm using Turso in local development and attempting to use `drizzle-kit push` but it's not correctly detecting schema changes. For example, it won't simply detect a new column being added to a table. It does seem to detect changes to indexes and constraints. See an example below:\r\n\r\n**Current Schema (already pushed to the database)**\r\n\r\n```\r\nexport let example = sqliteTable('example', {\r\n\tid: text('id').primaryKey()\r\n})\r\n```\r\n\r\n**Proposed Schema Change (without unique constraint)**\r\n```\r\nexport let example = sqliteTable('example', {\r\n\tid: text('id').primaryKey(),\r\n\textraField: text('extra_field')\r\n})\r\n```\r\n\r\nRunning `drizzle-kit push` on the above returns:\r\n```\r\nReading config file '/***<projectpath>***/drizzle.config.ts'\r\n\r\n[i] No changes detected\r\n```\r\n\r\nBut, running `drizzle-kit push` on a change such as the following:\r\n\r\n**Proposed Schema Change (with unique constraint)**\r\n```\r\nexport let example = sqliteTable('example', {\r\n\tid: text('id').primaryKey(),\r\n\textraFieldAndUnique: text('extra_field').unique()\r\n})\r\n```\r\n\r\nPrompts the following, noting the creation of a new unique index **but** not the new column:\r\n```\r\nWarning You are about to execute current statements:\r\n\r\nCREATE UNIQUE INDEX `example_extra_field_unique` ON `example` (`extra_field`);\r\n\r\n  No, abort\r\n‚ùØ Yes, I want to execute all statements\r\n```\r\n\r\n**drizzle.config.ts**\r\n```\r\nexport default defineConfig({\r\n\tdialect: 'sqlite',\r\n\tdriver: 'turso',\r\n\tdbCredentials: {\r\n\t\turl: 'http://localhost:8080'\r\n\t},\r\n\r\n\tschema: './src/lib/server/database/schema/*.ts',\r\n\tstrict: true,\r\n\tverbose: true\r\n})\r\n```\r\n\r\n**Versions**\r\n```\r\n\"drizzle-kit\": \"0.21.1\",\r\n\"drizzle-orm\": \"0.30.10\"\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/397/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/397/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/396","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/396/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/396/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/396/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/396","id":2291283761,"node_id":"I_kwDOHoY85M6Ikjcx","number":396,"title":"My Error Code \"There is not enough information to infer relation \"__public__.postTable.likes\"\"","user":{"login":"novinbooster","id":134519104,"node_id":"U_kgDOCASZQA","avatar_url":"https://avatars.githubusercontent.com/u/134519104?v=4","gravatar_id":"","url":"https://api.github.com/users/novinbooster","html_url":"https://github.com/novinbooster","followers_url":"https://api.github.com/users/novinbooster/followers","following_url":"https://api.github.com/users/novinbooster/following{/other_user}","gists_url":"https://api.github.com/users/novinbooster/gists{/gist_id}","starred_url":"https://api.github.com/users/novinbooster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/novinbooster/subscriptions","organizations_url":"https://api.github.com/users/novinbooster/orgs","repos_url":"https://api.github.com/users/novinbooster/repos","events_url":"https://api.github.com/users/novinbooster/events{/privacy}","received_events_url":"https://api.github.com/users/novinbooster/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-12T11:06:17Z","updated_at":"2024-05-12T11:06:17Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"`\r\nimport { relations } from \"drizzle-orm\"\r\nimport {\r\n\tpgTable,\r\n\tserial,\r\n\ttext,\r\n\ttimestamp,\r\n\tunique,\r\n\tvarchar,\r\n} from \"drizzle-orm/pg-core\"\r\n\r\nconst userTable = pgTable(\"users\", {\r\n\tid: text(\"id\").primaryKey(),\r\n\tname: text(\"name\").notNull(),\r\n\temail: text(\"email\").unique().notNull(),\r\n\timage: varchar(\"image\").notNull(),\r\n\tbio: text(\"bio\").default(\"\").notNull(),\r\n\twebsite: varchar(\"website\").default(\"\").notNull(),\r\n\tusername: varchar(\"username\").unique().notNull(),\r\n})\r\n\r\nconst postTable = pgTable(\"posts\", {\r\n\tid: serial(\"id\").primaryKey(),\r\n\tcontent: text(\"content\").notNull(),\r\n\tcreatedAt: timestamp(\"created_at\").defaultNow().notNull(),\r\n\tuserId: text(\"user_id\")\r\n\t\t.notNull()\r\n\t\t.references(() => userTable.id),\r\n})\r\n\r\nconst likeTable = pgTable(\r\n\t\"likes\",\r\n\t{\r\n\t\tuserId: text(\"user_id\")\r\n\t\t\t.notNull()\r\n\t\t\t.references(() => userTable.id),\r\n\t\tpostId: serial(\"post_id\")\r\n\t\t\t.notNull()\r\n\t\t\t.references(() => postTable.id),\r\n\t\tcreatedAt: timestamp(\"created_at\").defaultNow().notNull(),\r\n\t},\r\n\t(table) => {\r\n\t\treturn {\r\n\t\t\tunq: unique().on(table.userId, table.postId),\r\n\t\t}\r\n\t},\r\n)\r\n\r\nconst usersRelations = relations(userTable, ({ many }) => ({\r\n\tposts: many(postTable),\r\n\tlikes: many(likeTable),\r\n}))\r\n\r\nconst postsRelations = relations(postTable, ({ one, many }) => ({\r\n\tuser: one(userTable, {\r\n\t\tfields: [postTable.userId],\r\n\t\treferences: [userTable.id],\r\n\t}),\r\n\tlikes: many(likeTable),\r\n}))\r\n\r\ntype Post = typeof postTable.$inferSelect & {\r\n\tuser: User\r\n}\r\ntype User = typeof userTable.$inferSelect & {\r\n\tposts: Post[]\r\n}\r\n\r\nexport { likeTable, postTable, postsRelations, userTable, usersRelations }\r\nexport type { Post, User }\r\n\r\n`","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/396/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/395","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/395/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/395/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/395/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/395","id":2290625997,"node_id":"I_kwDOHoY85M6IiC3N","number":395,"title":"[Bug]: `drizzle-kit push` not working when changing the schema","user":{"login":"davidaragundy","id":81494336,"node_id":"MDQ6VXNlcjgxNDk0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/81494336?v=4","gravatar_id":"","url":"https://api.github.com/users/davidaragundy","html_url":"https://github.com/davidaragundy","followers_url":"https://api.github.com/users/davidaragundy/followers","following_url":"https://api.github.com/users/davidaragundy/following{/other_user}","gists_url":"https://api.github.com/users/davidaragundy/gists{/gist_id}","starred_url":"https://api.github.com/users/davidaragundy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidaragundy/subscriptions","organizations_url":"https://api.github.com/users/davidaragundy/orgs","repos_url":"https://api.github.com/users/davidaragundy/repos","events_url":"https://api.github.com/users/davidaragundy/events{/privacy}","received_events_url":"https://api.github.com/users/davidaragundy/received_events","type":"User","site_admin":false},"labels":[{"id":4311178953,"node_id":"LA_kwDOHoY85M8AAAABAPdeyQ","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"assignees":[{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2024-05-11T03:16:06Z","updated_at":"2024-05-22T14:49:50Z","closed_at":"2024-05-22T14:49:50Z","author_association":"NONE","active_lock_reason":null,"body":"This error occurred in `drizzle-kit@0.20.1`.\r\n\r\nI have this table\r\n\r\n```\r\nexport const users = sqliteTable(\"users\", {\r\n  id: text(\"id\").notNull().primaryKey(),\r\n  firstName: text(\"first_name\").notNull(),\r\n  lastName: text(\"last_name\").notNull(),\r\n  username: text(\"username\").notNull().unique(),\r\n  email: text(\"email\").notNull().unique(),\r\n  password: text(\"password\").notNull(),\r\n  avatarUrl: text(\"avatar_url\").notNull(),\r\n  postsCount: integer(\"posts_count\").notNull().default(0),\r\n  followersCount: integer(\"followers_count\").notNull().default(0),\r\n  followingsCount: integer(\"followings_count\").notNull().default(0),\r\n  createdAt: integer(\"created_at\").notNull(),\r\n});\r\n```\r\n\r\nand everything was working but when I change it to this one (deleting the `postsCount` field)\r\n\r\n```\r\nexport const users = sqliteTable(\"users\", {\r\n  id: text(\"id\").notNull().primaryKey(),\r\n  firstName: text(\"first_name\").notNull(),\r\n  lastName: text(\"last_name\").notNull(),\r\n  username: text(\"username\").notNull().unique(),\r\n  email: text(\"email\").notNull().unique(),\r\n  password: text(\"password\").notNull(),\r\n  avatarUrl: text(\"avatar_url\").notNull(),\r\n  followersCount: integer(\"followers_count\").notNull().default(0),\r\n  followingsCount: integer(\"followings_count\").notNull().default(0),\r\n  createdAt: integer(\"created_at\").notNull(),\r\n});\r\n```\r\n\r\nthrows this error:\r\n\r\n![Captura de pantalla 2024-05-10 220538](https://github.com/drizzle-team/drizzle-kit-mirror/assets/81494336/36b9c242-9b3a-4197-b97f-4ced3483504a)\r\n\r\nthe table is empty tho\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/395/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/395/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/394","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/394/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/394/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/394/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/394","id":2289178203,"node_id":"I_kwDOHoY85M6IchZb","number":394,"title":"Drizzle Integration with Bun: async_hooks.createHook not supported and Missing Configuration File Error","user":{"login":"Arunpaneru","id":57716550,"node_id":"MDQ6VXNlcjU3NzE2NTUw","avatar_url":"https://avatars.githubusercontent.com/u/57716550?v=4","gravatar_id":"","url":"https://api.github.com/users/Arunpaneru","html_url":"https://github.com/Arunpaneru","followers_url":"https://api.github.com/users/Arunpaneru/followers","following_url":"https://api.github.com/users/Arunpaneru/following{/other_user}","gists_url":"https://api.github.com/users/Arunpaneru/gists{/gist_id}","starred_url":"https://api.github.com/users/Arunpaneru/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Arunpaneru/subscriptions","organizations_url":"https://api.github.com/users/Arunpaneru/orgs","repos_url":"https://api.github.com/users/Arunpaneru/repos","events_url":"https://api.github.com/users/Arunpaneru/events{/privacy}","received_events_url":"https://api.github.com/users/Arunpaneru/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-10T07:53:35Z","updated_at":"2024-05-10T07:53:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"This issue reports two problems encountered when attempting to integrate Drizzle (versions drizzle-kit v0.20.18 and drizzle-orm v0.30.10) with the Bun JavaScript runtime:\r\n\r\n## Bun Hook Warning:\r\nBun generates a warning message stating async_hooks.createHook is not implemented in Bun. This indicates that Drizzle might be relying on the async_hooks module for asynchronous I/O monitoring, which Bun doesn't currently support.\r\nMissing Configuration File: Drizzle fails to find the default configuration file drizzle.config.json. The error message \"Failed to find Response internal state key\" might be related to this.\r\nExpected Behavior:\r\n\r\nDrizzle should run seamlessly within the Bun environment without warnings or errors.\r\nIf Drizzle cannot leverage async_hooks in Bun, it should fall back on alternative methods or provide a way to disable this functionality.\r\nThe default configuration file drizzle.config.json should be located and used as expected.\r\nAdditional Information:\r\n\r\nBun Version: (Please specify the Bun version you're using)\r\nDrizzle Usage: (Briefly describe how you're using Drizzle in your Bun project)\r\nSteps to Reproduce:\r\n\r\n## Create a Bun project (if applicable).\r\nInstall Drizzle dependencies using bun install drizzle-kit drizzle-orm.\r\nAttempt to run your Drizzle application using Bun's script runner (e.g., bun run generate).\r\nPossible Solutions (to be explored):\r\n\r\n### Investigate Drizzle's compatibility with Bun.\r\nExplore alternative approaches for asynchronous I/O monitoring in Bun.\r\nCreate the missing drizzle.config.json file (if necessary).\r\nConsider using Drizzle in a Node.js environment if Bun compatibility is a challenge.\r\nWe appreciate any insights or suggestions the community might have to resolve this issue and improve Drizzle's integration with Bun.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/394/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/393","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/393/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/393/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/393/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/393","id":2289080881,"node_id":"I_kwDOHoY85M6IcJox","number":393,"title":"[BUG]: drizzle-kit push always updates same timestamp colums","user":{"login":"DanielBaulig","id":158797,"node_id":"MDQ6VXNlcjE1ODc5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/158797?v=4","gravatar_id":"","url":"https://api.github.com/users/DanielBaulig","html_url":"https://github.com/DanielBaulig","followers_url":"https://api.github.com/users/DanielBaulig/followers","following_url":"https://api.github.com/users/DanielBaulig/following{/other_user}","gists_url":"https://api.github.com/users/DanielBaulig/gists{/gist_id}","starred_url":"https://api.github.com/users/DanielBaulig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanielBaulig/subscriptions","organizations_url":"https://api.github.com/users/DanielBaulig/orgs","repos_url":"https://api.github.com/users/DanielBaulig/repos","events_url":"https://api.github.com/users/DanielBaulig/events{/privacy}","received_events_url":"https://api.github.com/users/DanielBaulig/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-05-10T06:57:43Z","updated_at":"2024-05-11T00:29:21Z","closed_at":"2024-05-11T00:29:21Z","author_association":"NONE","active_lock_reason":null,"body":"Whenever I run drizzle-kit push to apply changes to my dev database drizzle insists on reconfiguring all my timestamp columns from `timestamp(3)` to `timestamp (3)` (note the space). This forces me to truncate all my tables whenever I make any changes (or even just run drizzle-kit push without any actual changes).","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/393/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/392","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/392/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/392/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/392/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/392","id":2288267100,"node_id":"I_kwDOHoY85M6IZC9c","number":392,"title":"dialect param config error message is wrong","user":{"login":"ceo0x","id":39812139,"node_id":"MDQ6VXNlcjM5ODEyMTM5","avatar_url":"https://avatars.githubusercontent.com/u/39812139?v=4","gravatar_id":"","url":"https://api.github.com/users/ceo0x","html_url":"https://github.com/ceo0x","followers_url":"https://api.github.com/users/ceo0x/followers","following_url":"https://api.github.com/users/ceo0x/following{/other_user}","gists_url":"https://api.github.com/users/ceo0x/gists{/gist_id}","starred_url":"https://api.github.com/users/ceo0x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ceo0x/subscriptions","organizations_url":"https://api.github.com/users/ceo0x/orgs","repos_url":"https://api.github.com/users/ceo0x/repos","events_url":"https://api.github.com/users/ceo0x/events{/privacy}","received_events_url":"https://api.github.com/users/ceo0x/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-09T18:53:09Z","updated_at":"2024-05-10T17:27:30Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```\r\ndrizzle-kit: v0.21.0\r\ndrizzle-orm: v0.30.10\r\n\r\nNo config path provided, using default path\r\nReading config file '/Users/macuser/Projects/gitscan/drizzle.config.ts'\r\n Invalid input  Please specify 'dialect' param in config, either of 'pg', 'mysql' or 'sqlite'\r\n\r\n```\r\n\r\nIm getting 'pg' as recommendation for the dialect param but dialect accepts the following params : postgresql,mysql,sqlite\r\n\r\n/drizzle-kit/index.d.mts\r\n```\r\ndeclare const dialect: zod.ZodEnum<[\"postgresql\", \"mysql\", \"sqlite\"]>;\r\ntype Dialect = TypeOf<typeof dialect>;\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/392/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/392/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/391","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/391/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/391/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/391/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/391","id":2288246638,"node_id":"I_kwDOHoY85M6IY99u","number":391,"title":"push command incorrectly detects changes","user":{"login":"GetPsyched","id":43472218,"node_id":"MDQ6VXNlcjQzNDcyMjE4","avatar_url":"https://avatars.githubusercontent.com/u/43472218?v=4","gravatar_id":"","url":"https://api.github.com/users/GetPsyched","html_url":"https://github.com/GetPsyched","followers_url":"https://api.github.com/users/GetPsyched/followers","following_url":"https://api.github.com/users/GetPsyched/following{/other_user}","gists_url":"https://api.github.com/users/GetPsyched/gists{/gist_id}","starred_url":"https://api.github.com/users/GetPsyched/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GetPsyched/subscriptions","organizations_url":"https://api.github.com/users/GetPsyched/orgs","repos_url":"https://api.github.com/users/GetPsyched/repos","events_url":"https://api.github.com/users/GetPsyched/events{/privacy}","received_events_url":"https://api.github.com/users/GetPsyched/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-09T18:38:42Z","updated_at":"2024-05-09T18:40:06Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"## Problem\r\n\r\nEver since I've used the `push` command, I get a LONG list of changes that occur even when nothing has changed at all. Since there were a _lot_ of changes, I didn't know where to begin debugging since it might as well be failing on everything that's like, say, an array type; especially given it seemed like an upstream issue.\r\n\r\nBut today, after bumping to latest release `0.21.0`, the number of those changes dropped down to just 4; they're still meaningless and nothing actually changed, but now I could debug it.\r\n\r\n```sql\r\nALTER TABLE \"courses\" ALTER COLUMN \"prerequisites\" SET DEFAULT '{}';\r\nALTER TABLE \"courses\" ALTER COLUMN \"similar_courses\" SET DEFAULT '{}';\r\nALTER TABLE \"club_members\" ALTER COLUMN \"position\" SET DEFAULT 'member';\r\nALTER TABLE \"club_members\" ALTER COLUMN \"internal_groups\" SET DEFAULT '{}';\r\n```\r\n\r\n## Potential cause\r\n\r\nAfter looking around that what's so special about these columns specifically, I'm drawing the conclusion that it occurs for columns with both a `length` constraint and a `default` specifier.\r\n\r\nHere are the column definitions:\r\n```ts\r\n// courses.schema.ts\r\nexport const courses = pgTable('courses', {\r\n  // --- snip ---\r\n  prerequisites: varchar('prerequisites', { length: 7 })\r\n    .array()\r\n    .default(sql`'{}'`)\r\n    .notNull(),\r\n  similarCourses: varchar('similar_courses', { length: 7 })\r\n    .array()\r\n    .default(sql`'{}'`)\r\n    .notNull(),\r\n  // --- snip ---\r\n});\r\n\r\n// club-members.schema.ts\r\nexport const clubMembers = pgTable('club_members', {\r\n  // --- snip ---\r\n  position: varchar('position', { length: 32 }).default('member').notNull(),\r\n  internalGroups: varchar('internal_groups', { length: 32 })\r\n  // --- snip ---\r\n});\r\n```\r\n\r\nThis might be related to #319.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/391/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/390","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/390/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/390/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/390/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/390","id":2287985278,"node_id":"I_kwDOHoY85M6IX-J-","number":390,"title":"`drizzle-kit@0.21.0` uses `@libsql/client`, not installed in the workspace","user":{"login":"hyunbinseo","id":47051820,"node_id":"MDQ6VXNlcjQ3MDUxODIw","avatar_url":"https://avatars.githubusercontent.com/u/47051820?v=4","gravatar_id":"","url":"https://api.github.com/users/hyunbinseo","html_url":"https://github.com/hyunbinseo","followers_url":"https://api.github.com/users/hyunbinseo/followers","following_url":"https://api.github.com/users/hyunbinseo/following{/other_user}","gists_url":"https://api.github.com/users/hyunbinseo/gists{/gist_id}","starred_url":"https://api.github.com/users/hyunbinseo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hyunbinseo/subscriptions","organizations_url":"https://api.github.com/users/hyunbinseo/orgs","repos_url":"https://api.github.com/users/hyunbinseo/repos","events_url":"https://api.github.com/users/hyunbinseo/events{/privacy}","received_events_url":"https://api.github.com/users/hyunbinseo/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-05-09T15:54:11Z","updated_at":"2024-05-10T01:22:43Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"According to the `v0.21.0` [release note](https://github.com/drizzle-team/drizzle-kit-mirror/releases/tag/v0.21.0):\r\n\r\n> For `sqlite` dialect, Drizzle will:\r\n> \r\n> - Check if the `@libsql/client` driver is installed and use it.\r\n> - If not, try to find `better-sqlite3` and use it.\r\n> - If nothing is found, an error will be thrown\r\n\r\nThere seems to be a resolution error with the `pnpm` package manager.\r\n\r\nEven in a workspace where `@libsql/client` is not installed as a (dev) dependency,\r\n\r\n```shell\r\npnpm why better-sqlite3\r\n\r\n# dependencies:\r\n# better-sqlite3 9.6.0\r\n# drizzle-orm 0.30.10\r\n# ‚îî‚îÄ‚îÄ better-sqlite3 9.6.0 peer\r\n\r\npnpm why @libsql/client\r\n\r\n# dependencies:\r\n# drizzle-orm 0.30.10\r\n# ‚îî‚îÄ‚îÄ @libsql/client 0.6.0 peer\r\n```\r\n\r\nThe `drizzle-kit` commands (e.g. `migrate`, `studio`) finds it and uses it instead.\r\n\r\n```\r\nLibsqlError: URL_INVALID: The URL is not in a valid format\r\n    at parseUri (file:///path-to-workspace/node_modules/.pnpm/@libsql+core@0.6.0/node_modules/@libsql/core/lib-esm/uri.js:9:15)\r\n```\r\n\r\nAbility to specify the `better-sqlite3` driver is no longer available.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/390/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/389","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/389/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/389/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/389/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/389","id":2283692985,"node_id":"I_kwDOHoY85M6IHmO5","number":389,"title":"MySQL2 password was converted into low case and cause connection error","user":{"login":"syhily","id":1761698,"node_id":"MDQ6VXNlcjE3NjE2OTg=","avatar_url":"https://avatars.githubusercontent.com/u/1761698?v=4","gravatar_id":"","url":"https://api.github.com/users/syhily","html_url":"https://github.com/syhily","followers_url":"https://api.github.com/users/syhily/followers","following_url":"https://api.github.com/users/syhily/following{/other_user}","gists_url":"https://api.github.com/users/syhily/gists{/gist_id}","starred_url":"https://api.github.com/users/syhily/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syhily/subscriptions","organizations_url":"https://api.github.com/users/syhily/orgs","repos_url":"https://api.github.com/users/syhily/repos","events_url":"https://api.github.com/users/syhily/events{/privacy}","received_events_url":"https://api.github.com/users/syhily/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-07T15:46:30Z","updated_at":"2024-05-07T15:52:51Z","closed_at":"2024-05-07T15:52:51Z","author_association":"NONE","active_lock_reason":null,"body":"My MySQL password contains upper case and special characters.\r\n\r\n<img width=\"392\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/1761698/82b24a48-6116-4926-8249-105b43626dbe\">\r\n\r\nBut the drizzle-kit converts the password into lower case. Why?\r\n\r\n<img width=\"694\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/1761698/537edbb3-7ea7-486a-a7bf-41f2a5299114\">\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/389/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/388","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/388/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/388/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/388/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/388","id":2279727157,"node_id":"I_kwDOHoY85M6H4eA1","number":388,"title":"`--schemaFilter` CLI flag for `push` is broken ","user":{"login":"warflash","id":22006082,"node_id":"MDQ6VXNlcjIyMDA2MDgy","avatar_url":"https://avatars.githubusercontent.com/u/22006082?v=4","gravatar_id":"","url":"https://api.github.com/users/warflash","html_url":"https://github.com/warflash","followers_url":"https://api.github.com/users/warflash/followers","following_url":"https://api.github.com/users/warflash/following{/other_user}","gists_url":"https://api.github.com/users/warflash/gists{/gist_id}","starred_url":"https://api.github.com/users/warflash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/warflash/subscriptions","organizations_url":"https://api.github.com/users/warflash/orgs","repos_url":"https://api.github.com/users/warflash/repos","events_url":"https://api.github.com/users/warflash/events{/privacy}","received_events_url":"https://api.github.com/users/warflash/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-05T20:55:37Z","updated_at":"2024-05-05T20:59:37Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"It seems like currently there's no way to specify the `schemaFilter` property using CLI flags, unlike mentioned in the [docs](https://orm.drizzle.team/kit-docs/commands#prototype--push). \r\n\r\nRunning `npx drizzle-kit push:pg --schemaFilter=[\"public\"]` and variations of it like `npx drizzle-kit push:pg --schemaFilter=public` all result in `error: unknown option '--schemaFilter=public'`\r\n\r\nEdit: Seems like we're not the only ones running into this issue: https://discord.com/channels/1043890932593987624/1144751274852626493/1144751274852626493","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/388/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/387","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/387/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/387/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/387/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/387","id":2276373925,"node_id":"I_kwDOHoY85M6HrrWl","number":387,"title":"Error using drizzle-kit studio with aws-data-api and postgres: Expected region = us-west-1, actual = us-west-2","user":{"login":"zackperdue","id":687572,"node_id":"MDQ6VXNlcjY4NzU3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/687572?v=4","gravatar_id":"","url":"https://api.github.com/users/zackperdue","html_url":"https://github.com/zackperdue","followers_url":"https://api.github.com/users/zackperdue/followers","following_url":"https://api.github.com/users/zackperdue/following{/other_user}","gists_url":"https://api.github.com/users/zackperdue/gists{/gist_id}","starred_url":"https://api.github.com/users/zackperdue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zackperdue/subscriptions","organizations_url":"https://api.github.com/users/zackperdue/orgs","repos_url":"https://api.github.com/users/zackperdue/repos","events_url":"https://api.github.com/users/zackperdue/events{/privacy}","received_events_url":"https://api.github.com/users/zackperdue/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-02T19:56:13Z","updated_at":"2024-05-02T20:03:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Sounds like the RDSDataClient is not receiving correct region from the environment.\r\n\r\n<img width=\"589\" alt=\"Screenshot 2024-05-02 at 1 03 47‚ÄØPM\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/687572/b6b1a120-6d98-425c-877a-24d46e20a9bc\">\r\n\r\n<img width=\"686\" alt=\"Screenshot 2024-05-02 at 1 03 25‚ÄØPM\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/687572/ddb0f3df-4b4f-428d-add5-9b7aa4fa5b21\">\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/387/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/386","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/386/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/386/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/386/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/386","id":2274907877,"node_id":"I_kwDOHoY85M6HmFbl","number":386,"title":"Drizzle studio keeps crashing when I using mysql2 driver","user":{"login":"Keith-Web3","id":96974022,"node_id":"U_kgDOBce0xg","avatar_url":"https://avatars.githubusercontent.com/u/96974022?v=4","gravatar_id":"","url":"https://api.github.com/users/Keith-Web3","html_url":"https://github.com/Keith-Web3","followers_url":"https://api.github.com/users/Keith-Web3/followers","following_url":"https://api.github.com/users/Keith-Web3/following{/other_user}","gists_url":"https://api.github.com/users/Keith-Web3/gists{/gist_id}","starred_url":"https://api.github.com/users/Keith-Web3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Keith-Web3/subscriptions","organizations_url":"https://api.github.com/users/Keith-Web3/orgs","repos_url":"https://api.github.com/users/Keith-Web3/repos","events_url":"https://api.github.com/users/Keith-Web3/events{/privacy}","received_events_url":"https://api.github.com/users/Keith-Web3/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-05-02T08:23:23Z","updated_at":"2024-05-16T00:00:59Z","closed_at":"2024-05-13T10:54:30Z","author_association":"NONE","active_lock_reason":null,"body":"I'm using the mysql2 driver for my drizzle setup. Whenever I try to run the Drizzle Studio, it runs and gives the studio url: `https://local.drizzle.studio` but when I navigate to the link, I get an error in my terminal and the drizzle studio just keeps loading indefinitely. Here's the error I got:\r\n```bash\r\nError: connect ETIMEDOUT\r\n    at PromisePool.query (C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:60148:26)\r\n    at proxy (C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:60483:37)        \r\n    at C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:60628:32\r\n    at dispatch (C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:37750:27)     \r\n    at C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:37751:24\r\n    at C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:37418:15\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async dispatch (C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:37750:21)\r\n    at async cors2 (C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:38926:9)   \r\n    at async dispatch (C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:37750:21) {\r\n  code: 'ETIMEDOUT',\r\n  errno: undefined,\r\n  sql: undefined,\r\n  sqlState: undefined,\r\n  sqlMessage: undefined\r\n}\r\nError: connect ETIMEDOUT\r\n    at PromisePool.query (C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:60148:26)\r\n    at proxy (C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:60483:37)        \r\n    at C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:60628:32\r\n    at dispatch (C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:37750:27)     \r\n    at C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:37751:24\r\n    at C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:37418:15\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async cors2 (C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:38926:9)        \r\n    at async dispatch (C:\\Users\\Doyin\\Desktop\\drizzle-sql\\start\\node_modules\\drizzle-kit\\bin.cjs:37750:21) {  \r\n  code: 'ETIMEDOUT',\r\n  errno: undefined,\r\n  sql: undefined,\r\n  sqlState: undefined,\r\n  sqlMessage: undefined\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/386/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/385","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/385/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/385/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/385/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/385","id":2271861327,"node_id":"I_kwDOHoY85M6HadpP","number":385,"title":"two bug of drizzle-kit introspect:mysql","user":{"login":"hdj258","id":86249088,"node_id":"MDQ6VXNlcjg2MjQ5MDg4","avatar_url":"https://avatars.githubusercontent.com/u/86249088?v=4","gravatar_id":"","url":"https://api.github.com/users/hdj258","html_url":"https://github.com/hdj258","followers_url":"https://api.github.com/users/hdj258/followers","following_url":"https://api.github.com/users/hdj258/following{/other_user}","gists_url":"https://api.github.com/users/hdj258/gists{/gist_id}","starred_url":"https://api.github.com/users/hdj258/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hdj258/subscriptions","organizations_url":"https://api.github.com/users/hdj258/orgs","repos_url":"https://api.github.com/users/hdj258/repos","events_url":"https://api.github.com/users/hdj258/events{/privacy}","received_events_url":"https://api.github.com/users/hdj258/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-30T15:43:01Z","updated_at":"2024-04-30T15:43:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"import { mysqlTable, mysqlSchema, AnyMySqlColumn, unique, varchar, text, tinyint, index, decimal, datetime, int, longtext, foreignKey, double, tinytext, char, mediumtext, date, mysqlEnum } from \"drizzle-orm/mysql-core\"\r\nimport { sql } from \"drizzle-orm\"\r\n\r\nexport const allLocator = mysqlTable(\"all_locator\", {\r\n\tid: bigint(\"id\", { mode: \"number\" }).autoincrement().notNull(),\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\tlocator#locator2: index(\"locator#locator_2\").on(table.locator, table.materialId, table.tenantId, table.deleteFlag),\r\n\t}\r\n});\r\n\r\n1, no import bigint\r\n2, locator#locator2 includes Special symbols, so \"locator#locator2\"","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/385/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/384","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/384/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/384/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/384/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/384","id":2270292096,"node_id":"I_kwDOHoY85M6HUeiA","number":384,"title":"Feature Request: Allow combining config and CLI arguments","user":{"login":"nlnw","id":108184497,"node_id":"U_kgDOBnLDsQ","avatar_url":"https://avatars.githubusercontent.com/u/108184497?v=4","gravatar_id":"","url":"https://api.github.com/users/nlnw","html_url":"https://github.com/nlnw","followers_url":"https://api.github.com/users/nlnw/followers","following_url":"https://api.github.com/users/nlnw/following{/other_user}","gists_url":"https://api.github.com/users/nlnw/gists{/gist_id}","starred_url":"https://api.github.com/users/nlnw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nlnw/subscriptions","organizations_url":"https://api.github.com/users/nlnw/orgs","repos_url":"https://api.github.com/users/nlnw/repos","events_url":"https://api.github.com/users/nlnw/events{/privacy}","received_events_url":"https://api.github.com/users/nlnw/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-30T01:01:02Z","updated_at":"2024-04-30T01:01:25Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"It seems like the CLI only allows you to either use a config or CLI flags. I want to use a drizzle.config.ts for all the common properties, then just override a few like \"schema\" and \"credentials\". Everything else for my databases is shared, so it'd be nice to be able to just have 1 config file and override a few things on the CLI.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/384/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/383","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/383/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/383/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/383/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/383","id":2266141792,"node_id":"I_kwDOHoY85M6HEpRg","number":383,"title":"Drizzle Studio is not working","user":{"login":"satuiro","id":92783629,"node_id":"U_kgDOBYfEDQ","avatar_url":"https://avatars.githubusercontent.com/u/92783629?v=4","gravatar_id":"","url":"https://api.github.com/users/satuiro","html_url":"https://github.com/satuiro","followers_url":"https://api.github.com/users/satuiro/followers","following_url":"https://api.github.com/users/satuiro/following{/other_user}","gists_url":"https://api.github.com/users/satuiro/gists{/gist_id}","starred_url":"https://api.github.com/users/satuiro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satuiro/subscriptions","organizations_url":"https://api.github.com/users/satuiro/orgs","repos_url":"https://api.github.com/users/satuiro/repos","events_url":"https://api.github.com/users/satuiro/events{/privacy}","received_events_url":"https://api.github.com/users/satuiro/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-26T16:41:07Z","updated_at":"2024-05-10T00:17:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm currently trying to access drizzle studio on wsl using the version of drizzle-kit as ^0.20.17. The port 4983 is give an error of 404 Not Found. The console of local.drizzle.studio shows this: \r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/92783629/19daa109-5379-4812-a776-2f8713e006e8)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/383/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/382","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/382/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/382/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/382/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/382","id":2265308113,"node_id":"I_kwDOHoY85M6HBdvR","number":382,"title":"drizzle-kit should throw when connection to db fails","user":{"login":"matjaeck","id":80065804,"node_id":"MDQ6VXNlcjgwMDY1ODA0","avatar_url":"https://avatars.githubusercontent.com/u/80065804?v=4","gravatar_id":"","url":"https://api.github.com/users/matjaeck","html_url":"https://github.com/matjaeck","followers_url":"https://api.github.com/users/matjaeck/followers","following_url":"https://api.github.com/users/matjaeck/following{/other_user}","gists_url":"https://api.github.com/users/matjaeck/gists{/gist_id}","starred_url":"https://api.github.com/users/matjaeck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matjaeck/subscriptions","organizations_url":"https://api.github.com/users/matjaeck/orgs","repos_url":"https://api.github.com/users/matjaeck/repos","events_url":"https://api.github.com/users/matjaeck/events{/privacy}","received_events_url":"https://api.github.com/users/matjaeck/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-26T08:59:58Z","updated_at":"2024-04-26T08:59:58Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Running `drizzle-kit push:sqlite` while providing an invalid path to a db should throw an error. Currently there is no feedback and the CLI pretends that `[‚úì] Changes applied` while it failed in reality.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/382/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/381","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/381/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/381/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/381/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/381","id":2264815924,"node_id":"I_kwDOHoY85M6G_lk0","number":381,"title":"Drizzle studio cli host param does not work when using remote dev (github codespaces)","user":{"login":"KyGuy2002","id":75859301,"node_id":"MDQ6VXNlcjc1ODU5MzAx","avatar_url":"https://avatars.githubusercontent.com/u/75859301?v=4","gravatar_id":"","url":"https://api.github.com/users/KyGuy2002","html_url":"https://github.com/KyGuy2002","followers_url":"https://api.github.com/users/KyGuy2002/followers","following_url":"https://api.github.com/users/KyGuy2002/following{/other_user}","gists_url":"https://api.github.com/users/KyGuy2002/gists{/gist_id}","starred_url":"https://api.github.com/users/KyGuy2002/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KyGuy2002/subscriptions","organizations_url":"https://api.github.com/users/KyGuy2002/orgs","repos_url":"https://api.github.com/users/KyGuy2002/repos","events_url":"https://api.github.com/users/KyGuy2002/events{/privacy}","received_events_url":"https://api.github.com/users/KyGuy2002/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-26T02:16:48Z","updated_at":"2024-05-28T01:13:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The cli has params for host and port, which also append those as url params to the web ui.  If i leave them out on the cli and just add them to the url, I am able to use it in github codespaces.\r\n`https://local.drizzle.studio/?host=yourcodespacename-4983.app.github.dev&port=443`  If i use these same values as params for the cli I get this error:\r\n```\r\nnode:events:496\r\n      throw er; // Unhandled 'error' event\r\n      ^\r\n\r\nError: getaddrinfo ENOTFOUND ieatbeans.com\r\n    at __node_internal_captureLargerStackTrace (node:internal/errors:563:5)\r\n    at __node_internal_ (node:internal/errors:782:10)\r\n    at GetAddrInfoReqWrap.onlookup [as oncomplete] (node:dns:107:26)\r\n    at GetAddrInfoReqWrap.callbackTrampoline (node:internal/async_hooks:130:17)\r\nEmitted 'error' event on Server instance at:\r\n    at GetAddrInfoReqWrap.doListen [as callback] (node:net:2072:12)\r\n    at GetAddrInfoReqWrap.onlookup [as oncomplete] (node:dns:107:17)\r\n    at GetAddrInfoReqWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  errno: -3007,\r\n  code: 'ENOTFOUND',\r\n  syscall: 'getaddrinfo',\r\n  hostname: 'REDACTED BY ME'\r\n}\r\n```\r\n\r\nIm not able to understand what this error means, but im guessing its checking if the address resolves and it doesn't because the api hasn't started yet.\r\n\r\nNot a huge deal because I can just add the url params and its fine, but would be nice if I could have it auto populate those to make it less confusing for developers who will want to just click the link in the terminal.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/381/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/380","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/380/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/380/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/380/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/380","id":2263790279,"node_id":"I_kwDOHoY85M6G7rLH","number":380,"title":"drizzle-kit push:sqlite does not create tables in newly created db","user":{"login":"matjaeck","id":80065804,"node_id":"MDQ6VXNlcjgwMDY1ODA0","avatar_url":"https://avatars.githubusercontent.com/u/80065804?v=4","gravatar_id":"","url":"https://api.github.com/users/matjaeck","html_url":"https://github.com/matjaeck","followers_url":"https://api.github.com/users/matjaeck/followers","following_url":"https://api.github.com/users/matjaeck/following{/other_user}","gists_url":"https://api.github.com/users/matjaeck/gists{/gist_id}","starred_url":"https://api.github.com/users/matjaeck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matjaeck/subscriptions","organizations_url":"https://api.github.com/users/matjaeck/orgs","repos_url":"https://api.github.com/users/matjaeck/repos","events_url":"https://api.github.com/users/matjaeck/events{/privacy}","received_events_url":"https://api.github.com/users/matjaeck/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-25T14:46:24Z","updated_at":"2024-04-26T08:56:52Z","closed_at":"2024-04-26T08:56:51Z","author_association":"NONE","active_lock_reason":null,"body":"I have started to use drizzle (Yey!) but unfortunately I am not able to create tables with `drizzle-kit push:sqlite`. \r\n\r\nHere is what I'm doing:\r\n\r\n``` \r\n> db:push\r\n> drizzle-kit push:sqlite\r\n\r\nNo config path provided, using default path\r\nReading config file '/home/ubuntu/repos/my-repo/drizzle.config.ts'\r\ndrizzle-kit: v0.20.17\r\ndrizzle-orm: v0.30.9\r\n\r\n\r\n Warning  You are about to execute current statements:\r\n\r\nCREATE TABLE `resources` (\r\n        `id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\r\n        `url` text NOT NULL,\r\n        `service_id` integer,\r\n        FOREIGN KEY (`service_id`) REFERENCES `services`(`id`) ON UPDATE no action ON DELETE cascade\r\n);\r\n\r\nCREATE TABLE `services` (\r\n        `id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\r\n        `name` text NOT NULL,\r\n        `vendor_id` integer NOT NULL,\r\n        FOREIGN KEY (`vendor_id`) REFERENCES `vendors`(`id`) ON UPDATE no action ON DELETE cascade\r\n);\r\n\r\nCREATE TABLE `users` (\r\n        `id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\r\n        `email` text NOT NULL,\r\n        `first_name` text NOT NULL,\r\n        `last_name` text NOT NULL,\r\n        `password` text NOT NULL,\r\n        `created_at` integer NOT NULL\r\n);\r\n\r\nCREATE TABLE `vendors` (\r\n        `id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\r\n        `name` text NOT NULL\r\n);\r\n\r\nCREATE TABLE `websites` (\r\n        `id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\r\n        `domain` text NOT NULL,\r\n        `url` text NOT NULL\r\n);\r\n\r\nCREATE UNIQUE INDEX `resources_url_unique` ON `resources` (`url`);\r\nCREATE UNIQUE INDEX `services_name_unique` ON `services` (`name`);\r\nCREATE UNIQUE INDEX `users_email_unique` ON `users` (`email`);\r\nCREATE UNIQUE INDEX `vendors_name_unique` ON `vendors` (`name`);\r\nCREATE UNIQUE INDEX `websites_domain_unique` ON `websites` (`domain`);\r\nCREATE UNIQUE INDEX `websites_url_unique` ON `websites` (`url`);\r\n\r\n[‚úì] Changes applied\r\n```\r\nHowever, no tables have been created. Please help.\r\n\r\nEdit: Within my app, I create or connect to a local sqlite db using [better-sqlite's API](https://github.com/WiseLibs/better-sqlite3/blob/master/docs/api.md#new-databasepath-options). The db exists and I can inspect it with other tools. The app can connect, but queries fail because no tables exist. This is a brand new app without any existing drizzle migrations. OS is Ubuntu 20.04.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/380/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/379","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/379/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/379/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/379/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/379","id":2262224311,"node_id":"I_kwDOHoY85M6G1s23","number":379,"title":"Relations aren't showing in drizzle-kit studio after push.","user":{"login":"TrevorMayo13","id":98941313,"node_id":"U_kgDOBeW5gQ","avatar_url":"https://avatars.githubusercontent.com/u/98941313?v=4","gravatar_id":"","url":"https://api.github.com/users/TrevorMayo13","html_url":"https://github.com/TrevorMayo13","followers_url":"https://api.github.com/users/TrevorMayo13/followers","following_url":"https://api.github.com/users/TrevorMayo13/following{/other_user}","gists_url":"https://api.github.com/users/TrevorMayo13/gists{/gist_id}","starred_url":"https://api.github.com/users/TrevorMayo13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TrevorMayo13/subscriptions","organizations_url":"https://api.github.com/users/TrevorMayo13/orgs","repos_url":"https://api.github.com/users/TrevorMayo13/repos","events_url":"https://api.github.com/users/TrevorMayo13/events{/privacy}","received_events_url":"https://api.github.com/users/TrevorMayo13/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-24T21:32:17Z","updated_at":"2024-04-24T22:05:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When running `npx drizzle-kit push:pg`, my relations aren't pushed to the database. I can't see relations between forms, questions, and fieldOptions (doing a tutorial to learn drizzle). The relations between the user, session, and accounts all work and show correctly on the database within drizzle-kit studio.\r\n\r\nHere's my schema.ts\r\n```\r\nimport {\r\n    timestamp,\r\n    pgTable,\r\n    text,\r\n    primaryKey,\r\n    integer,\r\n    serial,\r\n    boolean,\r\n    pgEnum,\r\n    jsonb\r\n} from \"drizzle-orm/pg-core\";\r\nimport type { AdapterAccount } from \"next-auth/adapters\";\r\nimport { relations } from \"drizzle-orm\";\r\nimport { randomUUID } from \"crypto\";\r\n\r\nexport const formElements = pgEnum(\"field_type\", [\r\n    \"RadioGroup\",\r\n    \"Select\",\r\n    \"Input\",\r\n    \"Textarea\",\r\n    \"Switch\",\r\n]);\r\n\r\nexport const users = pgTable(\"user\", {\r\n    id: text(\"id\")\r\n        .primaryKey()\r\n        .$defaultFn(() => randomUUID()),\r\n    name: text(\"name\"),\r\n    email: text(\"email\").notNull().unique(),\r\n    emailVerified: timestamp(\"emailVerified\", { mode: \"date\" }),\r\n    image: text(\"image\"),\r\n});\r\n\r\nexport const accounts = pgTable(\r\n    \"account\",\r\n    {\r\n        userId: text(\"userId\")\r\n            .notNull()\r\n            .references(() => users.id, { onDelete: \"cascade\" }),\r\n        type: text(\"type\").$type<AdapterAccount[\"type\"]>().notNull(),\r\n        provider: text(\"provider\").notNull(),\r\n        providerAccountId: text(\"providerAccountId\").notNull(),\r\n        refresh_token: text(\"refresh_token\"),\r\n        access_token: text(\"access_token\"),\r\n        expires_at: integer(\"expires_at\"),\r\n        token_type: text(\"token_type\"),\r\n        scope: text(\"scope\"),\r\n        id_token: text(\"id_token\"),\r\n        session_state: text(\"session_state\"),\r\n    },\r\n    (account) => ({\r\n        compoundKey: primaryKey({\r\n            columns: [account.provider, account.providerAccountId],\r\n        }),\r\n    })\r\n);\r\n\r\nexport const sessions = pgTable(\"session\", {\r\n    id: text(\"id\")\r\n        .primaryKey()\r\n        .$defaultFn(() => randomUUID()),\r\n    sessionToken: text(\"sessionToken\").notNull().unique(),\r\n    userId: text(\"userId\")\r\n        .notNull()\r\n        .references(() => users.id, { onDelete: \"cascade\" }),\r\n    expires: timestamp(\"expires\", { mode: \"date\" }).notNull(),\r\n});\r\n\r\nexport const verificationTokens = pgTable(\r\n    \"verificationToken\",\r\n    {\r\n        identifier: text(\"identifier\").notNull(),\r\n        token: text(\"token\").notNull(),\r\n        expires: timestamp(\"expires\", { mode: \"date\" }).notNull(),\r\n    },\r\n    (vt) => ({\r\n        compoundKey: primaryKey({ columns: [vt.identifier, vt.token] }),\r\n    })\r\n);\r\n\r\nexport const forms = pgTable(\"forms\", {\r\n    id: serial(\"id\").primaryKey(),\r\n    name: text(\"name\"),\r\n    description: text(\"description\"),\r\n    userId: text(\"user_id\"),\r\n    published: boolean(\"published\"),\r\n});\r\n\r\nexport const formsRelations = relations(forms, ({ many, one }) => ({\r\n    questions: many(questions),\r\n    user: one(users, {\r\n        fields: [forms.userId],\r\n        references: [users.id],\r\n    }),\r\n}));\r\n\r\nexport const questions = pgTable(\"questions\", {\r\n    id: serial(\"id\").primaryKey(),\r\n    text: text(\"text\"),\r\n    fieldType: formElements(\"field_type\"),\r\n    formId: integer(\"form_id\"),\r\n});\r\n\r\nexport const questionsRelations = relations(questions, ({ one, many }) => ({\r\n    form: one(forms, {\r\n        fields: [questions.formId],\r\n        references: [forms.id],\r\n    }),\r\n    fieldOptions: many(fieldOptions),\r\n}));\r\n\r\nexport const fieldOptions = pgTable(\"field_options\", {\r\n    id: serial(\"id\").primaryKey(),\r\n    text: text(\"text\"),\r\n    value: text(\"value\"),\r\n    questionId: integer(\"question_id\"),\r\n});\r\n\r\nexport const fieldOptionsRelations = relations(fieldOptions, ({ one }) => ({\r\n    question: one(questions, {\r\n        fields: [fieldOptions.questionId],\r\n        references: [questions.id],\r\n    }),\r\n}));\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/379/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/378","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/378/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/378/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/378/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/378","id":2262217054,"node_id":"I_kwDOHoY85M6G1rFe","number":378,"title":"Drizzle studio JSON input crashes frontend","user":{"login":"rkacenski","id":773171,"node_id":"MDQ6VXNlcjc3MzE3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/773171?v=4","gravatar_id":"","url":"https://api.github.com/users/rkacenski","html_url":"https://github.com/rkacenski","followers_url":"https://api.github.com/users/rkacenski/followers","following_url":"https://api.github.com/users/rkacenski/following{/other_user}","gists_url":"https://api.github.com/users/rkacenski/gists{/gist_id}","starred_url":"https://api.github.com/users/rkacenski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rkacenski/subscriptions","organizations_url":"https://api.github.com/users/rkacenski/orgs","repos_url":"https://api.github.com/users/rkacenski/repos","events_url":"https://api.github.com/users/rkacenski/events{/privacy}","received_events_url":"https://api.github.com/users/rkacenski/received_events","type":"User","site_admin":false},"labels":[{"id":5769803325,"node_id":"LA_kwDOHoY85M8AAAABV-g2PQ","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/studio","name":"studio","color":"7F6A16","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"RomanNabukhotnyi","id":97584054,"node_id":"U_kgDOBdEDtg","avatar_url":"https://avatars.githubusercontent.com/u/97584054?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanNabukhotnyi","html_url":"https://github.com/RomanNabukhotnyi","followers_url":"https://api.github.com/users/RomanNabukhotnyi/followers","following_url":"https://api.github.com/users/RomanNabukhotnyi/following{/other_user}","gists_url":"https://api.github.com/users/RomanNabukhotnyi/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanNabukhotnyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanNabukhotnyi/subscriptions","organizations_url":"https://api.github.com/users/RomanNabukhotnyi/orgs","repos_url":"https://api.github.com/users/RomanNabukhotnyi/repos","events_url":"https://api.github.com/users/RomanNabukhotnyi/events{/privacy}","received_events_url":"https://api.github.com/users/RomanNabukhotnyi/received_events","type":"User","site_admin":false},"assignees":[{"login":"RomanNabukhotnyi","id":97584054,"node_id":"U_kgDOBdEDtg","avatar_url":"https://avatars.githubusercontent.com/u/97584054?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanNabukhotnyi","html_url":"https://github.com/RomanNabukhotnyi","followers_url":"https://api.github.com/users/RomanNabukhotnyi/followers","following_url":"https://api.github.com/users/RomanNabukhotnyi/following{/other_user}","gists_url":"https://api.github.com/users/RomanNabukhotnyi/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanNabukhotnyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanNabukhotnyi/subscriptions","organizations_url":"https://api.github.com/users/RomanNabukhotnyi/orgs","repos_url":"https://api.github.com/users/RomanNabukhotnyi/repos","events_url":"https://api.github.com/users/RomanNabukhotnyi/events{/privacy}","received_events_url":"https://api.github.com/users/RomanNabukhotnyi/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2024-04-24T21:27:09Z","updated_at":"2024-05-08T15:42:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"https://github.com/drizzle-team/drizzle-kit-mirror/assets/773171/f3d85752-900e-47da-b6af-d280235d277d\r\n\r\nSee the vid.. when trying to add data to a new row with a column studio errors out with a nondescript error.\r\nDoes not happen when editing after the row is created. My work around is to create the row and then edit the column after.\r\n\r\nUsing\r\n```\r\ndrizzle-kit: v0.20.17\r\ndrizzle-orm: v0.29.1\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/378/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/377","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/377/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/377/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/377/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/377","id":2261274866,"node_id":"I_kwDOHoY85M6GyFDy","number":377,"title":"malformed array literal","user":{"login":"i8ramin","id":49030,"node_id":"MDQ6VXNlcjQ5MDMw","avatar_url":"https://avatars.githubusercontent.com/u/49030?v=4","gravatar_id":"","url":"https://api.github.com/users/i8ramin","html_url":"https://github.com/i8ramin","followers_url":"https://api.github.com/users/i8ramin/followers","following_url":"https://api.github.com/users/i8ramin/following{/other_user}","gists_url":"https://api.github.com/users/i8ramin/gists{/gist_id}","starred_url":"https://api.github.com/users/i8ramin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i8ramin/subscriptions","organizations_url":"https://api.github.com/users/i8ramin/orgs","repos_url":"https://api.github.com/users/i8ramin/repos","events_url":"https://api.github.com/users/i8ramin/events{/privacy}","received_events_url":"https://api.github.com/users/i8ramin/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-24T13:14:10Z","updated_at":"2024-04-24T13:17:52Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The latest version of `drizzle-kit` studio throws a \"malformed array literal\" error when trying to save array values in a jsonb column (this did not happen in a previous version)\r\n\r\nworked in\r\n`\"drizzle-kit\": \"^0.20.14\"`\r\n\r\nbroken in\r\n`\"drizzle-kit\": \"^0.20.17\"`\r\n\r\ncolumn causing the error in schema:\r\n```\r\nstrategies: text('strategies').array(),\r\n```\r\n\r\nvalue input which throws the eror:\r\n```\r\n[\"foo\",\"bar\"]\r\n```\r\n\r\nDetails about the error in console logs:\r\n```\r\n  length: 223,\r\n  severity: 'ERROR',\r\n  code: '22P02',\r\n  detail: '\"[\" must introduce explicitly-specified array dimensions.',\r\n  hint: undefined,\r\n  position: undefined,\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: \"unnamed portal parameter $1 = '...'\",\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: 'arrayfuncs.c',\r\n  line: '272',\r\n  routine: 'array_in'\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/377/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/376","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/376/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/376/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/376/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/376","id":2256205033,"node_id":"I_kwDOHoY85M6GevTp","number":376,"title":"sqlite alter column should list changes","user":{"login":"kelbyfaessler","id":12204680,"node_id":"MDQ6VXNlcjEyMjA0Njgw","avatar_url":"https://avatars.githubusercontent.com/u/12204680?v=4","gravatar_id":"","url":"https://api.github.com/users/kelbyfaessler","html_url":"https://github.com/kelbyfaessler","followers_url":"https://api.github.com/users/kelbyfaessler/followers","following_url":"https://api.github.com/users/kelbyfaessler/following{/other_user}","gists_url":"https://api.github.com/users/kelbyfaessler/gists{/gist_id}","starred_url":"https://api.github.com/users/kelbyfaessler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kelbyfaessler/subscriptions","organizations_url":"https://api.github.com/users/kelbyfaessler/orgs","repos_url":"https://api.github.com/users/kelbyfaessler/repos","events_url":"https://api.github.com/users/kelbyfaessler/events{/privacy}","received_events_url":"https://api.github.com/users/kelbyfaessler/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-22T10:43:55Z","updated_at":"2024-04-22T10:43:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When you attempt to change the column type in a sqlite schema, then generate a migration file, this is the result:\r\n\r\n```\r\n/*\r\n SQLite does not support \"Changing existing column type\" out of the box, we do not generate automatic migration for that, so it has to be done manually\r\n Please refer to: https://www.techonthenet.com/sqlite/tables/alter_table.php\r\n                  https://www.sqlite.org/lang_altertable.html\r\n                  https://stackoverflow.com/questions/2083543/modify-a-columns-type-in-sqlite3\r\n\r\n Due to that we don't generate migration automatically and it has to be done manually\r\n*/\r\n```\r\n\r\nThat's fine, I'd prefer if you generated the SQL for me but I guess I can do it manually.\r\n\r\nBut it'd be nice if the comment included the changes that must be completed manually. For example, `change column <xyz> from type <x> to type <y>`","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/376/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/375","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/375/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/375/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/375/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/375","id":2256199755,"node_id":"I_kwDOHoY85M6GeuBL","number":375,"title":"sqlite migrations should be inside transaction","user":{"login":"kelbyfaessler","id":12204680,"node_id":"MDQ6VXNlcjEyMjA0Njgw","avatar_url":"https://avatars.githubusercontent.com/u/12204680?v=4","gravatar_id":"","url":"https://api.github.com/users/kelbyfaessler","html_url":"https://github.com/kelbyfaessler","followers_url":"https://api.github.com/users/kelbyfaessler/followers","following_url":"https://api.github.com/users/kelbyfaessler/following{/other_user}","gists_url":"https://api.github.com/users/kelbyfaessler/gists{/gist_id}","starred_url":"https://api.github.com/users/kelbyfaessler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kelbyfaessler/subscriptions","organizations_url":"https://api.github.com/users/kelbyfaessler/orgs","repos_url":"https://api.github.com/users/kelbyfaessler/repos","events_url":"https://api.github.com/users/kelbyfaessler/events{/privacy}","received_events_url":"https://api.github.com/users/kelbyfaessler/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-22T10:41:13Z","updated_at":"2024-04-22T10:41:13Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"It seems generated migration files aren't inside a transaction.\r\n\r\nI think they should be.\r\n\r\n- easier to recover from migration errors\r\n- doesn't allow writes to the db when in the middle of a migration","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/375/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/374","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/374/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/374/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/374/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/374","id":2256195903,"node_id":"I_kwDOHoY85M6GetE_","number":374,"title":"sqlite push should be in transaction","user":{"login":"kelbyfaessler","id":12204680,"node_id":"MDQ6VXNlcjEyMjA0Njgw","avatar_url":"https://avatars.githubusercontent.com/u/12204680?v=4","gravatar_id":"","url":"https://api.github.com/users/kelbyfaessler","html_url":"https://github.com/kelbyfaessler","followers_url":"https://api.github.com/users/kelbyfaessler/followers","following_url":"https://api.github.com/users/kelbyfaessler/following{/other_user}","gists_url":"https://api.github.com/users/kelbyfaessler/gists{/gist_id}","starred_url":"https://api.github.com/users/kelbyfaessler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kelbyfaessler/subscriptions","organizations_url":"https://api.github.com/users/kelbyfaessler/orgs","repos_url":"https://api.github.com/users/kelbyfaessler/repos","events_url":"https://api.github.com/users/kelbyfaessler/events{/privacy}","received_events_url":"https://api.github.com/users/kelbyfaessler/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-22T10:39:15Z","updated_at":"2024-04-22T10:39:15Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"It seems the sql commands executed by push:sqlite aren't inside a transaction.\r\n\r\nI'd expect them to be in a transaction, so that if I encounter an error part way through my database isn't left in a weird state and is instead rolled back to where it was prior to the push","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/374/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/373","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/373/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/373/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/373/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/373","id":2256148493,"node_id":"I_kwDOHoY85M6GehgN","number":373,"title":"Drizzle Studio is not opening","user":{"login":"ibrahiim987","id":148002654,"node_id":"U_kgDOCNJXXg","avatar_url":"https://avatars.githubusercontent.com/u/148002654?v=4","gravatar_id":"","url":"https://api.github.com/users/ibrahiim987","html_url":"https://github.com/ibrahiim987","followers_url":"https://api.github.com/users/ibrahiim987/followers","following_url":"https://api.github.com/users/ibrahiim987/following{/other_user}","gists_url":"https://api.github.com/users/ibrahiim987/gists{/gist_id}","starred_url":"https://api.github.com/users/ibrahiim987/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ibrahiim987/subscriptions","organizations_url":"https://api.github.com/users/ibrahiim987/orgs","repos_url":"https://api.github.com/users/ibrahiim987/repos","events_url":"https://api.github.com/users/ibrahiim987/events{/privacy}","received_events_url":"https://api.github.com/users/ibrahiim987/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-22T10:17:07Z","updated_at":"2024-04-22T12:38:46Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The web page at http://0.0.0.0:4983/ might be temporarily down or it may have moved permanently to a new web address.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/373/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/373/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/372","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/372/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/372/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/372/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/372","id":2255455268,"node_id":"I_kwDOHoY85M6Gb4Qk","number":372,"title":"No detected  schema when use bun --bun drizzle-kit push...","user":{"login":"QuangPhamvt","id":120240787,"node_id":"U_kgDOByq6kw","avatar_url":"https://avatars.githubusercontent.com/u/120240787?v=4","gravatar_id":"","url":"https://api.github.com/users/QuangPhamvt","html_url":"https://github.com/QuangPhamvt","followers_url":"https://api.github.com/users/QuangPhamvt/followers","following_url":"https://api.github.com/users/QuangPhamvt/following{/other_user}","gists_url":"https://api.github.com/users/QuangPhamvt/gists{/gist_id}","starred_url":"https://api.github.com/users/QuangPhamvt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/QuangPhamvt/subscriptions","organizations_url":"https://api.github.com/users/QuangPhamvt/orgs","repos_url":"https://api.github.com/users/QuangPhamvt/repos","events_url":"https://api.github.com/users/QuangPhamvt/events{/privacy}","received_events_url":"https://api.github.com/users/QuangPhamvt/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-22T02:34:34Z","updated_at":"2024-04-22T02:34:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"File drizzle.config.ts\r\n```ts\r\nimport { defineConfig } from \"drizzle-kit\";\r\nexport default defineConfig({\r\n  schema: \"src/database/schemas/index.ts\",\r\n  out: \"drizzle\",\r\n  driver: \"mysql2\",\r\n  dbCredentials: {\r\n    host: \"127.0.0.1\",\r\n    port: 3306,\r\n    user: \"root\",\r\n    password: \"12345678\",\r\n    database: \"TEST\",\r\n  },\r\n  verbose: true,\r\n  strict: true,\r\n})\r\n```\r\nFile package.json\r\n```json\r\n{\r\n  \"scripts\": {\r\n       \"db:push\": \"bunx --bun drizzle-kit push:mysql --config drizzle.config.ts\"\r\n  }\r\n}\r\n```\r\nBug\r\n[i] No changes detected","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/372/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/372/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/371","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/371/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/371/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/371/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/371","id":2255210845,"node_id":"I_kwDOHoY85M6Ga8ld","number":371,"title":"`.DS_Store` in migrations/meta breaks everything","user":{"login":"jjjrmy","id":1609800,"node_id":"MDQ6VXNlcjE2MDk4MDA=","avatar_url":"https://avatars.githubusercontent.com/u/1609800?v=4","gravatar_id":"","url":"https://api.github.com/users/jjjrmy","html_url":"https://github.com/jjjrmy","followers_url":"https://api.github.com/users/jjjrmy/followers","following_url":"https://api.github.com/users/jjjrmy/following{/other_user}","gists_url":"https://api.github.com/users/jjjrmy/gists{/gist_id}","starred_url":"https://api.github.com/users/jjjrmy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjjrmy/subscriptions","organizations_url":"https://api.github.com/users/jjjrmy/orgs","repos_url":"https://api.github.com/users/jjjrmy/repos","events_url":"https://api.github.com/users/jjjrmy/events{/privacy}","received_events_url":"https://api.github.com/users/jjjrmy/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-21T18:38:04Z","updated_at":"2024-04-21T18:38:04Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"This one took me a while to figure out, but if there is a `.DS_Store` file in your meta directory, you can't run migrations anymore since it considers that file in the snapshots and can't parse it.\r\n\r\nWe should be filtering out files that start with `.` or look for that file specifically, or only be looking for JSON files.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/371/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/370","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/370/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/370/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/370/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/370","id":2254935553,"node_id":"I_kwDOHoY85M6GZ5YB","number":370,"title":"drizzle-kit: Proxy is not implemented for D1","user":{"login":"harik-crayond","id":107391268,"node_id":"U_kgDOBmapJA","avatar_url":"https://avatars.githubusercontent.com/u/107391268?v=4","gravatar_id":"","url":"https://api.github.com/users/harik-crayond","html_url":"https://github.com/harik-crayond","followers_url":"https://api.github.com/users/harik-crayond/followers","following_url":"https://api.github.com/users/harik-crayond/following{/other_user}","gists_url":"https://api.github.com/users/harik-crayond/gists{/gist_id}","starred_url":"https://api.github.com/users/harik-crayond/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harik-crayond/subscriptions","organizations_url":"https://api.github.com/users/harik-crayond/orgs","repos_url":"https://api.github.com/users/harik-crayond/repos","events_url":"https://api.github.com/users/harik-crayond/events{/privacy}","received_events_url":"https://api.github.com/users/harik-crayond/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2024-04-21T07:02:36Z","updated_at":"2024-04-27T12:56:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### When running Drizzle Studio on https://local.drizzle.studio, I encountered an error message indicating that the proxy is not implemented for D1\r\n\r\n**Drizzle Studio version:  \"^0.20.17\"**\r\n**Node.js version: \"v20.10.0\"**\r\n\r\n_This issue started occurring after updating to Drizzle Studio version 0.20.16_","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/370/reactions","total_count":15,"+1":11,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":4},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/370/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/369","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/369/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/369/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/369/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/369","id":2254778172,"node_id":"I_kwDOHoY85M6GZS88","number":369,"title":"BUG: drizzle-kit push:sqlite - Foriegn keys referencing __old_push_[table name] after ","user":{"login":"CamTheGoblin","id":97644920,"node_id":"U_kgDOBdHxeA","avatar_url":"https://avatars.githubusercontent.com/u/97644920?v=4","gravatar_id":"","url":"https://api.github.com/users/CamTheGoblin","html_url":"https://github.com/CamTheGoblin","followers_url":"https://api.github.com/users/CamTheGoblin/followers","following_url":"https://api.github.com/users/CamTheGoblin/following{/other_user}","gists_url":"https://api.github.com/users/CamTheGoblin/gists{/gist_id}","starred_url":"https://api.github.com/users/CamTheGoblin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CamTheGoblin/subscriptions","organizations_url":"https://api.github.com/users/CamTheGoblin/orgs","repos_url":"https://api.github.com/users/CamTheGoblin/repos","events_url":"https://api.github.com/users/CamTheGoblin/events{/privacy}","received_events_url":"https://api.github.com/users/CamTheGoblin/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-21T00:27:09Z","updated_at":"2024-04-22T03:57:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"## The Issue:\r\nAfter making a change to the schema, and running drizzle-kit push:sqlite, Requests made from my application started getting the following error:\r\n```error\r\n ‚®Ø Internal error: SqliteError: no such table: main.__old_push_[table name]\r\n    at Database.prepare ([path to project]\\node_modules\\.pnpm\\better-sqlite3@9.5.0\\node_modules\\better-sqlite3\\lib\\methods\\wrappers.js:5:21)\r\n    at BetterSQLiteSession.prepareQuery (./node_modules/.pnpm/drizzle-orm@0.30.8_@types+better-sqlite3@7.6.9_@types+react@18.2.79_better-sqlite3@9.5.0_react@18.2.0/node_modules/drizzle-orm/better-sqlite3/session.js:28:30)\r\n    at BetterSQLiteSession.prepareOneTimeQuery (./node_modules/.pnpm/drizzle-orm@0.30.8_@types+better-sqlite3@7.6.9_@types+react@18.2.79_better-sqlite3@9.5.0_react@18.2.0/node_modules/drizzle-orm/sqlite-core/session.js:76:17)\r\n    at QueryPromise._prepare (./node_modules/.pnpm/drizzle-orm@0.30.8_@types+better-sqlite3@7.6.9_@types+react@18.2.79_better-sqlite3@9.5.0_react@18.2.0/node_modules/drizzle-orm/sqlite-core/query-builders/insert.js:135:81)\r\n    at QueryPromise.run (./node_modules/.pnpm/drizzle-orm@0.30.8_@types+better-sqlite3@7.6.9_@types+react@18.2.79_better-sqlite3@9.5.0_react@18.2.0/node_modules/drizzle-orm/sqlite-core/query-builders/insert.js:146:17)\r\n    at QueryPromise.execute (./node_modules/.pnpm/drizzle-orm@0.30.8_@types+better-sqlite3@7.6.9_@types+react@18.2.79_better-sqlite3@9.5.0_react@18.2.0/node_modules/drizzle-orm/sqlite-core/query-builders/insert.js:158:54)\r\n    at QueryPromise.then (./node_modules/.pnpm/drizzle-orm@0.30.8_@types+better-sqlite3@7.6.9_@types+react@18.2.79_better-sqlite3@9.5.0_react@18.2.0/node_modules/drizzle-orm/query-promise.js:26:17)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\ndigest: \"3629522731\"\r\n```\r\n\r\n## Environment\r\ndrizzle-kit version: 0.20.17\r\ndrizzle-orm version: 0.30.8\r\nframework: NextJS\r\n\r\n## Identified Bug:\r\nThe root cause of this error is the fact that the foriegn key values set up using the .references(()=>table.id) syntax in the schema are not being properly migrated, and are left referencing the __old_push_ version of the target table (which I assume only exists for a short time during the push:sqlite process)\r\n\r\n## Work Around:\r\nThe foriegn keys were not really neccessary in my case, so I just removed the .references() calls in the schema and everything works now, but I imagine that wont be a good solution for everyone. ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/369/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/368","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/368/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/368/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/368/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/368","id":2254489064,"node_id":"I_kwDOHoY85M6GYMXo","number":368,"title":"Drizzle studio throws after upgrade 0.20.14 --> 0.20.16","user":{"login":"miktap","id":1317509,"node_id":"MDQ6VXNlcjEzMTc1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317509?v=4","gravatar_id":"","url":"https://api.github.com/users/miktap","html_url":"https://github.com/miktap","followers_url":"https://api.github.com/users/miktap/followers","following_url":"https://api.github.com/users/miktap/following{/other_user}","gists_url":"https://api.github.com/users/miktap/gists{/gist_id}","starred_url":"https://api.github.com/users/miktap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miktap/subscriptions","organizations_url":"https://api.github.com/users/miktap/orgs","repos_url":"https://api.github.com/users/miktap/repos","events_url":"https://api.github.com/users/miktap/events{/privacy}","received_events_url":"https://api.github.com/users/miktap/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-20T10:22:38Z","updated_at":"2024-04-20T12:53:40Z","closed_at":"2024-04-20T12:53:40Z","author_association":"NONE","active_lock_reason":null,"body":"drizzle-orm version: 0.30.8\r\ndrizzle-kit version: 0.20.16\r\n\r\n# Error\r\n\r\nAfter upgrading drizzle-studio from 0.20.14 to 0.20.16 (no other changes in the repository) starting Drizzle studio gives this error:\r\n\r\n```\r\nerror: relation \"public.h_vacuumhead\" does not exist\r\n    at /Users/mikkotapaninen/Desktop/Heina/heina-measurement-engine/node_modules/drizzle-kit/bin.cjs:43639:15\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async proxy (/Users/mikkotapaninen/Desktop/Heina/heina-measurement-engine/node_modules/drizzle-kit/bin.cjs:60358:24)\r\n    at async /Users/mikkotapaninen/Desktop/Heina/heina-measurement-engine/node_modules/drizzle-kit/bin.cjs:60500:26\r\n    at async dispatch (/Users/mikkotapaninen/Desktop/Heina/heina-measurement-engine/node_modules/drizzle-kit/bin.cjs:37750:21)\r\n    at async /Users/mikkotapaninen/Desktop/Heina/heina-measurement-engine/node_modules/drizzle-kit/bin.cjs:37418:9\r\n    at async dispatch (/Users/mikkotapaninen/Desktop/Heina/heina-measurement-engine/node_modules/drizzle-kit/bin.cjs:37750:21)\r\n    at async cors2 (/Users/mikkotapaninen/Desktop/Heina/heina-measurement-engine/node_modules/drizzle-kit/bin.cjs:38926:9)\r\n    at async dispatch (/Users/mikkotapaninen/Desktop/Heina/heina-measurement-engine/node_modules/drizzle-kit/bin.cjs:37750:21)\r\n    at async /Users/mikkotapaninen/Desktop/Heina/heina-measurement-engine/node_modules/drizzle-kit/bin.cjs:38150:29 {\r\n  length: 119,\r\n  severity: 'ERROR',\r\n  code: '42P01',\r\n  detail: undefined,\r\n  hint: undefined,\r\n  position: '139',\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: undefined,\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: 'parse_relation.c',\r\n  line: '1355',\r\n  routine: 'parserOpenTable'\r\n}\r\n```\r\n\r\nThe schema (which I have introspected with drizzle-kit) has not changed and Drizzle studio worked well with version 0.20.14.\r\n\r\nThis is especially annoying as upgrade from 0.20.14 to 0.20.16 was forced and I can't use 0.20.14 anymore üò¢ ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/368/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/367","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/367/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/367/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/367","id":2254397526,"node_id":"I_kwDOHoY85M6GX2BW","number":367,"title":"Drizzle studio throws error when table name contains \"-\"","user":{"login":"afonsopimenta","id":86925626,"node_id":"MDQ6VXNlcjg2OTI1NjI2","avatar_url":"https://avatars.githubusercontent.com/u/86925626?v=4","gravatar_id":"","url":"https://api.github.com/users/afonsopimenta","html_url":"https://github.com/afonsopimenta","followers_url":"https://api.github.com/users/afonsopimenta/followers","following_url":"https://api.github.com/users/afonsopimenta/following{/other_user}","gists_url":"https://api.github.com/users/afonsopimenta/gists{/gist_id}","starred_url":"https://api.github.com/users/afonsopimenta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afonsopimenta/subscriptions","organizations_url":"https://api.github.com/users/afonsopimenta/orgs","repos_url":"https://api.github.com/users/afonsopimenta/repos","events_url":"https://api.github.com/users/afonsopimenta/events{/privacy}","received_events_url":"https://api.github.com/users/afonsopimenta/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-20T05:47:24Z","updated_at":"2024-04-20T17:02:25Z","closed_at":"2024-04-20T10:35:08Z","author_association":"NONE","active_lock_reason":null,"body":"drizzle-orm version: 0.29.5\r\ndrizzle-kit version: 0.20.16\r\nrepository: [https://github.com/afonsopimenta/drizzle-studio-error](https://github.com/afonsopimenta/drizzle-studio-error)\r\n\r\n# Error\r\nAfter I upgrade drizzle-kit version to 0.20.16 `local.drizzle.studio` throws this error when page loads:\r\n```\r\nerror: syntax error at or near \"-\"\r\n    at /Users/afonsopimenta/Desktop/test/node_modules/.pnpm/drizzle-kit@0.20.16/node_modules/drizzle-kit/bin.cjs:43639:15\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async proxy (/Users/afonsopimenta/Desktop/test/node_modules/.pnpm/drizzle-kit@0.20.16/node_modules/drizzle-kit/bin.cjs:60358:24)\r\n    at async /Users/afonsopimenta/Desktop/test/node_modules/.pnpm/drizzle-kit@0.20.16/node_modules/drizzle-kit/bin.cjs:60500:26\r\n    at async dispatch (/Users/afonsopimenta/Desktop/test/node_modules/.pnpm/drizzle-kit@0.20.16/node_modules/drizzle-kit/bin.cjs:37750:21)\r\n    at async /Users/afonsopimenta/Desktop/test/node_modules/.pnpm/drizzle-kit@0.20.16/node_modules/drizzle-kit/bin.cjs:37418:9\r\n    at async dispatch (/Users/afonsopimenta/Desktop/test/node_modules/.pnpm/drizzle-kit@0.20.16/node_modules/drizzle-kit/bin.cjs:37750:21)\r\n    at async cors2 (/Users/afonsopimenta/Desktop/test/node_modules/.pnpm/drizzle-kit@0.20.16/node_modules/drizzle-kit/bin.cjs:38926:9)\r\n    at async dispatch (/Users/afonsopimenta/Desktop/test/node_modules/.pnpm/drizzle-kit@0.20.16/node_modules/drizzle-kit/bin.cjs:37750:21)\r\n    at async /Users/afonsopimenta/Desktop/test/node_modules/.pnpm/drizzle-kit@0.20.16/node_modules/drizzle-kit/bin.cjs:38150:29 {\r\n  length: 90,\r\n  severity: 'ERROR',\r\n  code: '42601',\r\n  detail: undefined,\r\n  hint: undefined,\r\n  position: '77',\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: undefined,\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: 'scan.l',\r\n  line: '1241',\r\n  routine: 'scanner_yyerror'\r\n}\r\n```\r\n\r\nThe error occurs when I set the table prefix to something containing the character \"-\".\r\n`drizzle-kit push:pg` is working fine and so is every query to the database. The issue seems to be with drizzle studio.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/367/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/366","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/366/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/366/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/366/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/366","id":2254106591,"node_id":"I_kwDOHoY85M6GWu_f","number":366,"title":"404 on localhost:4983/init Impossible to Load Drizzle Studio","user":{"login":"versecafe","id":147033096,"node_id":"U_kgDOCMOMCA","avatar_url":"https://avatars.githubusercontent.com/u/147033096?v=4","gravatar_id":"","url":"https://api.github.com/users/versecafe","html_url":"https://github.com/versecafe","followers_url":"https://api.github.com/users/versecafe/followers","following_url":"https://api.github.com/users/versecafe/following{/other_user}","gists_url":"https://api.github.com/users/versecafe/gists{/gist_id}","starred_url":"https://api.github.com/users/versecafe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/versecafe/subscriptions","organizations_url":"https://api.github.com/users/versecafe/orgs","repos_url":"https://api.github.com/users/versecafe/repos","events_url":"https://api.github.com/users/versecafe/events{/privacy}","received_events_url":"https://api.github.com/users/versecafe/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":30,"created_at":"2024-04-19T22:17:29Z","updated_at":"2024-05-05T16:19:17Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"attempting to run `pnpm drizzle-kit studio` starts up on `local.drizzle.studio` but only as a skeleton due to `/init` returning a 404, this is on the latest `0.20.16` and even after downgrading to a previously functioning `0.20.14`\r\n\r\n<img width=\"1312\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/147033096/9ab36323-be1d-4219-a765-74fb9825bdc8\">\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/366/reactions","total_count":3,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/366/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/365","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/365/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/365/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/365/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/365","id":2253818977,"node_id":"I_kwDOHoY85M6GVoxh","number":365,"title":"Timestamp values show as `null` in Drizzle Studio","user":{"login":"hmarr","id":110275,"node_id":"MDQ6VXNlcjExMDI3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/110275?v=4","gravatar_id":"","url":"https://api.github.com/users/hmarr","html_url":"https://github.com/hmarr","followers_url":"https://api.github.com/users/hmarr/followers","following_url":"https://api.github.com/users/hmarr/following{/other_user}","gists_url":"https://api.github.com/users/hmarr/gists{/gist_id}","starred_url":"https://api.github.com/users/hmarr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmarr/subscriptions","organizations_url":"https://api.github.com/users/hmarr/orgs","repos_url":"https://api.github.com/users/hmarr/repos","events_url":"https://api.github.com/users/hmarr/events{/privacy}","received_events_url":"https://api.github.com/users/hmarr/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-19T19:45:36Z","updated_at":"2024-04-20T14:43:02Z","closed_at":"2024-04-20T14:43:02Z","author_association":"NONE","active_lock_reason":null,"body":"As of a recent release, postgres `timestamp` values are showing up as `null` in Drizzle Studio. If I select the cell, I see `Invalid Date` instead. I think it was working within the last week or so, so I suspect it's a recent regression.\r\n\r\n<hr>\r\n\r\nHere's what I'm seeing in Drizzle Studio:\r\n\r\n<img width=\"351\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/110275/980aa83d-b690-49df-ac09-14ce2e42eab4\">\r\n\r\n<hr>\r\n\r\nAnd if I query the table directly in a psql console:\r\n\r\n<img width=\"334\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/110275/0b4bd578-1efd-4d44-9f5d-c46bc0eac639\">\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/365/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/364","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/364/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/364/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/364/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/364","id":2253247198,"node_id":"I_kwDOHoY85M6GTdLe","number":364,"title":"Dashboard could not be seen with version below 0.20.15","user":{"login":"stvncode","id":25082266,"node_id":"MDQ6VXNlcjI1MDgyMjY2","avatar_url":"https://avatars.githubusercontent.com/u/25082266?v=4","gravatar_id":"","url":"https://api.github.com/users/stvncode","html_url":"https://github.com/stvncode","followers_url":"https://api.github.com/users/stvncode/followers","following_url":"https://api.github.com/users/stvncode/following{/other_user}","gists_url":"https://api.github.com/users/stvncode/gists{/gist_id}","starred_url":"https://api.github.com/users/stvncode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stvncode/subscriptions","organizations_url":"https://api.github.com/users/stvncode/orgs","repos_url":"https://api.github.com/users/stvncode/repos","events_url":"https://api.github.com/users/stvncode/events{/privacy}","received_events_url":"https://api.github.com/users/stvncode/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-19T15:10:59Z","updated_at":"2024-04-19T15:14:29Z","closed_at":"2024-04-19T15:14:29Z","author_association":"NONE","active_lock_reason":null,"body":"Following threads on your discord, it looks that everybody couldn't access the dashboard. After looking at the repo, i saw that you did an update (0.20.15) who broke studio. This is just to let you know that.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/364/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/363","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/363/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/363/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/363/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/363","id":2252100442,"node_id":"I_kwDOHoY85M6GPFNa","number":363,"title":"Cannont run Studio with D1","user":{"login":"ilrein","id":5523014,"node_id":"MDQ6VXNlcjU1MjMwMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/5523014?v=4","gravatar_id":"","url":"https://api.github.com/users/ilrein","html_url":"https://github.com/ilrein","followers_url":"https://api.github.com/users/ilrein/followers","following_url":"https://api.github.com/users/ilrein/following{/other_user}","gists_url":"https://api.github.com/users/ilrein/gists{/gist_id}","starred_url":"https://api.github.com/users/ilrein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilrein/subscriptions","organizations_url":"https://api.github.com/users/ilrein/orgs","repos_url":"https://api.github.com/users/ilrein/repos","events_url":"https://api.github.com/users/ilrein/events{/privacy}","received_events_url":"https://api.github.com/users/ilrein/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-19T05:12:00Z","updated_at":"2024-04-19T13:56:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Config below:\r\n\r\n```\r\nimport { defineConfig } from 'drizzle-kit'\r\n\r\nexport default defineConfig({\r\n schema: \"./src/schema.ts\",\r\n  driver: 'd1',\r\n  out: './src/migrations',\r\n  dbCredentials: {\r\n    wranglerConfigPath: './wrangler.toml',\r\n    dbName: 'pokedex'\r\n  },\r\n  verbose: true,\r\n  strict: true,\r\n})\r\n```\r\n\r\nAfter running studio:\r\n\r\n```\r\n\r\nDrizzle Studio is up and running on https://local.drizzle.studio\r\nError:  ‚õÖÔ∏è wrangler 3.51.2\r\n-------------------\r\nüåÄ Mapping SQL input into an array of statements\r\n\r\n\r\n    at PreparedQuery.execute [as stmt] (/Users/iliareingold/projects/pokedex/node_modules/drizzle-kit/bin.cjs:60065:13)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n```\r\n\r\nI seem to always get this `PreparedQuery.execute` error. Would really appreciate any help.\r\n    ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/363/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/363/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/362","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/362/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/362/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/362/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/362","id":2248768669,"node_id":"I_kwDOHoY85M6GCXyd","number":362,"title":"Introspection doesn't work with pg driver on AWS redshift serverless db","user":{"login":"wesharper","id":13283469,"node_id":"MDQ6VXNlcjEzMjgzNDY5","avatar_url":"https://avatars.githubusercontent.com/u/13283469?v=4","gravatar_id":"","url":"https://api.github.com/users/wesharper","html_url":"https://github.com/wesharper","followers_url":"https://api.github.com/users/wesharper/followers","following_url":"https://api.github.com/users/wesharper/following{/other_user}","gists_url":"https://api.github.com/users/wesharper/gists{/gist_id}","starred_url":"https://api.github.com/users/wesharper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wesharper/subscriptions","organizations_url":"https://api.github.com/users/wesharper/orgs","repos_url":"https://api.github.com/users/wesharper/repos","events_url":"https://api.github.com/users/wesharper/events{/privacy}","received_events_url":"https://api.github.com/users/wesharper/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-17T16:58:47Z","updated_at":"2024-04-17T16:58:47Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```txt\r\n[‚úì] 1 tables fetched\r\n[‚£Ø] 0 columns fetching\r\n[‚£Ø] 0 enums fetching\r\n[‚£Ø] 0 indexes fetching\r\n[‚£Ø] 0 foreign keys fetching\r\n\r\nerror: syntax error at or near \"FROM\"\r\n\r\n  length: 131,\r\n  severity: 'ERROR',\r\n  code: '42601',\r\n  detail: undefined,\r\n  hint: undefined,\r\n  position: '208',\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: undefined,\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: '/home/ec2-user/padb/src/pg/src/backend/parser/parser_scan.l',\r\n  line: '821',\r\n  routine: 'yyerror'\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/362/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/361","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/361/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/361/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/361/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/361","id":2247680107,"node_id":"I_kwDOHoY85M6F-OBr","number":361,"title":"Enums broken when instrospecting with schemaFilter","user":{"login":"ViggoV","id":3153568,"node_id":"MDQ6VXNlcjMxNTM1Njg=","avatar_url":"https://avatars.githubusercontent.com/u/3153568?v=4","gravatar_id":"","url":"https://api.github.com/users/ViggoV","html_url":"https://github.com/ViggoV","followers_url":"https://api.github.com/users/ViggoV/followers","following_url":"https://api.github.com/users/ViggoV/following{/other_user}","gists_url":"https://api.github.com/users/ViggoV/gists{/gist_id}","starred_url":"https://api.github.com/users/ViggoV/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ViggoV/subscriptions","organizations_url":"https://api.github.com/users/ViggoV/orgs","repos_url":"https://api.github.com/users/ViggoV/repos","events_url":"https://api.github.com/users/ViggoV/events{/privacy}","received_events_url":"https://api.github.com/users/ViggoV/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-17T08:19:11Z","updated_at":"2024-04-18T23:04:07Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I have been having some issues when instrospecting a postgres schema with enum types. The `PgEnums` are generated in the Drizzle schema, but the columns that use them get an `unknown()` type. It looks like this\r\n\r\n```js\r\nexport const colorEnum = pgEnum('color_enum', ['red','green','blue'])\r\n\r\nexport const myDbSchema = pgSchema('my_db_schema')\r\n\r\nexport const sillyHat = myDbSchema.pgTable('silly hat', {\r\n  id: serial('id').primaryKey(),\r\n  // TODO: failed to parse database type 'fraud_dev.variable_type'\r\n  color: unknown('hat')\r\n})\r\n```\r\n\r\nBased on the inserted comment I believe the issue is that drizzle-kit is trying to access the enum on myDbSchema, but the actual enum is defined outside it, on the database itself.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/361/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/361/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/360","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/360/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/360/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/360/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/360","id":2246981370,"node_id":"I_kwDOHoY85M6F7jb6","number":360,"title":"PGLite driver","user":{"login":"jonatandorozco","id":8442497,"node_id":"MDQ6VXNlcjg0NDI0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/8442497?v=4","gravatar_id":"","url":"https://api.github.com/users/jonatandorozco","html_url":"https://github.com/jonatandorozco","followers_url":"https://api.github.com/users/jonatandorozco/followers","following_url":"https://api.github.com/users/jonatandorozco/following{/other_user}","gists_url":"https://api.github.com/users/jonatandorozco/gists{/gist_id}","starred_url":"https://api.github.com/users/jonatandorozco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonatandorozco/subscriptions","organizations_url":"https://api.github.com/users/jonatandorozco/orgs","repos_url":"https://api.github.com/users/jonatandorozco/repos","events_url":"https://api.github.com/users/jonatandorozco/events{/privacy}","received_events_url":"https://api.github.com/users/jonatandorozco/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-16T22:31:39Z","updated_at":"2024-04-16T22:31:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Currently, the only driver way to connect to a postgres database is by using the pg driver and setting the credentials.\r\n\r\nHowever, pglite does not expose a database url so we cannot use the pg driver directly.\r\n\r\nIs it feasible to build a pglite driver so it can connect with a client directly?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/360/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/360/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/359","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/359/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/359/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/359/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/359","id":2246920064,"node_id":"I_kwDOHoY85M6F7UeA","number":359,"title":"Request to add a `cast` configuration option","user":{"login":"IanMitchell","id":603872,"node_id":"MDQ6VXNlcjYwMzg3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/603872?v=4","gravatar_id":"","url":"https://api.github.com/users/IanMitchell","html_url":"https://github.com/IanMitchell","followers_url":"https://api.github.com/users/IanMitchell/followers","following_url":"https://api.github.com/users/IanMitchell/following{/other_user}","gists_url":"https://api.github.com/users/IanMitchell/gists{/gist_id}","starred_url":"https://api.github.com/users/IanMitchell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IanMitchell/subscriptions","organizations_url":"https://api.github.com/users/IanMitchell/orgs","repos_url":"https://api.github.com/users/IanMitchell/repos","events_url":"https://api.github.com/users/IanMitchell/events{/privacy}","received_events_url":"https://api.github.com/users/IanMitchell/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-16T21:35:15Z","updated_at":"2024-04-16T21:35:15Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I wanted to file an issue for the [discussion we had on Twitter](https://twitter.com/IanMitchel1/status/1779559528058823010) about this problem!\r\n\r\nWhen using the bigint type with PlanetScale or other HTTP drivers there needs to be a translation to convert a bigint into a JSON serializable value. With `drizzle-orm`, this is accomplished with the `cast` optional config parameter:\r\n\r\n```ts\r\nfunction inflate(field: Field, value: string | null) {\r\n\tif (field.type === \"INT64\" || field.type === \"UINT64\") {\r\n\t\treturn BigInt(value ?? 0);\r\n\t}\r\n\r\n\treturn cast(field, value);\r\n}\r\n\r\nconst client = new Client({\r\n\thost: process.env.DATABASE_HOST,\r\n\tusername: process.env.DATABASE_USERNAME,\r\n\tpassword: process.env.DATABASE_PASSWORD,\r\n\tcast: inflate,\r\n});\r\n```\r\n\r\nHowever when using `drizzle-kit`, this option doesn't appear to exist. This results in errors when trying to create a table migration with a bigint column that has a default value set on it (JavaScript doesn't know how to serialize the value into JSON).\r\n\r\n```ts\r\nflags: bigint(\"flags\", { mode: \"bigint\", unsigned: true }).notNull().default(0n)\r\n```\r\n\r\nYou can kind of work around this via `.$defaultFn(() => 0n)`, but you lose out on your database schema enforcing a non-null value. Ideally a cast option would be added to the drizzle-kit configuration options that would allow me to pass in the same `inflate` function!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/359/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/358","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/358/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/358/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/358/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/358","id":2235452718,"node_id":"I_kwDOHoY85M6FPk0u","number":358,"title":"(Feat Studio): Refresh studio when schema changes","user":{"login":"juliomuhlbauer","id":53458125,"node_id":"MDQ6VXNlcjUzNDU4MTI1","avatar_url":"https://avatars.githubusercontent.com/u/53458125?v=4","gravatar_id":"","url":"https://api.github.com/users/juliomuhlbauer","html_url":"https://github.com/juliomuhlbauer","followers_url":"https://api.github.com/users/juliomuhlbauer/followers","following_url":"https://api.github.com/users/juliomuhlbauer/following{/other_user}","gists_url":"https://api.github.com/users/juliomuhlbauer/gists{/gist_id}","starred_url":"https://api.github.com/users/juliomuhlbauer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/juliomuhlbauer/subscriptions","organizations_url":"https://api.github.com/users/juliomuhlbauer/orgs","repos_url":"https://api.github.com/users/juliomuhlbauer/repos","events_url":"https://api.github.com/users/juliomuhlbauer/events{/privacy}","received_events_url":"https://api.github.com/users/juliomuhlbauer/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-10T12:13:01Z","updated_at":"2024-04-16T19:51:04Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":null,"reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/358/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/357","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/357/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/357/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/357/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/357","id":2233574189,"node_id":"I_kwDOHoY85M6FIaMt","number":357,"title":"MySQL DrizzleKit generating failing ALTER TABLE statements in migrations that doesn't include schema name.","user":{"login":"GustavLjungberg","id":151726480,"node_id":"U_kgDOCQspkA","avatar_url":"https://avatars.githubusercontent.com/u/151726480?v=4","gravatar_id":"","url":"https://api.github.com/users/GustavLjungberg","html_url":"https://github.com/GustavLjungberg","followers_url":"https://api.github.com/users/GustavLjungberg/followers","following_url":"https://api.github.com/users/GustavLjungberg/following{/other_user}","gists_url":"https://api.github.com/users/GustavLjungberg/gists{/gist_id}","starred_url":"https://api.github.com/users/GustavLjungberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GustavLjungberg/subscriptions","organizations_url":"https://api.github.com/users/GustavLjungberg/orgs","repos_url":"https://api.github.com/users/GustavLjungberg/repos","events_url":"https://api.github.com/users/GustavLjungberg/events{/privacy}","received_events_url":"https://api.github.com/users/GustavLjungberg/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-09T14:25:56Z","updated_at":"2024-04-10T07:12:28Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Drizzle-kit generates failing migrations on MySQL databases that includes schemas (or databases as mysql calls them) for separating tables.\r\n\r\nAfter looking into the code a bit it seems that this affects these types of statements:\r\n- DROP TABLE\r\n- ALTER TABLE ... RENAME COLUMN\r\n- ALTER TABLE ... DROP COLUMN\r\n- ALTER TABLE ... ADD COLUMN\r\n- ALTER TABLE ... ADD PRIMARY KEY\r\n- ALTER TABLE ... DROP PRIMARY KEY\r\n- ALTER TABLE ... ADD CONSTRAINT\r\n- CREATE INDEX ON ...\r\n\r\n# Steps to reproduce:\r\n\r\n## 1\r\nMake a table schema that includes a mysqlSchema like this for example:\r\n```typescript\r\nconst { mysqlSchema, int } = require(\"drizzle-orm/mysql-core\");\r\n\r\nconst schema = mysqlSchema(\"test\");\r\n\r\nconst table = schema.table(\"table\", {\r\n  id: int(\"Id\").notNull(),\r\n});\r\n\r\nmodule.exports = {\r\n  table,\r\n};\r\n```\r\n## 2\r\nRun `drizzle-kit generate:mysql` to make an intial migration, which generates correctly including the schema name. Included here for completeness:\r\n```sql\r\nCREATE TABLE `test`.`table` (\r\n\t`Id` int NOT NULL\r\n);\r\n```\r\n\r\n### 3\r\nEdit the table in any way, like for example adding a column:\r\n```diff\r\nconst { mysqlSchema, int } = require(\"drizzle-orm/mysql-core\");\r\n\r\nconst schema = mysqlSchema(\"test\");\r\n\r\nconst table = schema.table(\"table\", {\r\n  id: int(\"Id\").notNull(),\r\n+ foo: int(\"Foo\").notNull(),\r\n});\r\n\r\nmodule.exports = {\r\n  table,\r\n};\r\n```\r\n\r\n## 4\r\nRun `drizzle-kit generate:mysql` again \r\n\r\n# Expected result\r\nThe generated migration should contain a statement including the schema name `test` when specifying the table like this\r\n```sql\r\nALTER TABLE `test`.`table` ADD `Foo` int NOT NULL;\r\n```\r\n\r\n# Actual result\r\nThe migration doesn't include the schema name which causes the migration to fail\r\n```sql\r\nALTER TABLE `table` ADD `Foo` int NOT NULL;\r\n```\r\n\r\n# Versions\r\ndrizzle-kit: v0.20.14\r\ndrizzle-orm: v0.30.7\r\nmysql2: 3.9.3","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/357/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/357/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/356","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/356/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/356/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/356/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/356","id":2233540734,"node_id":"I_kwDOHoY85M6FISB-","number":356,"title":"(Feat Studio): Add AI based queries like Supabase ","user":{"login":"juliomuhlbauer","id":53458125,"node_id":"MDQ6VXNlcjUzNDU4MTI1","avatar_url":"https://avatars.githubusercontent.com/u/53458125?v=4","gravatar_id":"","url":"https://api.github.com/users/juliomuhlbauer","html_url":"https://github.com/juliomuhlbauer","followers_url":"https://api.github.com/users/juliomuhlbauer/followers","following_url":"https://api.github.com/users/juliomuhlbauer/following{/other_user}","gists_url":"https://api.github.com/users/juliomuhlbauer/gists{/gist_id}","starred_url":"https://api.github.com/users/juliomuhlbauer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/juliomuhlbauer/subscriptions","organizations_url":"https://api.github.com/users/juliomuhlbauer/orgs","repos_url":"https://api.github.com/users/juliomuhlbauer/repos","events_url":"https://api.github.com/users/juliomuhlbauer/events{/privacy}","received_events_url":"https://api.github.com/users/juliomuhlbauer/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-09T14:10:57Z","updated_at":"2024-04-09T14:10:57Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Option to input your own API Key.\r\n\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/53458125/b98cab80-a78b-45f8-a0f3-1219856b2f52)\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/356/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/355","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/355/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/355/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/355/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/355","id":2229224341,"node_id":"I_kwDOHoY85M6E30OV","number":355,"title":"Introspection Fails with PostgreSQL PostGIS Extension","user":{"login":"NeilCresswell","id":6371440,"node_id":"MDQ6VXNlcjYzNzE0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/6371440?v=4","gravatar_id":"","url":"https://api.github.com/users/NeilCresswell","html_url":"https://github.com/NeilCresswell","followers_url":"https://api.github.com/users/NeilCresswell/followers","following_url":"https://api.github.com/users/NeilCresswell/following{/other_user}","gists_url":"https://api.github.com/users/NeilCresswell/gists{/gist_id}","starred_url":"https://api.github.com/users/NeilCresswell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NeilCresswell/subscriptions","organizations_url":"https://api.github.com/users/NeilCresswell/orgs","repos_url":"https://api.github.com/users/NeilCresswell/repos","events_url":"https://api.github.com/users/NeilCresswell/events{/privacy}","received_events_url":"https://api.github.com/users/NeilCresswell/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-06T12:35:52Z","updated_at":"2024-04-27T02:30:56Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The PostGIS extension is a **very** commonly adopted extension that is used in PostgreSQL databases so lat/lon coordinates can be stored and searches can be run to find records within a particular radius, such as nearby store locations or the closest location.\r\n\r\nAssuming that PostGIS as well as PostgreSQL is installed on your database server, you can add the PostGIS extension into a PostgreSQL database by executing the following SQL against your db:\r\n```sql\r\nCREATE EXTENSION postgis;\r\n```\r\n\r\nRunning `drizzle-kit introspect:pg` after creating the PostGIS extension will generate a schema.ts file, but it is unusable and will cause reference errors to be thrown when trying to initialize Drizzle since Drizzle didn't recognize some of the geographic and geographic data types when trying to introspect the database. I've been able to test Drizzle working fine with a non-geographic custom table in a test database then adding in the extension with no other changes and seeing the reference errors in schema.ts when trying to introspect again.\r\n\r\nIn addition to the reference errors for the extension itself, any attempt to store lat/lon coordinates as geometry points in your custom tables will also fail as introspection doesn't recognize those either. For example the `location` field below will have an unknown datatype in your schema if you try the following:\r\n```sql\r\nCREATE TABLE \"Example\"\r\n(\r\n    id SERIAL NOT NULL,\r\n    name CHARACTER VARYING(123),\r\n    location GEOMETRY(POINT)\r\n);\r\n```\r\n\r\nFor the many folks who have existing PostgreSQL databases with PostGIS extensions, this would be a show-stopper when it comes to adopting Drizzle. I'm very keen to use it myself on a couple of projects (Drizzle is mindblowingly awesome!) and would happily adopt it if Drizzle was usable with PostGIS. Anyhow, I'd like to also express my appreciation for the work done on this project while I'm here.\r\n\r\nHere is part of `schema.ts` showing the failed introspection for the extension itself:\r\n```javascript\r\nexport const geographyColumns = pgTable(\"geography_columns\", {\r\n\t// TODO: failed to parse database type 'name'\r\n\tfTableCatalog: unknown(\"f_table_catalog\"),\r\n\t// TODO: failed to parse database type 'name'\r\n\tfTableSchema: unknown(\"f_table_schema\"),\r\n\t// TODO: failed to parse database type 'name'\r\n\tfTableName: unknown(\"f_table_name\"),\r\n\t// TODO: failed to parse database type 'name'\r\n\tfGeographyColumn: unknown(\"f_geography_column\"),\r\n\tcoordDimension: integer(\"coord_dimension\"),\r\n\tsrid: integer(\"srid\"),\r\n\ttype: text(\"type\"),\r\n});\r\n\r\nexport const geometryColumns = pgTable(\"geometry_columns\", {\r\n\tfTableCatalog: varchar(\"f_table_catalog\", { length: 256 }),\r\n\t// TODO: failed to parse database type 'name'\r\n\tfTableSchema: unknown(\"f_table_schema\"),\r\n\t// TODO: failed to parse database type 'name'\r\n\tfTableName: unknown(\"f_table_name\"),\r\n\t// TODO: failed to parse database type 'name'\r\n\tfGeometryColumn: unknown(\"f_geometry_column\"),\r\n\tcoordDimension: integer(\"coord_dimension\"),\r\n\tsrid: integer(\"srid\"),\r\n\ttype: varchar(\"type\", { length: 30 }),\r\n});\r\n```\r\n\r\nFor the location field example above, here are the relevant lines from `schema.ts`:\r\n```javascript\r\n        // TODO: failed to parse database type 'geometry(Point)'\r\n\tlocation: unknown(\"location\").notNull(),\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/355/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/355/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/354","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/354/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/354/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/354/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/354","id":2226545177,"node_id":"I_kwDOHoY85M6EtmIZ","number":354,"title":"[Question] Where is the source code?","user":{"login":"febeling","id":4313,"node_id":"MDQ6VXNlcjQzMTM=","avatar_url":"https://avatars.githubusercontent.com/u/4313?v=4","gravatar_id":"","url":"https://api.github.com/users/febeling","html_url":"https://github.com/febeling","followers_url":"https://api.github.com/users/febeling/followers","following_url":"https://api.github.com/users/febeling/following{/other_user}","gists_url":"https://api.github.com/users/febeling/gists{/gist_id}","starred_url":"https://api.github.com/users/febeling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/febeling/subscriptions","organizations_url":"https://api.github.com/users/febeling/orgs","repos_url":"https://api.github.com/users/febeling/repos","events_url":"https://api.github.com/users/febeling/events{/privacy}","received_events_url":"https://api.github.com/users/febeling/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-04-04T21:25:10Z","updated_at":"2024-04-13T12:28:43Z","closed_at":"2024-04-06T08:02:35Z","author_association":"NONE","active_lock_reason":null,"body":"The README states this repo is a mirror for docs and issues, which probably means it doesn't contain code, and it doesn't afaict. But I don't find the code repository. Could someone point in the right direction to where it's hosted?\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/354/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/354/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/353","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/353/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/353/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/353/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/353","id":2222188364,"node_id":"I_kwDOHoY85M6Ec-dM","number":353,"title":"How does the hashing works in migration table? ","user":{"login":"chungweileong94","id":15154097,"node_id":"MDQ6VXNlcjE1MTU0MDk3","avatar_url":"https://avatars.githubusercontent.com/u/15154097?v=4","gravatar_id":"","url":"https://api.github.com/users/chungweileong94","html_url":"https://github.com/chungweileong94","followers_url":"https://api.github.com/users/chungweileong94/followers","following_url":"https://api.github.com/users/chungweileong94/following{/other_user}","gists_url":"https://api.github.com/users/chungweileong94/gists{/gist_id}","starred_url":"https://api.github.com/users/chungweileong94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chungweileong94/subscriptions","organizations_url":"https://api.github.com/users/chungweileong94/orgs","repos_url":"https://api.github.com/users/chungweileong94/repos","events_url":"https://api.github.com/users/chungweileong94/events{/privacy}","received_events_url":"https://api.github.com/users/chungweileong94/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-03T07:58:04Z","updated_at":"2024-04-03T07:58:04Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm trying to figure out how to deal with the merge conflict in the migration journal, currently what we do in our team is we will drop the existing migration, and regenerate the migration script one by one to resolve the merge conflict.\r\n\r\nHowever, recently we faced an issue where some of the scripts were skipped on our production DB, and we had to manually ran those scripts manually to workaround. Which is why I'm curious to know how the hash value is generated in the migration table, and any tips to resolve the merge conflict in the journal.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/353/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/353/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/352","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/352/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/352/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/352/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/352","id":2214464078,"node_id":"I_kwDOHoY85M6D_gpO","number":352,"title":"BUG: introspect generates broken schema when custom types are used","user":{"login":"mariusflorescu","id":73541683,"node_id":"MDQ6VXNlcjczNTQxNjgz","avatar_url":"https://avatars.githubusercontent.com/u/73541683?v=4","gravatar_id":"","url":"https://api.github.com/users/mariusflorescu","html_url":"https://github.com/mariusflorescu","followers_url":"https://api.github.com/users/mariusflorescu/followers","following_url":"https://api.github.com/users/mariusflorescu/following{/other_user}","gists_url":"https://api.github.com/users/mariusflorescu/gists{/gist_id}","starred_url":"https://api.github.com/users/mariusflorescu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mariusflorescu/subscriptions","organizations_url":"https://api.github.com/users/mariusflorescu/orgs","repos_url":"https://api.github.com/users/mariusflorescu/repos","events_url":"https://api.github.com/users/mariusflorescu/events{/privacy}","received_events_url":"https://api.github.com/users/mariusflorescu/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-29T01:58:05Z","updated_at":"2024-04-15T14:43:22Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm using supabase for auth and db and I would like to use drizzle as the ORM.\r\n\r\nTo reference the user id I need to introspect the db against the `auth` schema. This runs successfully but the `schema.ts` is broken.\r\n\r\nI'm going to post few of the broken parts (with custom types)\r\n```\r\n\t// TODO: failed to parse database type 'auth.factor_type'\r\n\tfactorType: unknown(\"factor_type\").notNull(),\r\n\t// TODO: failed to parse database type 'auth.factor_status'\r\n\tstatus: unknown(\"status\").notNull(),\r\n```\r\n\r\nAlso, nullable text fields seem to have a problem:\r\n```\r\nphone: text(\"phone\").default(NULL::character varying),\r\n```\r\nThe part with `::character varying` is what makes it broken.\r\n\r\nAccording to #238, also custom functions generate broken schemas.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/352/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/352/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/351","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/351/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/351/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/351/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/351","id":2211861906,"node_id":"I_kwDOHoY85M6D1lWS","number":351,"title":"`d1` driver setting gives: Either \"turso\", \"libsql\", \"better-sqlite\" are available options for \"--driver\"","user":{"login":"marceloverdijk","id":197004,"node_id":"MDQ6VXNlcjE5NzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/197004?v=4","gravatar_id":"","url":"https://api.github.com/users/marceloverdijk","html_url":"https://github.com/marceloverdijk","followers_url":"https://api.github.com/users/marceloverdijk/followers","following_url":"https://api.github.com/users/marceloverdijk/following{/other_user}","gists_url":"https://api.github.com/users/marceloverdijk/gists{/gist_id}","starred_url":"https://api.github.com/users/marceloverdijk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marceloverdijk/subscriptions","organizations_url":"https://api.github.com/users/marceloverdijk/orgs","repos_url":"https://api.github.com/users/marceloverdijk/repos","events_url":"https://api.github.com/users/marceloverdijk/events{/privacy}","received_events_url":"https://api.github.com/users/marceloverdijk/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-27T20:36:03Z","updated_at":"2024-03-28T06:52:40Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Using `\"drizzle-kit\": \"^0.20.14\"`\r\n\r\nand the following config file:\r\n\r\n```\r\nimport { defineConfig } from 'drizzle-kit';\r\n\r\nexport default defineConfig({\r\n  schema: './src/model/schema.ts',\r\n  out: './drizzle',\r\n  driver: 'd1',\r\n  dbCredentials: {\r\n    wranglerConfigPath: 'wrangler.toml',\r\n    dbName: 'f1db',\r\n  },\r\n});\r\n```\r\n\r\nand running the following npm script:\r\n```\r\n\"generate-drizzle-schema\": \"drizzle-kit introspect:sqlite --config=drizzle.codegen.ts\",\r\n```\r\n\r\ngivers:\r\n\r\n> Either \"turso\", \"libsql\", \"better-sqlite\" are available options for \"--driver\"\r\n\r\nIt seems the `d1` driver setting is not recognised as valid setting, although documented here:\r\nhttps://orm.drizzle.team/kit-docs/config-reference#driver\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/351/reactions","total_count":13,"+1":13,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/351/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/350","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/350/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/350/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/350/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/350","id":2206240855,"node_id":"I_kwDOHoY85M6DgJBX","number":350,"title":"Support for PostgreSQL PostGIS with DB push","user":{"login":"nrdobie","id":702677,"node_id":"MDQ6VXNlcjcwMjY3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/702677?v=4","gravatar_id":"","url":"https://api.github.com/users/nrdobie","html_url":"https://github.com/nrdobie","followers_url":"https://api.github.com/users/nrdobie/followers","following_url":"https://api.github.com/users/nrdobie/following{/other_user}","gists_url":"https://api.github.com/users/nrdobie/gists{/gist_id}","starred_url":"https://api.github.com/users/nrdobie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nrdobie/subscriptions","organizations_url":"https://api.github.com/users/nrdobie/orgs","repos_url":"https://api.github.com/users/nrdobie/repos","events_url":"https://api.github.com/users/nrdobie/events{/privacy}","received_events_url":"https://api.github.com/users/nrdobie/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-03-25T16:58:23Z","updated_at":"2024-04-18T11:08:06Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When attempting to use the PostgreSQL PostGIS `geometry` data type, `drizzle-kit` will currently quote it and break the ability to use DB push.\r\n\r\nThis is the custom type I am trying to use:\r\n\r\n```typescript\r\nimport { customType } from \"drizzle-orm/pg-core\";\r\n\r\nexport type Point = {\r\n  longitude: number;\r\n  latitude: number;\r\n};\r\n\r\nexport const point = customType<{\r\n  data: Point;\r\n  driverData: string;\r\n}>({\r\n  dataType() {\r\n    return \"geometry(point, 4326)\";\r\n  },\r\n  toDriver(value: Point): string {\r\n    return `SRID=4326;POINT(${value.longitude} ${value.latitude})`;\r\n  },\r\n  fromDriver(value: string): Point {\r\n    const matches = value.match(\r\n      /POINT\\((?<longitude>[\\d.-]+) (?<latitude>[\\d.-]+)\\)/,\r\n    );\r\n\r\n    if (!matches) {\r\n      throw new Error(\"Invalid point format\");\r\n    }\r\n\r\n    const { longitude, latitude } = matches.groups as {\r\n      longitude: string;\r\n      latitude: string;\r\n    };\r\n\r\n    return {\r\n      longitude: parseFloat(longitude),\r\n      latitude: parseFloat(latitude),\r\n    };\r\n  },\r\n});\r\n```\r\n\r\nThis is the generated SQL:\r\n\r\n```sql\r\nCREATE TABLE IF NOT EXISTS \"location_test\" (\r\n\t\"id\" varchar(24) PRIMARY KEY NOT NULL,\r\n\t\"name\" varchar(256) NOT NULL,\r\n\t\"location\" \"geometry(point, 4326)\" NOT NULL\r\n);\r\n```\r\n\r\nThe issue comes specifically from this line in the Drizzle Kit code:\r\n\r\n```typescript\r\nconst type = isPgNativeType(column7.type) ? column7.type : `\"${column7.type}\"`;\r\n```\r\n\r\nEither extend `isPgNativeType` to include geometry as a native type or add support for using the `sql` or `sql.raw` as part of the `dataType` return.\r\n\r\n```typescript\r\nexport const point = customType<{\r\n  data: Point;\r\n  driverData: string;\r\n}>({\r\n  dataType() {\r\n    return sql.raw`geometry(point, 4326)`;\r\n  },\r\n  // ...\r\n});\r\n```\r\n\r\nThis would make using drizzle with geospatial data usable.\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/350/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/350/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/349","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/349/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/349/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/349/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/349","id":2204757665,"node_id":"I_kwDOHoY85M6Dae6h","number":349,"title":"Allow sqlite foreign key constraints to be disabled and enabled in migrations (`PRAGMA foreign_keys`)","user":{"login":"aaroned","id":2232192,"node_id":"MDQ6VXNlcjIyMzIxOTI=","avatar_url":"https://avatars.githubusercontent.com/u/2232192?v=4","gravatar_id":"","url":"https://api.github.com/users/aaroned","html_url":"https://github.com/aaroned","followers_url":"https://api.github.com/users/aaroned/followers","following_url":"https://api.github.com/users/aaroned/following{/other_user}","gists_url":"https://api.github.com/users/aaroned/gists{/gist_id}","starred_url":"https://api.github.com/users/aaroned/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aaroned/subscriptions","organizations_url":"https://api.github.com/users/aaroned/orgs","repos_url":"https://api.github.com/users/aaroned/repos","events_url":"https://api.github.com/users/aaroned/events{/privacy}","received_events_url":"https://api.github.com/users/aaroned/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-03-25T02:31:33Z","updated_at":"2024-05-31T23:44:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The sqlite `migrate` uses a batch transaction to execute the migrations. \r\n\r\nHowever:\r\n\r\n1. certain changes to sqlite databases with foreign key constraints enabled will need to use `PRAGMA foreign_keys = OFF` and `PRAGMA foreign_keys = ON` [https://www.sqlite.org/lang_altertable.html#making_other_kinds_of_table_schema_changes](url), and \r\n2. these `PRAGMA` statements are not supported inside transactions [https://www.sqlite.org/pragma.html#pragma_foreign_keys](url).\r\n\r\nOne idea is to script a transaction for each migration in the generated migration sql file. Then in `migrate` detect these transactions and execute them using `batch`, whilst using `run` for all other statements outside the transaction. (The migration table `INSERT` would also have to be scripted into the migration sql file inside the transaction)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/349/reactions","total_count":4,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/349/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/348","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/348/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/348/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/348/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/348","id":2203837661,"node_id":"I_kwDOHoY85M6DW-Td","number":348,"title":"When you try to create a record in studio, and it fails, there is a flash of ui (I assume an error message) and the state of the partial record is lost. ","user":{"login":"swalker326","id":8460808,"node_id":"MDQ6VXNlcjg0NjA4MDg=","avatar_url":"https://avatars.githubusercontent.com/u/8460808?v=4","gravatar_id":"","url":"https://api.github.com/users/swalker326","html_url":"https://github.com/swalker326","followers_url":"https://api.github.com/users/swalker326/followers","following_url":"https://api.github.com/users/swalker326/following{/other_user}","gists_url":"https://api.github.com/users/swalker326/gists{/gist_id}","starred_url":"https://api.github.com/users/swalker326/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/swalker326/subscriptions","organizations_url":"https://api.github.com/users/swalker326/orgs","repos_url":"https://api.github.com/users/swalker326/repos","events_url":"https://api.github.com/users/swalker326/events{/privacy}","received_events_url":"https://api.github.com/users/swalker326/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-23T11:35:00Z","updated_at":"2024-03-23T11:35:00Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"As the title says, if I try to insert a record and don't put all the required fields/incorrect types. I see a flash of the error message and then all my fields are wiped away. \r\n\r\nI think ideally, I would see the whole error message and the incorrect inputs with the values I typed would still be there so I could edit/retry. \r\n\r\n_As a side note, the gif also shows a slightly annoying bug, when I type a value into a field and press enter the value just vanishes._\r\n\r\n![aa812a44-40b1-4a2f-8a33-403c5cf9c985](https://github.com/drizzle-team/drizzle-kit-mirror/assets/8460808/8496f574-24af-4af9-ab4a-8602f62572d3)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/348/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/348/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/347","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/347/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/347/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/347/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/347","id":2203819078,"node_id":"I_kwDOHoY85M6DW5xG","number":347,"title":"Drizzle Studio doesn't close properly. `CTRL+C` issues on Windows Terminal with Powershell 7 in Windows 11","user":{"login":"deadcoder0904","id":16436270,"node_id":"MDQ6VXNlcjE2NDM2Mjcw","avatar_url":"https://avatars.githubusercontent.com/u/16436270?v=4","gravatar_id":"","url":"https://api.github.com/users/deadcoder0904","html_url":"https://github.com/deadcoder0904","followers_url":"https://api.github.com/users/deadcoder0904/followers","following_url":"https://api.github.com/users/deadcoder0904/following{/other_user}","gists_url":"https://api.github.com/users/deadcoder0904/gists{/gist_id}","starred_url":"https://api.github.com/users/deadcoder0904/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deadcoder0904/subscriptions","organizations_url":"https://api.github.com/users/deadcoder0904/orgs","repos_url":"https://api.github.com/users/deadcoder0904/repos","events_url":"https://api.github.com/users/deadcoder0904/events{/privacy}","received_events_url":"https://api.github.com/users/deadcoder0904/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-23T10:45:30Z","updated_at":"2024-03-23T10:45:43Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I've faced this at least 5-10x today & yesterday.\r\n\r\nIt somehow forgets to close the terminal.\r\n\r\nI just tried my other terminal to close Remix + Vite app & it worked.\r\n\r\nJust Drizzle doesn't exit so I have to kill the terminal because I'd like to delete my `.sqlite` database file which doesn't delete unless I close all processes using that file.\r\n\r\nThis is an annoying bug.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/347/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/347/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/346","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/346/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/346/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/346/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/346","id":2203676964,"node_id":"I_kwDOHoY85M6DWXEk","number":346,"title":"Drizzle Studio Sidebar doesn't sync number count in the sidebar when refreshed","user":{"login":"deadcoder0904","id":16436270,"node_id":"MDQ6VXNlcjE2NDM2Mjcw","avatar_url":"https://avatars.githubusercontent.com/u/16436270?v=4","gravatar_id":"","url":"https://api.github.com/users/deadcoder0904","html_url":"https://github.com/deadcoder0904","followers_url":"https://api.github.com/users/deadcoder0904/followers","following_url":"https://api.github.com/users/deadcoder0904/following{/other_user}","gists_url":"https://api.github.com/users/deadcoder0904/gists{/gist_id}","starred_url":"https://api.github.com/users/deadcoder0904/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deadcoder0904/subscriptions","organizations_url":"https://api.github.com/users/deadcoder0904/orgs","repos_url":"https://api.github.com/users/deadcoder0904/repos","events_url":"https://api.github.com/users/deadcoder0904/events{/privacy}","received_events_url":"https://api.github.com/users/deadcoder0904/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-23T03:53:22Z","updated_at":"2024-03-23T03:53:22Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"If my sidebar user table has 1 row, it shows has `user (1)` but if i add it & refresh it, then it gets updated only in the center (right side), not sidebar (left side)\r\n\r\nI think if you use `react-query`, this fixes itself automatically assuming you are using React for Drizzle Studio.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/346/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/345","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/345/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/345/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/345/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/345","id":2203245934,"node_id":"I_kwDOHoY85M6DUt1u","number":345,"title":"[Drizzle-kit Studio] When adding records on a database table and a not null constraint is violated no error message is shown.","user":{"login":"Patrick2052","id":80004491,"node_id":"MDQ6VXNlcjgwMDA0NDkx","avatar_url":"https://avatars.githubusercontent.com/u/80004491?v=4","gravatar_id":"","url":"https://api.github.com/users/Patrick2052","html_url":"https://github.com/Patrick2052","followers_url":"https://api.github.com/users/Patrick2052/followers","following_url":"https://api.github.com/users/Patrick2052/following{/other_user}","gists_url":"https://api.github.com/users/Patrick2052/gists{/gist_id}","starred_url":"https://api.github.com/users/Patrick2052/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Patrick2052/subscriptions","organizations_url":"https://api.github.com/users/Patrick2052/orgs","repos_url":"https://api.github.com/users/Patrick2052/repos","events_url":"https://api.github.com/users/Patrick2052/events{/privacy}","received_events_url":"https://api.github.com/users/Patrick2052/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-22T20:19:24Z","updated_at":"2024-03-22T20:19:24Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I use postgres and in drizzle kit studio when wanting to add a row to this model without giving it a name the line just disappeared and showed no error in the frontend only in the console. It took me a minute to notice the problem.\r\n\r\nA red alert when adding a new row fails would probably be helpful.\r\n\r\n\r\n```\r\n  export const vereine = pgTable(\"verein\", {\r\n    id: text(\"id\").notNull().primaryKey().default(\"uuid_generate_v4()\"),\r\n    name: text(\"name\").notNull().unique(),\r\n    description: text(\"description\"),\r\n    image: text(\"image\"),\r\n    owner_id: text(\"owner_id\").notNull().references(() => users.id), \r\n    //  userType: text(\"userType\"),\r\n  })```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/345/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/344","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/344/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/344/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/344/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/344","id":2202594136,"node_id":"I_kwDOHoY85M6DSOtY","number":344,"title":"`drizzle-kit push:[database]` fails when schema is exported from another package in monorepo","user":{"login":"joelhooks","id":86834,"node_id":"MDQ6VXNlcjg2ODM0","avatar_url":"https://avatars.githubusercontent.com/u/86834?v=4","gravatar_id":"","url":"https://api.github.com/users/joelhooks","html_url":"https://github.com/joelhooks","followers_url":"https://api.github.com/users/joelhooks/followers","following_url":"https://api.github.com/users/joelhooks/following{/other_user}","gists_url":"https://api.github.com/users/joelhooks/gists{/gist_id}","starred_url":"https://api.github.com/users/joelhooks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joelhooks/subscriptions","organizations_url":"https://api.github.com/users/joelhooks/orgs","repos_url":"https://api.github.com/users/joelhooks/repos","events_url":"https://api.github.com/users/joelhooks/events{/privacy}","received_events_url":"https://api.github.com/users/joelhooks/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-03-22T14:11:57Z","updated_at":"2024-04-01T16:23:52Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"here's a reproduction: https://github.com/joelhooks/drizzle-fail-turbo\r\n\r\nThis uses sqlite, but this also failed in the same way using mysql in our [production project](https://github.com/badass-courses/course-builder)\r\n\r\nThe desire is to be able to import pieces of the schema from the library for distribution across similar apps via an \"adapter\" package (similar to next-auth, etc)\r\n\r\nThis repository contains a sample project that demonstrates how to reproduce an error when using `drizzle-kit push:[database]`\r\n\r\nIt is a minimal turborepo using their basic generator to create the packages.\r\n\r\n* Clone the repo\r\n* `pnpm i`\r\n* `cd apps/web`\r\n* `pnpm db:push`\r\n\r\nerror observed:\r\n\r\n``` bash\r\nError [ERR_PACKAGE_PATH_NOT_EXPORTED]: No \"exports\" main defined in /Users/joel/Code/joelhooks/drizzle-fail-turbo/apps/web/node_modules/adapter-drizzle/package.json\r\n    at __node_internal_captureLargerStackTrace (node:internal/errors:496:5)\r\n    at new NodeError (node:internal/errors:405:5)\r\n    at exportsNotFound (node:internal/modules/esm/resolve:261:10)\r\n    at packageExportsResolve (node:internal/modules/esm/resolve:535:13)\r\n    at resolveExports (node:internal/modules/cjs/loader:547:36)\r\n    at Module._findPath (node:internal/modules/cjs/loader:621:31)\r\n    at Module._resolveFilename (node:internal/modules/cjs/loader:1034:27)\r\n    at Module._resolveFilename (/Users/joel/Code/joelhooks/drizzle-fail-turbo/node_modules/.pnpm/drizzle-kit@0.20.14/node_modules/drizzle-kit/bin.cjs:11140:40)\r\n    at Module._load (node:internal/modules/cjs/loader:901:27)\r\n    at Module.require (node:internal/modules/cjs/loader:1115:19)\r\n    at require (node:internal/modules/helpers:130:18)\r\n    at Object.<anonymous> (/Users/joel/Code/joelhooks/drizzle-fail-turbo/apps/web/db/schema.ts:1:21)\r\n    at Module._compile (node:internal/modules/cjs/loader:1233:14)\r\n    at Module._compile (/Users/joel/Code/joelhooks/drizzle-fail-turbo/node_modules/.pnpm/drizzle-kit@0.20.14/node_modules/drizzle-kit/bin.cjs:8644:30)\r\n    at Module._extensions..js (node:internal/modules/cjs/loader:1287:10)\r\n    at Object.newLoader [as .ts] (/Users/joel/Code/joelhooks/drizzle-fail-turbo/node_modules/.pnpm/drizzle-kit@0.20.14/node_modules/drizzle-kit/bin.cjs:8648:13)\r\n    at Module.load (node:internal/modules/cjs/loader:1091:32)\r\n    at Module._load (node:internal/modules/cjs/loader:938:12)\r\n    at Module.require (node:internal/modules/cjs/loader:1115:19)\r\n    at require (node:internal/modules/helpers:130:18)\r\n    at prepareFromSqliteImports (/Users/joel/Code/joelhooks/drizzle-fail-turbo/node_modules/.pnpm/drizzle-kit@0.20.14/node_modules/drizzle-kit/bin.cjs:12840:20)\r\n    at async serializeSQLite (/Users/joel/Code/joelhooks/drizzle-fail-turbo/node_modules/.pnpm/drizzle-kit@0.20.14/node_modules/drizzle-kit/bin.cjs:13317:33)\r\n    at async prepareSQLiteDbPushSnapshot (/Users/joel/Code/joelhooks/drizzle-fail-turbo/node_modules/.pnpm/drizzle-kit@0.20.14/node_modules/drizzle-kit/bin.cjs:13366:26)\r\n    at async prepareSQLitePush (/Users/joel/Code/joelhooks/drizzle-fail-turbo/node_modules/.pnpm/drizzle-kit@0.20.14/node_modules/drizzle-kit/bin.cjs:14878:31)\r\n    at async Command.<anonymous> (/Users/joel/Code/joelhooks/drizzle-fail-turbo/node_modules/.pnpm/drizzle-kit@0.20.14/node_modules/drizzle-kit/bin.cjs:63296:22) {\r\n  code: 'ERR_PACKAGE_PATH_NOT_EXPORTED'\r\n\r\n```\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/344/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/343","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/343/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/343/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/343/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/343","id":2198852521,"node_id":"I_kwDOHoY85M6DD9Op","number":343,"title":"Apply field changes from serial() to uuid()","user":{"login":"denz93","id":128194978,"node_id":"U_kgDOB6QZog","avatar_url":"https://avatars.githubusercontent.com/u/128194978?v=4","gravatar_id":"","url":"https://api.github.com/users/denz93","html_url":"https://github.com/denz93","followers_url":"https://api.github.com/users/denz93/followers","following_url":"https://api.github.com/users/denz93/following{/other_user}","gists_url":"https://api.github.com/users/denz93/gists{/gist_id}","starred_url":"https://api.github.com/users/denz93/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/denz93/subscriptions","organizations_url":"https://api.github.com/users/denz93/orgs","repos_url":"https://api.github.com/users/denz93/repos","events_url":"https://api.github.com/users/denz93/events{/privacy}","received_events_url":"https://api.github.com/users/denz93/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-21T00:41:57Z","updated_at":"2024-03-21T00:41:57Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"With a schema contains a field that has data type `serial`, making a change to uuid() will throw an error.\r\n\r\n```bash\r\nerror: column \"id\" cannot be cast automatically to type uuid\r\n    at /Users/***/Projects/SpringBoard/Capstone2/trip-planner/node_modules/.pnpm/drizzle-kit@0.20.14/node_modules/drizzle-kit/bin.cjs:24462:21\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async PgPostgres.query (/Users/***/Projects/SpringBoard/Capstone2/trip-planner/node_modules/.pnpm/drizzle-kit@0.20.14/node_modules/drizzle-kit/bin.cjs:25423:21)\r\n    at async Command.<anonymous> (/Users/***/Projects/SpringBoard/Capstone2/trip-planner/node_modules/.pnpm/drizzle-kit@0.20.14/node_modules/drizzle-kit/bin.cjs:63261:9) {\r\n  length: 169,\r\n  severity: 'ERROR',\r\n  code: '42804',\r\n  detail: undefined,\r\n  hint: 'You might need to specify \"USING id::uuid\".',\r\n  position: undefined,\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: undefined,\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: 'tablecmds.c',\r\n  line: '11818',\r\n  routine: 'ATPrepAlterColumnType'\r\n}\r\n```\r\n\r\n## Step to reproduce\r\n\r\n```typescript\r\n//1. original schema.ts\r\nconst user = pgTable('users', {\r\n  id: serial(\"id\").primaryKey()\r\n})\r\n\r\n// 2. drizzle-kit push:ph\r\n\r\n//3. changed schema.ts\r\nconst user = pgTable('users', {\r\n  id: uuid(\"id\").primaryKey()\r\n})\r\n\r\n//4. drizzle-kit push:pg\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/343/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/342","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/342/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/342/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/342/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/342","id":2197466758,"node_id":"I_kwDOHoY85M6C-q6G","number":342,"title":"Composite primary key order is not consistent. Using the 'expo' driver in a React Native project","user":{"login":"KFeu1","id":35009104,"node_id":"MDQ6VXNlcjM1MDA5MTA0","avatar_url":"https://avatars.githubusercontent.com/u/35009104?v=4","gravatar_id":"","url":"https://api.github.com/users/KFeu1","html_url":"https://github.com/KFeu1","followers_url":"https://api.github.com/users/KFeu1/followers","following_url":"https://api.github.com/users/KFeu1/following{/other_user}","gists_url":"https://api.github.com/users/KFeu1/gists{/gist_id}","starred_url":"https://api.github.com/users/KFeu1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KFeu1/subscriptions","organizations_url":"https://api.github.com/users/KFeu1/orgs","repos_url":"https://api.github.com/users/KFeu1/repos","events_url":"https://api.github.com/users/KFeu1/events{/privacy}","received_events_url":"https://api.github.com/users/KFeu1/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-20T12:53:49Z","updated_at":"2024-05-01T15:12:57Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Description\r\n\r\nI have two tables, *recipes* and *tags*, and I want to create another table *recipe_has_tags*, which should have a composite primary key, made from the primary keys of both tables.\r\n\r\nI am on Windows 11, working on a React Native project, using the *expo* driver in my `drizzle.config.ts`.\r\n\r\nHere is my `schema.ts`:\r\n\r\n```ts\r\nexport const recipes = sqliteTable('recipes', {\r\n\tid: integer(\"id\").primaryKey({ autoIncrement: true }),\r\n  \tname: text('name', { length: 256 }).notNull(),\r\n});\r\n\r\nexport const tags = sqliteTable('tags', {\r\n\tid: integer(\"id\").primaryKey({ autoIncrement: true }),\r\n  \tname: text('name', { length: 256 }).notNull(),\r\n});\r\n\r\nexport const recipeHasTags = sqliteTable('recipe_has_tags', {\r\n\trecipeId: integer('recipe_id').references(() => recipes.id).notNull(),\r\n\ttagId: integer('tag_id').references(() => tags.id).notNull(),\r\n}, (table) => {\r\n\treturn {\r\n\t\tpk: primaryKey({ columns: [table.tagId, table.recipeId] }),\r\n\t}\r\n});\r\n```\r\n\r\n### The problem\r\n\r\nWhen I run `pnpm exec drizzle-kit generate:sqlite`, the resulting .sql file contains this line for the *recipe_has_tags* table:\r\n\r\n```sql\r\nPRIMARY KEY(`recipe_id`, `tag_id`)\r\n```\r\n\r\nbut the `schema.ts` had those in reverse order. I want *tag_id* to be the first key of the composite key.\r\n\r\n### Workaround\r\n\r\nRenaming the columns, so that they are alphabetically in the correct order fixes this:\r\n\r\n\r\n```ts\r\nexport const recipeHasTags = sqliteTable('recipe_has_tags', {\r\n\trecipeId: integer('pk2_recipe_id').references(() => recipes.id).notNull(),\r\n\ttagId: integer('pk1_tag_id').references(() => tags.id).notNull(),\r\n}, (table) => {\r\n\treturn {\r\n\t\tpk: primaryKey({ columns: [table.tagId, table.recipeId] }),\r\n\t}\r\n});\r\n```\r\n\r\nThis produces the result I want, which is\r\n\r\n```sql\r\nPRIMARY KEY(`pk1_tag_id`, `pk2_recipe_id`)\r\n```\r\n\r\nbut obviously the order should not be derived from the names of the columns.\r\n\r\n### How to reproduce\r\n\r\nHere is my project in a zip file:\r\n\r\n[migration_bug.zip](https://github.com/drizzle-team/drizzle-kit-mirror/files/14666730/migration_bug.zip)\r\n\r\nTo reproduce, just run `pnpm install` and then `pnpm migrate`. This creates the *drizzle* folder, where you can look at the migration it created.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/342/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/341","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/341/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/341/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/341/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/341","id":2197154258,"node_id":"I_kwDOHoY85M6C9enS","number":341,"title":"`migrate` silently fails on migration error","user":{"login":"bddvlpr","id":17461028,"node_id":"MDQ6VXNlcjE3NDYxMDI4","avatar_url":"https://avatars.githubusercontent.com/u/17461028?v=4","gravatar_id":"","url":"https://api.github.com/users/bddvlpr","html_url":"https://github.com/bddvlpr","followers_url":"https://api.github.com/users/bddvlpr/followers","following_url":"https://api.github.com/users/bddvlpr/following{/other_user}","gists_url":"https://api.github.com/users/bddvlpr/gists{/gist_id}","starred_url":"https://api.github.com/users/bddvlpr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bddvlpr/subscriptions","organizations_url":"https://api.github.com/users/bddvlpr/orgs","repos_url":"https://api.github.com/users/bddvlpr/repos","events_url":"https://api.github.com/users/bddvlpr/events{/privacy}","received_events_url":"https://api.github.com/users/bddvlpr/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-20T10:14:12Z","updated_at":"2024-03-20T10:14:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When using the automatic migration runner, in my case the vercel-postgres one, if for some reason the generated migrations fail nothing will be outputted or returned. The output of the migrate function should be checked for thrown errors or at least be returned so it can be handled individually by developers.\r\n```js\r\nimport { readMigrationFiles } from \"../migrator.js\";\r\nasync function migrate(db, config) {\r\n  const migrations = readMigrationFiles(config);\r\n  await db.dialect.migrate(migrations, db.session, config); // <---\r\n}\r\nexport {\r\n  migrate\r\n};\r\n//# sourceMappingURL=migrator.js.map\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/341/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/340","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/340/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/340/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/340/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/340","id":2190763369,"node_id":"I_kwDOHoY85M6ClGVp","number":340,"title":"sql runner \"run\" button disappears when sql statement is empty and you leave the sql runner tab","user":{"login":"squishy-kf","id":112475756,"node_id":"U_kgDOBrQ-bA","avatar_url":"https://avatars.githubusercontent.com/u/112475756?v=4","gravatar_id":"","url":"https://api.github.com/users/squishy-kf","html_url":"https://github.com/squishy-kf","followers_url":"https://api.github.com/users/squishy-kf/followers","following_url":"https://api.github.com/users/squishy-kf/following{/other_user}","gists_url":"https://api.github.com/users/squishy-kf/gists{/gist_id}","starred_url":"https://api.github.com/users/squishy-kf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/squishy-kf/subscriptions","organizations_url":"https://api.github.com/users/squishy-kf/orgs","repos_url":"https://api.github.com/users/squishy-kf/repos","events_url":"https://api.github.com/users/squishy-kf/events{/privacy}","received_events_url":"https://api.github.com/users/squishy-kf/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-17T16:58:55Z","updated_at":"2024-03-17T17:40:13Z","closed_at":"2024-03-17T17:40:13Z","author_association":"NONE","active_lock_reason":null,"body":"First off excellent work on drizzle + studio. You've made my life so much easier, Thank you!!\r\n\r\n**The Bug**\r\n1. Navigate to the \"sql runner\" page.\r\n2. Click the green run button near the line number column.\r\n3. Delete the sql statement \"cmd + a\" + delete\r\n4. Navigate away from the sql runner page by clicking on a table name\r\n5. Navigate back to the sql runner page\r\n6. Enter a sql statement.\r\n\r\nExpected result - The \"run\" button should be present and clickable.\r\nActual result - The \"run\" button is not visible or clickable\r\n\r\nThis issue persists restarts. The only way i've been able to get the button back is by clearing the cookies to \"drizzle.studio\"","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/340/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/339","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/339/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/339/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/339/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/339","id":2189967052,"node_id":"I_kwDOHoY85M6CiD7M","number":339,"title":"`push:sqlite` - dropping indexed column triggers move data statements","user":{"login":"mattfysh","id":470258,"node_id":"MDQ6VXNlcjQ3MDI1OA==","avatar_url":"https://avatars.githubusercontent.com/u/470258?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfysh","html_url":"https://github.com/mattfysh","followers_url":"https://api.github.com/users/mattfysh/followers","following_url":"https://api.github.com/users/mattfysh/following{/other_user}","gists_url":"https://api.github.com/users/mattfysh/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfysh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfysh/subscriptions","organizations_url":"https://api.github.com/users/mattfysh/orgs","repos_url":"https://api.github.com/users/mattfysh/repos","events_url":"https://api.github.com/users/mattfysh/events{/privacy}","received_events_url":"https://api.github.com/users/mattfysh/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-16T13:20:39Z","updated_at":"2024-03-16T13:20:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Given the following `schema.ts`\r\n\r\n```ts\r\nexport const t = sqliteTable(\r\n  't',\r\n  {\r\n    c: text('c'),\r\n  },\r\n  t => ({\r\n    idx: index('idx').on(t.c),\r\n  })\r\n)\r\n```\r\n\r\nIf you were to update the name of the column to `'c2'` then run `push:sqlite --verbose` you'll see these statements are executed:\r\n\r\n```sql\r\nDROP INDEX IF EXISTS `idx`;\r\nALTER TABLE t ADD `c2` text;\r\nCREATE INDEX `idx` ON `t` (`c2`);\r\nALTER TABLE `t` RENAME TO `__old_push_t`;\r\nCREATE TABLE `t` (\r\n\t`c2` text\r\n);\r\n\r\nDROP TABLE `__old_push_t`;\r\nCREATE INDEX `idx` ON `t` (`c2`);\r\n```\r\n\r\nThe `moveDataStatements()` function does not need to be triggered in this scenario. This is not a problem for `generate:sqlite` which produces the first 3 statements followed by a single `ALTER TABLE t DROP COLUMN c`\r\n\r\nBy looking into the drizzle-kit source code, it appears to be triggered by this check:\r\n\r\n```ts\r\nif (columnIsPk || columnIsPartOfPk || columnIsPartOfIndex || columnIsPartOfFk) {\r\n  tablesContext[newTableName] = [\r\n    ..._moveDataStatements(statement.tableName, json2, true)\r\n  ];\r\n```\r\n\r\nThe only truthy value in the condition is `columnIsPartOfIndex` which doesn't sound correct - because the index it's referring to is dropped in the very first statement of the set.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/339/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/338","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/338/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/338/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/338/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/338","id":2189894857,"node_id":"I_kwDOHoY85M6ChyTJ","number":338,"title":"Invalid record warning disappears too quickly","user":{"login":"GetPsyched","id":43472218,"node_id":"MDQ6VXNlcjQzNDcyMjE4","avatar_url":"https://avatars.githubusercontent.com/u/43472218?v=4","gravatar_id":"","url":"https://api.github.com/users/GetPsyched","html_url":"https://github.com/GetPsyched","followers_url":"https://api.github.com/users/GetPsyched/followers","following_url":"https://api.github.com/users/GetPsyched/following{/other_user}","gists_url":"https://api.github.com/users/GetPsyched/gists{/gist_id}","starred_url":"https://api.github.com/users/GetPsyched/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GetPsyched/subscriptions","organizations_url":"https://api.github.com/users/GetPsyched/orgs","repos_url":"https://api.github.com/users/GetPsyched/repos","events_url":"https://api.github.com/users/GetPsyched/events{/privacy}","received_events_url":"https://api.github.com/users/GetPsyched/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-16T10:08:58Z","updated_at":"2024-03-16T10:09:28Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I tried to insert an illegal value on a column with a check constraint. When clicking \"Save changes\", I got a popup dialog saying that I have an invalid value; I couldn't read all of it because it disappeared very fast (probably <200ms).\r\n\r\n```\r\ndrizzle-kit: v0.20.14\r\ndrizzle-orm: v0.30.2\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/338/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/337","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/337/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/337/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/337/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/337","id":2188706217,"node_id":"I_kwDOHoY85M6CdQGp","number":337,"title":"Drizzle studio has my old schema for its query \"Drizzle Runner\" ?","user":{"login":"dBianchii","id":17372417,"node_id":"MDQ6VXNlcjE3MzcyNDE3","avatar_url":"https://avatars.githubusercontent.com/u/17372417?v=4","gravatar_id":"","url":"https://api.github.com/users/dBianchii","html_url":"https://github.com/dBianchii","followers_url":"https://api.github.com/users/dBianchii/followers","following_url":"https://api.github.com/users/dBianchii/following{/other_user}","gists_url":"https://api.github.com/users/dBianchii/gists{/gist_id}","starred_url":"https://api.github.com/users/dBianchii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dBianchii/subscriptions","organizations_url":"https://api.github.com/users/dBianchii/orgs","repos_url":"https://api.github.com/users/dBianchii/repos","events_url":"https://api.github.com/users/dBianchii/events{/privacy}","received_events_url":"https://api.github.com/users/dBianchii/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-03-15T14:45:16Z","updated_at":"2024-04-22T12:20:36Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"For some reason, when I launch Drizzle studio, it is displaying a schema that no longer exists anywhere on my code.\r\nI recently renamed all of my tables to uppercase for example, and changed multiple column types multiple times.\r\n\r\nWhat drizzle studio sees:\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/17372417/59297a22-87d0-4d0d-878f-bc131f42544f)\r\n\r\nMy real schema\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/17372417/f5b695a6-653d-4e3d-a527-c53236be3926)\r\n\r\nI have tried completely cleaning all of my node_modules and cache files. It's very strange because this schema doesn't exist on my setup anymore. What's going on?\r\n\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/17372417/13cec81f-94da-418e-92bc-feec2dbebaaa)\r\nRunning either of these ^ doesn't work.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/337/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/336","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/336/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/336/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/336/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/336","id":2188228212,"node_id":"I_kwDOHoY85M6CbbZ0","number":336,"title":"Drizzle Kit config option as unknown","user":{"login":"nvegater","id":45003959,"node_id":"MDQ6VXNlcjQ1MDAzOTU5","avatar_url":"https://avatars.githubusercontent.com/u/45003959?v=4","gravatar_id":"","url":"https://api.github.com/users/nvegater","html_url":"https://github.com/nvegater","followers_url":"https://api.github.com/users/nvegater/followers","following_url":"https://api.github.com/users/nvegater/following{/other_user}","gists_url":"https://api.github.com/users/nvegater/gists{/gist_id}","starred_url":"https://api.github.com/users/nvegater/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nvegater/subscriptions","organizations_url":"https://api.github.com/users/nvegater/orgs","repos_url":"https://api.github.com/users/nvegater/repos","events_url":"https://api.github.com/users/nvegater/events{/privacy}","received_events_url":"https://api.github.com/users/nvegater/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-15T10:47:17Z","updated_at":"2024-04-09T03:46:45Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"This doesn't work:\r\n\r\n```\r\npnpm drizzle-kit --config=./dbconfig/preview.config.json generate:pg\r\nerror: unknown option '--config=./dbconfig/preview.config.json'\r\n```\r\n\r\nBUT when using dotenv, it works but it ignores the config option completely, uses default:\r\n\r\n```\r\npnpm dotenv drizzle-kit --config=./dbconfig/preview.config.json generate:pg\r\ndrizzle-kit: v0.20.14\r\ndrizzle-orm: v0.29.4\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/Users/nterraza/js-dev/gridlink/drizzle.config.ts'\r\n```\r\n\r\n```\r\n    \"drizzle-kit\": \"^0.20.14\",\r\n    \"drizzle-orm\": \"^0.29.4\",\r\n```\r\n\r\nHaving different configs is important to have different DB's for Testing and Production. I have a workaround where I edit the drizzle config based on env variables but its less maintainable like that. \r\n\r\nThanks for the cool library!\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/336/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/336/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/335","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/335/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/335/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/335/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/335","id":2186094012,"node_id":"I_kwDOHoY85M6CTSW8","number":335,"title":"mysql generate columns dont push correctly","user":{"login":"McPizza0","id":17185737,"node_id":"MDQ6VXNlcjE3MTg1NzM3","avatar_url":"https://avatars.githubusercontent.com/u/17185737?v=4","gravatar_id":"","url":"https://api.github.com/users/McPizza0","html_url":"https://github.com/McPizza0","followers_url":"https://api.github.com/users/McPizza0/followers","following_url":"https://api.github.com/users/McPizza0/following{/other_user}","gists_url":"https://api.github.com/users/McPizza0/gists{/gist_id}","starred_url":"https://api.github.com/users/McPizza0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/McPizza0/subscriptions","organizations_url":"https://api.github.com/users/McPizza0/orgs","repos_url":"https://api.github.com/users/McPizza0/repos","events_url":"https://api.github.com/users/McPizza0/events{/privacy}","received_events_url":"https://api.github.com/users/McPizza0/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-14T11:19:11Z","updated_at":"2024-03-15T22:07:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"have a simple custom type\r\n```ts\r\nconst messageIdCustomType = customType<{ data: string }>({\r\n  dataType() {\r\n    return \"VARCHAR(254) AS (JSON_UNQUOTE(metadata-> '$.email.messageId')) STORED\";\r\n  }\r\n});\r\n```\r\n\r\nwhen pushing other changes in the DB i always get this error:\r\n```\r\nWarning  Found data-loss statements:\r\n¬∑ You're about to change email_message_id column type from varchar(255) to VARCHAR(255) AS (JSON_UNQUOTE(metadata-> '$.email.messageId')) STORED with 2 items\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/335/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/334","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/334/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/334/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/334/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/334","id":2183791110,"node_id":"I_kwDOHoY85M6CKgIG","number":334,"title":"MySQL migration produce statements in the wrong order","user":{"login":"valentin0h","id":2587839,"node_id":"MDQ6VXNlcjI1ODc4Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/2587839?v=4","gravatar_id":"","url":"https://api.github.com/users/valentin0h","html_url":"https://github.com/valentin0h","followers_url":"https://api.github.com/users/valentin0h/followers","following_url":"https://api.github.com/users/valentin0h/following{/other_user}","gists_url":"https://api.github.com/users/valentin0h/gists{/gist_id}","starred_url":"https://api.github.com/users/valentin0h/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/valentin0h/subscriptions","organizations_url":"https://api.github.com/users/valentin0h/orgs","repos_url":"https://api.github.com/users/valentin0h/repos","events_url":"https://api.github.com/users/valentin0h/events{/privacy}","received_events_url":"https://api.github.com/users/valentin0h/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-13T11:42:21Z","updated_at":"2024-03-14T19:14:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Having a very similar issue to https://github.com/drizzle-team/drizzle-kit-mirror/issues/45\r\n\r\nThe following code change\r\n```typescript\r\nmysqlTable(\r\n     {\r\n         id: serial('id').primaryKey(),\r\n\r\n+        publicId: varchar('public_id', { length: 100 }).unique().notNull(),\r\n+\r\n         otherId: varchar('other_id', { length: 100 }).notNull(),\r\n\r\n```\r\n\r\ngenerates this migration file\r\n\r\n```sql\r\nALTER TABLE `content_references` ADD CONSTRAINT `content_references_public_id_unique` UNIQUE(`public_id`);--> statement-breakpoint\r\nALTER TABLE `content_references` ADD `public_id` varchar(100) NOT NULL;%    \r\n```\r\n\r\nEnv:\r\n\r\ndrizzle-kit 0.20.14\r\ndrizzle-orm 0.29.4\r\nMySQL (PlanetScale)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/334/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/334/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/333","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/333/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/333/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/333/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/333","id":2183584867,"node_id":"I_kwDOHoY85M6CJtxj","number":333,"title":"Typescript error for int columns with a default value of null","user":{"login":"Vic-M","id":32042587,"node_id":"MDQ6VXNlcjMyMDQyNTg3","avatar_url":"https://avatars.githubusercontent.com/u/32042587?v=4","gravatar_id":"","url":"https://api.github.com/users/Vic-M","html_url":"https://github.com/Vic-M","followers_url":"https://api.github.com/users/Vic-M/followers","following_url":"https://api.github.com/users/Vic-M/following{/other_user}","gists_url":"https://api.github.com/users/Vic-M/gists{/gist_id}","starred_url":"https://api.github.com/users/Vic-M/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Vic-M/subscriptions","organizations_url":"https://api.github.com/users/Vic-M/orgs","repos_url":"https://api.github.com/users/Vic-M/repos","events_url":"https://api.github.com/users/Vic-M/events{/privacy}","received_events_url":"https://api.github.com/users/Vic-M/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-13T10:02:27Z","updated_at":"2024-03-13T10:02:27Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"For int table columns that have a default value of null, the schema.ts produced by `drizzle-kit introspect:mysql` is invalid typescript.\r\n\r\n## Steps to reproduce\r\n\r\nGenerate database:\r\n```\r\n-- Dumping database structure for TestDb\r\nCREATE DATABASE IF NOT EXISTS `TestDb` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci */;\r\nUSE `TestDb`;\r\n\r\nCREATE TABLE IF NOT EXISTS `TestTable` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `value` int(11) DEFAULT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;\r\n```\r\n\r\nIntrospect the database schema: \r\n```\r\ndrizzle-kit introspect:mysql\r\n```\r\n\r\n## Output\r\nschema.ts\r\n```\r\nimport { sql } from \"drizzle-orm\";\r\nimport { AnyMySqlColumn, int, mysqlSchema, mysqlTable } from \"drizzle-orm/mysql-core\";\r\n\r\nexport const testTable = mysqlTable(\"TestTable\", {\r\n    id: int(\"id\").autoincrement().notNull(),\r\n    value: int(\"value\").default(\"NULL\"),\r\n});\r\n```\r\nTrying to compile generates the following error: `Argument of type 'string' is not assignable to parameter of type 'number | SQL<unknown>'.`\r\n\r\n## Expected\r\n```\r\nimport { sql } from \"drizzle-orm\";\r\nimport { AnyMySqlColumn, int, mysqlSchema, mysqlTable } from \"drizzle-orm/mysql-core\";\r\n\r\nexport const testTable = mysqlTable(\"TestTable\", {\r\n    id: int(\"id\").autoincrement().notNull(),\r\n    value: int(\"value\").default(sql`NULL`),\r\n});\r\n```\r\n\r\n## Notes\r\ndrizzle-orm version: 0.30.1\r\ndrizzle-kit version: 0.20.14\r\nmysql2 version: 3.9.2\r\ndatabase: MariaDB 10.6.15","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/333/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/332","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/332/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/332/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/332/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/332","id":2183548212,"node_id":"I_kwDOHoY85M6CJk00","number":332,"title":"Primary key not generated in schema.ts","user":{"login":"Vic-M","id":32042587,"node_id":"MDQ6VXNlcjMyMDQyNTg3","avatar_url":"https://avatars.githubusercontent.com/u/32042587?v=4","gravatar_id":"","url":"https://api.github.com/users/Vic-M","html_url":"https://github.com/Vic-M","followers_url":"https://api.github.com/users/Vic-M/followers","following_url":"https://api.github.com/users/Vic-M/following{/other_user}","gists_url":"https://api.github.com/users/Vic-M/gists{/gist_id}","starred_url":"https://api.github.com/users/Vic-M/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Vic-M/subscriptions","organizations_url":"https://api.github.com/users/Vic-M/orgs","repos_url":"https://api.github.com/users/Vic-M/repos","events_url":"https://api.github.com/users/Vic-M/events{/privacy}","received_events_url":"https://api.github.com/users/Vic-M/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-13T09:45:03Z","updated_at":"2024-04-10T21:25:47Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When running `drizzle-kit introspect:mysql`, no primary keys are generated for table properties in the resulting schema.ts.\r\n\r\n## Steps to reproduce\r\n\r\nGenerate database:\r\n```\r\nCREATE DATABASE IF NOT EXISTS `TestDb` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci */;\r\nUSE `TestDb`;\r\n\r\nCREATE TABLE IF NOT EXISTS `TestTable` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `value` varchar(50) NOT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;\r\n```\r\n\r\nIntrospect the database schema: \r\n```\r\ndrizzle-kit introspect:mysql\r\n```\r\n\r\n## Output\r\nschema.ts\r\n```\r\nimport { mysqlTable, mysqlSchema, AnyMySqlColumn, int, varchar } from \"drizzle-orm/mysql-core\"\r\nimport { sql } from \"drizzle-orm\"\r\n\r\n\r\nexport const testTable = mysqlTable(\"TestTable\", {\r\n    id: int(\"id\").autoincrement().notNull(),\r\n    value: varchar(\"value\", { length: 50 }).notNull(),\r\n});\r\n```\r\n\r\n## Expected\r\n```\r\nimport { mysqlTable, mysqlSchema, AnyMySqlColumn, int, varchar } from \"drizzle-orm/mysql-core\"\r\nimport { sql } from \"drizzle-orm\"\r\n\r\n\r\nexport const testTable = mysqlTable(\"TestTable\", {\r\n    id: int(\"id\").primaryKey().autoincrement().notNull(),\r\n    value: varchar(\"value\", { length: 50 }).notNull(),\r\n});\r\n```\r\n\r\n## Notes\r\ndrizzle-orm version: 0.30.1\r\ndrizzle-kit version: 0.20.14\r\nmysql2 version: 3.9.2\r\ndatabase: MariaDB 10.6.15","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/332/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/331","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/331/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/331/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/331/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/331","id":2177753842,"node_id":"I_kwDOHoY85M6BzeLy","number":331,"title":"[BUG] Error processing absolute path","user":{"login":"ElkostVN","id":53514508,"node_id":"MDQ6VXNlcjUzNTE0NTA4","avatar_url":"https://avatars.githubusercontent.com/u/53514508?v=4","gravatar_id":"","url":"https://api.github.com/users/ElkostVN","html_url":"https://github.com/ElkostVN","followers_url":"https://api.github.com/users/ElkostVN/followers","following_url":"https://api.github.com/users/ElkostVN/following{/other_user}","gists_url":"https://api.github.com/users/ElkostVN/gists{/gist_id}","starred_url":"https://api.github.com/users/ElkostVN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ElkostVN/subscriptions","organizations_url":"https://api.github.com/users/ElkostVN/orgs","repos_url":"https://api.github.com/users/ElkostVN/repos","events_url":"https://api.github.com/users/ElkostVN/events{/privacy}","received_events_url":"https://api.github.com/users/ElkostVN/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-10T14:47:45Z","updated_at":"2024-03-10T14:48:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**What version of `drizzle-orm` are you using?** - `0.30.1`\r\n**What version of `drizzle-kit` are you using?** - `0.20.14`\r\n\r\n**Environment & Setup**:\r\nMacOS Sonoma 14.2.1\r\n\r\n**Describe the Bug:**\r\nWhen using the absolute path in the `drizzle.config.ts` migration generator throws an error if there is a `snapshot.json` in meta.\r\nError: `Error: ENOENT: no such file or directory, open './/Users/User/<project>/<service>/src/services/database/migrations/meta/0000_snapshot.json'`\r\n\r\nThe error occurs in the file `utils.js` inside the `validateWithReport' function. \r\n\r\nLine:\r\nconst raw = JSON.parse((0, import_fs4.readFileSync)(`./${it}`).toString());\r\n\r\n**Expected behavior:**\r\nFor absolute paths, the path should be passed unmodified to the file-reading function.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/331/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/330","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/330/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/330/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/330/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/330","id":2177190141,"node_id":"I_kwDOHoY85M6BxUj9","number":330,"title":"feature request: command and api to make a snapshot of schema","user":{"login":"terion-name","id":1060205,"node_id":"MDQ6VXNlcjEwNjAyMDU=","avatar_url":"https://avatars.githubusercontent.com/u/1060205?v=4","gravatar_id":"","url":"https://api.github.com/users/terion-name","html_url":"https://github.com/terion-name","followers_url":"https://api.github.com/users/terion-name/followers","following_url":"https://api.github.com/users/terion-name/following{/other_user}","gists_url":"https://api.github.com/users/terion-name/gists{/gist_id}","starred_url":"https://api.github.com/users/terion-name/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/terion-name/subscriptions","organizations_url":"https://api.github.com/users/terion-name/orgs","repos_url":"https://api.github.com/users/terion-name/repos","events_url":"https://api.github.com/users/terion-name/events{/privacy}","received_events_url":"https://api.github.com/users/terion-name/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-09T11:30:34Z","updated_at":"2024-03-09T11:30:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"For migrations drizzle uses snapshots based on provided schema for further diffing and migration generation\r\n\r\nSnapshots as intermediate DL can be useful for additional tools (like prisma's model objects). Having a snapshot one can build a database diagram to visually inspect db design in progress, can make some additional types/crud/whatever code generators, etc\r\n\r\nThis already can be done for already migrated stuff, but for WIP ‚Äì no. So I think it would be useful to have a cli command and an API to get only the snapshot of current schema, without writing it on disk and generating the migrations","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/330/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/329","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/329/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/329/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/329/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/329","id":2167306825,"node_id":"I_kwDOHoY85M6BLnpJ","number":329,"title":" Unable to Use Drizzle Studio with Cloudflare D1 on Windows","user":{"login":"MipaChan","id":98219327,"node_id":"U_kgDOBdq1Pw","avatar_url":"https://avatars.githubusercontent.com/u/98219327?v=4","gravatar_id":"","url":"https://api.github.com/users/MipaChan","html_url":"https://github.com/MipaChan","followers_url":"https://api.github.com/users/MipaChan/followers","following_url":"https://api.github.com/users/MipaChan/following{/other_user}","gists_url":"https://api.github.com/users/MipaChan/gists{/gist_id}","starred_url":"https://api.github.com/users/MipaChan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MipaChan/subscriptions","organizations_url":"https://api.github.com/users/MipaChan/orgs","repos_url":"https://api.github.com/users/MipaChan/repos","events_url":"https://api.github.com/users/MipaChan/events{/privacy}","received_events_url":"https://api.github.com/users/MipaChan/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-04T16:56:00Z","updated_at":"2024-03-13T18:03:38Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"\r\n## Description: \r\nWhen utilizing Cloudflare D1 alongside Drizzle Studio, setting `NO_D1_WARNING=true`  does not run correctly on Windows.\r\n\r\n## Code\r\n``` javascript\r\n// src/orm-extenstions/d1-driver/wrangler-client.ts\r\nvar wrangler_client_exports = {};\r\n__export(wrangler_client_exports, {\r\n  execute: () => execute\r\n});\r\nasync function execute(query, configPath, dbName) {\r\n  try {\r\n    const response = await $`NO_D1_WARNING=true wrangler d1 execute ${dbName} --config=${configPath} --command=${query} --json`;\r\n    return { results: JSON.parse(response.stdout)[0].results };\r\n  } catch (e) {\r\n    try {\r\n      await $`NO_D1_WARNING=true wrangler d1 execute ${dbName} --config=${configPath} --command=${query}`;\r\n    } catch (e1) {\r\n      throw new Error(e1.stdout);\r\n    }\r\n    throw e;\r\n  }\r\n}\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/329/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/329/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/328","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/328/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/328/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/328/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/328","id":2164862656,"node_id":"I_kwDOHoY85M6BCS7A","number":328,"title":"drizzle-studio crashes on startup when using the cloudflare D1 driver with multiple accounts","user":{"login":"eltigerchino","id":54401897,"node_id":"MDQ6VXNlcjU0NDAxODk3","avatar_url":"https://avatars.githubusercontent.com/u/54401897?v=4","gravatar_id":"","url":"https://api.github.com/users/eltigerchino","html_url":"https://github.com/eltigerchino","followers_url":"https://api.github.com/users/eltigerchino/followers","following_url":"https://api.github.com/users/eltigerchino/following{/other_user}","gists_url":"https://api.github.com/users/eltigerchino/gists{/gist_id}","starred_url":"https://api.github.com/users/eltigerchino/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eltigerchino/subscriptions","organizations_url":"https://api.github.com/users/eltigerchino/orgs","repos_url":"https://api.github.com/users/eltigerchino/repos","events_url":"https://api.github.com/users/eltigerchino/events{/privacy}","received_events_url":"https://api.github.com/users/eltigerchino/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-02T15:46:02Z","updated_at":"2024-03-02T15:46:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"If you own multiple accounts as a Cloudflare user, you'll be prompted to select an account when executing Wrangler commands. However, drizzle studio doesn't account for the prompt and crashes if you have more than one account while launching drizzle studio. It would be nice to warn for this by asking users to add the `account_id` field in their `wrangler.toml` file so that the prompt asking for an account doesn't cause drizzle studio to crash.\r\n\r\nMore info about the `account_id` field https://developers.cloudflare.com/workers/wrangler/configuration/#inheritable-keys\r\n\r\n## Reproduction\r\n\r\nConfigure the D1 driver in the drizzle config.\r\n\r\n```ts\r\n// drizzle.config.ts\r\nimport type { Config } from 'drizzle-kit';\r\n\r\nconst config = {\r\n\tschema: './src/**/schema.ts',\r\n\tout: './migrations',\r\n\tdriver: 'd1',\r\n\tdbCredentials: {\r\n\t\twranglerConfigPath,\r\n\t\tdbName: 'my_database'\r\n\t},\r\n\tverbose: true,\r\n\tstrict: true\r\n} satisfies Config;\r\n\r\nexport default config;\r\n```\r\n\r\n```bash\r\nwrangler login\r\npnpm drizzle-kit studio\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/328/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/327","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/327/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/327/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/327/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/327","id":2164726400,"node_id":"I_kwDOHoY85M6BBxqA","number":327,"title":"Drizzle-kit introspect generates invalid schema.ts for MySQL column names starting with a number","user":{"login":"amit13k","id":108258720,"node_id":"U_kgDOBnPloA","avatar_url":"https://avatars.githubusercontent.com/u/108258720?v=4","gravatar_id":"","url":"https://api.github.com/users/amit13k","html_url":"https://github.com/amit13k","followers_url":"https://api.github.com/users/amit13k/followers","following_url":"https://api.github.com/users/amit13k/following{/other_user}","gists_url":"https://api.github.com/users/amit13k/gists{/gist_id}","starred_url":"https://api.github.com/users/amit13k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amit13k/subscriptions","organizations_url":"https://api.github.com/users/amit13k/orgs","repos_url":"https://api.github.com/users/amit13k/repos","events_url":"https://api.github.com/users/amit13k/events{/privacy}","received_events_url":"https://api.github.com/users/amit13k/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-02T09:20:22Z","updated_at":"2024-03-02T09:20:22Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"MySQL introspection generates an invalid schema.ts when column names start with a number. MySQL permits column names to begin with a number, but drizzle-kit produces a schema.ts with object property names that start with a number, which JavaScript does not allow.\r\n\r\nI understand that it may not be best practice to name columns starting with numbers but it would be beneficial if drizzle-kit could handle this edge case more robustly.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/327/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/326","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/326/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/326/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/326/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/326","id":2164709514,"node_id":"I_kwDOHoY85M6BBtiK","number":326,"title":"Drizzle Studio not showing anything","user":{"login":"dewdadim","id":118960850,"node_id":"U_kgDOBxcy0g","avatar_url":"https://avatars.githubusercontent.com/u/118960850?v=4","gravatar_id":"","url":"https://api.github.com/users/dewdadim","html_url":"https://github.com/dewdadim","followers_url":"https://api.github.com/users/dewdadim/followers","following_url":"https://api.github.com/users/dewdadim/following{/other_user}","gists_url":"https://api.github.com/users/dewdadim/gists{/gist_id}","starred_url":"https://api.github.com/users/dewdadim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dewdadim/subscriptions","organizations_url":"https://api.github.com/users/dewdadim/orgs","repos_url":"https://api.github.com/users/dewdadim/repos","events_url":"https://api.github.com/users/dewdadim/events{/privacy}","received_events_url":"https://api.github.com/users/dewdadim/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-02T08:40:12Z","updated_at":"2024-03-10T10:28:42Z","closed_at":"2024-03-10T10:28:42Z","author_association":"NONE","active_lock_reason":null,"body":"I run test project to view and play around with drizzle studio. For the first time, it did show all the UI and the data just like normal... But once I try to change the table view by untick the id column of my table, it is not working after the page reloaded. It did not show up anything. I have also tried empty cache and hard reload, but it is still not showing anything. \r\n\r\nI wonder if there is any way to fix this? Thank you\r\n\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/118960850/bcf66313-8afd-4337-b5c1-9a028b4e3971)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/326/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/325","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/325/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/325/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/325/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/325","id":2164135510,"node_id":"I_kwDOHoY85M6A_hZW","number":325,"title":"[SUGGESTION] drizzle.config.ts non-default export error description improvement","user":{"login":"FlynnHillier","id":48843724,"node_id":"MDQ6VXNlcjQ4ODQzNzI0","avatar_url":"https://avatars.githubusercontent.com/u/48843724?v=4","gravatar_id":"","url":"https://api.github.com/users/FlynnHillier","html_url":"https://github.com/FlynnHillier","followers_url":"https://api.github.com/users/FlynnHillier/followers","following_url":"https://api.github.com/users/FlynnHillier/following{/other_user}","gists_url":"https://api.github.com/users/FlynnHillier/gists{/gist_id}","starred_url":"https://api.github.com/users/FlynnHillier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FlynnHillier/subscriptions","organizations_url":"https://api.github.com/users/FlynnHillier/orgs","repos_url":"https://api.github.com/users/FlynnHillier/repos","events_url":"https://api.github.com/users/FlynnHillier/events{/privacy}","received_events_url":"https://api.github.com/users/FlynnHillier/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-01T20:37:06Z","updated_at":"2024-03-01T20:37:06Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"After using `defineConfig()` to create my configuration for `drizzle.config.ts` , and using the command:\r\n ```\r\n drizzle-kit push:pg --config=<mypath>/drizzle.config.ts\r\n ```\r\nI was met with a rather confusing error:\r\n```\r\n Invalid input  Only \"pg\" is available options for \"--driver\"\r\n```\r\n\r\nThis error was being caused because I had not defined my configuration as the default export of the file, I had instead exported it as a constant, as seen below:\r\n\r\n```typescript\r\nimport { defineConfig } from \"drizzle-kit\"\r\n\r\nimport { env } from \"~/env\"\r\n\r\nexport const drizzleConfig = defineConfig({  //This line is causing the error\r\n  schema: \"./schema.ts\",\r\n  out: \"./../../drizzle\",\r\n  driver: \"pg\",\r\n  dbCredentials: {\r\n    connectionString: env.POSTGRES_URL,\r\n  },\r\n  verbose: true,\r\n  strict: true,\r\n})\r\n```\r\n\r\nEventually I spotted my fault and was easily able to stop the error occuring by removing the constant and just exporting the configuration as the default export directly. However the error description lead to me believing that something within my actual configuration definition was the error's cause, specifically the driver, and wasting a fair bit of time as a result.\r\n\r\nI suggest that an improved error description be added such that if `drizzle.config.ts` is read in without a default export, the error description instead reads something along the lines of: `no default export found in 'drizzle.config.ts' , are you sure you exported config as default?`","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/325/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/324","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/324/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/324/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/324/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/324","id":2161620852,"node_id":"I_kwDOHoY85M6A17d0","number":324,"title":"Drizzle Studio giving error due to `CURRENT_TIMESTAMP` in schema","user":{"login":"ax-at","id":155352339,"node_id":"U_kgDOCUJ9Ew","avatar_url":"https://avatars.githubusercontent.com/u/155352339?v=4","gravatar_id":"","url":"https://api.github.com/users/ax-at","html_url":"https://github.com/ax-at","followers_url":"https://api.github.com/users/ax-at/followers","following_url":"https://api.github.com/users/ax-at/following{/other_user}","gists_url":"https://api.github.com/users/ax-at/gists{/gist_id}","starred_url":"https://api.github.com/users/ax-at/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ax-at/subscriptions","organizations_url":"https://api.github.com/users/ax-at/orgs","repos_url":"https://api.github.com/users/ax-at/repos","events_url":"https://api.github.com/users/ax-at/events{/privacy}","received_events_url":"https://api.github.com/users/ax-at/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-02-29T16:15:24Z","updated_at":"2024-03-21T19:00:07Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I am having some issues with drizzle studio. I am not able to query the results when there is a `CURRENT_TIMESTAMP` included in my schema.\r\n\r\nSee schema on drizzle studio in the image below, it is having an error on line no. 20 for `CURRENT_TIMESTAMP`\r\nError = `Cannot find name 'CURRENT_TIMESTAMP'.`\r\n![1_schema](https://github.com/drizzle-team/drizzle-kit-mirror/assets/155352339/852ded32-c2a3-471f-9103-7e8ba81e3314)\r\n\r\nWhen I try to fetch data using the query `db.select().from(userCity);` , in the \"queries\" tab. See the below image:\r\n![2_queries](https://github.com/drizzle-team/drizzle-kit-mirror/assets/155352339/aa1de376-fb09-4e13-950b-243b49f115d1)\r\n\r\nIt shows error dialog, with error on console `ReferenceError: CURRENT_TIMESTAMP is not defined.` See the below image:\r\n![3_error](https://github.com/drizzle-team/drizzle-kit-mirror/assets/155352339/7ff67fee-2cb0-426f-8649-858afadef639)\r\n\r\nwhereas the same query in \"sql\" section is able to fetch the data. See the below image:\r\n![4_sql](https://github.com/drizzle-team/drizzle-kit-mirror/assets/155352339/c9a96211-de72-46ca-b771-e00187d44e90)\r\n\r\nAlso, if in my schema, there are tables with no `CURRENT_TIMESTAMP` in it, it works as expected with no error.\r\n\r\nDrizzle Config:\r\n```\r\nimport type { Config } from \"drizzle-kit\";\r\n\r\nconst uri = [\r\n  \"mysql://\",\r\n  process.env.DB_USERNAME,\r\n  \":\",\r\n  process.env.DB_PASSWORD,\r\n  \"@\",\r\n  process.env.DB_HOST,\r\n  \":3306/\",\r\n  process.env.DB_NAME,\r\n].join(\"\");\r\n\r\nexport default {\r\n  schema: \"../schema/src/tables\",\r\n  out: \"../schema/drizzle\",\r\n  driver: \"mysql2\",\r\n  dbCredentials: { uri },\r\n  tablesFilter: [\"*\"],\r\n} satisfies Config;\r\n```\r\n\r\nDrizzle Schema:\r\n```\r\nimport { sql } from \"drizzle-orm\";\r\nimport { int, primaryKey, timestamp, varchar } from \"drizzle-orm/mysql-core\";\r\n\r\nimport { tableCreator } from \"./_table\";\r\n\r\nexport const userCity = tableCreator(\r\n  \"user_city\",\r\n  {\r\n    cityid: int(\"CITYID\").autoincrement().notNull(),\r\n    cityname: varchar(\"CITYNAME\", { length: 100 }).notNull(),\r\n    state: varchar(\"STATE\", { length: 100 }),\r\n    udpateby: int(\"UDPATEBY\").notNull(),\r\n    update: timestamp(\"UPDATE\", { mode: \"date\" })\r\n      .default(sql`CURRENT_TIMESTAMP`)\r\n      .onUpdateNow()\r\n      .notNull(),\r\n  },\r\n  (table) => {\r\n    return {\r\n      userCityCityid: primaryKey({\r\n        columns: [table.cityid],\r\n        name: \"user_city_CITYID\",\r\n      }),\r\n    };\r\n  },\r\n);\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/324/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/323","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/323/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/323/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/323/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/323","id":2152416641,"node_id":"I_kwDOHoY85M6AS0WB","number":323,"title":"Documentation textfix: Launch Drizzle Studio","user":{"login":"websharkdev","id":47607282,"node_id":"MDQ6VXNlcjQ3NjA3Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/47607282?v=4","gravatar_id":"","url":"https://api.github.com/users/websharkdev","html_url":"https://github.com/websharkdev","followers_url":"https://api.github.com/users/websharkdev/followers","following_url":"https://api.github.com/users/websharkdev/following{/other_user}","gists_url":"https://api.github.com/users/websharkdev/gists{/gist_id}","starred_url":"https://api.github.com/users/websharkdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/websharkdev/subscriptions","organizations_url":"https://api.github.com/users/websharkdev/orgs","repos_url":"https://api.github.com/users/websharkdev/repos","events_url":"https://api.github.com/users/websharkdev/events{/privacy}","received_events_url":"https://api.github.com/users/websharkdev/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-02-24T17:36:29Z","updated_at":"2024-02-24T17:36:29Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/47607282/ff47ea16-8b15-4cdd-9339-4a4eafd72b51)\r\n\r\n**Issue: Lack of Documentation Update when Switching Installation Options**\r\n\r\n**Description:**\r\nWhen attempting to change the installation option (for example, from npm to yarn) for the project, the installation documentation remains unchanged. This can create confusion among developers and make the project setup process challenging.\r\n\r\n**Steps to Reproduce:**\r\n1. Go to the project's installation documentation page.\r\n2. Try to change the installation option (for example, switch from npm to yarn).\r\n3. Notice that the documentation remains unchanged, regardless of the selected installation option.\r\n\r\n**Expected Behavior:**\r\nThe installation documentation should automatically update according to the selected installation option (npm, yarn, etc.) to provide accurate instructions for developers.\r\n\r\n**Current Behavior:**\r\nThe documentation remains unchanged regardless of the selected installation option, which can lead to confusion and hinder the project setup process.\r\n\r\n**Impact:**\r\nThis may slow down the project setup and configuration process and create confusion for new developers unfamiliar with the chosen installation option.\r\n\r\n**Proposed Solution:**\r\nUpdate the installation documentation to automatically adapt to the selected installation option, ensuring accurate instructions for developers.\r\n\r\n**Priority:**\r\nMedium","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/323/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/322","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/322/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/322/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/322/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/322","id":2150468469,"node_id":"I_kwDOHoY85M6ALYt1","number":322,"title":"partial unique index migration output omit where","user":{"login":"ErrorCode996","id":119844695,"node_id":"U_kgDOBySvVw","avatar_url":"https://avatars.githubusercontent.com/u/119844695?v=4","gravatar_id":"","url":"https://api.github.com/users/ErrorCode996","html_url":"https://github.com/ErrorCode996","followers_url":"https://api.github.com/users/ErrorCode996/followers","following_url":"https://api.github.com/users/ErrorCode996/following{/other_user}","gists_url":"https://api.github.com/users/ErrorCode996/gists{/gist_id}","starred_url":"https://api.github.com/users/ErrorCode996/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ErrorCode996/subscriptions","organizations_url":"https://api.github.com/users/ErrorCode996/orgs","repos_url":"https://api.github.com/users/ErrorCode996/repos","events_url":"https://api.github.com/users/ErrorCode996/events{/privacy}","received_events_url":"https://api.github.com/users/ErrorCode996/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-02-23T06:50:10Z","updated_at":"2024-02-27T17:27:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```\r\nexport const email = pgTable(\"Email\", {\r\n\tid: serial(\"id\").primaryKey().notNull(),\r\n\tuid: uuid(\"uid\").notNull(),\r\n\temail: text(\"email\").notNull(),\r\n\ttype: emailType(\"type\").notNull(),\r\n\tverifiedAt: timestamp(\"verifiedAt\", { precision: 3, mode: 'string' }),\r\n\tverifyTokenGeneratedAt: timestamp(\"verifyTokenGeneratedAt\", { precision: 3, mode: 'string' }),\r\n\tverifyToken: varchar(\"verifyToken\", { length: 6 }),\r\n\tuserId: integer(\"userId\").notNull().references(() => user.id, { onDelete: \"cascade\" } ),\r\n\tisPrivate: boolean(\"isPrivate\"),\r\n\tversion: integer(\"version\").default(1).notNull(),\r\n\tupdatedAt: timestamp(\"updatedAt\", { mode: 'string' }).defaultNow().notNull(),\r\n\tcreatedAt: timestamp(\"createdAt\", { mode: 'string' }).defaultNow().notNull(),\r\n\tdeletedAt: date(\"deletedAt\"),\r\n\tisDeleted: boolean(\"isDeleted\").default(false),\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\tuidUnique: uniqueIndex(\"Email_uid_unique\").on(table.uid),\r\n\t\temailUnique: uniqueIndex(\"Email_email_unique\").on(table.email).where(eq(table.isDeleted,false)),\r\n\t}\r\n});\r\n```\r\n\r\nmigration output \r\n\r\n```\r\nCREATE UNIQUE INDEX IF NOT EXISTS \"Email_email_unique\" ON \"Email\" (\"email\");--> statement-breakpoint\r\n```\r\n\r\nexpected\r\n```\r\nCREATE UNIQUE INDEX IF NOT EXISTS \"Email_email_unique\" ON \"Email\" (\"email\") WHERE \"isDeleted\" = false;\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/322/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/322/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/321","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/321/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/321/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/321/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/321","id":2148791722,"node_id":"I_kwDOHoY85M6AE_Wq","number":321,"title":"Drizzle kit for D1 does not work when Wrangler is installed locally","user":{"login":"valtyr","id":3050355,"node_id":"MDQ6VXNlcjMwNTAzNTU=","avatar_url":"https://avatars.githubusercontent.com/u/3050355?v=4","gravatar_id":"","url":"https://api.github.com/users/valtyr","html_url":"https://github.com/valtyr","followers_url":"https://api.github.com/users/valtyr/followers","following_url":"https://api.github.com/users/valtyr/following{/other_user}","gists_url":"https://api.github.com/users/valtyr/gists{/gist_id}","starred_url":"https://api.github.com/users/valtyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/valtyr/subscriptions","organizations_url":"https://api.github.com/users/valtyr/orgs","repos_url":"https://api.github.com/users/valtyr/repos","events_url":"https://api.github.com/users/valtyr/events{/privacy}","received_events_url":"https://api.github.com/users/valtyr/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-02-22T10:58:43Z","updated_at":"2024-03-13T18:03:19Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I ran into problems using Drizzle Studio for D1 that were caused by Wrangler being installed locally. It would likely be an improvement to default to the wrangler binary in node_modules if it is available, since this seems to be a common setup. It would probably also be useful if the error message thrown would fall back to stderr if no stdout is returned as this would make it easier to surface these sorts of problems:\r\n\r\n```diff\r\n    try {\r\n      await $`NO_D1_WARNING=true wrangler d1 execute ${dbName} --config=${configPath} --command=${query}`;\r\n    } catch (e1) {\r\n-        throw new Error(e1.stdout);\r\n+        throw new Error(e1.stdout || e1.stderr);\r\n    }\r\n```\r\n\r\nThank you!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/321/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/321/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/320","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/320/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/320/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/320/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/320","id":2140995406,"node_id":"I_kwDOHoY85M5_nP9O","number":320,"title":"Improvement suggestion : timeout if db name not found ","user":{"login":"Snaylaker","id":43219077,"node_id":"MDQ6VXNlcjQzMjE5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43219077?v=4","gravatar_id":"","url":"https://api.github.com/users/Snaylaker","html_url":"https://github.com/Snaylaker","followers_url":"https://api.github.com/users/Snaylaker/followers","following_url":"https://api.github.com/users/Snaylaker/following{/other_user}","gists_url":"https://api.github.com/users/Snaylaker/gists{/gist_id}","starred_url":"https://api.github.com/users/Snaylaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Snaylaker/subscriptions","organizations_url":"https://api.github.com/users/Snaylaker/orgs","repos_url":"https://api.github.com/users/Snaylaker/repos","events_url":"https://api.github.com/users/Snaylaker/events{/privacy}","received_events_url":"https://api.github.com/users/Snaylaker/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-02-18T13:44:01Z","updated_at":"2024-02-18T13:44:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hey, \r\n\r\nI had a typo in my connection url misspelled the name of my db, i know its my bad.\r\nbut is it possible to have it timeout after a while if it doesnt find the db name? other wise it just keeps loading forever .\r\n\r\nI also misstyped my password ( kinda of genius, i know) but all i got is \r\n`        throw new Error(\"SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing\"); `\r\nis it possible to have more specific error message, with some kind of connection string parsing before sending it down to the driver ?\r\n\r\nAny way love the product, keep up the awesome work .","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/320/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/319","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/319/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/319/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/319/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/319","id":2140616406,"node_id":"I_kwDOHoY85M5_lzbW","number":319,"title":"Command \"push:pg\" attempting to apply changes even when there are no changes in the code","user":{"login":"srigi","id":295197,"node_id":"MDQ6VXNlcjI5NTE5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/295197?v=4","gravatar_id":"","url":"https://api.github.com/users/srigi","html_url":"https://github.com/srigi","followers_url":"https://api.github.com/users/srigi/followers","following_url":"https://api.github.com/users/srigi/following{/other_user}","gists_url":"https://api.github.com/users/srigi/gists{/gist_id}","starred_url":"https://api.github.com/users/srigi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srigi/subscriptions","organizations_url":"https://api.github.com/users/srigi/orgs","repos_url":"https://api.github.com/users/srigi/repos","events_url":"https://api.github.com/users/srigi/events{/privacy}","received_events_url":"https://api.github.com/users/srigi/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-02-17T21:01:12Z","updated_at":"2024-04-15T22:37:48Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```bash\r\n> dotenv -e .env.local drizzle-kit push:pg -- --config=drizzle.config.ts\r\n\r\ndrizzle-kit: v0.20.14\r\ndrizzle-orm: v0.29.3\r\n\r\nCustom config path was provided, using 'drizzle.config.ts'\r\nReading config file '~/Developer/web/drizzle.config.ts'\r\n\r\nALTER TABLE \"ContentBlock\" DROP CONSTRAINT \"ContentBlock_parent_id_ContentBlock_id_fk\";\r\n\r\nDO $$ BEGIN\r\n ALTER TABLE \"ContentBlock\" ADD CONSTRAINT \"ContentBlock_parent_id_ContentBlock_id_fk\" FOREIGN KEY (\"parent_id\") REFERENCES \"ContentBlock\"(\"id\") ON DELETE no action ON UPDATE no action;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```\r\n\r\nThe table file:\r\n\r\n```ts\r\nimport { sql } from 'drizzle-orm';\r\nimport { type AnyPgColumn, index, jsonb, pgTable, timestamp, uuid, varchar } from 'drizzle-orm/pg-core';\r\n\r\nimport { Props as GalleryProps } from '~/app/(public)/galerie/Gallery';\r\n\r\nexport const contentBlock = pgTable(\r\n  'ContentBlock',\r\n  {\r\n    id: uuid('id')\r\n      .primaryKey()\r\n      .default(sql`uuid7()`),\r\n    parentId: uuid('parent_id').references((): AnyPgColumn => contentBlock.id),\r\n    page: varchar('page').notNull(),\r\n    component: varchar<string, 'Gallery', Readonly<['Gallery', ...'Gallery'[]]>>('component').notNull(),\r\n    props: jsonb('props').$type<GalleryProps>().notNull(),\r\n    createdAt: timestamp('createdAt')\r\n      .default(sql`now()`)\r\n      .notNull(),\r\n  },\r\n  (columns) => ({\r\n    idxParentId: index('idx_parent_id').on(columns.parentId),\r\n    idxPage: index('idx_page').on(columns.page),\r\n    idxProps: index('idx_props').on(columns.props),\r\n  }),\r\n);\r\n```\r\n\r\nI followed [instructions at FAQ](https://orm.drizzle.team/kit-docs/faq#pushpg-command-is-attempting-to-apply-changes-even-when-there-are-no-changes-in-the-code) but they doesn't seem to help anyhow.\r\n\r\nHowever I put `console.log` at the beginning of `applyJsonDiff(json1, json2)` function and I found interesting difference:\r\n\r\n```js\r\nfunction applyJsonDiff(json1, json2) {\r\n  console.log(json1.tables, json2.tables);\r\n  ...\r\n```\r\n\r\n```js\r\n{\r\n  CloudImage: {\r\n    name: 'CloudImage',\r\n    schema: '',\r\n    columns: { ... },\r\n    indexes: { ... },\r\n    foreignKeys: {},\r\n    compositePrimaryKeys: {},\r\n    uniqueConstraints: {}\r\n  },\r\n  ContentBlock: {\r\n    name: 'ContentBlock',\r\n    schema: '',\r\n    columns: { ... },\r\n    indexes: { ... },\r\n    foreignKeys: {\r\n      ContentBlock_parent_id_ContentBlock_id_fk: 'ContentBlock_parent_id_ContentBlock_id_fk;ContentBlock;parent_id;ContentBlock;id;no action;no action;public'\r\n    },\r\n    compositePrimaryKeys: {},\r\n    uniqueConstraints: {}\r\n  }\r\n}\r\n\r\n{\r\n  CloudImage: {\r\n    name: 'CloudImage',\r\n    schema: '',\r\n    columns: { ... },\r\n    indexes: { ... },\r\n    foreignKeys: {},\r\n    compositePrimaryKeys: {},\r\n    uniqueConstraints: {}\r\n  },\r\n  ContentBlock: {\r\n    name: 'ContentBlock',\r\n    schema: '',\r\n    columns: { ... },\r\n    indexes: { ... },\r\n    foreignKeys: {\r\n      ContentBlock_parent_id_ContentBlock_id_fk: 'ContentBlock_parent_id_ContentBlock_id_fk;ContentBlock;parent_id;ContentBlock;id;no action;no action;'\r\n    },\r\n    compositePrimaryKeys: {},\r\n    uniqueConstraints: {}\r\n  }\r\n}\r\n\r\n```\r\n\r\nThe value of `ContentBlock.foreignKeys.ContentBlock_parent_id_ContentBlock_id_fk` is slightly different:\r\n\r\n```\r\njson1: ContentBlock_parent_id_ContentBlock_id_fk;ContentBlock;parent_id;ContentBlock;id;no action;no action;public\r\njson2: ContentBlock_parent_id_ContentBlock_id_fk;ContentBlock;parent_id;ContentBlock;id;no action;no action;\r\n```\r\n\r\nI believe this is a bug, that needs addressing.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/319/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/318","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/318/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/318/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/318/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/318","id":2140285399,"node_id":"I_kwDOHoY85M5_kinX","number":318,"title":"Provide `drizzle-kit migrate:sqlite` command to simplify Dockerfile process?","user":{"login":"deadcoder0904","id":16436270,"node_id":"MDQ6VXNlcjE2NDM2Mjcw","avatar_url":"https://avatars.githubusercontent.com/u/16436270?v=4","gravatar_id":"","url":"https://api.github.com/users/deadcoder0904","html_url":"https://github.com/deadcoder0904","followers_url":"https://api.github.com/users/deadcoder0904/followers","following_url":"https://api.github.com/users/deadcoder0904/following{/other_user}","gists_url":"https://api.github.com/users/deadcoder0904/gists{/gist_id}","starred_url":"https://api.github.com/users/deadcoder0904/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deadcoder0904/subscriptions","organizations_url":"https://api.github.com/users/deadcoder0904/orgs","repos_url":"https://api.github.com/users/deadcoder0904/repos","events_url":"https://api.github.com/users/deadcoder0904/events{/privacy}","received_events_url":"https://api.github.com/users/deadcoder0904/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-02-17T16:41:32Z","updated_at":"2024-02-17T16:41:32Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I have been trying to get Drizzle working with Docker but no luck.\r\n\r\nEvery other framework has solutions for it but Drizzle lacks them.\r\n\r\nI think what Drizzle Kit needs is a solution provided in these 2 blogs:\r\n\r\n1. https://notiz.dev/blog/dockerizing-nestjs-with-prisma-and-postgresql\r\n2. https://notiz.dev/blog/prisma-migrate-deploy-with-docker\r\n\r\nThe example is Prisma with Nestjs but it probably would work with Drizzle & Next.js.\r\n\r\nI've been trying for a week to get Docker running on my simple SQLite + Next.js project but so far have been unsuccessful.\r\n\r\nPart of the reason is Drizzle doesn't provide direct migrate command but instead wants me to rely on `tsx` which again breaks the build near the end as Dockerfile can't find `tsx` at the end.\r\n\r\nSmallest Reproduction -> https://github.com/deadcoder0904/easypanel-nextjs-sqlite\r\n\r\nThis project works well in Development & would definitely work well in Production if I can get the migrate command.\r\n\r\nCurrently, I can think of only 1 solution:\r\n\r\n1. Use bun.sh (as a `tsx` replacement) but it won't be available on Windows until 1 or 2 weeks anyways.\r\n\r\nIf there's any other solutions that anyone got Drizzle Migrations working with SQLite on a Next.js app, I'd love to know? I've found a couple of projects on Github but they do it in a very complicated manner.\r\n\r\nI think the reason is because Drizzle Migrate doesn't exist as a command.\r\n\r\nHere's how tsx fails:\r\n\r\n```ts\r\n> easypanel-nextjs-sqlite@0.1.0 start\r\n> npm run db:migrate:prod && next start\r\n\r\n\r\n> easypanel-nextjs-sqlite@0.1.0 db:migrate:prod\r\n> node --import tsx --env-file .env.production ./scripts/drizzle-migrate.ts\r\n\r\nnode:internal/modules/esm/resolve:853\r\n  throw new ERR_MODULE_NOT_FOUND(packageName, fileURLToPath(base), null);\r\n        ^\r\n\r\nError [ERR_MODULE_NOT_FOUND]: Cannot find package 'tsx' imported from /app/\r\n    at packageResolve (node:internal/modules/esm/resolve:853:9)\r\n    at moduleResolve (node:internal/modules/esm/resolve:910:20)\r\n    at defaultResolve (node:internal/modules/esm/resolve:1130:11)\r\n    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:396:12)\r\n    at ModuleLoader.resolve (node:internal/modules/esm/loader:365:25)\r\n    at ModuleLoader.getModuleJob (node:internal/modules/esm/loader:240:38)\r\n    at ModuleLoader.import (node:internal/modules/esm/loader:328:34)\r\n    at loadESM (node:internal/process/esm_loader:23:33)\r\n    at runMainESM (node:internal/modules/run_main:98:21)\r\n    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:131:5) {\r\n  code: 'ERR_MODULE_NOT_FOUND'\r\n}\r\n\r\nNode.js v20.11.1\r\n```\r\n\r\nThis is inside `Dockerfile` otherwise I would've installed `tsx` locally. I've also installed in dependency instead of devDependency.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/318/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/317","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/317/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/317/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/317/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/317","id":2130768172,"node_id":"I_kwDOHoY85M5_APEs","number":317,"title":"Most commands fail with missing drizzle-studio/localhost-key.pem","user":{"login":"jckw","id":11884004,"node_id":"MDQ6VXNlcjExODg0MDA0","avatar_url":"https://avatars.githubusercontent.com/u/11884004?v=4","gravatar_id":"","url":"https://api.github.com/users/jckw","html_url":"https://github.com/jckw","followers_url":"https://api.github.com/users/jckw/followers","following_url":"https://api.github.com/users/jckw/following{/other_user}","gists_url":"https://api.github.com/users/jckw/gists{/gist_id}","starred_url":"https://api.github.com/users/jckw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jckw/subscriptions","organizations_url":"https://api.github.com/users/jckw/orgs","repos_url":"https://api.github.com/users/jckw/repos","events_url":"https://api.github.com/users/jckw/events{/privacy}","received_events_url":"https://api.github.com/users/jckw/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2024-02-12T19:01:14Z","updated_at":"2024-05-11T10:38:22Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm new to Drizzle and setting up a project with a blank DB.\r\n\r\nWhen I run `yarn drizzle-kit generate:pg` it fails with an error regarding a missing key from drizzle-studio. I haven't used it.\r\n\r\n```\r\n$ yarn drizzle-kit generate:pg\r\nyarn run v1.22.19\r\n$ /Users/jack/Documents/Projects/outro-turbo/node_modules/.bin/drizzle-kit generate:pg\r\ndrizzle-kit: v0.20.14\r\ndrizzle-orm: v0.29.3\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/Users/jack/Documents/Projects/outro-turbo/packages/db/drizzle.config.ts'\r\nnode:internal/process/promises:288\r\n            triggerUncaughtException(err, true /* fromPromise */);\r\n            ^\r\n\r\n[Error: ENOENT: no such file or directory, open '/Users/jack/Library/Application Support/drizzle-studio/localhost-key.pem'] {\r\n  errno: -2,\r\n  code: 'ENOENT',\r\n  syscall: 'open',\r\n  path: '/Users/jack/Library/Application Support/drizzle-studio/localhost-key.pem'\r\n}\r\n\r\nNode.js v18.18.2\r\nerror Command failed with exit code 1.\r\n```\r\n\r\nI have tried this with both `?sslmode=disable` and without since I figured maybe it's trying to send SSL requests, but both ways error.\r\n\r\nThis also occurs with `yarn drizzle-kit introspect:pg`, `check:pg`, etc. I haven't checked other DB providers.\r\n\r\nPossibly a dupe of https://github.com/drizzle-team/drizzle-orm/issues/1880, but I figured this is the right repo to put this in. Let me know if that's not the case.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/317/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/317/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/316","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/316/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/316/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/316/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/316","id":2129001768,"node_id":"I_kwDOHoY85M5-5f0o","number":316,"title":"Converting from enum to text should migrate gracefully without dataloss","user":{"login":"jakeleventhal","id":15133828,"node_id":"MDQ6VXNlcjE1MTMzODI4","avatar_url":"https://avatars.githubusercontent.com/u/15133828?v=4","gravatar_id":"","url":"https://api.github.com/users/jakeleventhal","html_url":"https://github.com/jakeleventhal","followers_url":"https://api.github.com/users/jakeleventhal/followers","following_url":"https://api.github.com/users/jakeleventhal/following{/other_user}","gists_url":"https://api.github.com/users/jakeleventhal/gists{/gist_id}","starred_url":"https://api.github.com/users/jakeleventhal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakeleventhal/subscriptions","organizations_url":"https://api.github.com/users/jakeleventhal/orgs","repos_url":"https://api.github.com/users/jakeleventhal/repos","events_url":"https://api.github.com/users/jakeleventhal/events{/privacy}","received_events_url":"https://api.github.com/users/jakeleventhal/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-02-11T14:05:33Z","updated_at":"2024-02-11T14:05:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When changing a column from pgEnum to text, I get the following warning about data loss:\r\n```\r\n Warning  Found data-loss statements:\r\n¬∑ You're about to change someColumn column type from SomeColumn to text with 1 items\r\n```\r\nThis should be able to migrate without data loss","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/316/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/315","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/315/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/315/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/315/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/315","id":2128868524,"node_id":"I_kwDOHoY85M5-4_Ss","number":315,"title":"Drizzle studio not opening ","user":{"login":"fmchisti","id":57781203,"node_id":"MDQ6VXNlcjU3NzgxMjAz","avatar_url":"https://avatars.githubusercontent.com/u/57781203?v=4","gravatar_id":"","url":"https://api.github.com/users/fmchisti","html_url":"https://github.com/fmchisti","followers_url":"https://api.github.com/users/fmchisti/followers","following_url":"https://api.github.com/users/fmchisti/following{/other_user}","gists_url":"https://api.github.com/users/fmchisti/gists{/gist_id}","starred_url":"https://api.github.com/users/fmchisti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmchisti/subscriptions","organizations_url":"https://api.github.com/users/fmchisti/orgs","repos_url":"https://api.github.com/users/fmchisti/repos","events_url":"https://api.github.com/users/fmchisti/events{/privacy}","received_events_url":"https://api.github.com/users/fmchisti/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-02-11T06:57:26Z","updated_at":"2024-02-15T04:23:27Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When I run studio \r\n\r\nHey üëã\r\nWelcome to Drizzle Studio\r\nConnecting to the Drizzle Kit on localhost:4983\r\n\r\nit showing me that screen. \r\n\r\nMy config \r\n\r\nimport type { Config } from \"drizzle-kit\";\r\nimport { env } from \"./src/config/env\";\r\n\r\nimport * as dotenv from \"dotenv\";\r\ndotenv.config();\r\n\r\nexport default {\r\n  schema: \"./src/db/schema/index.ts\",\r\n  out: \"./migrations\",\r\n  driver: \"pg\",\r\n  dbCredentials: {\r\n    connectionString: env.DATABASE_CONNECTION,\r\n  },\r\n  verbose: true,\r\n  strict: true,\r\n} satisfies Config;\r\n \r\n \r\n Also, I tried to use a direct process.env \r\n \r\n Same issue \r\n \r\n //\r\n \r\nNote: My schema is not I one file. its  different files but I export from the index.ts \r\n\r\n\r\n export {\r\n  applications,\r\n\r\n  // user\r\n  users,\r\n  profile,\r\n  roles,\r\n  userToRole,\r\n\r\n  // For billing\r\n  billings,\r\n  packages,\r\n  transactions,\r\n\r\n  // Theme table\r\n  themeMarket,\r\n  activeTheme,\r\n\r\n  // Login Theme table\r\n  activeLoginThemes,\r\n  loginThemes,\r\n};","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/315/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/314","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/314/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/314/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/314/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/314","id":2127720256,"node_id":"I_kwDOHoY85M5-0m9A","number":314,"title":"BUG: Empty array is not reflected as a valid default value in migration","user":{"login":"shabashab","id":37144124,"node_id":"MDQ6VXNlcjM3MTQ0MTI0","avatar_url":"https://avatars.githubusercontent.com/u/37144124?v=4","gravatar_id":"","url":"https://api.github.com/users/shabashab","html_url":"https://github.com/shabashab","followers_url":"https://api.github.com/users/shabashab/followers","following_url":"https://api.github.com/users/shabashab/following{/other_user}","gists_url":"https://api.github.com/users/shabashab/gists{/gist_id}","starred_url":"https://api.github.com/users/shabashab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shabashab/subscriptions","organizations_url":"https://api.github.com/users/shabashab/orgs","repos_url":"https://api.github.com/users/shabashab/repos","events_url":"https://api.github.com/users/shabashab/events{/privacy}","received_events_url":"https://api.github.com/users/shabashab/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-02-09T19:18:09Z","updated_at":"2024-02-09T19:19:38Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"At the moment I have a field in my table:\r\n\r\n```js\r\ntags: text('tags').array().default([]).notNull()\r\n```\r\n\r\nThe typescript definition does not mark this as invalid, but when running `drizzle-kit generate:pg` the output migration creates invalid definition of the column:\r\n\r\n```sql\r\n\"tags\" text[] DEFAULT  NOT NULL\r\n```\r\n\r\nThis leaves an empty space instead of an actual default value.\r\n\r\nPossible fix is to generate an empty array definition of the type that is required, for example:\r\n\r\n```sql\r\n\"tags\" text[] DEFAULT array[]::text[] NOT NULL\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/314/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/313","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/313/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/313/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/313/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/313","id":2125891814,"node_id":"I_kwDOHoY85M5-tojm","number":313,"title":"‚ú®Feature: allow customizing introspect pg date type (don't default to string)","user":{"login":"alan-funded","id":148393350,"node_id":"U_kgDOCNhNhg","avatar_url":"https://avatars.githubusercontent.com/u/148393350?v=4","gravatar_id":"","url":"https://api.github.com/users/alan-funded","html_url":"https://github.com/alan-funded","followers_url":"https://api.github.com/users/alan-funded/followers","following_url":"https://api.github.com/users/alan-funded/following{/other_user}","gists_url":"https://api.github.com/users/alan-funded/gists{/gist_id}","starred_url":"https://api.github.com/users/alan-funded/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alan-funded/subscriptions","organizations_url":"https://api.github.com/users/alan-funded/orgs","repos_url":"https://api.github.com/users/alan-funded/repos","events_url":"https://api.github.com/users/alan-funded/events{/privacy}","received_events_url":"https://api.github.com/users/alan-funded/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-02-08T19:09:46Z","updated_at":"2024-02-08T19:09:46Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Right now, when you introspect, PG dates default to `{ mode: 'string' }`, but if you want `{ mode: 'date' }` you have to go in and edit by hand.\r\n\r\nUnless I'm missing something?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/313/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/312","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/312/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/312/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/312/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/312","id":2121962161,"node_id":"I_kwDOHoY85M5-epKx","number":312,"title":"‚ö†Ô∏èüêûBUG: `smallint` is not defined in introspected `schema.ts`","user":{"login":"xsjcTony","id":45784210,"node_id":"MDQ6VXNlcjQ1Nzg0MjEw","avatar_url":"https://avatars.githubusercontent.com/u/45784210?v=4","gravatar_id":"","url":"https://api.github.com/users/xsjcTony","html_url":"https://github.com/xsjcTony","followers_url":"https://api.github.com/users/xsjcTony/followers","following_url":"https://api.github.com/users/xsjcTony/following{/other_user}","gists_url":"https://api.github.com/users/xsjcTony/gists{/gist_id}","starred_url":"https://api.github.com/users/xsjcTony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xsjcTony/subscriptions","organizations_url":"https://api.github.com/users/xsjcTony/orgs","repos_url":"https://api.github.com/users/xsjcTony/repos","events_url":"https://api.github.com/users/xsjcTony/events{/privacy}","received_events_url":"https://api.github.com/users/xsjcTony/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-02-07T01:08:09Z","updated_at":"2024-02-07T01:08:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"## I personally think this is a kind of critical bugüêû.\r\n\r\nWhen I'm introspecting my local `mysql` database, in the generated `schema.ts` file, `smallint` is not imported hence resulting in this:\r\n\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/45784210/35e87798-232b-45e7-aee7-5f590e0ac6c6)\r\n\r\nThe generated code with error is below (this is the only table I have with `smallint`):\r\n\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/45784210/44164bf5-0e67-4a50-9075-164b94b044e8)\r\n\r\nOnce I manually added `smallint` import from `drizzle-orm/mysql-core`, everything works well.\r\n\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/45784210/19ac6710-0251-4c74-b0cf-0d6fc9aa32f4)\r\n\r\nOther than that, there are also 2 unused imports but they are trivial.\r\n\r\n---\r\n\r\n## ‚ö†Ô∏èThis is critical to me\r\nbecause I'm managing the migration & other db stuffs in another backend repo. In this one I'm just using `Next.js` and `drizzle-orm` to simply fetching and mutating some tables in DB, for some simple functionalities.\r\n\r\nSo my plan is run the introspection in CI/CD pipeline everytime (with `status.ts` in `.gitignore`) code is deployed.\r\n\r\nPlease have a look, thanks.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/312/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/311","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/311/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/311/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/311/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/311","id":2121840086,"node_id":"I_kwDOHoY85M5-eLXW","number":311,"title":"‚ú®Feature: allow customizing introspect output filename","user":{"login":"xsjcTony","id":45784210,"node_id":"MDQ6VXNlcjQ1Nzg0MjEw","avatar_url":"https://avatars.githubusercontent.com/u/45784210?v=4","gravatar_id":"","url":"https://api.github.com/users/xsjcTony","html_url":"https://github.com/xsjcTony","followers_url":"https://api.github.com/users/xsjcTony/followers","following_url":"https://api.github.com/users/xsjcTony/following{/other_user}","gists_url":"https://api.github.com/users/xsjcTony/gists{/gist_id}","starred_url":"https://api.github.com/users/xsjcTony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xsjcTony/subscriptions","organizations_url":"https://api.github.com/users/xsjcTony/orgs","repos_url":"https://api.github.com/users/xsjcTony/repos","events_url":"https://api.github.com/users/xsjcTony/events{/privacy}","received_events_url":"https://api.github.com/users/xsjcTony/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-02-06T23:22:23Z","updated_at":"2024-02-06T23:22:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Currently it will always output `schema.ts` with `introspect`. It would be good if filename can also be customized along with path.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/311/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/311/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/310","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/310/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/310/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/310/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/310","id":2119244604,"node_id":"I_kwDOHoY85M5-URs8","number":310,"title":"Drizzle Studio isn't compatible with custom type","user":{"login":"nilsmehlhorn","id":7558607,"node_id":"MDQ6VXNlcjc1NTg2MDc=","avatar_url":"https://avatars.githubusercontent.com/u/7558607?v=4","gravatar_id":"","url":"https://api.github.com/users/nilsmehlhorn","html_url":"https://github.com/nilsmehlhorn","followers_url":"https://api.github.com/users/nilsmehlhorn/followers","following_url":"https://api.github.com/users/nilsmehlhorn/following{/other_user}","gists_url":"https://api.github.com/users/nilsmehlhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/nilsmehlhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nilsmehlhorn/subscriptions","organizations_url":"https://api.github.com/users/nilsmehlhorn/orgs","repos_url":"https://api.github.com/users/nilsmehlhorn/repos","events_url":"https://api.github.com/users/nilsmehlhorn/events{/privacy}","received_events_url":"https://api.github.com/users/nilsmehlhorn/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-02-05T18:49:43Z","updated_at":"2024-03-21T20:44:45Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I've implemented a custom type around Postgres' UUID type which encodes it into a URL-friendly string. Unfortunately, Drizzle Studio doesn't seem to be fully compatible with custom types. While it displays the encoded version of the UUID, I can only filter based the original UUID. Also, when navigating between relations or inserting/updating rows I get the following error:\r\n\r\n> invalid input syntax for type uuid: \"ast_2VDCabaqTSZOiEdUbfNL8\"\r\n\r\nNote: the string from the error decodes to `018d7554-8b9c-7be4-8b12-31f8acc59aa6`.\r\n\r\nMy custom type looks as follows where `uuidToObjectId` and `objectIdToUuid` can basically be any functions that convert the UUID to/from a different string deterministically:\r\n\r\n```ts\r\nimport { customType } from \"drizzle-orm/pg-core\";\r\n\r\nexport type ObjectIdTypeValues = {\r\n  data: string;\r\n  driverData: string;\r\n};\r\n\r\nexport type ObjectIdOptions = {\r\n  prefix: string;\r\n};\r\n\r\nexport const objectId = (name: string, options: ObjectIdOptions) =>\r\n  customType<ObjectIdTypeValues>({\r\n    dataType() {\r\n      return `uuid`;\r\n    },\r\n    fromDriver(value: string): string {\r\n      return uuidToObjectId(options.prefix, value);\r\n    },\r\n    toDriver(value) {\r\n      return objectIdToUuid(value);\r\n    },\r\n  })(name);\r\n```\r\n\r\n#### Versions\r\ndrizzle-kit@0.20.13\r\ndrizzle-orm@0.29.1\r\npg@8.11.3","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/310/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/310/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/309","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/309/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/309/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/309/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/309","id":2117328690,"node_id":"I_kwDOHoY85M5-M98y","number":309,"title":"MySQL & PostgreSQL: not detecting all new cascades","user":{"login":"johaven","id":5459596,"node_id":"MDQ6VXNlcjU0NTk1OTY=","avatar_url":"https://avatars.githubusercontent.com/u/5459596?v=4","gravatar_id":"","url":"https://api.github.com/users/johaven","html_url":"https://github.com/johaven","followers_url":"https://api.github.com/users/johaven/followers","following_url":"https://api.github.com/users/johaven/following{/other_user}","gists_url":"https://api.github.com/users/johaven/gists{/gist_id}","starred_url":"https://api.github.com/users/johaven/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johaven/subscriptions","organizations_url":"https://api.github.com/users/johaven/orgs","repos_url":"https://api.github.com/users/johaven/repos","events_url":"https://api.github.com/users/johaven/events{/privacy}","received_events_url":"https://api.github.com/users/johaven/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-02-04T21:50:20Z","updated_at":"2024-05-24T14:08:16Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"If we add multiple cascades, only one is detected and added to schema migration\r\n\r\n**First generate**\r\n```ts\r\nexport const users_groups = mysqlTable(\r\n  'users_groups',\r\n  {\r\n    userId: int('userId')\r\n      .notNull()\r\n      .references(() => users.id),\r\n    groupId: int('groupId')\r\n      .notNull()\r\n      .references(() => groups.id),\r\n    createdAt: datetime('createdAt', { mode: 'date', fsp: 3 })\r\n      .default(sql`CURRENT_TIMESTAMP(3)`)\r\n      .notNull()\r\n  },\r\n  (table) => ({\r\n    pk: primaryKey({ columns: [table.userId, table.groupId] })\r\n  })\r\n)\r\n```\r\n```mysql\r\nCREATE TABLE `users_groups` (\r\n\t`userId` int NOT NULL,\r\n\t`groupId` int NOT NULL,\r\n\t`createdAt` datetime(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),\r\n\tCONSTRAINT `users_groups_userId_groupId_pk` PRIMARY KEY(`userId`,`groupId`)\r\n);\r\nALTER TABLE `users_groups` ADD CONSTRAINT `users_groups_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;\r\nALTER TABLE `users_groups` ADD CONSTRAINT `users_groups_groupId_groups_id_fk` FOREIGN KEY (`groupId`) REFERENCES `groups`(`id`) ON DELETE no action ON UPDATE no action;\r\n```\r\n\r\n**Adding cascades**\r\n```ts\r\nexport const users_groups = mysqlTable(\r\n  'users_groups',\r\n  {\r\n    userId: int('userId')\r\n      .notNull()\r\n      .references(() => users.id, { onDelete: 'cascade' }),\r\n    groupId: int('groupId')\r\n      .notNull()\r\n      .references(() => groups.id, { onDelete: 'cascade' }),\r\n    createdAt: datetime('createdAt', { mode: 'date', fsp: 3 })\r\n      .default(sql`CURRENT_TIMESTAMP(3)`)\r\n      .notNull()\r\n  },\r\n  (table) => ({\r\n    pk: primaryKey({ columns: [table.userId, table.groupId] })\r\n  })\r\n)\r\n```\r\n```mysql\r\nALTER TABLE `users_groups` DROP FOREIGN KEY `users_groups_userId_users_id_fk`;\r\nALTER TABLE `users_groups` ADD CONSTRAINT `users_groups_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE cascade ON UPDATE no action;\r\n```\r\n\r\nThe groups id foreign key / constraint was not generated to update the cascade part.\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/309/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/309/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/308","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/308/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/308/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/308/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/308","id":2117074879,"node_id":"I_kwDOHoY85M5-L_-_","number":308,"title":"Unclear error when no DB connection is setup and trying to run migrations","user":{"login":"MarkSFrancis","id":16414147,"node_id":"MDQ6VXNlcjE2NDE0MTQ3","avatar_url":"https://avatars.githubusercontent.com/u/16414147?v=4","gravatar_id":"","url":"https://api.github.com/users/MarkSFrancis","html_url":"https://github.com/MarkSFrancis","followers_url":"https://api.github.com/users/MarkSFrancis/followers","following_url":"https://api.github.com/users/MarkSFrancis/following{/other_user}","gists_url":"https://api.github.com/users/MarkSFrancis/gists{/gist_id}","starred_url":"https://api.github.com/users/MarkSFrancis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarkSFrancis/subscriptions","organizations_url":"https://api.github.com/users/MarkSFrancis/orgs","repos_url":"https://api.github.com/users/MarkSFrancis/repos","events_url":"https://api.github.com/users/MarkSFrancis/events{/privacy}","received_events_url":"https://api.github.com/users/MarkSFrancis/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-02-04T12:27:36Z","updated_at":"2024-04-15T15:11:57Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm currently using `drizzle-kit` with D1 and attempted to use `drizzle-kit up:sqlite` to sync to the D1 database. Because D1 has no connection string, `drizzle-kit` couldn't publish the migrations. However, instead of telling me that, it simply printed \"Everything's fine üê∂üî•\" and then exited with a `0` status code (indicating success). \r\n\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/16414147/d07c8c89-f082-456d-9dde-9c876a071611)\r\n\r\n`drizzle.config.ts`:\r\n```ts\r\nimport type { Config } from 'drizzle-kit';\r\n\r\nexport default {\r\n  schema: './src/db',\r\n  out: './migrations',\r\n} satisfies Config;\r\n```\r\n\r\nThis makes debugging hard. I can't tell whether the migrations were ran or not and if not then what I need to do to get them to run.\r\n\r\nIdeally, I'd like to see an error status code if credentials are not configured and therefore no migrations could be synced. Or more specifically to D1, I'd love to see some docs for the fact that I need to update via the Cloudflare wrangler CLI instead (e.g. \"Did you mean `npx wrangler db migrations apply {db_name}`?\") ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/308/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/308/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/307","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/307/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/307/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/307/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/307","id":2117042514,"node_id":"I_kwDOHoY85M5-L4FS","number":307,"title":"Typo in file generated by `drizzle-kit generate:pg --custom`","user":{"login":"elliotwaite","id":1767836,"node_id":"MDQ6VXNlcjE3Njc4MzY=","avatar_url":"https://avatars.githubusercontent.com/u/1767836?v=4","gravatar_id":"","url":"https://api.github.com/users/elliotwaite","html_url":"https://github.com/elliotwaite","followers_url":"https://api.github.com/users/elliotwaite/followers","following_url":"https://api.github.com/users/elliotwaite/following{/other_user}","gists_url":"https://api.github.com/users/elliotwaite/gists{/gist_id}","starred_url":"https://api.github.com/users/elliotwaite/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elliotwaite/subscriptions","organizations_url":"https://api.github.com/users/elliotwaite/orgs","repos_url":"https://api.github.com/users/elliotwaite/repos","events_url":"https://api.github.com/users/elliotwaite/events{/privacy}","received_events_url":"https://api.github.com/users/elliotwaite/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-02-04T11:16:43Z","updated_at":"2024-02-04T11:16:43Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Running `drizzle-kit generate:pg --custom` generates a file that contains:\r\n```\r\n-- Custom SQL migration file, put you code below! --\r\n```\r\n...which uses \"you\" instead of \"your\".","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/307/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/306","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/306/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/306/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/306/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/306","id":2116472890,"node_id":"I_kwDOHoY85M5-JtA6","number":306,"title":"BUG: References in primary key","user":{"login":"skyf0l","id":59019720,"node_id":"MDQ6VXNlcjU5MDE5NzIw","avatar_url":"https://avatars.githubusercontent.com/u/59019720?v=4","gravatar_id":"","url":"https://api.github.com/users/skyf0l","html_url":"https://github.com/skyf0l","followers_url":"https://api.github.com/users/skyf0l/followers","following_url":"https://api.github.com/users/skyf0l/following{/other_user}","gists_url":"https://api.github.com/users/skyf0l/gists{/gist_id}","starred_url":"https://api.github.com/users/skyf0l/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skyf0l/subscriptions","organizations_url":"https://api.github.com/users/skyf0l/orgs","repos_url":"https://api.github.com/users/skyf0l/repos","events_url":"https://api.github.com/users/skyf0l/events{/privacy}","received_events_url":"https://api.github.com/users/skyf0l/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-02-03T13:01:01Z","updated_at":"2024-02-03T13:14:03Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Here my schema:\r\n```ts\r\nexport const tableA = mysqlTable(\"tableA\", {\r\n  id: int(\"id\").primaryKey(),\r\n});\r\n\r\nexport const tableB = mysqlTable(\"tableB\", {\r\n  id: int(\"id\").primaryKey(),\r\n});\r\n\r\nexport const tableC = mysqlTable(\r\n  \"tableC\",\r\n  {\r\n    idA: int(\"idA\").references(() => tableA.id, { onDelete: \"cascade\" }),\r\n    idB: int(\"idB\").references(() => tableB.id, { onDelete: \"cascade\" }),\r\n  },\r\n  (table) => {\r\n    return {\r\n      pk: primaryKey({ columns: [table.idA, table.idB] }),\r\n    };\r\n  },\r\n);\r\n```\r\n\r\nI can init my schema in the database but I got error when I pushed it again:\r\n```console\r\n$ pnpm drizzle-kit push:mysql\r\ndrizzle-kit: v0.20.13\r\ndrizzle-orm: v0.29.3\r\n\r\nNo config path provided, using default path\r\nReading config file '/workspaces/monorepo/libs/database/drizzle.config.ts'\r\nReading schema files:\r\n/workspaces/monorepo/libs/database/src/schema/index.ts\r\n/workspaces/monorepo/libs/database/src/schema/relations.ts\r\n/workspaces/monorepo/libs/database/src/schema/tables.ts\r\n\r\n[‚úì] Changes applied\r\n$ pnpm drizzle-kit push:mysql\r\ndrizzle-kit: v0.20.13\r\ndrizzle-orm: v0.29.3\r\n\r\nNo config path provided, using default path\r\nReading config file '/workspaces/monorepo/libs/database/drizzle.config.ts'\r\nReading schema files:\r\n/workspaces/monorepo/libs/database/src/schema/index.ts\r\n/workspaces/monorepo/libs/database/src/schema/relations.ts\r\n/workspaces/monorepo/libs/database/src/schema/tables.ts\r\n\r\nError: Cannot drop index 'PRIMARY': needed in a foreign key constraint\r\n    at PromiseConnection.query (/workspaces/monorepo/node_modules/.pnpm/drizzle-kit@0.20.13/node_modules/drizzle-kit/bin.cjs:44185:26)\r\n    at Command.<anonymous> (/workspaces/monorepo/node_modules/.pnpm/drizzle-kit@0.20.13/node_modules/drizzle-kit/bin.cjs:63146:33)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {\r\n  code: 'ER_DROP_INDEX_FK',\r\n  errno: 1553,\r\n  sql: 'ALTER TABLE `tableC` DROP PRIMARY KEY;',\r\n  sqlState: 'HY000',\r\n  sqlMessage: \"Cannot drop index 'PRIMARY': needed in a foreign key constraint\"\r\n}\r\n```\r\n\r\nThe expected behavior was to do nothing","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/306/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/306/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/305","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/305/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/305/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/305/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/305","id":2116251420,"node_id":"I_kwDOHoY85M5-I28c","number":305,"title":"PostgreSQL migrations for `DROP CONSTRAINT` should include `IF EXISTS`","user":{"login":"oscarhermoso","id":23239955,"node_id":"MDQ6VXNlcjIzMjM5OTU1","avatar_url":"https://avatars.githubusercontent.com/u/23239955?v=4","gravatar_id":"","url":"https://api.github.com/users/oscarhermoso","html_url":"https://github.com/oscarhermoso","followers_url":"https://api.github.com/users/oscarhermoso/followers","following_url":"https://api.github.com/users/oscarhermoso/following{/other_user}","gists_url":"https://api.github.com/users/oscarhermoso/gists{/gist_id}","starred_url":"https://api.github.com/users/oscarhermoso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oscarhermoso/subscriptions","organizations_url":"https://api.github.com/users/oscarhermoso/orgs","repos_url":"https://api.github.com/users/oscarhermoso/repos","events_url":"https://api.github.com/users/oscarhermoso/events{/privacy}","received_events_url":"https://api.github.com/users/oscarhermoso/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-02-03T05:24:31Z","updated_at":"2024-02-03T05:24:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"PostgreSQL migrations for `DROP CONSTRAINT` should include `IF EXISTS`\r\n\r\nThis sounds minor, but would make migrations a lot less fragile when reverting / dealing with merge conflicts.\r\n\r\nHopefully this is a simple change too :slightly_smiling_face: \r\n\r\n## Current\r\n\r\n```\r\nALTER TABLE \"social_groupmember\" DROP CONSTRAINT \"social_groupmember_group_id_user_id\";\r\n```\r\n\r\n## Expected\r\n\r\n```\r\nALTER TABLE \"social_groupmember\" DROP CONSTRAINT IF EXISTS \"social_groupmember_group_id_user_id\";\r\n```\r\n\r\n\r\n## Context\r\nDependencies:\r\n\r\n```\r\n\t\t\"drizzle-kit\": \"^0.20.13\",\r\n\t\t\"drizzle-orm\": \"^0.29.3\",\r\n\t\t\"postgres\": \"^3.4.3\"\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/305/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/304","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/304/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/304/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/304/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/304","id":2109934340,"node_id":"I_kwDOHoY85M59wwsE","number":304,"title":"Throw an Error if a Table doesn't exist instead of loading forever","user":{"login":"deadcoder0904","id":16436270,"node_id":"MDQ6VXNlcjE2NDM2Mjcw","avatar_url":"https://avatars.githubusercontent.com/u/16436270?v=4","gravatar_id":"","url":"https://api.github.com/users/deadcoder0904","html_url":"https://github.com/deadcoder0904","followers_url":"https://api.github.com/users/deadcoder0904/followers","following_url":"https://api.github.com/users/deadcoder0904/following{/other_user}","gists_url":"https://api.github.com/users/deadcoder0904/gists{/gist_id}","starred_url":"https://api.github.com/users/deadcoder0904/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deadcoder0904/subscriptions","organizations_url":"https://api.github.com/users/deadcoder0904/orgs","repos_url":"https://api.github.com/users/deadcoder0904/repos","events_url":"https://api.github.com/users/deadcoder0904/events{/privacy}","received_events_url":"https://api.github.com/users/deadcoder0904/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-31T11:56:59Z","updated_at":"2024-01-31T11:56:59Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"So I have 2 projects that use 1. Email OTP Codes & 2. Email Verification Links:\r\n\r\n1. `email_verification_code`\r\n2. `email_verification_token`\r\n\r\nNow I switched between them but Drizzle Studio probably remembered & opened the same table even if I was using another project.\r\n\r\nI was confused as to why it wouldn't show database tables until I looked at the table name but that took like 5 minutes.\r\n\r\nI think it can throw an error like it throws when Foreign Key Constraint is violated. No point in loading forever.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/304/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/303","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/303/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/303/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/303/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/303","id":2108221985,"node_id":"I_kwDOHoY85M59qOoh","number":303,"title":"re-push does not work with the  a composite primary key ( PostgreSQL code:  42704  )","user":{"login":"MrOxMasTer","id":59291123,"node_id":"MDQ6VXNlcjU5MjkxMTIz","avatar_url":"https://avatars.githubusercontent.com/u/59291123?v=4","gravatar_id":"","url":"https://api.github.com/users/MrOxMasTer","html_url":"https://github.com/MrOxMasTer","followers_url":"https://api.github.com/users/MrOxMasTer/followers","following_url":"https://api.github.com/users/MrOxMasTer/following{/other_user}","gists_url":"https://api.github.com/users/MrOxMasTer/gists{/gist_id}","starred_url":"https://api.github.com/users/MrOxMasTer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrOxMasTer/subscriptions","organizations_url":"https://api.github.com/users/MrOxMasTer/orgs","repos_url":"https://api.github.com/users/MrOxMasTer/repos","events_url":"https://api.github.com/users/MrOxMasTer/events{/privacy}","received_events_url":"https://api.github.com/users/MrOxMasTer/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-01-30T16:04:31Z","updated_at":"2024-01-30T17:53:26Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"What version of drizzle-orm are you using?\r\n0.29.3\r\n\r\nWhat version of drizzle-kit are you using?\r\n0.20.13\r\n\r\nDescribe the Bug\r\n\r\nwhen using\r\n\r\n```rb\r\nexport const productsToColors = pgTable(\r\n  'productsToColors',\r\n  {\r\n    productId: integer('product_id')\r\n      .notNull()\r\n      .references(() => products.id),\r\n    colorId: integer('color_id')\r\n      .notNull()\r\n      .references(() => colors.id),\r\n  },\r\n  (t) => {\r\n    return {\r\n      pk: primaryKey({ columns: [t.colorId, t.productId] }),\r\n    };\r\n  },\r\n);\r\n```\r\n\r\nAt the first migration, everything happens normally and no errors occur. But after I try to make a repeat push, then I get an error:\r\n\r\n```rb\r\nerror: the restriction \"products to colors_color_id_product_id_pk\" does not exist in the \"products To Colors\" table\r\n```\r\n\r\nAnd an error from PostgreSQL:\r\n\r\n```rb\r\nat C:\\Users\\Alex\\OneDrive\\Desktop\\PetProjects\\shopco\\node_modules\\.pnpm\\drizzle-kit@0.20.13\\node_modules\\drizzle-kit\\bin.cjs:24462:21\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async PgPostgres.query (C:\\Users\\Alex\\OneDrive\\Desktop\\PetProjects\\shopco\\node_modules\\.pnpm\\drizzle-kit@0.20.13\\node_modules\\drizzle-kit\\bin.cjs:25423:21)\r\n    at async Command.<anonymous> (C:\\Users\\Alex\\OneDrive\\Desktop\\PetProjects\\shopco\\node_modules\\.pnpm\\drizzle-kit@0.20.13\\node_modules\\drizzle-kit\\bin.cjs:63260:9) {\r\n  length: 204,\r\n  severity: 'Error',\r\n  code: '42704',\r\n  detail: undefined,\r\n  hint: undefined,\r\n  position: undefined,\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: undefined,\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: 'tablecmds.c',\r\n  line: '12030',\r\n  routine: 'ATExecDropConstraint'\r\n}\r\n```\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/303/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/302","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/302/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/302/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/302/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/302","id":2106672834,"node_id":"I_kwDOHoY85M59kUbC","number":302,"title":"query with `with` command doesn't work in studio but it works when running code locally - Cannot read properties of undefined (reading 'referencedTable')","user":{"login":"rcwestlake","id":9679076,"node_id":"MDQ6VXNlcjk2NzkwNzY=","avatar_url":"https://avatars.githubusercontent.com/u/9679076?v=4","gravatar_id":"","url":"https://api.github.com/users/rcwestlake","html_url":"https://github.com/rcwestlake","followers_url":"https://api.github.com/users/rcwestlake/followers","following_url":"https://api.github.com/users/rcwestlake/following{/other_user}","gists_url":"https://api.github.com/users/rcwestlake/gists{/gist_id}","starred_url":"https://api.github.com/users/rcwestlake/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rcwestlake/subscriptions","organizations_url":"https://api.github.com/users/rcwestlake/orgs","repos_url":"https://api.github.com/users/rcwestlake/repos","events_url":"https://api.github.com/users/rcwestlake/events{/privacy}","received_events_url":"https://api.github.com/users/rcwestlake/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-29T23:54:40Z","updated_at":"2024-01-29T23:54:40Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"My schema is like this:\r\n\r\n```\r\nexport const users = pgTable(\"users\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  clerkId: text(\"clerk_id\"),\r\n  workspaceId: integer(\"workspace_id\").references(() => workspaces.id),\r\n});\r\n\r\nexport const usersRelations = relations(users, ({ one }) => ({\r\n  workspace: one(workspaces, {\r\n    fields: [users.workspaceId],\r\n    references: [workspaces.id],\r\n  }),\r\n}));\r\n\r\nexport const workspaces = pgTable(\"workspaces\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  settings: jsonb(\"settings\")\r\n    .$type<{ crm: { tags: string[] } }>()\r\n    .default({ crm: { tags: [\"\"] } }),\r\n});\r\n\r\nexport const workspaceRelations = relations(workspaces, ({ many }) => ({\r\n  users: many(users),\r\n  crm: many(crm),\r\n}));\r\n```\r\n\r\nI have a query like this:\r\n\r\n```\r\ndb.query.users.findMany({\r\n    with: {\r\n      workspace: true,\r\n    },\r\n  });\r\n```\r\n\r\nWhen I run the same query in my NextJS app, it returns data. \r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/9679076/66390e76-4a79-460f-a286-b995a2902f9e)\r\n\r\n\r\nWhen I run it in the studio I get this error:\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/9679076/722fc34e-4abb-4c5c-a3c9-4db5fdcdd046)\r\n\r\n```\r\nindex.js:21 TypeError: Cannot read properties of undefined (reading 'referencedTable')\r\n    at TTr (index.js:785:145026)\r\n    at Ze.buildRelationalQueryWithoutPK (session-6c35a506.js:7:7588)\r\n    at QueryPromise._getQuery (session-6c35a506.js:7:19057)\r\n    at QueryPromise._toSQL (session-6c35a506.js:7:19333)\r\n    at session-6c35a506.js:7:18824\r\n    at Object.startActiveSpan (index.js:785:147031)\r\n    at QueryPromise._prepare (session-6c35a506.js:7:18747)\r\n    at session-6c35a506.js:7:19511\r\n    at Object.startActiveSpan (index.js:785:147031)\r\n    at QueryPromise.execute (session-6c35a506.js:7:19466)\r\n    at QueryPromise.then (index.js:785:155061)\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/302/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/301","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/301/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/301/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/301/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/301","id":2106550427,"node_id":"I_kwDOHoY85M59j2ib","number":301,"title":"[BUG] Drizzle studio queries fail when schema uses composite primary keys","user":{"login":"Gerschtli","id":10353047,"node_id":"MDQ6VXNlcjEwMzUzMDQ3","avatar_url":"https://avatars.githubusercontent.com/u/10353047?v=4","gravatar_id":"","url":"https://api.github.com/users/Gerschtli","html_url":"https://github.com/Gerschtli","followers_url":"https://api.github.com/users/Gerschtli/followers","following_url":"https://api.github.com/users/Gerschtli/following{/other_user}","gists_url":"https://api.github.com/users/Gerschtli/gists{/gist_id}","starred_url":"https://api.github.com/users/Gerschtli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Gerschtli/subscriptions","organizations_url":"https://api.github.com/users/Gerschtli/orgs","repos_url":"https://api.github.com/users/Gerschtli/repos","events_url":"https://api.github.com/users/Gerschtli/events{/privacy}","received_events_url":"https://api.github.com/users/Gerschtli/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-29T22:28:55Z","updated_at":"2024-01-29T22:28:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I am using the following schema\r\n\r\n```js\r\nimport { pgTable, primaryKey, text } from 'drizzle-orm/pg-core';\r\n\r\nexport const example = pgTable(\r\n\t'example',\r\n\t{\r\n\t\tcolumnA: text('column_a').notNull(),\r\n\t\tcolumnB: text('column_b').notNull(),\r\n\t},\r\n\t(table) => ({\r\n\t\tpk: primaryKey({ name: 'pk', columns: [table.columnA, table.columnB] }),\r\n\t}),\r\n);\r\n```\r\nwith:\r\n* postgres version: 15.5\r\n* drizzle-kit: v0.20.13\r\n* drizzle-orm: v0.29.3\r\n\r\nWhen starting drizzle studio with `pnpm drizzle-kit studio --verbose` and trying to run `db.select().from(example);` within the drizzle studio UI,\r\n\r\n![2024-01-29-23-25-12](https://github.com/drizzle-team/drizzle-kit-mirror/assets/10353047/79aecf5d-55b4-404e-bc05-d8e1deed6b30)\r\n\r\nthe following modal pops up.\r\n\r\n![2024-01-29-23-25-21](https://github.com/drizzle-team/drizzle-kit-mirror/assets/10353047/8b042d8e-df25-4d79-8c39-76b586b34f87)\r\n\r\nThere are no further logs to help debug this issue. Please let me know, if you need more information :)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/301/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/301/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/300","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/300/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/300/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/300/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/300","id":2103170275,"node_id":"I_kwDOHoY85M59W9Tj","number":300,"title":"[BUG]: Not able to make a selection on the terminal between created or renamed","user":{"login":"techgerm","id":38846104,"node_id":"MDQ6VXNlcjM4ODQ2MTA0","avatar_url":"https://avatars.githubusercontent.com/u/38846104?v=4","gravatar_id":"","url":"https://api.github.com/users/techgerm","html_url":"https://github.com/techgerm","followers_url":"https://api.github.com/users/techgerm/followers","following_url":"https://api.github.com/users/techgerm/following{/other_user}","gists_url":"https://api.github.com/users/techgerm/gists{/gist_id}","starred_url":"https://api.github.com/users/techgerm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/techgerm/subscriptions","organizations_url":"https://api.github.com/users/techgerm/orgs","repos_url":"https://api.github.com/users/techgerm/repos","events_url":"https://api.github.com/users/techgerm/events{/privacy}","received_events_url":"https://api.github.com/users/techgerm/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-01-27T03:32:21Z","updated_at":"2024-02-26T08:04:12Z","closed_at":"2024-02-26T08:04:11Z","author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\r\n\r\nv0.28.6\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.19.13\r\n\r\n### Describe the Bug\r\n\r\nWhen I'm prompted to select between \"table created or renamed from another column?\" I am unable to make a selection.\r\n\r\nPlease reference the attached video:\r\n\r\nhttps://github.com/drizzle-team/drizzle-kit-mirror/assets/38846104/c9ed9db6-bca4-4f98-b296-81ab6fb94e64\r\n\r\nInitially, this felt like a local issue so I tried all sorts of potential fixes and nothing worked. I'm now wondering if other folks are experiencing this issue as well?\r\n\r\n### Expected behavior\r\n\r\nI should be able to select between created or renamed to generate a migration.\r\n\r\n### Environment & setup\r\n\r\nmacOS: Sonoma 14.2.1\r\nzsh terminal","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/300/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/300/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/299","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/299/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/299/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/299/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/299","id":2099878915,"node_id":"I_kwDOHoY85M59KZwD","number":299,"title":"[BUG]: push doesn't allow to add \"not null\" to the column without truncating the table","user":{"login":"dankochetov","id":33990502,"node_id":"MDQ6VXNlcjMzOTkwNTAy","avatar_url":"https://avatars.githubusercontent.com/u/33990502?v=4","gravatar_id":"","url":"https://api.github.com/users/dankochetov","html_url":"https://github.com/dankochetov","followers_url":"https://api.github.com/users/dankochetov/followers","following_url":"https://api.github.com/users/dankochetov/following{/other_user}","gists_url":"https://api.github.com/users/dankochetov/gists{/gist_id}","starred_url":"https://api.github.com/users/dankochetov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dankochetov/subscriptions","organizations_url":"https://api.github.com/users/dankochetov/orgs","repos_url":"https://api.github.com/users/dankochetov/repos","events_url":"https://api.github.com/users/dankochetov/events{/privacy}","received_events_url":"https://api.github.com/users/dankochetov/received_events","type":"User","site_admin":false},"labels":[{"id":4311178953,"node_id":"LA_kwDOHoY85M8AAAABAPdeyQ","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-01-25T08:52:55Z","updated_at":"2024-02-21T23:57:52Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"If you have a nullable column in a table and add `.notNull()` to it, `drizzle-kit push` won't allow you to apply this change without truncating the table, even though technically it's possible to apply if that column doesn't contain null values.\r\n\r\nTwo potential solutions:\r\n1. Check if the column contains null values before suggesting to truncate the table (the most correct)\r\n2. Just remove the warning and run the operation regardless, which will either work or fail if the column has null values (less work)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/299/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/299/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/298","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/298/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/298/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/298/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/298","id":2098797354,"node_id":"I_kwDOHoY85M59GRsq","number":298,"title":"Default value not working on .array()","user":{"login":"alexandernanberg","id":8997319,"node_id":"MDQ6VXNlcjg5OTczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8997319?v=4","gravatar_id":"","url":"https://api.github.com/users/alexandernanberg","html_url":"https://github.com/alexandernanberg","followers_url":"https://api.github.com/users/alexandernanberg/followers","following_url":"https://api.github.com/users/alexandernanberg/following{/other_user}","gists_url":"https://api.github.com/users/alexandernanberg/gists{/gist_id}","starred_url":"https://api.github.com/users/alexandernanberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexandernanberg/subscriptions","organizations_url":"https://api.github.com/users/alexandernanberg/orgs","repos_url":"https://api.github.com/users/alexandernanberg/repos","events_url":"https://api.github.com/users/alexandernanberg/events{/privacy}","received_events_url":"https://api.github.com/users/alexandernanberg/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-01-24T17:54:00Z","updated_at":"2024-01-31T05:26:00Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```ts\r\nexport const users = pgTable('users'. {\r\n  roles: text('roles').array().default([])\r\n})\r\n```\r\n\r\nwhat is generated\r\n\r\n```sql\r\nCREATE TABLE IF NOT EXISTS \"users\" (\r\n  \t-- Other fields...\r\n    \"roles\" text[] DEFAULT \r\n);\r\n```\r\n\r\nexpected \r\n\r\n```sql\r\nCREATE TABLE IF NOT EXISTS \"users\" (\r\n  \t-- Other fields...\r\n    \"roles\" text[] DEFAULT []\r\n);\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/298/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/297","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/297/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/297/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/297/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/297","id":2098314566,"node_id":"I_kwDOHoY85M59Eb1G","number":297,"title":"Postgres introspection incorrect on  GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY","user":{"login":"galaczi","id":34242243,"node_id":"MDQ6VXNlcjM0MjQyMjQz","avatar_url":"https://avatars.githubusercontent.com/u/34242243?v=4","gravatar_id":"","url":"https://api.github.com/users/galaczi","html_url":"https://github.com/galaczi","followers_url":"https://api.github.com/users/galaczi/followers","following_url":"https://api.github.com/users/galaczi/following{/other_user}","gists_url":"https://api.github.com/users/galaczi/gists{/gist_id}","starred_url":"https://api.github.com/users/galaczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/galaczi/subscriptions","organizations_url":"https://api.github.com/users/galaczi/orgs","repos_url":"https://api.github.com/users/galaczi/repos","events_url":"https://api.github.com/users/galaczi/events{/privacy}","received_events_url":"https://api.github.com/users/galaczi/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-24T13:51:26Z","updated_at":"2024-01-24T13:55:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"drizzle-kit: v0.20.13\r\ndrizzle-orm: v0.29.3\r\n\r\nTake this simple table in Posgres:\r\n\r\n```\r\nCREATE TABLE \"roles\" (\r\n  \"id\" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,\r\n  \"name\" VARCHAR NOT NULL\r\n);\r\n```\r\n\r\nAfter introspection Kit creates this schema:\r\n\r\n```\r\nexport const roles = pgTable(\"roles\", {\r\n\tid: integer(\"id\").primaryKey().notNull(),\r\n\tname: varchar(\"name\").notNull(),\r\n});\r\n```\r\n  This is incorrect, since ids are generated automatically. Should I just use sql serial type?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/297/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/297/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/296","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/296/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/296/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/296/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/296","id":2093843755,"node_id":"I_kwDOHoY85M58zYUr","number":296,"title":"[BUG] Drizzle Studio crash after running UPDATE/DELETE queries with JOIN statement","user":{"login":"skyf0l","id":59019720,"node_id":"MDQ6VXNlcjU5MDE5NzIw","avatar_url":"https://avatars.githubusercontent.com/u/59019720?v=4","gravatar_id":"","url":"https://api.github.com/users/skyf0l","html_url":"https://github.com/skyf0l","followers_url":"https://api.github.com/users/skyf0l/followers","following_url":"https://api.github.com/users/skyf0l/following{/other_user}","gists_url":"https://api.github.com/users/skyf0l/gists{/gist_id}","starred_url":"https://api.github.com/users/skyf0l/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skyf0l/subscriptions","organizations_url":"https://api.github.com/users/skyf0l/orgs","repos_url":"https://api.github.com/users/skyf0l/repos","events_url":"https://api.github.com/users/skyf0l/events{/privacy}","received_events_url":"https://api.github.com/users/skyf0l/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-01-22T12:47:22Z","updated_at":"2024-02-03T13:36:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The studio doesn't seem to work on `Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:121.0) Gecko/20100101 Firefox/121.0`, it just displays an empty black page with an error in the console, see below:\r\n\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/59019720/175aa553-5484-439a-a8f4-761c3a94bf6d)\r\n\r\nIt works well on Chromium so I think it's FIrefox related.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/296/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/296/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/295","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/295/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/295/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/295/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/295","id":2090240349,"node_id":"I_kwDOHoY85M58lold","number":295,"title":"[BUG]: Studio config doesn't properly work with relative paths","user":{"login":"Sukairo-02","id":71607800,"node_id":"MDQ6VXNlcjcxNjA3ODAw","avatar_url":"https://avatars.githubusercontent.com/u/71607800?v=4","gravatar_id":"","url":"https://api.github.com/users/Sukairo-02","html_url":"https://github.com/Sukairo-02","followers_url":"https://api.github.com/users/Sukairo-02/followers","following_url":"https://api.github.com/users/Sukairo-02/following{/other_user}","gists_url":"https://api.github.com/users/Sukairo-02/gists{/gist_id}","starred_url":"https://api.github.com/users/Sukairo-02/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sukairo-02/subscriptions","organizations_url":"https://api.github.com/users/Sukairo-02/orgs","repos_url":"https://api.github.com/users/Sukairo-02/repos","events_url":"https://api.github.com/users/Sukairo-02/events{/privacy}","received_events_url":"https://api.github.com/users/Sukairo-02/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-19T10:45:34Z","updated_at":"2024-01-19T10:48:40Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"# Versions\r\n\r\n`drizzle-orm`: `0.29.3`\r\n`drizzle-kit`: `0.20.13`\r\n\r\n# Description\r\n\r\nStudio attempts to load files specified as local paths inside `drizzle.config.ts` from incorrect folder, resulting in errors like:\r\n`ENOENT: no such file or directory, open '/home/myusername/.local/share/drizzle-studio/wrangler.toml'`\r\n`ENOENT: no such file or directory, open 'C:\\Users\\MyUserName\\AppData\\Local\\drizzle-studio\\Data\\wrangler.toml'`\r\n\r\nReplacing file paths inside `drizzle.config.ts` with absolute paths resolves the issue.\r\n\r\n# Steps to reproduce\r\n\r\n  - Set up environment\r\n  - Run `npx drizzle-kit studio`\r\n\r\n# Expected behavior\r\n\r\nExpected files to be attempted to load from specified paths\r\n\r\n# Environment\r\n\r\n  - OS:\r\n    - `Windows 10 Pro N 21H2 Build 19044.3086`\r\n    - `Ubuntu 22.04.2 LTS on Windows 10 x86_64 WSL 2.0` \r\n  - Node versions:\r\n    - `npm`: `9.5.0` - Win10 \\ `10.1.0` - WSL Ubuntu\r\n    - `node`: `v21.2.0` - Win10 \\ `v20.6.1` - WSL Ubuntu \r\n  - Terminal:\r\n    - `git bash`, running in `VSCode`\r\n    - `WSL`, running in `VSCode`\r\n  - Launch command:\r\n    - `npx drizzle-kit studio` with terminal workdir set to project folder\r\n  - Config:\r\n    ```Typescript\r\n    import type { Config } from 'drizzle-kit'\r\n  \r\n    export default {\r\n        schema: './src/db/ptrk/schema.ts',\r\n        out: './migrations',\r\n        driver: 'd1',\r\n        dbCredentials: {\r\n            dbName: 'ptrk-fm',\r\n            wranglerConfigPath: './wrangler.toml'\r\n        }\r\n    } satisfies Config\r\n    ```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/295/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/295/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/294","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/294/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/294/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/294/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/294","id":2088655879,"node_id":"I_kwDOHoY85M58flwH","number":294,"title":"SQL error when introspecting MySQL database","user":{"login":"fedebabrauskas","id":19313864,"node_id":"MDQ6VXNlcjE5MzEzODY0","avatar_url":"https://avatars.githubusercontent.com/u/19313864?v=4","gravatar_id":"","url":"https://api.github.com/users/fedebabrauskas","html_url":"https://github.com/fedebabrauskas","followers_url":"https://api.github.com/users/fedebabrauskas/followers","following_url":"https://api.github.com/users/fedebabrauskas/following{/other_user}","gists_url":"https://api.github.com/users/fedebabrauskas/gists{/gist_id}","starred_url":"https://api.github.com/users/fedebabrauskas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fedebabrauskas/subscriptions","organizations_url":"https://api.github.com/users/fedebabrauskas/orgs","repos_url":"https://api.github.com/users/fedebabrauskas/repos","events_url":"https://api.github.com/users/fedebabrauskas/events{/privacy}","received_events_url":"https://api.github.com/users/fedebabrauskas/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-01-18T16:32:54Z","updated_at":"2024-01-19T00:48:08Z","closed_at":"2024-01-19T00:47:51Z","author_association":"NONE","active_lock_reason":null,"body":"I'm trying to make an introspection in a simple MySQL 8.0 database but I'm getting the following output:\r\n\r\n```javascript\r\nError: Unknown column 'INFORMATION_SCHEMA.STATISTICS.TABLE_SCHEMA' in 'where clause'\r\n{\r\n  code: 'ER_BAD_FIELD_ERROR',\r\n  errno: 1054,\r\n  sql: 'select * from INFORMATION_SCHEMA.STATISTICS\\n' +\r\n    \"\\tWHERE INFORMATION_SCHEMA.STATISTICS.TABLE_SCHEMA = ? and INFORMATION_SCHEMA.STATISTICS.INDEX_NAME != 'PRIMARY';\",\r\n  sqlState: '42S22',\r\n  sqlMessage: \"Unknown column 'INFORMATION_SCHEMA.STATISTICS.TABLE_SCHEMA' in 'where clause'\"\r\n}\r\n```\r\n\r\nThis is my `drizzle.config.ts`:\r\n```typescript\r\nimport type { Config } from \"drizzle-kit\";\r\n\r\nexport default {\r\n  driver: \"mysql2\",\r\n  dbCredentials: {\r\n    uri: \"mysql://root:root@127.0.0.1:3308/test\"\r\n  }\r\n} satisfies Config;\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/294/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/293","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/293/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/293/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/293/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/293","id":2088590624,"node_id":"I_kwDOHoY85M58fV0g","number":293,"title":"`drizzle-kit drop` command requires 'out' parameter despite documentation","user":{"login":"nmwur","id":22333399,"node_id":"MDQ6VXNlcjIyMzMzMzk5","avatar_url":"https://avatars.githubusercontent.com/u/22333399?v=4","gravatar_id":"","url":"https://api.github.com/users/nmwur","html_url":"https://github.com/nmwur","followers_url":"https://api.github.com/users/nmwur/followers","following_url":"https://api.github.com/users/nmwur/following{/other_user}","gists_url":"https://api.github.com/users/nmwur/gists{/gist_id}","starred_url":"https://api.github.com/users/nmwur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nmwur/subscriptions","organizations_url":"https://api.github.com/users/nmwur/orgs","repos_url":"https://api.github.com/users/nmwur/repos","events_url":"https://api.github.com/users/nmwur/events{/privacy}","received_events_url":"https://api.github.com/users/nmwur/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-18T15:59:26Z","updated_at":"2024-01-18T15:59:26Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"`drizzle-kit drop` command requires 'out' parameter despite [documentation](https://orm.drizzle.team/kit-docs/commands#drop-migration):\r\n\r\n`Err: 'out' folder param must be set through '--out' param or in config file`.\r\n\r\nProbably needs documentation update or command adjustment.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/293/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/292","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/292/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/292/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/292/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/292","id":2087705807,"node_id":"I_kwDOHoY85M58b9zP","number":292,"title":"[BUG]: Drizzle kit with Postgres does not create hash indexes","user":{"login":"nklisch","id":47763054,"node_id":"MDQ6VXNlcjQ3NzYzMDU0","avatar_url":"https://avatars.githubusercontent.com/u/47763054?v=4","gravatar_id":"","url":"https://api.github.com/users/nklisch","html_url":"https://github.com/nklisch","followers_url":"https://api.github.com/users/nklisch/followers","following_url":"https://api.github.com/users/nklisch/following{/other_user}","gists_url":"https://api.github.com/users/nklisch/gists{/gist_id}","starred_url":"https://api.github.com/users/nklisch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nklisch/subscriptions","organizations_url":"https://api.github.com/users/nklisch/orgs","repos_url":"https://api.github.com/users/nklisch/repos","events_url":"https://api.github.com/users/nklisch/events{/privacy}","received_events_url":"https://api.github.com/users/nklisch/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-18T07:45:14Z","updated_at":"2024-01-18T07:45:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of drizzle-orm are you using?\r\n0.29.3\r\n\r\n### What version of drizzle-kit are you using?\r\n0.20.12\r\n\r\n### Describe the Bug\r\nWith the below piece of code, I'd expect the index_sessions_on_session_id index to be of type HASH, but the generated SQLs do not have the type, hence defaulting to BTREE.\r\n\r\n```typescript\r\nexport const sessions = pgTable(\r\n  \"sessions\",\r\n  {\r\n    sessionId: uuid(\"id\").primaryKey().defaultRandom().notNull(),\r\n    userId: bigint(\"user_id\", { mode: \"number\" })\r\n      .notNull()\r\n      .references(() => users.id),\r\n    permissions: jsonb(\"data\").default({}).notNull().$type<Permission[]>(),\r\n    updatedAt: timestamp(\"created_at\", { mode: \"string\" })\r\n      .defaultNow()\r\n      .notNull(),\r\n    createdAt: timestamp(\"updated_at\", { mode: \"string\" })\r\n      .defaultNow()\r\n      .notNull(),\r\n  },\r\n  (table) => {\r\n    return {\r\n      indexSessionsOnSessionId: uniqueIndex(\"index_sessions_on_session_id\")\r\n        .on(table.sessionId)\r\n        .using(sql`hash`),\r\n    };\r\n  }\r\n);\r\n```\r\n\r\n### Expected behavior\r\nExpected generated SQL to be ‚Äì\r\n\r\n```sql\r\nCREATE UNIQUE INDEX IF NOT EXISTS \"index_sessions_on_session_id\" ON \"sessions\" (\"sessionId\") USING HASH (\"sessionId\");\r\n``` \r\n\r\nbut instead it is ‚Äì\r\n\r\n```sql\r\nCREATE UNIQUE INDEX IF NOT EXISTS \"index_sessions_on_session_id\" ON \"sessions\" (\"sessionId\");\r\n```\r\n### Environment & setup\r\nNode.js server-side, with PostgreSQL and the postgres.js driver.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/292/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/292/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/291","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/291/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/291/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/291/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/291","id":2080844796,"node_id":"I_kwDOHoY85M58Byv8","number":291,"title":"Typo in custom migration file,","user":{"login":"Neeraj319","id":65887314,"node_id":"MDQ6VXNlcjY1ODg3MzE0","avatar_url":"https://avatars.githubusercontent.com/u/65887314?v=4","gravatar_id":"","url":"https://api.github.com/users/Neeraj319","html_url":"https://github.com/Neeraj319","followers_url":"https://api.github.com/users/Neeraj319/followers","following_url":"https://api.github.com/users/Neeraj319/following{/other_user}","gists_url":"https://api.github.com/users/Neeraj319/gists{/gist_id}","starred_url":"https://api.github.com/users/Neeraj319/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Neeraj319/subscriptions","organizations_url":"https://api.github.com/users/Neeraj319/orgs","repos_url":"https://api.github.com/users/Neeraj319/repos","events_url":"https://api.github.com/users/Neeraj319/events{/privacy}","received_events_url":"https://api.github.com/users/Neeraj319/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-14T18:26:27Z","updated_at":"2024-01-14T18:26:27Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When i generate custom migrations using the command\r\n`drizzle-kit generate:pg --custom`\r\n\r\nThere is a typo with in the generated migration file. \r\n\r\n```sql\r\n-- Custom SQL migration file, put you code below! --\r\n\r\n```\r\n\r\ndrizzle-kit version: 0.20.12","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/291/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/290","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/290/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/290/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/290/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/290","id":2080350458,"node_id":"I_kwDOHoY85M57_6D6","number":290,"title":"Support for SQLite HTTP Proxy","user":{"login":"jmordica","id":2974048,"node_id":"MDQ6VXNlcjI5NzQwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/2974048?v=4","gravatar_id":"","url":"https://api.github.com/users/jmordica","html_url":"https://github.com/jmordica","followers_url":"https://api.github.com/users/jmordica/followers","following_url":"https://api.github.com/users/jmordica/following{/other_user}","gists_url":"https://api.github.com/users/jmordica/gists{/gist_id}","starred_url":"https://api.github.com/users/jmordica/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmordica/subscriptions","organizations_url":"https://api.github.com/users/jmordica/orgs","repos_url":"https://api.github.com/users/jmordica/repos","events_url":"https://api.github.com/users/jmordica/events{/privacy}","received_events_url":"https://api.github.com/users/jmordica/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-13T15:39:11Z","updated_at":"2024-01-13T15:39:11Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hey there üëã \r\nAre there any plans to support the SQLite HTTP Proxy db driver in drizzle studio?\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/290/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/289","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/289/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/289/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/289/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/289","id":2079933476,"node_id":"I_kwDOHoY85M57-UQk","number":289,"title":"Drizzle Studio D1 Error: `Could not read file: wrangler.toml`","user":{"login":"ajzbc","id":13984226,"node_id":"MDQ6VXNlcjEzOTg0MjI2","avatar_url":"https://avatars.githubusercontent.com/u/13984226?v=4","gravatar_id":"","url":"https://api.github.com/users/ajzbc","html_url":"https://github.com/ajzbc","followers_url":"https://api.github.com/users/ajzbc/followers","following_url":"https://api.github.com/users/ajzbc/following{/other_user}","gists_url":"https://api.github.com/users/ajzbc/gists{/gist_id}","starred_url":"https://api.github.com/users/ajzbc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajzbc/subscriptions","organizations_url":"https://api.github.com/users/ajzbc/orgs","repos_url":"https://api.github.com/users/ajzbc/repos","events_url":"https://api.github.com/users/ajzbc/events{/privacy}","received_events_url":"https://api.github.com/users/ajzbc/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-01-13T00:41:28Z","updated_at":"2024-01-13T10:56:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```\r\nError:\r\n‚úò [ERROR] Could not read file: wrangler.toml\r\n\r\n  ENOENT: no such file or directory, open '/Users/me/Library/Application Support/drizzle-studio/wrangler.toml'\r\n```\r\n\r\n```ts\r\n// ./drizzle.config.ts\r\nimport type { Config } from 'drizzle-kit';\r\n\r\nexport default {\r\n    schema: './src/db/schema.ts',\r\n    out: './drizzle',\r\n    driver: 'd1',\r\n    dbCredentials: {\r\n        wranglerConfigPath: './wrangler.toml',\r\n        dbName: 'NAME'\r\n    }\r\n} satisfies Config;\r\n```\r\n\r\n```toml\r\n# ./wrangler.toml\r\n[[d1_databases]]\r\nbinding = \"DB\"\r\ndatabase_name = \"NAME\"\r\ndatabase_id = \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"\r\nmigrations_dir=\"drizzle\"\r\n```\r\n\r\nSeems to be using the config, but looking for the wrangler.toml file in the wrong place","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/289/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/289/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/288","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/288/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/288/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/288/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/288","id":2078876026,"node_id":"I_kwDOHoY85M576SF6","number":288,"title":"Persistent Issue in Updating 'image' Column Default Value with Drizzle Kit in PostgreSQL Schema","user":{"login":"sromexs","id":48912836,"node_id":"MDQ6VXNlcjQ4OTEyODM2","avatar_url":"https://avatars.githubusercontent.com/u/48912836?v=4","gravatar_id":"","url":"https://api.github.com/users/sromexs","html_url":"https://github.com/sromexs","followers_url":"https://api.github.com/users/sromexs/followers","following_url":"https://api.github.com/users/sromexs/following{/other_user}","gists_url":"https://api.github.com/users/sromexs/gists{/gist_id}","starred_url":"https://api.github.com/users/sromexs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sromexs/subscriptions","organizations_url":"https://api.github.com/users/sromexs/orgs","repos_url":"https://api.github.com/users/sromexs/repos","events_url":"https://api.github.com/users/sromexs/events{/privacy}","received_events_url":"https://api.github.com/users/sromexs/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-12T13:40:29Z","updated_at":"2024-01-12T13:42:56Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Description:**\r\nI am experiencing a recurring problem with Drizzle ORM when attempting to update the default value of the 'image' column in my PostgreSQL 'posts' table. Despite repeatedly running the update command, the change is not applied, and I am prompted each time to confirm the execution without any actual effect.\r\n\r\n**Steps to Reproduce:**\r\n1. Initially define the 'posts' table with an 'image' column, setting a default value using Drizzle ORM.\r\n2. Change the default value of the 'image' column and execute the `push:pg` command to apply updates.\r\n3. Observe that the command prompts for confirmation to execute the changes.\r\n4. After confirming, notice that the expected changes are not applied to the database.\r\n5. On subsequent executions of the `push:pg` command, the same prompt appears and confirmation is requested, but the changes still do not take effect.\r\n\r\n**Expected Behavior:**\r\nThe default value for the 'image' column in the 'posts' table should update according to the modified schema in Drizzle ORM, and the change should be reflected in the PostgreSQL database after executing the `push:pg` command.\r\n\r\n**Actual Behavior:**\r\nDespite confirming the execution of the `push:pg` command multiple times, the default value for the 'image' column remains unchanged. The command consistently prompts for confirmation as if the change has not been previously applied.\r\n\r\n**Code Snippet:**\r\n```typescript\r\nexport const posts = pgTable(\r\n  \"posts\",\r\n  {\r\n    ...\r\n    image: varchar(\"image\", { length: 500 }).notNull().default(\"\"),\r\n    ...\r\n  },\r\n  ...\r\n);\r\n```\r\n\r\n**Command Used:**\r\n```bash\r\nnpx drizzle-kit push:pg --config drizzle.pg.config.ts\r\n```\r\n\r\nRepeatedly executing this command results in the following prompt without resolving the issue:\r\n```\r\nALTER TABLE \"posts\" ALTER COLUMN \"image\" SET DEFAULT '';\r\n\r\n  No, abort\r\n‚ùØ Yes, I want to execute all statements\r\n```\r\n\r\n**Version Information:**\r\n- drizzle-kit: v0.20.10\r\n- drizzle-orm: v0.29.3","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/288/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/287","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/287/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/287/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/287/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/287","id":2076713755,"node_id":"I_kwDOHoY85M57yCMb","number":287,"title":"Drizzle Studio Logs escaping ANSI color codes VSCode","user":{"login":"scottsmith-1","id":141334713,"node_id":"U_kgDOCGyYuQ","avatar_url":"https://avatars.githubusercontent.com/u/141334713?v=4","gravatar_id":"","url":"https://api.github.com/users/scottsmith-1","html_url":"https://github.com/scottsmith-1","followers_url":"https://api.github.com/users/scottsmith-1/followers","following_url":"https://api.github.com/users/scottsmith-1/following{/other_user}","gists_url":"https://api.github.com/users/scottsmith-1/gists{/gist_id}","starred_url":"https://api.github.com/users/scottsmith-1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottsmith-1/subscriptions","organizations_url":"https://api.github.com/users/scottsmith-1/orgs","repos_url":"https://api.github.com/users/scottsmith-1/repos","events_url":"https://api.github.com/users/scottsmith-1/events{/privacy}","received_events_url":"https://api.github.com/users/scottsmith-1/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-11T13:51:53Z","updated_at":"2024-01-11T13:51:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/141334713/74ee9732-f918-48a1-9b3e-f95f32686f0a)\r\n\r\nNot sure if I'm doing something wrong or if Drizzle Studio does something to escape the color codes.  VSCode seems to be showing them properly, as seen in the pnpm command run at the top of the photo.  Anyone else seeing this behavior?  Using latest VSCode and Windows 11.  Also tried running from Windows Terminal, Command Prompt, and PowerShell all with the same result.\r\n\r\nThanks for any insight! ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/287/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/287/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/286","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/286/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/286/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/286/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/286","id":2072488951,"node_id":"I_kwDOHoY85M57h6v3","number":286,"title":"Issue when running drizzle-kit studio out of docker","user":{"login":"jakeleventhal","id":15133828,"node_id":"MDQ6VXNlcjE1MTMzODI4","avatar_url":"https://avatars.githubusercontent.com/u/15133828?v=4","gravatar_id":"","url":"https://api.github.com/users/jakeleventhal","html_url":"https://github.com/jakeleventhal","followers_url":"https://api.github.com/users/jakeleventhal/followers","following_url":"https://api.github.com/users/jakeleventhal/following{/other_user}","gists_url":"https://api.github.com/users/jakeleventhal/gists{/gist_id}","starred_url":"https://api.github.com/users/jakeleventhal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakeleventhal/subscriptions","organizations_url":"https://api.github.com/users/jakeleventhal/orgs","repos_url":"https://api.github.com/users/jakeleventhal/repos","events_url":"https://api.github.com/users/jakeleventhal/events{/privacy}","received_events_url":"https://api.github.com/users/jakeleventhal/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2024-01-09T14:30:12Z","updated_at":"2024-04-11T14:13:00Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"In docker, I specify the host as `--host=0.0.0.0` and it says i can access the studio at https://local.drizzle.studio?host=0.0.0.0; however, when 4983 is exposed, the only way to access the studio is by using https://local.drizzle.studio?host=localhost.\r\n\r\nIt's a bit counterintuitive.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/286/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/285","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/285/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/285/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/285/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/285","id":2070801917,"node_id":"I_kwDOHoY85M57be39","number":285,"title":"Drizzle kit is using the wrong paths seemingly","user":{"login":"jakeleventhal","id":15133828,"node_id":"MDQ6VXNlcjE1MTMzODI4","avatar_url":"https://avatars.githubusercontent.com/u/15133828?v=4","gravatar_id":"","url":"https://api.github.com/users/jakeleventhal","html_url":"https://github.com/jakeleventhal","followers_url":"https://api.github.com/users/jakeleventhal/followers","following_url":"https://api.github.com/users/jakeleventhal/following{/other_user}","gists_url":"https://api.github.com/users/jakeleventhal/gists{/gist_id}","starred_url":"https://api.github.com/users/jakeleventhal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakeleventhal/subscriptions","organizations_url":"https://api.github.com/users/jakeleventhal/orgs","repos_url":"https://api.github.com/users/jakeleventhal/repos","events_url":"https://api.github.com/users/jakeleventhal/events{/privacy}","received_events_url":"https://api.github.com/users/jakeleventhal/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-01-08T16:21:38Z","updated_at":"2024-02-17T16:50:56Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I have the following docker compose\r\n```yaml\r\n  setup-db:\r\n    build:\r\n      dockerfile: ./tools/Dockerfile\r\n    environment:\r\n      DATABASE_URL: postgresql://postgres:local@db:5432/postgres\r\n    command: drizzle-kit push:pg\r\n```\r\nAnd the following dockerfile\r\n```dockerfile\r\nFROM node:18.17.1-alpine\r\n\r\nWORKDIR /app\r\n\r\nRUN npm install -g drizzle-kit@latest drizzle-orm@latest\r\nRUN npm install drizzle-orm\r\n\r\n# Copy source files\r\nCOPY apps/client/package.json ./\r\nCOPY packages/database/drizzle.config.ts ./\r\nCOPY packages/database/src/schema.ts ./src/schema.ts\r\n```\r\n\r\nThis works just fine, but it only seems to work if i have `drizzle-orm` installed globally and in the local scope. Otherwise, I get this error:\r\n```\r\nError: Cannot find module 'drizzle-orm/pg-core'\r\nRequire stack:\r\n- /usr/local/lib/node_modules/drizzle-kit/bin.cjs\r\n    at Module._resolveFilename (node:internal/modules/cjs/loader:1077:15)\r\n    at Module._load (node:internal/modules/cjs/loader:922:27)\r\n    at Module.require (node:internal/modules/cjs/loader:1143:19)\r\n    at require (node:internal/modules/cjs/helpers:121:18)\r\n    at src/serializer/pgImports.ts (/usr/local/lib/node_modules/drizzle-kit/bin.cjs:12133:22)\r\n    at __init (/usr/local/lib/node_modules/drizzle-kit/bin.cjs:9:56)\r\n    at src/utils.ts (/usr/local/lib/node_modules/drizzle-kit/bin.cjs:60390:5)\r\n    at __init (/usr/local/lib/node_modules/drizzle-kit/bin.cjs:9:56)\r\n    at Object.<anonymous> (/usr/local/lib/node_modules/drizzle-kit/bin.cjs:62041:1)\r\n    at Module._compile (node:internal/modules/cjs/loader:1256:14) {\r\n  code: 'MODULE_NOT_FOUND',\r\n  requireStack: [ '/usr/local/lib/node_modules/drizzle-kit/bin.cjs' ]\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/285/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/284","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/284/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/284/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/284/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/284","id":2069829752,"node_id":"I_kwDOHoY85M57Xxh4","number":284,"title":"push:mysql fails to drop a serial column and replace with another column type","user":{"login":"arshia-gh","id":76017461,"node_id":"MDQ6VXNlcjc2MDE3NDYx","avatar_url":"https://avatars.githubusercontent.com/u/76017461?v=4","gravatar_id":"","url":"https://api.github.com/users/arshia-gh","html_url":"https://github.com/arshia-gh","followers_url":"https://api.github.com/users/arshia-gh/followers","following_url":"https://api.github.com/users/arshia-gh/following{/other_user}","gists_url":"https://api.github.com/users/arshia-gh/gists{/gist_id}","starred_url":"https://api.github.com/users/arshia-gh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arshia-gh/subscriptions","organizations_url":"https://api.github.com/users/arshia-gh/orgs","repos_url":"https://api.github.com/users/arshia-gh/repos","events_url":"https://api.github.com/users/arshia-gh/events{/privacy}","received_events_url":"https://api.github.com/users/arshia-gh/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-08T06:53:26Z","updated_at":"2024-01-08T06:53:26Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, I'm getting the following error when I try to push a change.\r\n\r\n```\r\nif (unsquashed.columns.length === 1 && currentSchema.tables[statement.tableName].columns[unsquashed.columns[0]].type === \"serial\" && prevSchema.tables[statement.tableName].columns[unsquashed.columns[0]].type === \"serial\" && currentSchema.tables[statement.tableName].columns[unsquashed.columns[0]].name === unsquashed.columns[0]) {\r\n\r\nTypeError: Cannot read properties of undefined (reading 'type')\r\n```\r\n\r\n\r\nI'm trying to push a change from:\r\n```ts\r\nexport const documents = mysqlTable('documents', {\r\n\turl: varchar('url', { length: 255 }).primaryKey(),\r\n\tname: varchar('name', { length: 255 }).notNull(),\r\n\tdescription: varchar('description', { length: 255 }),\r\n\tcreatedAt: timestamp('created_at', { mode: 'date', fsp: 6 }).defaultNow()\r\n});\r\n```\r\n\r\nto the following:\r\n\r\n```ts\r\nexport const documents = mysqlTable('documents', {\r\n\tname: varchar('name', { length: 255 }).primaryKey(),\r\n\tdescription: varchar('description', { length: 255 }),\r\n\tcreatedAt: timestamp('created_at', { mode: 'date', fsp: 6 }).defaultNow()\r\n});\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/284/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/283","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/283/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/283/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/283/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/283","id":2068836961,"node_id":"I_kwDOHoY85M57T_Jh","number":283,"title":"db push just hangs, verbose doesn't show any details","user":{"login":"pencilcheck","id":116532,"node_id":"MDQ6VXNlcjExNjUzMg==","avatar_url":"https://avatars.githubusercontent.com/u/116532?v=4","gravatar_id":"","url":"https://api.github.com/users/pencilcheck","html_url":"https://github.com/pencilcheck","followers_url":"https://api.github.com/users/pencilcheck/followers","following_url":"https://api.github.com/users/pencilcheck/following{/other_user}","gists_url":"https://api.github.com/users/pencilcheck/gists{/gist_id}","starred_url":"https://api.github.com/users/pencilcheck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pencilcheck/subscriptions","organizations_url":"https://api.github.com/users/pencilcheck/orgs","repos_url":"https://api.github.com/users/pencilcheck/repos","events_url":"https://api.github.com/users/pencilcheck/events{/privacy}","received_events_url":"https://api.github.com/users/pencilcheck/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-06T21:12:59Z","updated_at":"2024-01-06T21:24:36Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```\r\ndrizzle-kit: v0.20.10\r\ndrizzle-orm: v0.29.3\r\n\r\nNo config path provided, using default path\r\nReading config file '/project/vite-stack/new-app/drizzle.config.ts'\r\n+ vwQuotesBackup table will be created\r\n--- all table conflicts resolved ---\r\n```\r\n\r\nMy DB host provider: neon.tech\r\nDatabase engine: Postgresql\r\n\r\nI already have an existing DB with around 15 tables and 5 materialized views.\r\n\r\nI'm trying to add a new table by using push:pg\r\n\r\nBut when I run it, it immediately ask me if I should create or rename, I picked create but after that it just hangs forever.\r\n\r\nI already enabled \"verbose\" in the drizzle.config.ts but I don't see any logs here.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/283/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/282","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/282/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/282/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/282/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/282","id":2068803485,"node_id":"I_kwDOHoY85M57T2-d","number":282,"title":"Postgres enum array breaks drizzle-kit commands","user":{"login":"jakeleventhal","id":15133828,"node_id":"MDQ6VXNlcjE1MTMzODI4","avatar_url":"https://avatars.githubusercontent.com/u/15133828?v=4","gravatar_id":"","url":"https://api.github.com/users/jakeleventhal","html_url":"https://github.com/jakeleventhal","followers_url":"https://api.github.com/users/jakeleventhal/followers","following_url":"https://api.github.com/users/jakeleventhal/following{/other_user}","gists_url":"https://api.github.com/users/jakeleventhal/gists{/gist_id}","starred_url":"https://api.github.com/users/jakeleventhal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakeleventhal/subscriptions","organizations_url":"https://api.github.com/users/jakeleventhal/orgs","repos_url":"https://api.github.com/users/jakeleventhal/repos","events_url":"https://api.github.com/users/jakeleventhal/events{/privacy}","received_events_url":"https://api.github.com/users/jakeleventhal/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-01-06T19:52:13Z","updated_at":"2024-01-10T16:55:29Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```ts\r\nexport const AccountingAccountType = pgEnum('AccountingAccountType', [\r\n  'COGSAssetAccount',\r\n  'COGSExpenseAccount',\r\n  'AdjustmentAssetAccount',\r\n  'AdjustmentExpenseAccount',\r\n  'CarriedBalance'\r\n]);\r\n```\r\n```ts\r\n    types: AccountingAccountType('ecominateTypes')\r\n      .array()\r\n      .$default(() => [])\r\n      .notNull(),\r\n```\r\nWhen you push, it says:\r\n>'error: type \"accountingaccounttype[]\" does not exist'\r\n\r\nIt seems to do all lowercase mistakenly. It works if you update the enum name to be all lowercase, but thats definitely a bug.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/282/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/281","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/281/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/281/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/281/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/281","id":2063256912,"node_id":"I_kwDOHoY85M56-s1Q","number":281,"title":"Postgres enum migration issue (migrations not being committed individually)","user":{"login":"michaelgmcd","id":8161781,"node_id":"MDQ6VXNlcjgxNjE3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/8161781?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelgmcd","html_url":"https://github.com/michaelgmcd","followers_url":"https://api.github.com/users/michaelgmcd/followers","following_url":"https://api.github.com/users/michaelgmcd/following{/other_user}","gists_url":"https://api.github.com/users/michaelgmcd/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelgmcd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelgmcd/subscriptions","organizations_url":"https://api.github.com/users/michaelgmcd/orgs","repos_url":"https://api.github.com/users/michaelgmcd/repos","events_url":"https://api.github.com/users/michaelgmcd/events{/privacy}","received_events_url":"https://api.github.com/users/michaelgmcd/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-01-03T05:11:25Z","updated_at":"2024-01-10T18:17:28Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Generating and running a migration for the following change:\r\n```typescript\r\nconst status = pgEnum('status', ['ONE', 'TWO', 'THREE']);\r\n\r\nexport const clients = pgTable('clients', {\r\n  // ...\r\n  status: status('status').notNull().default('ONE'),\r\n});\r\n```\r\nto:\r\n```typescript\r\nconst status = pgEnum('status', ['FOUR']);\r\n\r\nexport const clients = pgTable('clients', {\r\n  // ...\r\n  status: status('status').notNull().default('FOUR'),\r\n});\r\n```\r\n\r\nfails with:\r\n```\r\nPostgresError: unsafe use of new value \"FOUR\" of enum type status\r\n...\r\nhint: New enum values must be committed before they can be used.\r\n```\r\n\r\nI split the changes out into separate migrations (one to add the new value and another to use it), and I still receive the error. Is it possible to run each migration in an individual transaction to ensure the changes are committed before running the next one?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/281/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/281/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/280","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/280/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/280/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/280/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/280","id":2062502791,"node_id":"I_kwDOHoY85M5670uH","number":280,"title":"Schema path not working when using custom config path","user":{"login":"jakeleventhal","id":15133828,"node_id":"MDQ6VXNlcjE1MTMzODI4","avatar_url":"https://avatars.githubusercontent.com/u/15133828?v=4","gravatar_id":"","url":"https://api.github.com/users/jakeleventhal","html_url":"https://github.com/jakeleventhal","followers_url":"https://api.github.com/users/jakeleventhal/followers","following_url":"https://api.github.com/users/jakeleventhal/following{/other_user}","gists_url":"https://api.github.com/users/jakeleventhal/gists{/gist_id}","starred_url":"https://api.github.com/users/jakeleventhal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakeleventhal/subscriptions","organizations_url":"https://api.github.com/users/jakeleventhal/orgs","repos_url":"https://api.github.com/users/jakeleventhal/repos","events_url":"https://api.github.com/users/jakeleventhal/events{/privacy}","received_events_url":"https://api.github.com/users/jakeleventhal/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-01-02T14:31:18Z","updated_at":"2024-01-02T14:31:18Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"`npx drizzle-kit push:pg --config=../../../../some/path/drizzle.config.ts`\r\n```ts\r\n// drizzle.config.ts\r\nimport type { Config } from 'drizzle-kit';\r\n\r\nexport default {\r\n  dbCredentials: {\r\n    connectionString: process.env.DATABASE_URL!\r\n  },\r\n  driver: 'pg',\r\n  out: './drizzle',\r\n  schema: './src/schema.ts'\r\n} satisfies Config;\r\n```\r\n\r\nThis code says the schema file cannot be found. However, if I change the schema path to be an absolute path, it works. I think the schema path needs to use relative paths relative to the config file, not from the directory the user is calling the command from.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/280/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/279","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/279/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/279/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/279/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/279","id":2060933896,"node_id":"I_kwDOHoY85M5611sI","number":279,"title":"introspect: trailing comma is missing in createTablePKs","user":{"login":"lxia1220","id":43934024,"node_id":"MDQ6VXNlcjQzOTM0MDI0","avatar_url":"https://avatars.githubusercontent.com/u/43934024?v=4","gravatar_id":"","url":"https://api.github.com/users/lxia1220","html_url":"https://github.com/lxia1220","followers_url":"https://api.github.com/users/lxia1220/followers","following_url":"https://api.github.com/users/lxia1220/following{/other_user}","gists_url":"https://api.github.com/users/lxia1220/gists{/gist_id}","starred_url":"https://api.github.com/users/lxia1220/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lxia1220/subscriptions","organizations_url":"https://api.github.com/users/lxia1220/orgs","repos_url":"https://api.github.com/users/lxia1220/repos","events_url":"https://api.github.com/users/lxia1220/events{/privacy}","received_events_url":"https://api.github.com/users/lxia1220/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-12-31T04:17:43Z","updated_at":"2024-01-08T21:28:50Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"With introspect, schema indexes are created FK, PK, and Unique order.\r\nHowever, since there is no trailing comma in the PK, an error occurs in Unique indexes.\r\n\r\n<img width=\"690\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/43934024/391980b3-4703-40e2-acd0-0ecc071bf79e\">\r\n\r\nmissing in the createTablePKs functions, so it must be added.\r\n\r\n<img width=\"906\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/43934024/025de15c-8edf-40cf-b1e0-cf76b63ad1fb\">","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/279/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/278","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/278/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/278/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/278/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/278","id":2060916991,"node_id":"I_kwDOHoY85M561xj_","number":278,"title":"Missing quotes in constraintName of PgAlterTableAlterCompositePrimaryKeyConvertor.","user":{"login":"lxia1220","id":43934024,"node_id":"MDQ6VXNlcjQzOTM0MDI0","avatar_url":"https://avatars.githubusercontent.com/u/43934024?v=4","gravatar_id":"","url":"https://api.github.com/users/lxia1220","html_url":"https://github.com/lxia1220","followers_url":"https://api.github.com/users/lxia1220/followers","following_url":"https://api.github.com/users/lxia1220/following{/other_user}","gists_url":"https://api.github.com/users/lxia1220/gists{/gist_id}","starred_url":"https://api.github.com/users/lxia1220/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lxia1220/subscriptions","organizations_url":"https://api.github.com/users/lxia1220/orgs","repos_url":"https://api.github.com/users/lxia1220/repos","events_url":"https://api.github.com/users/lxia1220/events{/privacy}","received_events_url":"https://api.github.com/users/lxia1220/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-31T02:42:58Z","updated_at":"2023-12-31T02:43:07Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"<img width=\"1004\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/43934024/83349b88-960f-4f2a-adad-9e6c9500a247\">\r\n\r\nOther PrimaryKeyConvertors work fine, but missing in AlterConvertor.\r\n\r\nThis produces the following SQL:\r\n`ALTER TABLE \"test\" ADD CONSTRAINT PK_test PRIMARY KEY(id);`\r\n\r\nThis SQL leads the error:\r\n`error: constraint \"pk_test\" of relation \"test\" does not exist`","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/278/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/277","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/277/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/277/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/277/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/277","id":2060667717,"node_id":"I_kwDOHoY85M5600tF","number":277,"title":"Introspect error","user":{"login":"pencilcheck","id":116532,"node_id":"MDQ6VXNlcjExNjUzMg==","avatar_url":"https://avatars.githubusercontent.com/u/116532?v=4","gravatar_id":"","url":"https://api.github.com/users/pencilcheck","html_url":"https://github.com/pencilcheck","followers_url":"https://api.github.com/users/pencilcheck/followers","following_url":"https://api.github.com/users/pencilcheck/following{/other_user}","gists_url":"https://api.github.com/users/pencilcheck/gists{/gist_id}","starred_url":"https://api.github.com/users/pencilcheck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pencilcheck/subscriptions","organizations_url":"https://api.github.com/users/pencilcheck/orgs","repos_url":"https://api.github.com/users/pencilcheck/repos","events_url":"https://api.github.com/users/pencilcheck/events{/privacy}","received_events_url":"https://api.github.com/users/pencilcheck/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":8,"created_at":"2023-12-30T07:38:26Z","updated_at":"2024-01-08T06:50:32Z","closed_at":"2024-01-05T09:49:26Z","author_association":"NONE","active_lock_reason":null,"body":"```\r\ndrizzle-kit: v0.20.9\r\ndrizzle-orm: v0.29.2\r\n\r\nNo config path provided, using default path\r\nReading config file '/drizzle.config.ts'\r\n(node:70457) Warning: Setting the NODE_TLS_REJECT_UNAUTHORIZED environment variable to '0' makes TLS connections and HTTPS requests insecure by disabling certificate verification.\r\n(Use `node --trace-warnings ...` to show where the warning was created)\r\n[‚úì] 69  tables fetched\r\n[‚úì] 510 columns fetched\r\n[‚úì] 9   enums fetched\r\n[‚úì] 0   indexes fetched\r\n[‚úì] 15  foreign keys fetched\r\n\r\n/node_modules/drizzle-kit/bin.cjs:4239\r\n      const tables = Object.values(schema4.tables);\r\n                                           ^\r\n\r\nTypeError: Cannot read properties of undefined (reading 'tables')\r\n    at schema (/node_modules/drizzle-kit/bin.cjs:4239:44)\r\n    at writeResult (/node_modules/drizzle-kit/bin.cjs:15202:21)\r\n    at Command.<anonymous> (/node_modules/drizzle-kit/bin.cjs:63497:5)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n\r\nNode.js v20.10.0\r\nerror Command failed with exit code 1.\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/277/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/277/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/276","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/276/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/276/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/276/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/276","id":2060270368,"node_id":"I_kwDOHoY85M56zTsg","number":276,"title":"[BUG]: Postgres introspect gives bugged value for default empty array","user":{"login":"jakeleventhal","id":15133828,"node_id":"MDQ6VXNlcjE1MTMzODI4","avatar_url":"https://avatars.githubusercontent.com/u/15133828?v=4","gravatar_id":"","url":"https://api.github.com/users/jakeleventhal","html_url":"https://github.com/jakeleventhal","followers_url":"https://api.github.com/users/jakeleventhal/followers","following_url":"https://api.github.com/users/jakeleventhal/following{/other_user}","gists_url":"https://api.github.com/users/jakeleventhal/gists{/gist_id}","starred_url":"https://api.github.com/users/jakeleventhal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakeleventhal/subscriptions","organizations_url":"https://api.github.com/users/jakeleventhal/orgs","repos_url":"https://api.github.com/users/jakeleventhal/repos","events_url":"https://api.github.com/users/jakeleventhal/events{/privacy}","received_events_url":"https://api.github.com/users/jakeleventhal/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-29T17:15:04Z","updated_at":"2023-12-29T17:15:04Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I have a text field with a default array value of `[]`. When i run `drizzle-kit introspect:pg` The field gets copied in as `text('myListField').default('RRAY[').array()`","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/276/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/275","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/275/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/275/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/275/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/275","id":2060225964,"node_id":"I_kwDOHoY85M56zI2s","number":275,"title":"We've found duplicated index name across public schema. Please rename your index in either the stations table or the table with the duplicated index name","user":{"login":"primozs","id":1006789,"node_id":"MDQ6VXNlcjEwMDY3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/1006789?v=4","gravatar_id":"","url":"https://api.github.com/users/primozs","html_url":"https://github.com/primozs","followers_url":"https://api.github.com/users/primozs/followers","following_url":"https://api.github.com/users/primozs/following{/other_user}","gists_url":"https://api.github.com/users/primozs/gists{/gist_id}","starred_url":"https://api.github.com/users/primozs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/primozs/subscriptions","organizations_url":"https://api.github.com/users/primozs/orgs","repos_url":"https://api.github.com/users/primozs/repos","events_url":"https://api.github.com/users/primozs/events{/privacy}","received_events_url":"https://api.github.com/users/primozs/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":12,"created_at":"2023-12-29T16:09:37Z","updated_at":"2024-05-08T19:47:38Z","closed_at":"2024-01-16T09:33:03Z","author_association":"NONE","active_lock_reason":null,"body":"migrating drizzle-kit from 0.20.6 somehow missing in release tags, to 0.20.9\r\nissue start from 0.20.7\r\nI cant add any index.\r\n\r\n```\r\nexport const stations = pgTable(\r\n  'stations',\r\n  {\r\n    id: varchar('id', { length: 256 }).notNull().primaryKey(),\r\n    sourceId: varchar('source_id', { length: 256 }).notNull(),\r\n    name: varchar('name', { length: 256 }).notNull(),\r\n    type: varchar('type', { length: 10 }).notNull(),\r\n    source: varchar('source', { length: 256 }).notNull(),\r\n    webcam: varchar('webcam', { length: 256 }),\r\n    country: varchar('country', { length: 256 }),\r\n    region: varchar('region', { length: 256 }),\r\n    timezone: varchar('timezone', { length: 256 }),\r\n    lat: real('lat'),\r\n    lon: real('lon'),\r\n    elev: integer('elev'),\r\n    url: varchar('url', { length: 256 })\r\n  },\r\n  (t) => {\r\n    return {\r\n      // idIndex: index('id_idx').on(t.id),\r\n      // nameIndex: index('name_idx').on(t.name),\r\n      // typeIndex: index('type_idx').on(t.type),\r\n      sourceIndex: index('source_idx').on(t.source)\r\n    }\r\n  }\r\n)\r\n```\r\n\r\ngenerate allways fails with: \r\nWe've found duplicated index name across public schema. Please rename your index in either the stations table or the table with the duplicated index name\r\n\r\nError is wrong ans misleading, since all other tables are commented out.\r\nDowngrading to 0.20.6 works\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/275/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/275/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/274","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/274/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/274/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/274/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/274","id":2056839156,"node_id":"I_kwDOHoY85M56mN_0","number":274,"title":"BUG: generate:mysql outputs migration files without shema/database prefixes for unique indexes","user":{"login":"stagr","id":20762751,"node_id":"MDQ6VXNlcjIwNzYyNzUx","avatar_url":"https://avatars.githubusercontent.com/u/20762751?v=4","gravatar_id":"","url":"https://api.github.com/users/stagr","html_url":"https://github.com/stagr","followers_url":"https://api.github.com/users/stagr/followers","following_url":"https://api.github.com/users/stagr/following{/other_user}","gists_url":"https://api.github.com/users/stagr/gists{/gist_id}","starred_url":"https://api.github.com/users/stagr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stagr/subscriptions","organizations_url":"https://api.github.com/users/stagr/orgs","repos_url":"https://api.github.com/users/stagr/repos","events_url":"https://api.github.com/users/stagr/events{/privacy}","received_events_url":"https://api.github.com/users/stagr/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-27T02:25:52Z","updated_at":"2023-12-27T02:25:52Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"What version of drizzle-orm are you using?\r\n0.29.2\r\n\r\nWhat version of drizzle-kit are you using?\r\n0.20.8\r\n\r\n### Describe the Bug\r\n\r\nRunning \r\n\r\n`npx drizzle-kit generate:mysql`\r\n\r\ngenerates migration files with non-unique indexes without schema/database prefixes:\r\n\r\n``CREATE INDEX `some_index_name` ON `some_table` (`some_column`);``\r\n\r\nIn contrast to tables where the schema/database prefixes are present:\r\n\r\n``CREATE TABLE `some_schema`.`some_table` ( ...);``\r\n\r\nNote that unique indexes and primary keys are generated inside the \"CREATE TABLE\" statement.\r\n\r\n### Expected behavior\r\nI expect migration files with non-unique indexes including schema/database prefixes:\r\n\r\n``CREATE INDEX `some_index_name` ON `some_schema`.`some_table` (`some_column`);``\r\n\r\n### Environment & setup\r\nNode v21.5.0\r\nMacOS Sonoma 14.0\r\nMySQL 8.2.0-1.el8","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/274/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/273","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/273/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/273/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/273/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/273","id":2056251155,"node_id":"I_kwDOHoY85M56j-cT","number":273,"title":"[Studio] SQLite, saving timestamp value in \"yyyy-MM-dd HH:mm:ss\" causes Drizzle Kit Studio to fail Delete and Select/Filter operations","user":{"login":"arvilmena","id":8712657,"node_id":"MDQ6VXNlcjg3MTI2NTc=","avatar_url":"https://avatars.githubusercontent.com/u/8712657?v=4","gravatar_id":"","url":"https://api.github.com/users/arvilmena","html_url":"https://github.com/arvilmena","followers_url":"https://api.github.com/users/arvilmena/followers","following_url":"https://api.github.com/users/arvilmena/following{/other_user}","gists_url":"https://api.github.com/users/arvilmena/gists{/gist_id}","starred_url":"https://api.github.com/users/arvilmena/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arvilmena/subscriptions","organizations_url":"https://api.github.com/users/arvilmena/orgs","repos_url":"https://api.github.com/users/arvilmena/repos","events_url":"https://api.github.com/users/arvilmena/events{/privacy}","received_events_url":"https://api.github.com/users/arvilmena/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-26T09:59:12Z","updated_at":"2024-01-09T18:44:19Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello!\r\n\r\nFirst, thank you for the hard work you guys are putting in for Drizzle.\r\nSo, I am saving my timestamp/datetime values in \"yyyy-MM-dd HH:mm:ss\" format, i.e, \"2023-12-25 16:00:00\"\r\nand using that value to by the unique/primary key for one of my tables\r\nIt works great, but there are some issues arising when using Drizzle Kit Studio\r\nit seems like in Studio, these timestamp/datetime formats are getting cast to ISO format\r\nfor example: \"2023-12-25T16:00:00.000Z\"\r\nthis is how it looks in Web view: \r\n<img width=\"502\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/8712657/7239673b-6902-4178-a98c-609acfc0e9b7\">\r\nand when you try to delete the row, it will not properly match the original datetime format, and instead use the ISO string for the query, hence it will fail.\r\nUsing the `--verbose` flag for drizzle kit studio, the query invoked becomes:\r\n`Query: delete from \"day\" where \"data_at\" = ? -- params: [\"2023-12-25T16:00:00.000Z\"]`\r\nthe correct query should be:\r\n`delete from \"day\" where \"data_at\" = \"2023-12-25 16:00:00\"`\r\n\r\nWhat I'm using:\r\ndrizzle-kit: v0.20.6\r\ndrizzle-orm: v0.29.1\r\nturso.tech\r\n\r\n```\r\nimport { createClient } from \"@libsql/client\";\r\nimport { drizzle } from \"drizzle-orm/libsql\";\r\nconst DrizzleConfig = ...\r\nconst client = createClient(DrizzleConfig);\r\nexport const db = drizzle(client, { schema, logger: false });\r\n```\r\n\r\n```\r\nexport const day = sqliteTable(\"day\", {\r\n  dataAt: luxonDateTime(\"data_at\").notNull().unique().primaryKey(),\r\n});\r\nexport const dayRelations = relations(day, ({ many, one }) => ({\r\n  dailyCategories: many(dailyCategory),\r\n  dailyCrawl: one(dailyCrawl, {\r\n    fields: [day.dataAt],\r\n    references: [dailyCrawl.dataAt],\r\n  }),\r\n}));\r\n```\r\n\r\nluxonDateTime custom type:\r\n\r\n```\r\nimport { customType } from \"drizzle-orm/sqlite-core\";\r\nimport { DateTime } from \"luxon\";\r\nimport { dbDateStringToLuxon } from \"utils\";\r\nexport const luxonDateTime = customType<{\r\n  data: DateTime;\r\n  driverData: string;\r\n  dataType: string;\r\n}>({\r\n  dataType() {\r\n    return \"text\";\r\n  },\r\n  fromDriver(value: string): DateTime {\r\n    return dbDateStringToLuxon(value);\r\n  },\r\n  toDriver(value: DateTime): string {\r\n    const toDriver = value.toUTC().toFormat(\"yyyy-MM-dd HH:mm:ss\");\r\n    return toDriver;\r\n  },\r\n});\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/273/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/272","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/272/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/272/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/272/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/272","id":2055958414,"node_id":"I_kwDOHoY85M56i2-O","number":272,"title":"Drizzle Kit breaks CI","user":{"login":"selalipop","id":17497673,"node_id":"MDQ6VXNlcjE3NDk3Njcz","avatar_url":"https://avatars.githubusercontent.com/u/17497673?v=4","gravatar_id":"","url":"https://api.github.com/users/selalipop","html_url":"https://github.com/selalipop","followers_url":"https://api.github.com/users/selalipop/followers","following_url":"https://api.github.com/users/selalipop/following{/other_user}","gists_url":"https://api.github.com/users/selalipop/gists{/gist_id}","starred_url":"https://api.github.com/users/selalipop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/selalipop/subscriptions","organizations_url":"https://api.github.com/users/selalipop/orgs","repos_url":"https://api.github.com/users/selalipop/repos","events_url":"https://api.github.com/users/selalipop/events{/privacy}","received_events_url":"https://api.github.com/users/selalipop/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-26T02:06:41Z","updated_at":"2023-12-26T02:08:39Z","closed_at":"2023-12-26T02:07:59Z","author_association":"NONE","active_lock_reason":null,"body":"`Please update drizzle-kit package to the latest version üëç`\r\n\r\nThis needs to be a warning, not a blocking error.\r\n\r\nEdit: See it's triggered by a mismatch in versions, the warning should be made clearer","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/272/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/271","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/271/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/271/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/271/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/271","id":2049231364,"node_id":"I_kwDOHoY85M56JMoE","number":271,"title":"BUG `drizzle-kit push:mysql` with Two Primary Keys","user":{"login":"clburlison","id":2831320,"node_id":"MDQ6VXNlcjI4MzEzMjA=","avatar_url":"https://avatars.githubusercontent.com/u/2831320?v=4","gravatar_id":"","url":"https://api.github.com/users/clburlison","html_url":"https://github.com/clburlison","followers_url":"https://api.github.com/users/clburlison/followers","following_url":"https://api.github.com/users/clburlison/following{/other_user}","gists_url":"https://api.github.com/users/clburlison/gists{/gist_id}","starred_url":"https://api.github.com/users/clburlison/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clburlison/subscriptions","organizations_url":"https://api.github.com/users/clburlison/orgs","repos_url":"https://api.github.com/users/clburlison/repos","events_url":"https://api.github.com/users/clburlison/events{/privacy}","received_events_url":"https://api.github.com/users/clburlison/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-12-19T18:33:22Z","updated_at":"2023-12-26T03:31:58Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When you have a schema that contains two Primary Keys drizzle-kit is able to push the initial database creation but fails on future runs. When checking the verbose logs you can see drizzle-kit is attempting to drop all primary keys.\r\n\r\n\r\n<details><summary>Full Error Run</summary>\r\n<p>\r\n\r\n```\r\nbun run db:push\r\n$ drizzle-kit push:mysql\r\ndrizzle-kit: v0.20.7\r\ndrizzle-orm: v0.29.1\r\n\r\nNo config path provided, using default path\r\nReading config file '/Users/clayton/src/other/drizzle-mysql-push-bug/drizzle.config.ts'\r\nReading schema files:\r\n/Users/clayton/src/other/drizzle-mysql-push-bug/schema/index.ts\r\n\r\n\r\n Warning  You are about to execute current statements:\r\n\r\nCREATE TABLE `book` (\r\n\t`id` int AUTO_INCREMENT NOT NULL,\r\n\t`name` text,\r\n\tCONSTRAINT `book_id` PRIMARY KEY(`id`)\r\n);\r\n\r\nCREATE TABLE `books_to_authors` (\r\n\t`author_id` int NOT NULL,\r\n\t`book_id` int NOT NULL,\r\n\tCONSTRAINT `books_to_authors_book_id_author_id_pk` PRIMARY KEY(`book_id`,`author_id`)\r\n);\r\n\r\nCREATE TABLE `user` (\r\n\t`id` int AUTO_INCREMENT NOT NULL,\r\n\t`name` text,\r\n\tCONSTRAINT `user_id` PRIMARY KEY(`id`)\r\n);\r\n\r\n\r\n[‚úì] Changes applied\r\n‚ùØ bun run db:push\r\n$ drizzle-kit push:mysql\r\ndrizzle-kit: v0.20.7\r\ndrizzle-orm: v0.29.1\r\n\r\nNo config path provided, using default path\r\nReading config file '/Users/clayton/src/other/drizzle-mysql-push-bug/drizzle.config.ts'\r\nReading schema files:\r\n/Users/clayton/src/other/drizzle-mysql-push-bug/schema/index.ts\r\n\r\n\r\n Warning  You are about to execute current statements:\r\n\r\nALTER TABLE `books_to_authors` DROP PRIMARY KEY;\r\nALTER TABLE `books_to_authors` ADD PRIMARY KEY(`book_id`,`author_id`);\r\nALTER TABLE `books_to_authors` ADD PRIMARY KEY(`book_id`,`author_id`);\r\n\r\nError: Multiple primary key defined\r\n    at PromiseConnection.query (/Users/clayton/src/other/drizzle-mysql-push-bug/node_modules/drizzle-kit/bin.cjs:44278:26)\r\n    at Command.<anonymous> (/Users/clayton/src/other/drizzle-mysql-push-bug/node_modules/drizzle-kit/bin.cjs:63113:33)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {\r\n  code: 'ER_MULTIPLE_PRI_KEY',\r\n  errno: 1068,\r\n  sql: 'ALTER TABLE `books_to_authors` ADD PRIMARY KEY(`book_id`,`author_id`);',\r\n  sqlState: '42000',\r\n  sqlMessage: 'Multiple primary key defined'\r\n}\r\n```\r\n\r\n</p>\r\n</details> \r\n\r\n\r\n\r\nReproducible repo which is just an example pulled from the docs website. https://github.com/clburlison/drizzle-mysql-push-bug.git\r\n\r\n[Docs example](https://orm.drizzle.team/docs/indexes-constraints#composite-primary-key)\r\n\r\nInlined schema example\r\n\r\n```ts\r\nimport { int, text, primaryKey, mysqlTable } from \"drizzle-orm/mysql-core\";\r\nexport const user = mysqlTable(\"user\", {\r\n  id: int(\"id\").autoincrement().primaryKey(),\r\n  name: text(\"name\"),\r\n});\r\nexport const book = mysqlTable(\"book\", {\r\n  id: int(\"id\").autoincrement().primaryKey(),\r\n  name: text(\"name\"),\r\n});\r\nexport const booksToAuthors = mysqlTable(\"books_to_authors\", {\r\n  authorId: int(\"author_id\"),\r\n  bookId: int(\"book_id\"),\r\n}, (table) => {\r\n  return {\r\n    pk: primaryKey({ columns: [table.bookId, table.authorId] }),\r\n    pkWithCustomName: primaryKey({ name: 'custom_name', columns: [table.bookId, table.authorId] }),\r\n  };\r\n});\r\n```\r\n\r\n### Versions\r\ndrizzle-kit: v0.20.8\r\ndrizzle-orm: v0.29.2\r\nmysql: 8.0.33\r\n\r\n### Update log\r\n- Dec 25, 2023 - confirmed v0.29.2 still has this bug","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/271/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/271/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/270","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/270/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/270/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/270/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/270","id":2047318245,"node_id":"I_kwDOHoY85M56B5jl","number":270,"title":"Output raw SQL from schema","user":{"login":"arjunyel","id":11153289,"node_id":"MDQ6VXNlcjExMTUzMjg5","avatar_url":"https://avatars.githubusercontent.com/u/11153289?v=4","gravatar_id":"","url":"https://api.github.com/users/arjunyel","html_url":"https://github.com/arjunyel","followers_url":"https://api.github.com/users/arjunyel/followers","following_url":"https://api.github.com/users/arjunyel/following{/other_user}","gists_url":"https://api.github.com/users/arjunyel/gists{/gist_id}","starred_url":"https://api.github.com/users/arjunyel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arjunyel/subscriptions","organizations_url":"https://api.github.com/users/arjunyel/orgs","repos_url":"https://api.github.com/users/arjunyel/repos","events_url":"https://api.github.com/users/arjunyel/events{/privacy}","received_events_url":"https://api.github.com/users/arjunyel/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-18T19:32:16Z","updated_at":"2024-01-16T18:53:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"It would be nice if there was a command that output the schema as a raw SQL string. Here is my `patch-package` for `npx drizzle-kit generate:sqlite`\r\n\r\n```patch\r\ndiff --git a/node_modules/drizzle-kit/bin.cjs b/node_modules/drizzle-kit/bin.cjs\r\nindex 403348d..59d8097 100755\r\n--- a/node_modules/drizzle-kit/bin.cjs\r\n+++ b/node_modules/drizzle-kit/bin.cjs\r\n@@ -11440,18 +11440,12 @@ var init_utils = __esm({\r\n       );\r\n       const defaultConfigPath = defaultTsConfigExists ? \"drizzle.config.ts\" : defaultJsConfigExists ? \"drizzle.config.js\" : \"drizzle.config.json\";\r\n       if (!configPath) {\r\n-        console.log(\r\n-          source_default.gray(\r\n-            `No config path provided, using default '${defaultConfigPath}'`\r\n-          )\r\n-        );\r\n       }\r\n       const path5 = (0, import_path.join)((0, import_path.resolve)(configPath ?? defaultConfigPath));\r\n       if (!(0, import_fs.existsSync)(path5)) {\r\n         console.log(`${path5} file does not exist`);\r\n         process.exit(1);\r\n       }\r\n-      console.log(source_default.grey(`Reading config file '${path5}'`));\r\n       const { unregister } = await safeRegister();\r\n       const required = require(`${path5}`);\r\n       const content = required.default ?? required;\r\n@@ -13403,7 +13397,7 @@ var init_migrationPreparator = __esm({\r\n     };\r\n     prepareSqliteMigrationSnapshot = async (snapshots, schemaPath) => {\r\n       const prevSnapshot = sqliteSchema.parse(\r\n-        preparePrevSnapshot(snapshots, drySQLite)\r\n+        drySQLite\r\n       );\r\n       const serialized = await serializeSQLite(schemaPath);\r\n       const id = (0, import_crypto.randomUUID)();\r\n@@ -14973,10 +14967,8 @@ var init_migrate = __esm({\r\n       const outFolder = config.out;\r\n       const schemaPath = config.schema;\r\n       try {\r\n-        assertV1OutFolder(outFolder, \"sqlite\");\r\n-        const { snapshots, journal } = prepareMigrationFolder(outFolder, \"sqlite\");\r\n         const { prev, cur, custom } = await prepareSqliteMigrationSnapshot(\r\n-          snapshots,\r\n+          {},\r\n           schemaPath\r\n         );\r\n         const validatedPrev = sqliteSchema.parse(prev);\r\n@@ -15000,15 +14992,7 @@ var init_migrate = __esm({\r\n           squashedCur,\r\n           \"sqlite\"\r\n         );\r\n-        writeResult({\r\n-          cur,\r\n-          sqlStatements,\r\n-          journal,\r\n-          _meta,\r\n-          outFolder,\r\n-          breakpoints: config.breakpoints,\r\n-          bundle: config.bundle\r\n-        });\r\n+        console.log(sqlStatements.join('\\n'));\r\n       } catch (e) {\r\n         console.error(e);\r\n       }\r\n@@ -62984,8 +62968,6 @@ certs();\r\n // src/cli/index.ts\r\n var printVersions = async () => {\r\n   const v = await versions();\r\n-  console.log(`${source_default.gray(v)}\r\n-`);\r\n };\r\n var versions = async () => {\r\n   const { npmVersion } = await ormCoreVersions();\r\n\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/270/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/269","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/269/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/269/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/269/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/269","id":2035821016,"node_id":"I_kwDOHoY85M55WCnY","number":269,"title":"generate:pg not detecting added constraints","user":{"login":"alanhamlett","id":522344,"node_id":"MDQ6VXNlcjUyMjM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/522344?v=4","gravatar_id":"","url":"https://api.github.com/users/alanhamlett","html_url":"https://github.com/alanhamlett","followers_url":"https://api.github.com/users/alanhamlett/followers","following_url":"https://api.github.com/users/alanhamlett/following{/other_user}","gists_url":"https://api.github.com/users/alanhamlett/gists{/gist_id}","starred_url":"https://api.github.com/users/alanhamlett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alanhamlett/subscriptions","organizations_url":"https://api.github.com/users/alanhamlett/orgs","repos_url":"https://api.github.com/users/alanhamlett/repos","events_url":"https://api.github.com/users/alanhamlett/events{/privacy}","received_events_url":"https://api.github.com/users/alanhamlett/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-12-11T14:34:50Z","updated_at":"2023-12-11T17:50:36Z","closed_at":"2023-12-11T17:49:36Z","author_association":"NONE","active_lock_reason":null,"body":"I've added a new unique constraint `providerProviderAccountIdUnq` to a table, but `drizzle-kit generate:pg` says there are no changes. Deleting the table then running `push:pg` creates the table with the constraint, but manually deleting the constraint in the local database and trying to generate a migration to re-create it results in no changes detected.\r\n\r\n```\r\nexport const Integration = pgTable(\r\n  'Integration',\r\n  {\r\n    accessToken: varchar('accessToken'),\r\n    createdAt: timestamp('createdAt').notNull().defaultNow(),\r\n    expiresAt: timestamp('expiresAt'),\r\n    id: varchar('id')\r\n      .primaryKey()\r\n      .$defaultFn(() => createId()),\r\n    provider: varchar('provider').notNull(),\r\n    providerAccountId: varchar('providerAccountId').notNull(),\r\n    providerAccountUsername: varchar('providerAccountUsername').notNull(),\r\n    providerInfo: json('providerInfo').notNull().default('{}'),\r\n    refreshToken: varchar('refreshToken'),\r\n    scopes: text('scopes').array().notNull(),\r\n    tokenType: varchar('tokenType').notNull().default('bearer'),\r\n    userId: varchar('userId')\r\n      .notNull()\r\n      .references(() => User.id),\r\n  },\r\n  (table) => {\r\n    return {\r\n      providerProviderAccountIdUnq: unique().on(table.provider, table.providerAccountId),\r\n      userIdIdx: index().on(table.userId),\r\n    };\r\n  },\r\n);\r\n```\r\n\r\nThe generated snapshot json contains the missing `providerProviderAccountIdUnq` constraint but even though it's not in the db schema, the generated migration is empty.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/269/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/268","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/268/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/268/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/268/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/268","id":2035700601,"node_id":"I_kwDOHoY85M55VlN5","number":268,"title":"push:pg fails on unrelated table","user":{"login":"alanhamlett","id":522344,"node_id":"MDQ6VXNlcjUyMjM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/522344?v=4","gravatar_id":"","url":"https://api.github.com/users/alanhamlett","html_url":"https://github.com/alanhamlett","followers_url":"https://api.github.com/users/alanhamlett/followers","following_url":"https://api.github.com/users/alanhamlett/following{/other_user}","gists_url":"https://api.github.com/users/alanhamlett/gists{/gist_id}","starred_url":"https://api.github.com/users/alanhamlett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alanhamlett/subscriptions","organizations_url":"https://api.github.com/users/alanhamlett/orgs","repos_url":"https://api.github.com/users/alanhamlett/repos","events_url":"https://api.github.com/users/alanhamlett/events{/privacy}","received_events_url":"https://api.github.com/users/alanhamlett/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-11T13:37:14Z","updated_at":"2023-12-11T13:37:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Running `drizzle-kit generate:pg` generates this SQL migration:\r\n\r\n```\r\nALTER TABLE \"Integration\" DROP CONSTRAINT \"Integration_userId_provider_unique\";--> statement-breakpoint\r\nALTER TABLE \"Integration\" ADD CONSTRAINT \"Integration_provider_providerAccountId_unique\" UNIQUE(\"provider\",\"providerAccountId\");\r\n```\r\n\r\nThen in dev running `drizzle-kit push:pg` fails on an unrelated constraint:\r\n\r\n```\r\nYou're about to add Integration_provider_providerAccountId_unique unique constraint to the table, which contains 4 items. If this statement fails, you will receive an error from the database. Do you want to truncate Integration table?\r\n\r\nerror: constraint \"profiledefault_userid_defaulttype_pk\" of relation \"ProfileDefault\" does not exist\r\n    at ./node_modules/drizzle-kit/bin.cjs:24545:21\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async PgPostgres.query (./node_modules/drizzle-kit/bin.cjs:25506:21)\r\n    at async Command.<anonymous> (./node_modules/drizzle-kit/bin.cjs:63185:9) {\r\n  length: 163,\r\n  severity: 'ERROR',\r\n  code: '42704',\r\n  detail: undefined,\r\n  hint: undefined,\r\n  position: undefined,\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: undefined,\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: 'tablecmds.c',\r\n  line: '10691',\r\n  routine: 'ATExecDropConstraint'\r\n}\r\n```\r\n\r\nWhy?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/268/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/268/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/267","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/267/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/267/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/267/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/267","id":2034070797,"node_id":"I_kwDOHoY85M55PXUN","number":267,"title":"npx/bunx drizzle-kit generate SyntaxError: Unexpected token '?'","user":{"login":"theodufort","id":111878790,"node_id":"U_kgDOBqsihg","avatar_url":"https://avatars.githubusercontent.com/u/111878790?v=4","gravatar_id":"","url":"https://api.github.com/users/theodufort","html_url":"https://github.com/theodufort","followers_url":"https://api.github.com/users/theodufort/followers","following_url":"https://api.github.com/users/theodufort/following{/other_user}","gists_url":"https://api.github.com/users/theodufort/gists{/gist_id}","starred_url":"https://api.github.com/users/theodufort/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/theodufort/subscriptions","organizations_url":"https://api.github.com/users/theodufort/orgs","repos_url":"https://api.github.com/users/theodufort/repos","events_url":"https://api.github.com/users/theodufort/events{/privacy}","received_events_url":"https://api.github.com/users/theodufort/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-12-09T21:32:40Z","updated_at":"2023-12-20T22:56:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Im trying to generate an sqlite DB from a schema i created.\r\n\r\nEnvironement:\r\n- BunJS (node and npm installed thought)\r\n\r\nWhat i tried:\r\n- `sudo bunx drizzle-kit generate:sqlite --schema ./db/schema.ts`\r\n- `bunx drizzle-kit generate:sqlite --schema ./db/schema.ts`\r\n-  `sudo npx drizzle-kit generate:sqlite --schema ./db/schema.ts`\r\n- `npx drizzle-kit generate:sqlite --schema ./db/schema.ts`\r\n\r\nThe error i get for the 4 of those:\r\n\r\n`/media/disk1/Clones/bunjs-rest-api/app-api/node_modules/drizzle-kit/bin.cjs:4692\r\n        return `${idx.name};${idx.columns.join(\",\")};${idx.isUnique};${idx.using ?? \"\"};${idx.algorithm ?? \"\"};${idx.lock ?? \"\"}`;\r\n                                                                                  ^\r\n\r\nSyntaxError: Unexpected token '?'\r\n    at wrapSafe (internal/modules/cjs/loader.js:915:16)\r\n    at Module._compile (internal/modules/cjs/loader.js:963:27)\r\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1027:10)\r\n    at Module.load (internal/modules/cjs/loader.js:863:32)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:708:14)\r\n    at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:60:12)\r\n    at internal/main/run_main_module.js:17:47\r\n`\r\n\r\nEDIT: For anyone experiencing weird issues when switching or playing with bun,node or npm.\r\nTry this tag when using any package `--bun` like `bunx --bun drizzle-kit generate:sqlite --schema ./db/schema.ts`\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/267/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/267/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/266","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/266/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/266/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/266/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/266","id":2033360358,"node_id":"I_kwDOHoY85M55Mp3m","number":266,"title":"Autodetect dialect based on configured driver","user":{"login":"septatrix","id":24257556,"node_id":"MDQ6VXNlcjI0MjU3NTU2","avatar_url":"https://avatars.githubusercontent.com/u/24257556?v=4","gravatar_id":"","url":"https://api.github.com/users/septatrix","html_url":"https://github.com/septatrix","followers_url":"https://api.github.com/users/septatrix/followers","following_url":"https://api.github.com/users/septatrix/following{/other_user}","gists_url":"https://api.github.com/users/septatrix/gists{/gist_id}","starred_url":"https://api.github.com/users/septatrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/septatrix/subscriptions","organizations_url":"https://api.github.com/users/septatrix/orgs","repos_url":"https://api.github.com/users/septatrix/repos","events_url":"https://api.github.com/users/septatrix/events{/privacy}","received_events_url":"https://api.github.com/users/septatrix/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-08T21:58:16Z","updated_at":"2023-12-08T21:58:16Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Most drizzle-kit commands require explicitly passing the dialect after a colon. However, for a configured database connection this dialect can already be inferred based on the selected driver (e.g. `driver: \"better-sqlite\"` corresponds to `foobar:sqlite`).\r\n\r\nThis would make the commands easier to use, especially when dealing with different databases between projects which currently means that one has to always look up which database is used to select the correct command.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/266/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/265","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/265/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/265/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/265/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/265","id":2032890095,"node_id":"I_kwDOHoY85M55K3Dv","number":265,"title":"[BUG]: MySQL / Planetscale wants to redo migration steps","user":{"login":"jkrumm","id":15140912,"node_id":"MDQ6VXNlcjE1MTQwOTEy","avatar_url":"https://avatars.githubusercontent.com/u/15140912?v=4","gravatar_id":"","url":"https://api.github.com/users/jkrumm","html_url":"https://github.com/jkrumm","followers_url":"https://api.github.com/users/jkrumm/followers","following_url":"https://api.github.com/users/jkrumm/following{/other_user}","gists_url":"https://api.github.com/users/jkrumm/gists{/gist_id}","starred_url":"https://api.github.com/users/jkrumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkrumm/subscriptions","organizations_url":"https://api.github.com/users/jkrumm/orgs","repos_url":"https://api.github.com/users/jkrumm/repos","events_url":"https://api.github.com/users/jkrumm/events{/privacy}","received_events_url":"https://api.github.com/users/jkrumm/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2023-12-08T15:43:21Z","updated_at":"2024-02-01T21:01:08Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"After executing migrations drizzle wants to do parts again. Please help me this is probably a bug.\r\nIt wants to drop primary keys and add them again and then again the timestamp defaults.\r\nThe first migration works fine though and tables are persisted perfectly. Just that it doesn't get a proper diff when running again.\r\n\r\nDB: MySQL / Planetscale\r\n\r\n\"drizzle-orm\": \"^0.29.1\",\r\n\"drizzle-kit\": \"^0.20.6\",\r\n\r\nmy migration script:\r\n```\r\n\"db:push\": \"drizzle-kit push:mysql --config=drizzle.config.ts\",\r\n```\r\n\r\ndrizzle.config.ts\r\n\r\n```typescript\r\nimport \"dotenv/config\";\r\nimport { defineConfig } from \"drizzle-kit\";\r\n\r\nexport default defineConfig({\r\n  schema: \"./src/server/db/schema.ts\",\r\n  driver: \"mysql2\",\r\n  dbCredentials: {\r\n    uri: process.env.DATABASE_URL!,\r\n  },\r\n  strict: true,\r\n  verbose: true,\r\n  breakpoints: true,\r\n});\r\n```\r\n\r\nschema.ts\r\n```typescript\r\nimport {\r\n  boolean,\r\n  decimal,\r\n  int,\r\n  mediumint,\r\n  mysqlEnum,\r\n  mysqlTableCreator,\r\n  smallint,\r\n  timestamp,\r\n  varchar,\r\n} from \"drizzle-orm/mysql-core\";\r\nimport {\r\n  type InferInsertModel,\r\n  type InferSelectModel,\r\n  relations,\r\n} from \"drizzle-orm\";\r\nimport { nanoid } from \"nanoid\";\r\n\r\n/**\r\n * Multi-project schema feature of Drizzle ORM. Use the same database instance for multiple projects.\r\n * @see https://orm.drizzle.team/docs/goodies#multi-project-schema\r\n */\r\nexport const mysqlTable = mysqlTableCreator((name) => `fpp_${name}`);\r\n\r\n/**\r\n * ROOMS\r\n */\r\n\r\nexport const rooms = mysqlTable(\"rooms\", {\r\n  id: int(\"id\").autoincrement().primaryKey().notNull(),\r\n  number: mediumint(\"number\").unique(\"rooms_number_unique_idx\").notNull(),\r\n  name: varchar(\"name\", { length: 15 }).unique(\"rooms_name_unique_idx\"),\r\n  firstUsedAt: timestamp(\"first_used_at\").defaultNow().notNull(),\r\n  lastUsedAt: timestamp(\"last_used_at\").defaultNow().onUpdateNow().notNull(),\r\n});\r\n\r\nexport type IRoom = InferSelectModel<typeof rooms>;\r\nexport type ICreateRoom = InferInsertModel<typeof rooms>;\r\n\r\n/**\r\n * VOTES\r\n */\r\n\r\nexport const votes = mysqlTable(\"votes\", {\r\n  id: int(\"id\").autoincrement().primaryKey().notNull(),\r\n  roomId: int(\"room_id\").notNull(),\r\n  avgEstimation: decimal(\"avg_estimation\", {\r\n    precision: 4,\r\n    scale: 2,\r\n  }).notNull(),\r\n  maxEstimation: decimal(\"max_estimation\", {\r\n    precision: 4,\r\n    scale: 2,\r\n  }).notNull(),\r\n  minEstimation: decimal(\"min_estimation\", {\r\n    precision: 4,\r\n    scale: 2,\r\n  }).notNull(),\r\n  amountOfEstimations: decimal(\"amount_of_estimations\", {\r\n    precision: 4,\r\n    scale: 2,\r\n  }).notNull(),\r\n  amountOfSpectators: smallint(\"amount_of_spectators\").notNull(),\r\n  duration: smallint(\"duration\").notNull(),\r\n  votedAt: timestamp(\"voted_at\").defaultNow().notNull(),\r\n});\r\n\r\nexport type IVote = InferSelectModel<typeof votes>;\r\nexport type ICreateVote = InferInsertModel<typeof votes>;\r\n\r\nexport const votesRelations = relations(votes, ({ one }) => ({\r\n  room: one(rooms, {\r\n    fields: [votes.roomId],\r\n    references: [rooms.id],\r\n  }),\r\n}));\r\n\r\n/**\r\n * USERS\r\n */\r\n\r\nexport const users = mysqlTable(\"users\", {\r\n  id: varchar(\"id\", { length: 21 }).primaryKey().$defaultFn(nanoid).notNull(),\r\n  device: varchar(\"device\", { length: 50 }),\r\n  os: varchar(\"os\", { length: 50 }),\r\n  browser: varchar(\"browser\", { length: 50 }),\r\n  country: varchar(\"country\", { length: 5 }),\r\n  region: varchar(\"region\", { length: 100 }),\r\n  city: varchar(\"city\", { length: 100 }),\r\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\r\n});\r\n\r\nexport type IUser = InferSelectModel<typeof users>;\r\nexport type ICreateUser = InferInsertModel<typeof users>;\r\n\r\n/**\r\n * ESTIMATIONS\r\n */\r\n\r\nexport const estimations = mysqlTable(\"estimations\", {\r\n  id: int(\"id\").primaryKey().autoincrement().notNull(),\r\n  userId: varchar(\"user_id\", { length: 21 }).notNull(),\r\n  roomId: int(\"room_id\").notNull(),\r\n  estimation: smallint(\"estimation\"),\r\n  spectator: boolean(\"spectator\").default(false).notNull(),\r\n  estimatedAt: timestamp(\"estimated_at\").defaultNow().notNull(),\r\n});\r\n\r\nexport type IEstimation = InferSelectModel<typeof estimations>;\r\nexport type ICreateEstimation = InferInsertModel<typeof estimations>;\r\n\r\nexport const estimationsRelations = relations(estimations, ({ one }) => ({\r\n  users: one(users, {\r\n    fields: [estimations.userId],\r\n    references: [users.id],\r\n  }),\r\n  rooms: one(rooms, {\r\n    fields: [estimations.roomId],\r\n    references: [rooms.id],\r\n  }),\r\n}));\r\n\r\n/**\r\n * PAGE_VIEWS\r\n */\r\n\r\nexport const RouteType = {\r\n  HOME: \"HOME\",\r\n  CONTACT: \"CONTACT\",\r\n  IMPRINT: \"IMPRINT\",\r\n  ROOM: \"ROOM\",\r\n  ANALYTICS: \"ANALYTICS\",\r\n  ROADMAP: \"ROADMAP\",\r\n} as const;\r\n\r\nexport const pageViews = mysqlTable(\"page_views\", {\r\n  id: int(\"id\").primaryKey().autoincrement().notNull(),\r\n  userId: varchar(\"user_id\", { length: 21 }).notNull(),\r\n  route: mysqlEnum(\"route\", Object.values(RouteType) as [string]).notNull(),\r\n  roomId: int(\"room_id\"),\r\n  viewedAt: timestamp(\"viewed_at\").defaultNow().notNull(),\r\n});\r\n\r\nexport type IPageView = InferSelectModel<typeof pageViews>;\r\nexport type ICreatePageView = InferInsertModel<typeof pageViews>;\r\n\r\nexport const pageViewsRelations = relations(pageViews, ({ one }) => ({\r\n  users: one(users, {\r\n    fields: [pageViews.roomId],\r\n    references: [users.id],\r\n  }),\r\n}));\r\n\r\n/**\r\n * EVENTS\r\n */\r\n\r\nexport const EventType = {\r\n  CONTACT_FORM_SUBMISSION: \"CONTACT_FORM_SUBMISSION\",\r\n} as const;\r\n\r\nexport const events = mysqlTable(\"events\", {\r\n  id: int(\"id\").primaryKey().autoincrement().notNull(),\r\n  userId: varchar(\"user_id\", { length: 21 }).notNull(),\r\n  event: mysqlEnum(\"event\", Object.keys(EventType) as [string]).notNull(),\r\n  eventAt: timestamp(\"event_at\").defaultNow().notNull(),\r\n});\r\n\r\nexport type IEvent = InferSelectModel<typeof events>;\r\nexport type ICreateEvent = InferInsertModel<typeof events>;\r\n\r\nexport const eventsRelations = relations(events, ({ one }) => ({\r\n  users: one(users, {\r\n    fields: [events.userId],\r\n    references: [users.id],\r\n  }),\r\n}));\r\n\r\n/**\r\n * USERS_RELATIONS\r\n */\r\n\r\nexport const usersRelations = relations(users, ({ many }) => ({\r\n  pageViews: many(pageViews),\r\n  estimations: many(estimations),\r\n  events: many(events),\r\n}));\r\n\r\n/**\r\n * ROOMS_RELATIONS\r\n */\r\n\r\nexport const roomsRelations = relations(rooms, ({ many }) => ({\r\n  votes: many(votes),\r\n  pageViews: many(pageViews),\r\n  estimations: many(estimations),\r\n}));\r\n\r\n/** ------------------------------------------------------------------ */\r\n\r\n/**\r\n * FEATURE_FLAGS\r\n */\r\n\r\nexport const FeatureFlagType = {\r\n  CONTACT_FORM: \"CONTACT_FORM\",\r\n} as const;\r\n\r\nexport const featureFlags = mysqlTable(\"feature_flags\", {\r\n  name: mysqlEnum(\"name\", Object.keys(FeatureFlagType) as [string])\r\n    .unique(\"feature_flags_name_unique_idx\")\r\n    .notNull(),\r\n  enabled: boolean(\"enabled\").default(false).notNull(),\r\n});\r\n```\r\n\r\nThe first migration:\r\n\r\n```sql\r\nCREATE TABLE `fpp_estimations` (\r\n\t`id` int AUTO_INCREMENT NOT NULL,\r\n\t`user_id` varchar(21) NOT NULL,\r\n\t`room_id` int NOT NULL,\r\n\t`estimation` smallint,\r\n\t`spectator` boolean NOT NULL DEFAULT false,\r\n\t`estimated_at` timestamp NOT NULL DEFAULT (now()),\r\n\tCONSTRAINT `fpp_estimations_id` PRIMARY KEY(`id`)\r\n);\r\n\r\nCREATE TABLE `fpp_events` (\r\n\t`id` int AUTO_INCREMENT NOT NULL,\r\n\t`user_id` varchar(21) NOT NULL,\r\n\t`event` enum('CONTACT_FORM_SUBMISSION') NOT NULL,\r\n\t`event_at` timestamp NOT NULL DEFAULT (now()),\r\n\tCONSTRAINT `fpp_events_id` PRIMARY KEY(`id`)\r\n);\r\n\r\nCREATE TABLE `fpp_feature_flags` (\r\n\t`name` enum('CONTACT_FORM') NOT NULL,\r\n\t`enabled` boolean NOT NULL DEFAULT false,\r\n\tCONSTRAINT `feature_flags_name_unique_idx` UNIQUE(`name`)\r\n);\r\n\r\nCREATE TABLE `fpp_page_views` (\r\n\t`id` int AUTO_INCREMENT NOT NULL,\r\n\t`user_id` varchar(21) NOT NULL,\r\n\t`route` enum('HOME','CONTACT','IMPRINT','ROOM','ANALYTICS','ROADMAP') NOT NULL,\r\n\t`room_id` int,\r\n\t`viewed_at` timestamp NOT NULL DEFAULT (now()),\r\n\tCONSTRAINT `fpp_page_views_id` PRIMARY KEY(`id`)\r\n);\r\n\r\nCREATE TABLE `fpp_rooms` (\r\n\t`id` int AUTO_INCREMENT NOT NULL,\r\n\t`number` mediumint NOT NULL,\r\n\t`name` varchar(15),\r\n\t`first_used_at` timestamp NOT NULL DEFAULT (now()),\r\n\t`last_used_at` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\r\n\tCONSTRAINT `fpp_rooms_id` PRIMARY KEY(`id`),\r\n\tCONSTRAINT `rooms_number_unique_idx` UNIQUE(`number`),\r\n\tCONSTRAINT `rooms_name_unique_idx` UNIQUE(`name`)\r\n);\r\n\r\nCREATE TABLE `fpp_users` (\r\n\t`id` varchar(21) NOT NULL,\r\n\t`device` varchar(50),\r\n\t`os` varchar(50),\r\n\t`browser` varchar(50),\r\n\t`country` varchar(5),\r\n\t`region` varchar(100),\r\n\t`city` varchar(100),\r\n\t`created_at` timestamp NOT NULL DEFAULT (now()),\r\n\tCONSTRAINT `fpp_users_id` PRIMARY KEY(`id`)\r\n);\r\n\r\nCREATE TABLE `fpp_votes` (\r\n\t`id` int AUTO_INCREMENT NOT NULL,\r\n\t`room_id` int NOT NULL,\r\n\t`avg_estimation` decimal(4,2) NOT NULL,\r\n\t`max_estimation` decimal(4,2) NOT NULL,\r\n\t`min_estimation` decimal(4,2) NOT NULL,\r\n\t`amount_of_estimations` decimal(4,2) NOT NULL,\r\n\t`amount_of_spectators` smallint NOT NULL,\r\n\t`duration` smallint NOT NULL,\r\n\t`voted_at` timestamp NOT NULL DEFAULT (now()),\r\n\tCONSTRAINT `fpp_votes_id` PRIMARY KEY(`id`)\r\n);\r\n```\r\n\r\nThen without changing anything and running my migration script it wants to do:\r\n```\r\n\"db:push\": \"drizzle-kit push:mysql --config=drizzle.config.ts\",\r\n```\r\n```sql\r\nALTER TABLE `fpp_estimations` DROP PRIMARY KEY;\r\nALTER TABLE `fpp_events` DROP PRIMARY KEY;\r\nALTER TABLE `fpp_page_views` DROP PRIMARY KEY;\r\nALTER TABLE `fpp_rooms` DROP PRIMARY KEY;\r\nALTER TABLE `fpp_users` DROP PRIMARY KEY;\r\nALTER TABLE `fpp_votes` DROP PRIMARY KEY;\r\nALTER TABLE `fpp_estimations` MODIFY COLUMN `estimated_at` timestamp NOT NULL DEFAULT (now());\r\nALTER TABLE `fpp_events` MODIFY COLUMN `event_at` timestamp NOT NULL DEFAULT (now());\r\nALTER TABLE `fpp_page_views` MODIFY COLUMN `viewed_at` timestamp NOT NULL DEFAULT (now());\r\nALTER TABLE `fpp_rooms` MODIFY COLUMN `first_used_at` timestamp NOT NULL DEFAULT (now());\r\nALTER TABLE `fpp_rooms` MODIFY COLUMN `last_used_at` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP;\r\nALTER TABLE `fpp_users` MODIFY COLUMN `created_at` timestamp NOT NULL DEFAULT (now());\r\nALTER TABLE `fpp_votes` MODIFY COLUMN `voted_at` timestamp NOT NULL DEFAULT (now());\r\nALTER TABLE `fpp_estimations` ADD PRIMARY KEY(`id`);\r\nALTER TABLE `fpp_events` ADD PRIMARY KEY(`id`);\r\nALTER TABLE `fpp_page_views` ADD PRIMARY KEY(`id`);\r\nALTER TABLE `fpp_rooms` ADD PRIMARY KEY(`id`);\r\nALTER TABLE `fpp_users` ADD PRIMARY KEY(`id`);\r\nALTER TABLE `fpp_votes` ADD PRIMARY KEY(`id`);\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/265/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/265/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/264","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/264/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/264/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/264/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/264","id":2032584203,"node_id":"I_kwDOHoY85M55JsYL","number":264,"title":"[Bug]: default value for varchar columns","user":{"login":"Bogdan-101","id":54862850,"node_id":"MDQ6VXNlcjU0ODYyODUw","avatar_url":"https://avatars.githubusercontent.com/u/54862850?v=4","gravatar_id":"","url":"https://api.github.com/users/Bogdan-101","html_url":"https://github.com/Bogdan-101","followers_url":"https://api.github.com/users/Bogdan-101/followers","following_url":"https://api.github.com/users/Bogdan-101/following{/other_user}","gists_url":"https://api.github.com/users/Bogdan-101/gists{/gist_id}","starred_url":"https://api.github.com/users/Bogdan-101/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bogdan-101/subscriptions","organizations_url":"https://api.github.com/users/Bogdan-101/orgs","repos_url":"https://api.github.com/users/Bogdan-101/repos","events_url":"https://api.github.com/users/Bogdan-101/events{/privacy}","received_events_url":"https://api.github.com/users/Bogdan-101/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-08T12:36:39Z","updated_at":"2023-12-08T12:36:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Here is a [minimal reproduction](https://github.com/Bogdan-101/Drizzle-kit-default-varchar-bug)\r\n\r\nWhen adding a default value to the varchar column and applying migrations after the db updated, drizzle-kit still thinks that the default value for the column is not set and asks whether you want to alter the column. You can apply this default value to the column as many times as you want - the message will always show up.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/264/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/263","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/263/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/263/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/263/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/263","id":2032546363,"node_id":"I_kwDOHoY85M55JjI7","number":263,"title":"[FEATURE]: adding a --silent, --yes or --force option to drizzle push:<driver>","user":{"login":"Bogdan-101","id":54862850,"node_id":"MDQ6VXNlcjU0ODYyODUw","avatar_url":"https://avatars.githubusercontent.com/u/54862850?v=4","gravatar_id":"","url":"https://api.github.com/users/Bogdan-101","html_url":"https://github.com/Bogdan-101","followers_url":"https://api.github.com/users/Bogdan-101/followers","following_url":"https://api.github.com/users/Bogdan-101/following{/other_user}","gists_url":"https://api.github.com/users/Bogdan-101/gists{/gist_id}","starred_url":"https://api.github.com/users/Bogdan-101/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bogdan-101/subscriptions","organizations_url":"https://api.github.com/users/Bogdan-101/orgs","repos_url":"https://api.github.com/users/Bogdan-101/repos","events_url":"https://api.github.com/users/Bogdan-101/events{/privacy}","received_events_url":"https://api.github.com/users/Bogdan-101/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-12-08T12:09:19Z","updated_at":"2024-04-04T21:00:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When applying migrations to the db you are forced to review sql code that is about to be executed in your db. Even though I love this feature I cannot see any flag for the `push` command to accept all changes without an interactive cli. This may be required on ci/cd when migrating cloud database. There is a `strict` option available but I think you cannot use this variable to skip migrations review.\r\nMy suggestions for such flag are:\r\n`yes, silent, force, no-verify`\r\n\r\nAlso in the [docs](https://orm.drizzle.team/kit-docs/commands/#prototype--push) in the usage example there is a `--ssl` option listed but it is not present in the `push` list of commands.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/263/reactions","total_count":9,"+1":9,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/263/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/262","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/262/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/262/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/262/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/262","id":2031593699,"node_id":"I_kwDOHoY85M55F6jj","number":262,"title":"Move tab \"x\" button to left of text","user":{"login":"ridafkih","id":9158485,"node_id":"MDQ6VXNlcjkxNTg0ODU=","avatar_url":"https://avatars.githubusercontent.com/u/9158485?v=4","gravatar_id":"","url":"https://api.github.com/users/ridafkih","html_url":"https://github.com/ridafkih","followers_url":"https://api.github.com/users/ridafkih/followers","following_url":"https://api.github.com/users/ridafkih/following{/other_user}","gists_url":"https://api.github.com/users/ridafkih/gists{/gist_id}","starred_url":"https://api.github.com/users/ridafkih/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ridafkih/subscriptions","organizations_url":"https://api.github.com/users/ridafkih/orgs","repos_url":"https://api.github.com/users/ridafkih/repos","events_url":"https://api.github.com/users/ridafkih/events{/privacy}","received_events_url":"https://api.github.com/users/ridafkih/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-12-07T21:55:07Z","updated_at":"2023-12-08T11:56:16Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When switching contexts, it's very common to want to close out all of your tabs. This would make doing so much easier & predictable rather than engaging in a fast-paced game of whack-a-mole each time. :) \r\n\r\n![CleanShot 2023-12-07 at 16 51 06](https://github.com/drizzle-team/drizzle-kit-mirror/assets/9158485/e5116779-021e-4dc3-b7b5-6c70f9f36823)\r\n![CleanShot 2023-12-07 at 16 50 27](https://github.com/drizzle-team/drizzle-kit-mirror/assets/9158485/ac1ea8d6-ee1a-480a-82e9-2b3520056126)\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/262/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/261","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/261/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/261/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/261/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/261","id":2029477619,"node_id":"I_kwDOHoY85M54917z","number":261,"title":"TypeError: Cannot read properties of undefined (reading 'compositePrimaryKeys')","user":{"login":"adamwilkins01","id":142239552,"node_id":"U_kgDOCHpnQA","avatar_url":"https://avatars.githubusercontent.com/u/142239552?v=4","gravatar_id":"","url":"https://api.github.com/users/adamwilkins01","html_url":"https://github.com/adamwilkins01","followers_url":"https://api.github.com/users/adamwilkins01/followers","following_url":"https://api.github.com/users/adamwilkins01/following{/other_user}","gists_url":"https://api.github.com/users/adamwilkins01/gists{/gist_id}","starred_url":"https://api.github.com/users/adamwilkins01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamwilkins01/subscriptions","organizations_url":"https://api.github.com/users/adamwilkins01/orgs","repos_url":"https://api.github.com/users/adamwilkins01/repos","events_url":"https://api.github.com/users/adamwilkins01/events{/privacy}","received_events_url":"https://api.github.com/users/adamwilkins01/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-12-06T22:17:15Z","updated_at":"2024-04-26T09:23:21Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"happened after trying to push to planetscale after resolving all column conflicts.\r\n\r\nfull error:\r\n```\r\nTypeError: Cannot read properties of undefined (reading 'compositePrimaryKeys')\r\n    at D:\\work\\outreach-digital-media\\node_modules\\drizzle-kit\\bin.cjs:17258:51\r\n    at Array.map (<anonymous>)\r\n    at prepareDeleteCompositePrimaryKeyMySql (D:\\work\\outreach-digital-media\\node_modules\\drizzle-kit\\bin.cjs:17253:33)\r\n    at D:\\work\\outreach-digital-media\\node_modules\\drizzle-kit\\bin.cjs:17643:33\r\n    at Array.forEach (<anonymous>)\r\n    at applySnapshotsDiff (D:\\work\\outreach-digital-media\\node_modules\\drizzle-kit\\bin.cjs:17571:26)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async prepareSQL (D:\\work\\outreach-digital-media\\node_modules\\drizzle-kit\\bin.cjs:15174:14)\r\n    at async prepareMySQLPush (D:\\work\\outreach-digital-media\\node_modules\\drizzle-kit\\bin.cjs:14974:47)\r\n    at async Command.<anonymous> (D:\\work\\outreach-digital-media\\node_modules\\drizzle-kit\\bin.cjs:62995:22)\r\n``","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/261/reactions","total_count":12,"+1":12,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/261/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/260","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/260/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/260/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/260/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/260","id":2025609785,"node_id":"I_kwDOHoY85M54vFo5","number":260,"title":"[Bug] Stop creating drizzle schema for migration hash tracking","user":{"login":"alanhamlett","id":522344,"node_id":"MDQ6VXNlcjUyMjM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/522344?v=4","gravatar_id":"","url":"https://api.github.com/users/alanhamlett","html_url":"https://github.com/alanhamlett","followers_url":"https://api.github.com/users/alanhamlett/followers","following_url":"https://api.github.com/users/alanhamlett/following{/other_user}","gists_url":"https://api.github.com/users/alanhamlett/gists{/gist_id}","starred_url":"https://api.github.com/users/alanhamlett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alanhamlett/subscriptions","organizations_url":"https://api.github.com/users/alanhamlett/orgs","repos_url":"https://api.github.com/users/alanhamlett/repos","events_url":"https://api.github.com/users/alanhamlett/events{/privacy}","received_events_url":"https://api.github.com/users/alanhamlett/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-05T08:36:20Z","updated_at":"2023-12-05T08:36:20Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Running [migrate](https://orm.drizzle.team/kit-docs/overview/#running-migrations) creates a new table `drizzle.__drizzle_migrations`. This table should be created on the database we define, but instead it's always created in `drizzle` schema. Some cloud managed databases might not allow using the non-default schema.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/260/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/259","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/259/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/259/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/259/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/259","id":2022512293,"node_id":"I_kwDOHoY85M54jRal","number":259,"title":"Deterministic `introspect` schema output","user":{"login":"clovis1122","id":22270042,"node_id":"MDQ6VXNlcjIyMjcwMDQy","avatar_url":"https://avatars.githubusercontent.com/u/22270042?v=4","gravatar_id":"","url":"https://api.github.com/users/clovis1122","html_url":"https://github.com/clovis1122","followers_url":"https://api.github.com/users/clovis1122/followers","following_url":"https://api.github.com/users/clovis1122/following{/other_user}","gists_url":"https://api.github.com/users/clovis1122/gists{/gist_id}","starred_url":"https://api.github.com/users/clovis1122/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clovis1122/subscriptions","organizations_url":"https://api.github.com/users/clovis1122/orgs","repos_url":"https://api.github.com/users/clovis1122/repos","events_url":"https://api.github.com/users/clovis1122/events{/privacy}","received_events_url":"https://api.github.com/users/clovis1122/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-12-03T13:07:04Z","updated_at":"2023-12-05T08:27:22Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello!\r\n\r\nIt would be nice if the introspected output was deterministic. One way to do this is to sort the tables, columns, and other data before creating the final schema file.\r\n\r\nI've made a quick fix for my use case, but I'm happy to push a fix if I'm pointed at the source code.\r\n\r\nThanks.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/259/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/259/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/258","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/258/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/258/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/258/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/258","id":2021948357,"node_id":"I_kwDOHoY85M54hHvF","number":258,"title":"[BUG]: Custom schema migrations are not working","user":{"login":"Bogdan-101","id":54862850,"node_id":"MDQ6VXNlcjU0ODYyODUw","avatar_url":"https://avatars.githubusercontent.com/u/54862850?v=4","gravatar_id":"","url":"https://api.github.com/users/Bogdan-101","html_url":"https://github.com/Bogdan-101","followers_url":"https://api.github.com/users/Bogdan-101/followers","following_url":"https://api.github.com/users/Bogdan-101/following{/other_user}","gists_url":"https://api.github.com/users/Bogdan-101/gists{/gist_id}","starred_url":"https://api.github.com/users/Bogdan-101/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bogdan-101/subscriptions","organizations_url":"https://api.github.com/users/Bogdan-101/orgs","repos_url":"https://api.github.com/users/Bogdan-101/repos","events_url":"https://api.github.com/users/Bogdan-101/events{/privacy}","received_events_url":"https://api.github.com/users/Bogdan-101/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-12-02T08:45:46Z","updated_at":"2024-05-05T20:37:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Duplicate of [this issue](https://github.com/drizzle-team/drizzle-orm/issues/1592). Accidentally pushed it to the wrong repo.\r\n\r\n### What version of `drizzle-orm` are you using?\r\n\r\n0.29.1\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.20.6\r\n\r\n### Describe the Bug\r\n\r\nI am new to drizzle. I tried to create tables in separate, custom schema, using the examples from official [github](https://github.com/drizzle-team/drizzle-orm/tree/main/examples/pg-proxy) and custom schema usage from [official documentation](https://orm.drizzle.team/docs/schemas). Generation of the schema works fine but when I try to migrate a postgres database I get:\r\n```bash\r\nnpm run migrate\r\n\r\n> pg-proxy@1.0.0 migrate\r\n> drizzle-kit push:pg\r\n\r\ndrizzle-kit: v0.20.6\r\ndrizzle-orm: v0.29.1\r\n\r\nNo config path provided, using default path\r\nReading config file '/Users/<USER>/repos/opensource/pg-proxy/drizzle.config.ts'\r\n[i] No changes detected\r\n```\r\n\r\nSchema is:\r\n`schema.ts`\r\n```ts\r\nimport { pgSchema, serial, text } from \"drizzle-orm/pg-core\";\r\n\r\nconst mySchema = pgSchema('test');\r\n\r\nexport const users = mySchema.table(\"users\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  name: text(\"name\").notNull(),\r\n  email: text(\"email\").notNull(),\r\n  cityId: serial(\"city_id\").references(() => cities.id),\r\n});\r\n\r\nexport const cities = mySchema.table(\"cities\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  name: text(\"name\").notNull(),\r\n});\r\n```\r\nNotice that the database is empty, just created using docker-compose. The `drizzle-kit generate:pg --schema src/schema.ts` command produces following schemas:\r\n`0000_futuristic_devos.sql`\r\n```sql\r\nCREATE TABLE IF NOT EXISTS \"test\".\"cities\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"name\" text NOT NULL\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE IF NOT EXISTS \"test\".\"users\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"name\" text NOT NULL,\r\n\t\"email\" text NOT NULL,\r\n\t\"city_id\" serial NOT NULL\r\n);\r\n--> statement-breakpoint\r\nDO $$ BEGIN\r\n ALTER TABLE \"test\".\"users\" ADD CONSTRAINT \"users_city_id_cities_id_fk\" FOREIGN KEY (\"city_id\") REFERENCES \"test\".\"cities\"(\"id\") ON DELETE no action ON UPDATE no action;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```\r\nNotice how the produced SQL does not have any schema-related creations. it just tries to create a table in the `test` schema.\r\nIt is strange why does `generate` command does not create a `test` schema first and only then creates tables inside of this schema. Maybe this is an expected behaviour and custom schema should be created beforehand in a separate schema or something?\r\nIf I change `schema.ts` to this:\r\n`schema.ts`\r\n```ts\r\nimport { pgTable, serial, text } from \"drizzle-orm/pg-core\";\r\n\r\nexport const users = pgTable(\"users\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  name: text(\"name\").notNull(),\r\n  email: text(\"email\").notNull(),\r\n  cityId: serial(\"city_id\").references(() => cities.id),\r\n});\r\n\r\nexport const cities = pgTable(\"cities\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  name: text(\"name\").notNull(),\r\n});\r\n```\r\nThen delete migration files, regenerate them and migrate everything works as expected and migrations are applied.\r\n\r\n### Expected behavior\r\n\r\nI expect `drizzle-kit push:pg` command to create a custom schema, tables inside this schema or at least tell me what is the issue and why after running this command I don't see any changes in the DB.\r\n\r\n### Environment & setup\r\n\r\nHardware: MacBook Pro (m1)\r\nSystem Version:\tmacOS 14.1.1 (23B81)\r\nPostgres version: 15.5\r\nRuntime: npm 9.8.1, node v18.18.2\r\n\r\n`drizzle.config.ts`\r\n```ts\r\nimport { defineConfig, type Config } from \"drizzle-kit\";\r\nrequire(\"dotenv\").config();\r\n\r\n// DB_URL is postgres://postgres:postgres@localhost:5431/bug?search_path=test\r\nexport default defineConfig({\r\n  schema: \"src/schema.ts\",\r\n  out: \"drizzle\",\r\n  driver: \"pg\",\r\n  dbCredentials: {\r\n    connectionString: process.env[\"DB_URL\"]!,\r\n  },\r\n  verbose: true,\r\n  strict: true,\r\n}) satisfies Config;\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/258/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/258/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/257","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/257/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/257/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/257/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/257","id":2021915646,"node_id":"I_kwDOHoY85M54g_v-","number":257,"title":"On Failed Migration rollback doesn't happend on the database","user":{"login":"milon27","id":44096479,"node_id":"MDQ6VXNlcjQ0MDk2NDc5","avatar_url":"https://avatars.githubusercontent.com/u/44096479?v=4","gravatar_id":"","url":"https://api.github.com/users/milon27","html_url":"https://github.com/milon27","followers_url":"https://api.github.com/users/milon27/followers","following_url":"https://api.github.com/users/milon27/following{/other_user}","gists_url":"https://api.github.com/users/milon27/gists{/gist_id}","starred_url":"https://api.github.com/users/milon27/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milon27/subscriptions","organizations_url":"https://api.github.com/users/milon27/orgs","repos_url":"https://api.github.com/users/milon27/repos","events_url":"https://api.github.com/users/milon27/events{/privacy}","received_events_url":"https://api.github.com/users/milon27/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-02T07:36:56Z","updated_at":"2023-12-02T07:36:56Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"If any migration file have multiple line of statement, and if 3rd line cause any error to failed the migration then changes made by 1st and 2nd line on the database did not rollback. so next time when i try to fix the issue of 3rd line and rerun the migration got error on 1st and 2nd line that those are already applied.\r\n\r\nreproduce code & more details:\r\nhttps://github.com/milon27/dirzzle-kit-error#error-statement","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/257/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/256","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/256/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/256/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/256/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/256","id":2018979513,"node_id":"I_kwDOHoY85M54Vy65","number":256,"title":"Add a visualize or diagram feature","user":{"login":"FleetAdmiralJakob","id":77451351,"node_id":"MDQ6VXNlcjc3NDUxMzUx","avatar_url":"https://avatars.githubusercontent.com/u/77451351?v=4","gravatar_id":"","url":"https://api.github.com/users/FleetAdmiralJakob","html_url":"https://github.com/FleetAdmiralJakob","followers_url":"https://api.github.com/users/FleetAdmiralJakob/followers","following_url":"https://api.github.com/users/FleetAdmiralJakob/following{/other_user}","gists_url":"https://api.github.com/users/FleetAdmiralJakob/gists{/gist_id}","starred_url":"https://api.github.com/users/FleetAdmiralJakob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FleetAdmiralJakob/subscriptions","organizations_url":"https://api.github.com/users/FleetAdmiralJakob/orgs","repos_url":"https://api.github.com/users/FleetAdmiralJakob/repos","events_url":"https://api.github.com/users/FleetAdmiralJakob/events{/privacy}","received_events_url":"https://api.github.com/users/FleetAdmiralJakob/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-30T16:01:21Z","updated_at":"2023-11-30T16:01:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"So that drizzle-kit studio is visualizing your schema.\r\n\r\nExtremely important for exploring all the relations\r\n\r\nSomething like that:\r\n\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/77451351/6ba060fc-9180-438b-b128-a9c7e4db4565)\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/256/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/256/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/255","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/255/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/255/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/255/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/255","id":2017816116,"node_id":"I_kwDOHoY85M54RW40","number":255,"title":"[BUG] Push: push:sqlite Codegen Problem When Pushing Adds New Fields","user":{"login":"Firerer","id":38126747,"node_id":"MDQ6VXNlcjM4MTI2NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/38126747?v=4","gravatar_id":"","url":"https://api.github.com/users/Firerer","html_url":"https://github.com/Firerer","followers_url":"https://api.github.com/users/Firerer/followers","following_url":"https://api.github.com/users/Firerer/following{/other_user}","gists_url":"https://api.github.com/users/Firerer/gists{/gist_id}","starred_url":"https://api.github.com/users/Firerer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Firerer/subscriptions","organizations_url":"https://api.github.com/users/Firerer/orgs","repos_url":"https://api.github.com/users/Firerer/repos","events_url":"https://api.github.com/users/Firerer/events{/privacy}","received_events_url":"https://api.github.com/users/Firerer/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-30T03:43:28Z","updated_at":"2023-11-30T03:43:28Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Dependencies:\r\n- `\"drizzle-kit\": \"^0.20.6\"`\r\n- `\"drizzle-orm\": \"^0.29.0\"`\r\n\r\nIssue Description:\r\n\r\nWhen changing table schemas in SQLite, the push command line generates SQL like `INSERT INTO \"table\" SELECT * FROM \"__old_push_table\";`. However, this can cause problems if one tries to add new columns, as stated in the [SQLite documentation](https://www.sqlite.org/lang_insert.html).\r\n\r\n> If no column-list is specified, the number of columns in the result of the SELECT must be the same as the number of columns in the table.\r\n\r\nIn my case, I added a new column between existing columns, where the preceding column has a NOT NULL constraint. This caused an error during the push operation:\r\n```\r\nSqliteError: NOT NULL constraint failed: task.created_at\r\nat BetterSqlite.run (xxx/node_modules/.pnpm/drizzle-kit@0.20.6/node_modules/drizzle-kit/bin.cjs:25489:32)\r\nat Command.<anonymous> (xxx/node_modules/.pnpm/drizzle-kit@0.20.6/node_modules/drizzle-kit/bin.cjs:63284:33) {\r\ncode: 'SQLITE_CONSTRAINT_NOTNULL'\r\n}\r\n```\r\n\r\nAdditional Question:\r\n\r\nShouldn't an error thrown during the push operation be caught and trigger a rollback, instead of leaving the transaction incomplete?\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/255/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/254","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/254/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/254/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/254/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/254","id":2015106757,"node_id":"I_kwDOHoY85M54HBbF","number":254,"title":"Changing table name causes an error","user":{"login":"VaniaPopovic","id":17993952,"node_id":"MDQ6VXNlcjE3OTkzOTUy","avatar_url":"https://avatars.githubusercontent.com/u/17993952?v=4","gravatar_id":"","url":"https://api.github.com/users/VaniaPopovic","html_url":"https://github.com/VaniaPopovic","followers_url":"https://api.github.com/users/VaniaPopovic/followers","following_url":"https://api.github.com/users/VaniaPopovic/following{/other_user}","gists_url":"https://api.github.com/users/VaniaPopovic/gists{/gist_id}","starred_url":"https://api.github.com/users/VaniaPopovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VaniaPopovic/subscriptions","organizations_url":"https://api.github.com/users/VaniaPopovic/orgs","repos_url":"https://api.github.com/users/VaniaPopovic/repos","events_url":"https://api.github.com/users/VaniaPopovic/events{/privacy}","received_events_url":"https://api.github.com/users/VaniaPopovic/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-11-28T18:57:35Z","updated_at":"2024-04-13T22:22:49Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hey there, I'm using drizzle 0.29.0 and drizzle kit 0.20.6 connected to a planetscale database.\r\n\r\nIm trying to run db:push\r\n\r\non the following schema \r\n\r\n```\r\nexport const users = mysqlTable(\"user\", {\r\n  id: varchar(\"id\", { length: 255 }).notNull().primaryKey(),\r\n  name: varchar(\"name\", { length: 255 }),\r\n  email: varchar(\"email\", { length: 255 }).notNull(),\r\n  emailVerified: timestamp(\"emailVerified\", { mode: \"date\" }),\r\n  registrationCompleted: boolean(\"registration_completed\")\r\n    .default(false)\r\n    .notNull(),\r\n  image: varchar(\"image\", { length: 255 }),\r\n  phoneNumber: varchar(\"phone_number\", { length: 255 }),\r\n  cvLink: varchar(\"cv_link\", { length: 255 }),\r\n  industries: json(\"industries\").$type<string[]>().notNull().default([]),\r\n  jobType: json(\"job_type\").$type<string[]>().notNull().default([]),\r\n});\r\n```\r\nrenaming the from \"users\" to \"user\"\r\n\r\nand I'm getting the following error \r\n\r\n```\r\nTypeError: Cannot read properties of undefined (reading 'compositePrimaryKeys')\r\n    at C:\\Users\\fream\\Desktop\\BOBBLL\\Bobbll\\node_modules\\.pnpm\\drizzle-kit@0.20.6\\node_modules\\drizzle-kit\\bin.cjs:17258:51\r\n    at Array.map (<anonymous>)\r\n    at prepareDeleteCompositePrimaryKeyMySql (C:\\Users\\fream\\Desktop\\BOBBLL\\Bobbll\\node_modules\\.pnpm\\drizzle-kit@0.20.6\\node_modules\\drizzle-kit\\bin.cjs:17253:33)\r\n    at C:\\Users\\fream\\Desktop\\BOBBLL\\Bobbll\\node_modules\\.pnpm\\drizzle-kit@0.20.6\\node_modules\\drizzle-kit\\bin.cjs:17643:33\r\n    at Array.forEach (<anonymous>)\r\n    at applySnapshotsDiff (C:\\Users\\fream\\Desktop\\BOBBLL\\Bobbll\\node_modules\\.pnpm\\drizzle-kit@0.20.6\\node_modules\\drizzle-kit\\bin.cjs:17571:26)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async prepareSQL (C:\\Users\\fream\\Desktop\\BOBBLL\\Bobbll\\node_modules\\.pnpm\\drizzle-kit@0.20.6\\node_modules\\drizzle-kit\\bin.cjs:15174:14)\r\n    at async prepareMySQLPush (C:\\Users\\fream\\Desktop\\BOBBLL\\Bobbll\\node_modules\\.pnpm\\drizzle-kit@0.20.6\\node_modules\\drizzle-kit\\bin.cjs:14974:47)\r\n    at async Command.<anonymous> (C:\\Users\\fream\\Desktop\\BOBBLL\\Bobbll\\node_modules\\.pnpm\\drizzle-kit@0.20.6\\node_modules\\drizzle-kit\\bin.cjs:62995:22)\r\n```\r\n\r\nIs this a known issue or a new one?\r\n\r\nKind regards,","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/254/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/254/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/253","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/253/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/253/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/253/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/253","id":2012656534,"node_id":"I_kwDOHoY85M539rOW","number":253,"title":"`introspect:pg` fails for varchar array columns in Postgres","user":{"login":"michaelbridge","id":6562899,"node_id":"MDQ6VXNlcjY1NjI4OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6562899?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelbridge","html_url":"https://github.com/michaelbridge","followers_url":"https://api.github.com/users/michaelbridge/followers","following_url":"https://api.github.com/users/michaelbridge/following{/other_user}","gists_url":"https://api.github.com/users/michaelbridge/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelbridge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelbridge/subscriptions","organizations_url":"https://api.github.com/users/michaelbridge/orgs","repos_url":"https://api.github.com/users/michaelbridge/repos","events_url":"https://api.github.com/users/michaelbridge/events{/privacy}","received_events_url":"https://api.github.com/users/michaelbridge/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-27T16:30:11Z","updated_at":"2023-11-27T16:31:20Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Running `introspect:pg` on a `varchar` array column in Postgres results in the following invalid typescript code in `schema.ts` (example is shown for a column named `periods`). This is a critical function for users who may manage migrations outside of Drizzle (and subsequently need to run introspection to keep the schema up to date).\r\n\r\n```\r\nperiods: varchar(\"periods\", { length:  }).default('{}').array(),\r\n```\r\n\r\nSpecifically, the `length` attribute is missing a value:\r\n\r\n![Screen Shot 2023-11-27 at 11 29 54 AM](https://github.com/drizzle-team/drizzle-kit-mirror/assets/6562899/cd2434a7-1213-4ff0-8531-d242a13ded3c)\r\n\r\nI'd be happy to open a PR if someone can point me to the applicable source location.\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/253/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/253/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/252","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/252/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/252/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/252/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/252","id":2012648489,"node_id":"I_kwDOHoY85M539pQp","number":252,"title":"Certain Postgres types are not handled by `introspect:pg`","user":{"login":"michaelbridge","id":6562899,"node_id":"MDQ6VXNlcjY1NjI4OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6562899?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelbridge","html_url":"https://github.com/michaelbridge","followers_url":"https://api.github.com/users/michaelbridge/followers","following_url":"https://api.github.com/users/michaelbridge/following{/other_user}","gists_url":"https://api.github.com/users/michaelbridge/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelbridge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelbridge/subscriptions","organizations_url":"https://api.github.com/users/michaelbridge/orgs","repos_url":"https://api.github.com/users/michaelbridge/repos","events_url":"https://api.github.com/users/michaelbridge/events{/privacy}","received_events_url":"https://api.github.com/users/michaelbridge/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-27T16:26:00Z","updated_at":"2023-11-27T16:26:00Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Introspection fails to correctly identify types as outlined in the table below. This is a critical function for users who may manage migrations outside of Drizzle (and subsequently need to run introspection to keep the schema up to date). For reference, Prisma correctly identifies and introspects these column types. \r\n\r\n| Postgres `udt_name` | Array? | Message |\r\n| --- | --- | --- |\r\n| `_date` | Yes | // TODO: failed to parse database type 'date[]' |\r\n| `_json` | Yes | // TODO: failed to parse database type 'json[]' |\r\n| `_jsonb` | Yes | // TODO: failed to parse database type 'jsonb[]' |\r\n| `money` | No | // TODO: failed to parse database type 'money' |\r\n\r\nI'd be happy to open a PR if someone can point me to the applicable source location.\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/252/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/251","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/251/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/251/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/251/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/251","id":2012559194,"node_id":"I_kwDOHoY85M539Tda","number":251,"title":"Issue loading environment variables for Drizzle kit","user":{"login":"zessu","id":18211121,"node_id":"MDQ6VXNlcjE4MjExMTIx","avatar_url":"https://avatars.githubusercontent.com/u/18211121?v=4","gravatar_id":"","url":"https://api.github.com/users/zessu","html_url":"https://github.com/zessu","followers_url":"https://api.github.com/users/zessu/followers","following_url":"https://api.github.com/users/zessu/following{/other_user}","gists_url":"https://api.github.com/users/zessu/gists{/gist_id}","starred_url":"https://api.github.com/users/zessu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zessu/subscriptions","organizations_url":"https://api.github.com/users/zessu/orgs","repos_url":"https://api.github.com/users/zessu/repos","events_url":"https://api.github.com/users/zessu/events{/privacy}","received_events_url":"https://api.github.com/users/zessu/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-11-27T15:40:54Z","updated_at":"2024-02-06T09:45:32Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"`process.env.SOME_PASSWORD` does not seem to work  under `orm.config.json`\r\nHad to change from variable to string. The others seem to work \r\n\r\nexport default {\r\n  ...\r\n  dbCredentials: {\r\n    host: process.env.SOME_HOST || \"localhost\",\r\n    user: process.env.SOME_USER,\r\n    password: process.env.SOME_PASSWORD, // ===> have to change this to string to get it to work\r\n    database: \"mydatabase\".\r\n  },\r\n} satisfies Config;\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/251/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/250","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/250/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/250/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/250/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/250","id":2011488624,"node_id":"I_kwDOHoY85M535OFw","number":250,"title":"drizzle kit studio does not work when public schema has no tables","user":{"login":"tonyxiao","id":696842,"node_id":"MDQ6VXNlcjY5Njg0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/696842?v=4","gravatar_id":"","url":"https://api.github.com/users/tonyxiao","html_url":"https://github.com/tonyxiao","followers_url":"https://api.github.com/users/tonyxiao/followers","following_url":"https://api.github.com/users/tonyxiao/following{/other_user}","gists_url":"https://api.github.com/users/tonyxiao/gists{/gist_id}","starred_url":"https://api.github.com/users/tonyxiao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonyxiao/subscriptions","organizations_url":"https://api.github.com/users/tonyxiao/orgs","repos_url":"https://api.github.com/users/tonyxiao/repos","events_url":"https://api.github.com/users/tonyxiao/events{/privacy}","received_events_url":"https://api.github.com/users/tonyxiao/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-11-27T05:00:25Z","updated_at":"2024-03-30T12:11:32Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/696842/d4fdbaa7-399a-4b37-bc9d-0f9143aa4135)\r\n\r\nAll of my table are in non `public` schema and this seems to trip drizzle kit up","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/250/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/249","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/249/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/249/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/249/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/249","id":2009520208,"node_id":"I_kwDOHoY85M53xthQ","number":249,"title":"MYSQL Introspect: Warning: Can't parse bit(1) from database","user":{"login":"stagr","id":20762751,"node_id":"MDQ6VXNlcjIwNzYyNzUx","avatar_url":"https://avatars.githubusercontent.com/u/20762751?v=4","gravatar_id":"","url":"https://api.github.com/users/stagr","html_url":"https://github.com/stagr","followers_url":"https://api.github.com/users/stagr/followers","following_url":"https://api.github.com/users/stagr/following{/other_user}","gists_url":"https://api.github.com/users/stagr/gists{/gist_id}","starred_url":"https://api.github.com/users/stagr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stagr/subscriptions","organizations_url":"https://api.github.com/users/stagr/orgs","repos_url":"https://api.github.com/users/stagr/repos","events_url":"https://api.github.com/users/stagr/events{/privacy}","received_events_url":"https://api.github.com/users/stagr/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-11-24T10:53:23Z","updated_at":"2024-04-24T14:26:58Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**What version of drizzle-orm are you using?**\r\n0.29.0\r\n\r\n**What version of drizzle-kit are you using?**\r\n0.20.4\r\n\r\n**Describe the Bug**\r\n`npx drizzle-kit introspect:mysql` fails for column of type bit(1)\r\n\r\nWhen I call drizzle-kit introspect:mysql, I get this in my output schema.ts:\r\n\r\n```\r\n\t// Warning: Can't parse bit(1) from database\r\n\t// bit(1)Type: bit(1)(\"active\"),\r\n```\r\n\r\nHere's my actual MySQL schema:\r\n\r\n```\r\nCREATE TABLE `table_name` (\r\n   ...\r\n  `active` bit(1) DEFAULT b'1',\r\n  ...\r\n)\r\n```\r\n\r\n\r\n**Expected behavior**\r\nI expect the output to looks something like this:\r\n\r\n```\r\nexport const tableName = mysqlTable(\"table_name\", {\r\n  ...\r\n        active: bit(\"active\").default(1), \r\n  ...\r\n},\r\n...\r\n});\r\n```\r\n\r\n**Environment & setup**\r\nNode **v18.12.1**\r\nMacOS Sonoma 14.0\r\nMySQL 8.0.28 ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/249/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/249/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/248","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/248/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/248/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/248/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/248","id":2009445062,"node_id":"I_kwDOHoY85M53xbLG","number":248,"title":"push generates invalid sql for multi column index","user":{"login":"kelbyfaessler","id":12204680,"node_id":"MDQ6VXNlcjEyMjA0Njgw","avatar_url":"https://avatars.githubusercontent.com/u/12204680?v=4","gravatar_id":"","url":"https://api.github.com/users/kelbyfaessler","html_url":"https://github.com/kelbyfaessler","followers_url":"https://api.github.com/users/kelbyfaessler/followers","following_url":"https://api.github.com/users/kelbyfaessler/following{/other_user}","gists_url":"https://api.github.com/users/kelbyfaessler/gists{/gist_id}","starred_url":"https://api.github.com/users/kelbyfaessler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kelbyfaessler/subscriptions","organizations_url":"https://api.github.com/users/kelbyfaessler/orgs","repos_url":"https://api.github.com/users/kelbyfaessler/repos","events_url":"https://api.github.com/users/kelbyfaessler/events{/privacy}","received_events_url":"https://api.github.com/users/kelbyfaessler/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-11-24T10:03:13Z","updated_at":"2023-11-24T10:07:11Z","closed_at":"2023-11-24T10:07:11Z","author_association":"NONE","active_lock_reason":null,"body":"Here's the generated SQL from drizzle kit push. Notice the repeat `ON <table>` which I think is the invalid part. The index is covering three columns in this case.\r\n\r\n```\r\n  sql: 'CREATE INDEX `job_location_city_location_state_location_country_code_2_idx` ON `job` ON `job` (`location_city`,`location_state`,`location_country_code_2`);',\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/248/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/247","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/247/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/247/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/247/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/247","id":2005492025,"node_id":"I_kwDOHoY85M53iWE5","number":247,"title":"Drizzle Studio doesn't show all the available tables.","user":{"login":"vkpdeveloper","id":45169573,"node_id":"MDQ6VXNlcjQ1MTY5NTcz","avatar_url":"https://avatars.githubusercontent.com/u/45169573?v=4","gravatar_id":"","url":"https://api.github.com/users/vkpdeveloper","html_url":"https://github.com/vkpdeveloper","followers_url":"https://api.github.com/users/vkpdeveloper/followers","following_url":"https://api.github.com/users/vkpdeveloper/following{/other_user}","gists_url":"https://api.github.com/users/vkpdeveloper/gists{/gist_id}","starred_url":"https://api.github.com/users/vkpdeveloper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vkpdeveloper/subscriptions","organizations_url":"https://api.github.com/users/vkpdeveloper/orgs","repos_url":"https://api.github.com/users/vkpdeveloper/repos","events_url":"https://api.github.com/users/vkpdeveloper/events{/privacy}","received_events_url":"https://api.github.com/users/vkpdeveloper/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-22T03:26:54Z","updated_at":"2023-11-22T03:28:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I was trying drizzle with better-sqlite and bun (somehow bun:sqlite is not yet support I think), I made two schemas and it's accessaible from my code and I have able to perform all the ops and everything is working fine but drizzle studio is not showing both of the tables, it only showing the latest migrated table in my case i have two tables (users and vaults) recently I created vaults and it's only visible.\r\n\r\n### My Config\r\n<img width=\"563\" alt=\"Screenshot 2023-11-22 at 8 56 09 AM\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/45169573/e4c59c92-aa67-4bba-94fb-eb7b84aba2ab\">\r\n\r\n### Drizzle Studio\r\n<img width=\"567\" alt=\"Screenshot 2023-11-22 at 8 56 40 AM\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/45169573/fbe77365-2cde-4828-b7eb-f95d8cff37b4\">\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/247/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/246","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/246/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/246/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/246/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/246","id":2001795079,"node_id":"I_kwDOHoY85M53UPgH","number":246,"title":"Top-level await is impossible in drizzle.config.ts","user":{"login":"rgripper","id":129794,"node_id":"MDQ6VXNlcjEyOTc5NA==","avatar_url":"https://avatars.githubusercontent.com/u/129794?v=4","gravatar_id":"","url":"https://api.github.com/users/rgripper","html_url":"https://github.com/rgripper","followers_url":"https://api.github.com/users/rgripper/followers","following_url":"https://api.github.com/users/rgripper/following{/other_user}","gists_url":"https://api.github.com/users/rgripper/gists{/gist_id}","starred_url":"https://api.github.com/users/rgripper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rgripper/subscriptions","organizations_url":"https://api.github.com/users/rgripper/orgs","repos_url":"https://api.github.com/users/rgripper/repos","events_url":"https://api.github.com/users/rgripper/events{/privacy}","received_events_url":"https://api.github.com/users/rgripper/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-20T09:53:51Z","updated_at":"2024-04-26T07:03:37Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I fetch database credentials asynchronously. I can do it for `migrate` API. But generating a migration using the kit with async code in `drizzle.config.ts` fails with ''Top-level await is currently not supported with the \"cjs\" output format'. I understand that esbuild is used under the hood. As a temporary solution we just need an argument to tell the kit to emit JS for the \"lts\" Node in ESM format for those who need it.\r\nhttps://github.com/drizzle-team/drizzle-kit-mirror/issues/55#issuecomment-1813592154","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/246/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/246/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/245","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/245/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/245/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/245/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/245","id":2001311832,"node_id":"I_kwDOHoY85M53SZhY","number":245,"title":"Studio Feature Request: focus search when opening Open a Table page in Drizzle Studio","user":{"login":"suraj5969","id":58414924,"node_id":"MDQ6VXNlcjU4NDE0OTI0","avatar_url":"https://avatars.githubusercontent.com/u/58414924?v=4","gravatar_id":"","url":"https://api.github.com/users/suraj5969","html_url":"https://github.com/suraj5969","followers_url":"https://api.github.com/users/suraj5969/followers","following_url":"https://api.github.com/users/suraj5969/following{/other_user}","gists_url":"https://api.github.com/users/suraj5969/gists{/gist_id}","starred_url":"https://api.github.com/users/suraj5969/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suraj5969/subscriptions","organizations_url":"https://api.github.com/users/suraj5969/orgs","repos_url":"https://api.github.com/users/suraj5969/repos","events_url":"https://api.github.com/users/suraj5969/events{/privacy}","received_events_url":"https://api.github.com/users/suraj5969/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-20T03:53:03Z","updated_at":"2023-11-20T03:53:03Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"when I click on + button in drizzle studio to open a new table, can we focus search for quick searching of tables,\r\nand also, It would be great if we could have keyboard navigation, up and down arrow for selecting table and enter to open a table","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/245/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/244","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/244/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/244/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/244/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/244","id":2001249641,"node_id":"I_kwDOHoY85M53SKVp","number":244,"title":"Drizzle Studio and Safari - how to make drizzle-kit studio use self-signed cert?","user":{"login":"cxreiff","id":8195503,"node_id":"MDQ6VXNlcjgxOTU1MDM=","avatar_url":"https://avatars.githubusercontent.com/u/8195503?v=4","gravatar_id":"","url":"https://api.github.com/users/cxreiff","html_url":"https://github.com/cxreiff","followers_url":"https://api.github.com/users/cxreiff/followers","following_url":"https://api.github.com/users/cxreiff/following{/other_user}","gists_url":"https://api.github.com/users/cxreiff/gists{/gist_id}","starred_url":"https://api.github.com/users/cxreiff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cxreiff/subscriptions","organizations_url":"https://api.github.com/users/cxreiff/orgs","repos_url":"https://api.github.com/users/cxreiff/repos","events_url":"https://api.github.com/users/cxreiff/events{/privacy}","received_events_url":"https://api.github.com/users/cxreiff/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-20T02:36:02Z","updated_at":"2023-11-20T02:36:02Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm attempting to use Drizzle Studio in Safari. When opening `local.drizzle.studio`, safari-specific instructions come up, so I followed them and ran the following:\r\n```\r\nbrew install mkcert\r\nbrew install nss\r\nmkcert -install\r\n```\r\nHowever, this doesn't seem to do anything. `local.drizzle.studio` is still attempting to call the normal HTTP localhost URL, and it is getting blocked by Safari's policies. Are there additional steps here (creating a cert, getting drizzle studio to use that cert, etc) that are not documented or that I've overlooked?\r\n\r\nThanks.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/244/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/244/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/243","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/243/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/243/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/243/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/243","id":2000997058,"node_id":"I_kwDOHoY85M53RMrC","number":243,"title":"studio should works offline","user":{"login":"nagy-nabil","id":65990275,"node_id":"MDQ6VXNlcjY1OTkwMjc1","avatar_url":"https://avatars.githubusercontent.com/u/65990275?v=4","gravatar_id":"","url":"https://api.github.com/users/nagy-nabil","html_url":"https://github.com/nagy-nabil","followers_url":"https://api.github.com/users/nagy-nabil/followers","following_url":"https://api.github.com/users/nagy-nabil/following{/other_user}","gists_url":"https://api.github.com/users/nagy-nabil/gists{/gist_id}","starred_url":"https://api.github.com/users/nagy-nabil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nagy-nabil/subscriptions","organizations_url":"https://api.github.com/users/nagy-nabil/orgs","repos_url":"https://api.github.com/users/nagy-nabil/repos","events_url":"https://api.github.com/users/nagy-nabil/events{/privacy}","received_events_url":"https://api.github.com/users/nagy-nabil/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-11-19T19:16:01Z","updated_at":"2024-04-16T20:06:57Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"first of all, thank you for your efforts.\r\n\r\nI understand that making the studio page in [https://local.drizzle.studio/](https://local.drizzle.studio/) makes pushing UI updates easier, but sometimes we work offline, and it would be great to have drizzle studio with us.\r\nis making the studio available offline on your roadmap? like making it PWA","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/243/reactions","total_count":7,"+1":7,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/243/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/242","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/242/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/242/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/242/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/242","id":2000496328,"node_id":"I_kwDOHoY85M53PSbI","number":242,"title":"Feature Request: Support for Connecting to Local SQLite Databases with D1 Driver in Drizzle Studio","user":{"login":"sugar-cat7","id":69241625,"node_id":"MDQ6VXNlcjY5MjQxNjI1","avatar_url":"https://avatars.githubusercontent.com/u/69241625?v=4","gravatar_id":"","url":"https://api.github.com/users/sugar-cat7","html_url":"https://github.com/sugar-cat7","followers_url":"https://api.github.com/users/sugar-cat7/followers","following_url":"https://api.github.com/users/sugar-cat7/following{/other_user}","gists_url":"https://api.github.com/users/sugar-cat7/gists{/gist_id}","starred_url":"https://api.github.com/users/sugar-cat7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sugar-cat7/subscriptions","organizations_url":"https://api.github.com/users/sugar-cat7/orgs","repos_url":"https://api.github.com/users/sugar-cat7/repos","events_url":"https://api.github.com/users/sugar-cat7/events{/privacy}","received_events_url":"https://api.github.com/users/sugar-cat7/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-11-18T16:52:51Z","updated_at":"2024-01-12T15:18:02Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I am currently working with Drizzle Studio and facing a limitation regarding the connection to local SQLite databases while using the D1 driver. \r\nWhen applying migrations with `wrangler d1 migrations apply local-db --local`, an SQLite file is generated under `.wrangler/state/v3/d1/miniflare-D1DatabaseObject`. \r\nHowever, there is no direct way to connect to this SQLite file using the D1 driver in the Drizzle Studio configuration.\r\n\r\nThe existing `drizzle.config.ts` settings for the D1 driver only allow for `wranglerConfigPath` and `dbName`, which does not support specifying a local SQLite file path. As a workaround, I am currently using the `better-sqlite` driver for local development by specifying the path under `.wrangler` in `dbCredentials`.\r\n\r\n<img width=\"793\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/69241625/7e5e6b6b-e308-46a6-aacd-cfa1eb66186f\">\r\n\r\n\r\nHere is `drizzle.config.ts` for reference:\r\n\r\n```ts\r\nimport type { Config } from \"drizzle-kit\";\r\n\r\nconst cfConfig = {\r\n  schema: \"./schema/db/index.ts\",\r\n  driver: \"d1\",\r\n  dbCredentials: {\r\n    wranglerConfigPath: \"./wrangler.toml\",\r\n    dbName: \"test\",\r\n  },\r\n  verbose: false,\r\n  strict: true,\r\n} satisfies Config;\r\n\r\nconst localConfig = {\r\n  schema: \"./schema/db/index.ts\",\r\n  driver: \"better-sqlite\",\r\n  dbCredentials: {\r\n    url: process.env.DB_URL!,\r\n  },\r\n} satisfies Config;\r\n\r\nexport default process.env.NODE_ENV === \"production\" ? cfConfig : localConfig;\r\n```\r\n\r\nI would like to request a feature or enhancement that allows direct connection to the local SQLite file generated by `wrangler d1 migrations apply local-db --local` using the D1 driver. This feature would greatly simplify the development process and provide a more integrated experience with Drizzle Studio.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/242/reactions","total_count":19,"+1":19,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/242/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/241","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/241/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/241/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/241/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/241","id":2000291572,"node_id":"I_kwDOHoY85M53Ogb0","number":241,"title":"use localhost:3001 instead of https://local.drizzle.studio/?port=3001","user":{"login":"deadcoder0904","id":16436270,"node_id":"MDQ6VXNlcjE2NDM2Mjcw","avatar_url":"https://avatars.githubusercontent.com/u/16436270?v=4","gravatar_id":"","url":"https://api.github.com/users/deadcoder0904","html_url":"https://github.com/deadcoder0904","followers_url":"https://api.github.com/users/deadcoder0904/followers","following_url":"https://api.github.com/users/deadcoder0904/following{/other_user}","gists_url":"https://api.github.com/users/deadcoder0904/gists{/gist_id}","starred_url":"https://api.github.com/users/deadcoder0904/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deadcoder0904/subscriptions","organizations_url":"https://api.github.com/users/deadcoder0904/orgs","repos_url":"https://api.github.com/users/deadcoder0904/repos","events_url":"https://api.github.com/users/deadcoder0904/events{/privacy}","received_events_url":"https://api.github.com/users/deadcoder0904/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-11-18T07:33:00Z","updated_at":"2023-11-18T07:59:35Z","closed_at":"2023-11-18T07:59:34Z","author_association":"NONE","active_lock_reason":null,"body":"why cant i use localhost:3001?\r\n\r\nis this a move toward cloud offering?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/241/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/240","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/240/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/240/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/240/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/240","id":1997892602,"node_id":"I_kwDOHoY85M53FWv6","number":240,"title":"2 deprecated subdependencies found","user":{"login":"giacomoferretti","id":1778595,"node_id":"MDQ6VXNlcjE3Nzg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/1778595?v=4","gravatar_id":"","url":"https://api.github.com/users/giacomoferretti","html_url":"https://github.com/giacomoferretti","followers_url":"https://api.github.com/users/giacomoferretti/followers","following_url":"https://api.github.com/users/giacomoferretti/following{/other_user}","gists_url":"https://api.github.com/users/giacomoferretti/gists{/gist_id}","starred_url":"https://api.github.com/users/giacomoferretti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/giacomoferretti/subscriptions","organizations_url":"https://api.github.com/users/giacomoferretti/orgs","repos_url":"https://api.github.com/users/giacomoferretti/repos","events_url":"https://api.github.com/users/giacomoferretti/events{/privacy}","received_events_url":"https://api.github.com/users/giacomoferretti/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-11-16T22:21:05Z","updated_at":"2023-11-26T16:22:10Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Running `pnpm i drizzle-kit` it gives the following warning:\r\n\r\n```\r\nWARN‚Äâ 2 deprecated subdependencies found: rollup-plugin-inject@3.0.2, sourcemap-codec@1.4.8\r\n```\r\n\r\nThis is not a bug/issue, but it's annoying :laughing: ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/240/reactions","total_count":6,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":4},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/240/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/239","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/239/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/239/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/239/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/239","id":1997505352,"node_id":"I_kwDOHoY85M53D4NI","number":239,"title":"Unable to generate migrations with composite key (pg, neon)","user":{"login":"quarkstars","id":101365477,"node_id":"U_kgDOBgq25Q","avatar_url":"https://avatars.githubusercontent.com/u/101365477?v=4","gravatar_id":"","url":"https://api.github.com/users/quarkstars","html_url":"https://github.com/quarkstars","followers_url":"https://api.github.com/users/quarkstars/followers","following_url":"https://api.github.com/users/quarkstars/following{/other_user}","gists_url":"https://api.github.com/users/quarkstars/gists{/gist_id}","starred_url":"https://api.github.com/users/quarkstars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quarkstars/subscriptions","organizations_url":"https://api.github.com/users/quarkstars/orgs","repos_url":"https://api.github.com/users/quarkstars/repos","events_url":"https://api.github.com/users/quarkstars/events{/privacy}","received_events_url":"https://api.github.com/users/quarkstars/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2023-11-16T18:39:10Z","updated_at":"2023-11-21T12:57:45Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"\"drizzle-kit\": \"^0.20.2\",\r\n\r\nHere is the schema\r\n```\r\nexport const users = pgTable(\r\n\t\"users\",\r\n\t{\r\n\t\tid: uuid(\"id\").defaultRandom().notNull(),\r\n\t\temail: varchar(\"email\", { length: 256 }).notNull().unique(),\r\n\t\tname: varchar(\"name\", { length: 256 }).notNull(),\r\n\t\tapplicationId: uuid(\"application_id\")\r\n\t\t\t.references(() => applications.id)\r\n\t\t\t.notNull(),\r\n\t\tpassword: varchar(\"password\", { length: 256 }).notNull(),\r\n\t\tcreatedAt: timestamp(\"created_at\").defaultNow().notNull(),\r\n\t\tupdatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\r\n\t},\r\n\t(users) => {\r\n\t\treturn {\r\n\t\t\tpk: primaryKey({ columns: [users.email, users.applicationId] }),\r\n\t\t};\r\n\t}\r\n);\r\n```\r\nThe error when running drizzle-kit generate:pg (it works when I take out the pk line)\r\n```\r\nTypeError: Cannot read properties of undefined (reading 'split')\r\n    at Object.unsquashPK (S:\\next-drizzle-test\\node_modules\\drizzle-kit\\bin.cjs:4711:58)\r\n    at S:\\next-drizzle-test\\node_modules\\drizzle-kit\\bin.cjs:17088:42\r\n    at Array.map (<anonymous>)\r\n    at **prepareAddCompositePrimaryKeyPg** (S:\\next-drizzle-test\\node_modules\\drizzle-kit\\bin.cjs:17087:33)\r\n    at S:\\next-drizzle-test\\node_modules\\drizzle-kit\\bin.cjs:17523:33\r\n    at Array.forEach (<anonymous>)\r\n    at applySnapshotsDiff (S:\\next-drizzle-test\\node_modules\\drizzle-kit\\bin.cjs:17478:26)\r\n    at async prepareSQL (S:\\next-drizzle-test\\node_modules\\drizzle-kit\\bin.cjs:15081:14)\r\n    at async prepareAndMigratePg (S:\\\\next-drizzle-test\\node_modules\\drizzle-kit\\bin.cjs:14851:42)\r\n    at async Command.<anonymous> (S:\\next-drizzle-test\\node_modules\\drizzle-kit\\bin.cjs:60916:3)\r\n```\r\ndizzle.config.ts\r\n```\r\nimport type { Config } from \"drizzle-kit\";\r\nimport { config } from \"dotenv\";\r\nconfig({ path: \".env.local\" });\r\n\r\nexport default {\r\n\tschema: \"./src/**/*.schema.ts\",\r\n\tdriver: \"pg\",\r\n\tout: \"./migrations\",\r\n\tdbCredentials: {\r\n\t\tconnectionString: process.env.DATABASE_URI!,\r\n\t},\r\n} satisfies Config;\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/239/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/239/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/238","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/238/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/238/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/238/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/238","id":1995742063,"node_id":"I_kwDOHoY85M529Jtv","number":238,"title":"[BUG] introspect generates broken schema when db uses custom function","user":{"login":"o-az","id":23618431,"node_id":"MDQ6VXNlcjIzNjE4NDMx","avatar_url":"https://avatars.githubusercontent.com/u/23618431?v=4","gravatar_id":"","url":"https://api.github.com/users/o-az","html_url":"https://github.com/o-az","followers_url":"https://api.github.com/users/o-az/followers","following_url":"https://api.github.com/users/o-az/following{/other_user}","gists_url":"https://api.github.com/users/o-az/gists{/gist_id}","starred_url":"https://api.github.com/users/o-az/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/o-az/subscriptions","organizations_url":"https://api.github.com/users/o-az/orgs","repos_url":"https://api.github.com/users/o-az/repos","events_url":"https://api.github.com/users/o-az/events{/privacy}","received_events_url":"https://api.github.com/users/o-az/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-15T23:18:03Z","updated_at":"2023-11-16T03:05:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I ran `drizzle-kit introspect:pg` against my remote supabsae postgres table and got a broken `schema.ts`.\r\n\r\nMy table works with no issues, currently running in cloudflare workers with supabasejs client. I wanted to switch to drizzle so this was my first step, however I can't get drizzle to generate valid `schema.ts`.\r\n\r\nFor my table I use a custom function to generate `luid` in supabase. Drizzle adds it raw to `schema.ts`:\r\n\r\n![CleanShot 2023-11-15 at 15 15 26@2x](https://github.com/drizzle-team/drizzle-kit-mirror/assets/23618431/121f1fe7-3cb3-42fe-978f-dcb2d8ad1853)\r\n\r\n\r\nwhen I run a query:\r\n\r\n![CleanShot 2023-11-15 at 15 11 26@2x](https://github.com/drizzle-team/drizzle-kit-mirror/assets/23618431/da582686-0188-491a-b789-f76c4ba9e61e)\r\n\r\nHere's an example of this `ulid` function running:\r\n\r\n![CleanShot 2023-11-15 at 15 13 42@2x](https://github.com/drizzle-team/drizzle-kit-mirror/assets/23618431/45e3e231-64bb-4aac-9a94-86a3a4660967)\r\n\r\nthis is what I used to create it in supabase: https://github.com/geckoboard/pgulid/blob/master/pgulid.sql\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/238/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/237","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/237/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/237/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/237/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/237","id":1994668844,"node_id":"I_kwDOHoY85M525Dss","number":237,"title":"Issues with monorepo and tsx imports with esbuild","user":{"login":"markacola","id":11350169,"node_id":"MDQ6VXNlcjExMzUwMTY5","avatar_url":"https://avatars.githubusercontent.com/u/11350169?v=4","gravatar_id":"","url":"https://api.github.com/users/markacola","html_url":"https://github.com/markacola","followers_url":"https://api.github.com/users/markacola/followers","following_url":"https://api.github.com/users/markacola/following{/other_user}","gists_url":"https://api.github.com/users/markacola/gists{/gist_id}","starred_url":"https://api.github.com/users/markacola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markacola/subscriptions","organizations_url":"https://api.github.com/users/markacola/orgs","repos_url":"https://api.github.com/users/markacola/repos","events_url":"https://api.github.com/users/markacola/events{/privacy}","received_events_url":"https://api.github.com/users/markacola/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-11-15T12:18:53Z","updated_at":"2024-01-11T05:50:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nThanks for the awesome library.\r\n\r\nI am currently running into an issue where a subimport of my schemas export some tsx files in my monorepo.\r\n\r\nThis causes all `drizzle-kit` commands to fail (e.g. even `drizzle-kit studio`) while pulling in my schemas, as the `loader` option  is set to `ts` for `esbuild-loader` in the call to `register` in `src/cli/commands/utils.ts`.\r\n\r\nCan you please update this from `ts` to `tsx` to the load does die on jsx syntax?\r\n\r\nI would submit a PR but couldn't find a repo with code :sweat_smile: \r\n\r\n```\r\ntry {\r\n  return register({\r\n    format: \"cjs\",\r\n    loader: \"ts\"\r\n  });\r\n} catch {\r\n  return {\r\n    unregister: () => {\r\n    }\r\n  };\r\n}\r\n```\r\nto:\r\n```\r\ntry {\r\n  return register({\r\n    format: \"cjs\",\r\n    loader: \"tsx\"\r\n  });\r\n} catch {\r\n  return {\r\n    unregister: () => {\r\n    }\r\n  };\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/237/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/237/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/236","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/236/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/236/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/236/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/236","id":1993016054,"node_id":"I_kwDOHoY85M52ywL2","number":236,"title":"[BUG]: New Primary key function (ORM: 0.29.0 / Kit: 0.20.2) / \"name\" proprety not working","user":{"login":"antoinerochat","id":44556595,"node_id":"MDQ6VXNlcjQ0NTU2NTk1","avatar_url":"https://avatars.githubusercontent.com/u/44556595?v=4","gravatar_id":"","url":"https://api.github.com/users/antoinerochat","html_url":"https://github.com/antoinerochat","followers_url":"https://api.github.com/users/antoinerochat/followers","following_url":"https://api.github.com/users/antoinerochat/following{/other_user}","gists_url":"https://api.github.com/users/antoinerochat/gists{/gist_id}","starred_url":"https://api.github.com/users/antoinerochat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antoinerochat/subscriptions","organizations_url":"https://api.github.com/users/antoinerochat/orgs","repos_url":"https://api.github.com/users/antoinerochat/repos","events_url":"https://api.github.com/users/antoinerochat/events{/privacy}","received_events_url":"https://api.github.com/users/antoinerochat/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-14T15:45:25Z","updated_at":"2023-11-14T15:46:00Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Drizzle ORM: 0.29.0\r\nDrizzle Kit: 0.20.2\r\n\r\nI reproduced the example on the doc with Composite Primary Key and the \"name\" parameter doesn't seem to work:\r\n\r\n```\r\nimport { serial, text, integer, primaryKey, pgTable } from \"drizzle-orm/pg-core\";\r\n\r\nexport const user = pgTable(\"user\", {\r\n\tid: serial(\"id\").primaryKey(),\r\n\tname: text(\"name\"),\r\n});\r\n\r\nexport const book = pgTable(\"book\", {\r\n\tid: serial(\"id\").primaryKey(),\r\n\tname: text(\"name\"),\r\n});\r\n\r\nexport const booksToAuthors = pgTable(\"books_to_authors\", {\r\n\tauthorId: integer(\"author_id\"),\r\n\tbookId: integer(\"book_id\"),\r\n}, (table) => {\r\n\treturn {\r\n\t\tpkWithCustomName: primaryKey({ name: 'custom_name', columns: [table.bookId, table.authorId] }),\r\n\t};\r\n});\r\n```\r\n\r\nProduced the following migration:\r\n\r\n```\r\nCREATE TABLE IF NOT EXISTS \"book\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"name\" text\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE IF NOT EXISTS \"books_to_authors\" (\r\n\t\"author_id\" integer,\r\n\t\"book_id\" integer,\r\n\tCONSTRAINT books_to_authors_book_id_author_id PRIMARY KEY(\"book_id\",\"author_id\")\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE IF NOT EXISTS \"user\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"name\" text\r\n);\r\n```\r\n\r\nI expect the constraint name to be \"custom_name\" instead of \"books_to_authors_book_id_author_id\"","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/236/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/236/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/235","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/235/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/235/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/235/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/235","id":1992031395,"node_id":"I_kwDOHoY85M52u_yj","number":235,"title":"Outdated docs: defineConfig import wrong path","user":{"login":"egegungordu","id":24779436,"node_id":"MDQ6VXNlcjI0Nzc5NDM2","avatar_url":"https://avatars.githubusercontent.com/u/24779436?v=4","gravatar_id":"","url":"https://api.github.com/users/egegungordu","html_url":"https://github.com/egegungordu","followers_url":"https://api.github.com/users/egegungordu/followers","following_url":"https://api.github.com/users/egegungordu/following{/other_user}","gists_url":"https://api.github.com/users/egegungordu/gists{/gist_id}","starred_url":"https://api.github.com/users/egegungordu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/egegungordu/subscriptions","organizations_url":"https://api.github.com/users/egegungordu/orgs","repos_url":"https://api.github.com/users/egegungordu/repos","events_url":"https://api.github.com/users/egegungordu/events{/privacy}","received_events_url":"https://api.github.com/users/egegungordu/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-11-14T05:44:45Z","updated_at":"2023-11-24T03:20:27Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Configuration section in the drizzle-kit docs here [https://orm.drizzle.team/kit-docs/overview#configuration](https://orm.drizzle.team/kit-docs/overview#configuration) show the `defineConfig` function imported from `drizzle-kit/utils`, but this is not possible in `0.20.2`.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/235/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/235/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/234","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/234/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/234/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/234/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/234","id":1991250144,"node_id":"I_kwDOHoY85M52sBDg","number":234,"title":"BUG: v0.20.2 push:mysql error: there can be only one auto column and it must be defined as a key","user":{"login":"sexnine","id":25860388,"node_id":"MDQ6VXNlcjI1ODYwMzg4","avatar_url":"https://avatars.githubusercontent.com/u/25860388?v=4","gravatar_id":"","url":"https://api.github.com/users/sexnine","html_url":"https://github.com/sexnine","followers_url":"https://api.github.com/users/sexnine/followers","following_url":"https://api.github.com/users/sexnine/following{/other_user}","gists_url":"https://api.github.com/users/sexnine/gists{/gist_id}","starred_url":"https://api.github.com/users/sexnine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sexnine/subscriptions","organizations_url":"https://api.github.com/users/sexnine/orgs","repos_url":"https://api.github.com/users/sexnine/repos","events_url":"https://api.github.com/users/sexnine/events{/privacy}","received_events_url":"https://api.github.com/users/sexnine/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2023-11-13T18:47:24Z","updated_at":"2023-12-22T16:35:25Z","closed_at":"2023-12-18T21:12:59Z","author_association":"NONE","active_lock_reason":null,"body":"When pushing schema changes to a Planetscale database, drizzle-kit attempts to drop the primary key, resulting in an unexpected error that crashes the program and does not push schema changes.\r\n\r\n---\r\n\r\n- Windows 11 x64\r\n- Node v20.8.0\r\n- Planetscale DB\r\n```sh\r\n$ drizzle-kit -v\r\n\r\ndrizzle-kit: v0.20.2\r\ndrizzle-orm: v0.29.0\r\n```\r\n\r\n```ts\r\n// drizzle.config.ts\r\n\r\nimport type { Config } from \"drizzle-kit\";\r\nimport \"dotenv/config\";\r\n\r\nexport default {\r\n  schema: \"shared/db-schema/schema.ts\",\r\n  driver: \"mysql2\",\r\n  strict: false,\r\n  dbCredentials: {\r\n    uri: `${process.env.SECRET_DATABASE_URL_DK}?ssl={\"rejectUnauthorized\":true}`,\r\n  },\r\n} satisfies Config;\r\n```\r\n\r\n```ts\r\n// schema.ts\r\n\r\nimport { int, mysqlTable, varchar } from \"drizzle-orm/mysql-core\";\r\n\r\nexport const registrationsT = mysqlTable(\"Registrations\", {\r\n  id: int(\"id\").primaryKey().autoincrement(),\r\n  eventId: varchar(\"eventId\", { length: 20 }).notNull(),\r\n});\r\n```\r\n\r\n## Reproduction Steps\r\n1. Drop tables in database\r\n2. `drizzle-kit push:mysql` - works as expected\r\n```sh\r\n$ drizzle-kit push:mysql\r\n\r\ndrizzle-kit: v0.20.2\r\ndrizzle-orm: v0.29.0\r\n\r\nNo config path provided, using default path\r\nReading config file 'C:\\PROJECT_ROOT\\drizzle.config.ts'\r\nReading schema files:\r\nC:\\PROJECT_ROOT\\shared\\db-schema\\schema.ts\r\n\r\n[‚úì] Changes applied\r\n```\r\n3. `drizzle-kit push:mysql` - subsequent pushes error like this\r\n```sh\r\n$ drizzle-kit push:mysql\r\n\r\ndrizzle-kit: v0.20.2\r\ndrizzle-orm: v0.29.0\r\n\r\nNo config path provided, using default path\r\nReading config file 'C:\\PROJECT_ROOT\\drizzle.config.ts'\r\nReading schema files:\r\nC:\\PROJECT_ROOT\\shared\\db-schema\\schema.ts\r\n\r\nError: target: hackpnw.-.primary: vttablet: rpc error: code = InvalidArgument desc = Incorrect table definition; there can be only one auto column and it must be defined as a key (errno 1075) (sqlstate 42000) (CallerID: ndpdojjc6bnbmig6gvkg): Sql: \"alter table Registrations drop primary key\", BindVars: {REDACTED}\r\n    at PromiseConnection.query (C:\\PROJECT_ROOT\\node_modules\\.pnpm\\drizzle-kit@0.20.2\\node_modules\\drizzle-kit\\bin.cjs:42296:26)\r\n    at Command.<anonymous> (C:\\PROJECT_ROOT\\node_modules\\.pnpm\\drizzle-kit@0.20.2\\node_modules\\drizzle-kit\\bin.cjs:61038:33)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {\r\n  code: 'ER_WRONG_AUTO_KEY',\r\n  errno: 1075,\r\n  sql: 'ALTER TABLE `Registrations` DROP PRIMARY KEY;',\r\n  sqlState: '42000',\r\n  sqlMessage: 'target: hackpnw.-.primary: vttablet: rpc error: code = InvalidArgument desc = Incorrect table definition; there can be only one auto column and it must be defined as a key (errno 1075) (sqlstate 42000) (CallerID: ndpdojjc6bnbmig6gvkg): Sql: \"alter table Registrations drop primary key\", BindVars: {REDACTED}'\r\n}\r\n```\r\n\r\n## Introspection Results\r\n```sql\r\n-- drizzle/0000_married_rocket_racer.sql\r\n\r\n-- Current sql file was generated after introspecting the database\r\n-- If you want to run this migration please uncomment this code before executing migrations\r\n/*\r\nCREATE TABLE `Registrations` (\r\n\t`id` int AUTO_INCREMENT NOT NULL,\r\n\t`eventId` varchar(20) NOT NULL,\r\n\tCONSTRAINT `Registrations_id_pk` PRIMARY KEY(`id`)\r\n);\r\n\r\n*/\r\n```\r\n```ts\r\n// drizzle/schema.ts\r\n\r\nimport { mysqlTable, mysqlSchema, AnyMySqlColumn, primaryKey, int, varchar } from \"drizzle-orm/mysql-core\"\r\nimport { sql } from \"drizzle-orm\"\r\n\r\n\r\nexport const registrations = mysqlTable(\"Registrations\", {\r\n\tid: int(\"id\").autoincrement().notNull(),\r\n\teventId: varchar(\"eventId\", { length: 20 }).notNull(),\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\tregistrationsIdPk: primaryKey({ columns: [table.id], name: \"Registrations_id_pk\"}),\r\n\t}\r\n});\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/234/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/234/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/233","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/233/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/233/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/233/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/233","id":1990465710,"node_id":"I_kwDOHoY85M52pBiu","number":233,"title":"Push command not working after 0.20.0","user":{"login":"sentend","id":95025705,"node_id":"U_kgDOBan6KQ","avatar_url":"https://avatars.githubusercontent.com/u/95025705?v=4","gravatar_id":"","url":"https://api.github.com/users/sentend","html_url":"https://github.com/sentend","followers_url":"https://api.github.com/users/sentend/followers","following_url":"https://api.github.com/users/sentend/following{/other_user}","gists_url":"https://api.github.com/users/sentend/gists{/gist_id}","starred_url":"https://api.github.com/users/sentend/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sentend/subscriptions","organizations_url":"https://api.github.com/users/sentend/orgs","repos_url":"https://api.github.com/users/sentend/repos","events_url":"https://api.github.com/users/sentend/events{/privacy}","received_events_url":"https://api.github.com/users/sentend/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-13T11:34:27Z","updated_at":"2023-11-13T11:35:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"im currently using drizzle-kit@0.20.2 and push command not working for pg-core with next error\r\n\r\n```\r\nTypeError: Cannot read properties of undefined (reading 'split')\r\n    at Object.unsquashPK (/Users/senzu/Public/js/work/timemator/timemator_teams/backend/node_modules/.pnpm/drizzle-kit@0.20.2/node_modules/drizzle-kit/bin.cjs:4711:58)\r\n    at /Users/senzu/Public/js/work/timemator/timemator_teams/backend/node_modules/.pnpm/drizzle-kit@0.20.2/node_modules/drizzle-kit/bin.cjs:17088:42\r\n    at Array.map (<anonymous>)\r\n    at prepareAddCompositePrimaryKeyPg (/Users/senzu/Public/js/work/timemator/timemator_teams/backend/node_modules/.pnpm/drizzle-kit@0.20.2/node_modules/drizzle-kit/bin.cjs:17087:33)\r\n    at /Users/senzu/Public/js/work/timemator/timemator_teams/backend/node_modules/.pnpm/drizzle-kit@0.20.2/node_modules/drizzle-kit/bin.cjs:17523:33\r\n    at Array.forEach (<anonymous>)\r\n    at applySnapshotsDiff (/Users/senzu/Public/js/work/timemator/timemator_teams/backend/node_modules/.pnpm/drizzle-kit@0.20.2/node_modules/drizzle-kit/bin.cjs:17478:26)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async prepareSQL (/Users/senzu/Public/js/work/timemator/timemator_teams/backend/node_modules/.pnpm/drizzle-kit@0.20.2/node_modules/drizzle-kit/bin.cjs:15081:14)\r\n    at async preparePgPush (/Users/senzu/Public/js/work/timemator/timemator_teams/backend/node_modules/.pnpm/drizzle-kit@0.20.2/node_modules/drizzle-kit/bin.cjs:14934:47)\r\n```\r\n\r\nwith drizzle-kit 0.19.13 and drizzle-orm 0.28.6 work fine\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/233/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/233/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/232","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/232/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/232/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/232/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/232","id":1989207002,"node_id":"I_kwDOHoY85M52kOPa","number":232,"title":"Instrospect misses to wrap database default values in sql","user":{"login":"subzero79","id":7058119,"node_id":"MDQ6VXNlcjcwNTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/7058119?v=4","gravatar_id":"","url":"https://api.github.com/users/subzero79","html_url":"https://github.com/subzero79","followers_url":"https://api.github.com/users/subzero79/followers","following_url":"https://api.github.com/users/subzero79/following{/other_user}","gists_url":"https://api.github.com/users/subzero79/gists{/gist_id}","starred_url":"https://api.github.com/users/subzero79/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/subzero79/subscriptions","organizations_url":"https://api.github.com/users/subzero79/orgs","repos_url":"https://api.github.com/users/subzero79/repos","events_url":"https://api.github.com/users/subzero79/events{/privacy}","received_events_url":"https://api.github.com/users/subzero79/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-11-12T02:32:26Z","updated_at":"2024-05-12T00:27:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi there,\r\n\r\nI use hasura for managing my db schema handling the migrations using their cli tooling. Then i've been playing around in a pet project using kisely and genql for db queries. \r\n\r\nI decided to give drizzle a try by pulling the existing schema from the db, I just noticed that when it comes to default values of columns that could be text, or postgres function(like gen_random_uuid()) these are not parsed correctly into the typescript schema file. Below is a sample of the schema output.\r\n\r\nIn the default function there are postgres functions that should not be put in javascript as normal functions, as i understand they should be wrapped like  \r\n```js\r\nsql`gen_random_uuid())`\r\n```\r\nfrom what i've seen in the docs.\r\n\r\nThe drizzle-kit version is 0.20.1\r\n\r\n```ts\r\nimport { pgTable, pgSchema, text, boolean, foreignKey, unique, uuid, bigint, timestamp, integer } from \"drizzle-orm/pg-core\"\r\n\r\nimport { sql } from \"drizzle-orm\"\r\n\r\nexport const auth = pgSchema(\"auth\");\r\n\r\nexport const user = auth.table(\"User\", {\r\n\tid: text(\"id\").primaryKey().notNull(),\r\n\temail: text(\"email\"),\r\n\temailVerified: boolean(\"email_verified\").default(false),\r\n\tusername: text(\"username\"),\r\n\timage: text(\"image\"),\r\n});\r\n\r\nexport const key = auth.table(\"Key\", {\r\n\tid: text(\"id\").default(gen_random_uuid()).primaryKey().notNull(),\r\n\tuserId: text(\"user_id\").notNull().references(() => user.id, { onDelete: \"cascade\", onUpdate: \"restrict\" } ),\r\n\thashedPassword: text(\"hashed_password\"),\r\n});\r\n\r\nexport const verificationCode = auth.table(\"VerificationCode\", {\r\n\tid: uuid(\"id\").defaultRandom().primaryKey().notNull(),\r\n\tuserId: text(\"user_id\").notNull(),\r\n\tcode: text(\"code\").notNull(),\r\n\t// You can use { mode: \"bigint\" } if numbers are exceeding js number limitations\r\n\texpires: bigint(\"expires\", { mode: \"number\" }).notNull(),\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\tverificationCodeUserIdKey: unique(\"VerificationCode_user_id_key\").on(table.userId),\r\n\t}\r\n});\r\n\r\nexport const competition = pgTable(\"Competition\", {\r\n\tid: text(\"id\").default(ksuid_pgcrypto('comp_'::text)).primaryKey().notNull(),\r\n\tname: text(\"name\").notNull(),\r\n\tcreatedAt: timestamp(\"created_at\", { withTimezone: true, mode: 'string' }).defaultNow().notNull(),\r\n\tupdatedAt: timestamp(\"updated_at\", { withTimezone: true, mode: 'string' }).defaultNow().notNull(),\r\n\tlevel: integer(\"level\").default(100),\r\n\tslug: text(\"slug\").notNull(),\r\n\torgId: text(\"orgId\").references(() => organization.id, { onDelete: \"cascade\", onUpdate: \"restrict\" } ),\r\n});\r\n```\r\n\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/7058119/6c48c906-6eeb-4c94-876e-4b2ac2a5a421)\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/232/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/232/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/231","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/231/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/231/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/231/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/231","id":1988842468,"node_id":"I_kwDOHoY85M52i1Pk","number":231,"title":"i can't open the drizzle studio","user":{"login":"chrhi","id":116351398,"node_id":"U_kgDOBu9hpg","avatar_url":"https://avatars.githubusercontent.com/u/116351398?v=4","gravatar_id":"","url":"https://api.github.com/users/chrhi","html_url":"https://github.com/chrhi","followers_url":"https://api.github.com/users/chrhi/followers","following_url":"https://api.github.com/users/chrhi/following{/other_user}","gists_url":"https://api.github.com/users/chrhi/gists{/gist_id}","starred_url":"https://api.github.com/users/chrhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrhi/subscriptions","organizations_url":"https://api.github.com/users/chrhi/orgs","repos_url":"https://api.github.com/users/chrhi/repos","events_url":"https://api.github.com/users/chrhi/events{/privacy}","received_events_url":"https://api.github.com/users/chrhi/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-11-11T08:43:28Z","updated_at":"2024-02-24T17:31:01Z","closed_at":"2023-11-13T01:13:24Z","author_association":"NONE","active_lock_reason":null,"body":"![desktop](https://github.com/drizzle-team/drizzle-kit-mirror/assets/116351398/052de104-ef61-4976-a856-de6e4bb76af6)\r\n\r\n\r\nthis is my terminal \r\ndell@DESKTOP-99VVTUU MINGW64 ~/Documents/GitHub/stack-over-flow (main)\r\n$ pnpm drizzle-kit studio --port 3000 --verbose\r\nNo config path provided, using default path\r\nReading config file 'C:\\Users\\dell\\Documents\\GitHub\\stack-over-flow\\drizzle.config.ts'\r\n\r\n[Warning] Drizzle Studio is currently in Beta. If you find anything that is not working as \r\nexpected or should be improved, feel free to create an issue on GitHub: https://github.com/drizzle-team/drizzle-kit-mirror/issues/new or write to us on Discord: https://discord.gg/WcRKz2FFxN\r\n\r\nDrizzle Studio is up and running on http://0.0.0.0:3000\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/231/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/231/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/230","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/230/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/230/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/230/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/230","id":1988482052,"node_id":"I_kwDOHoY85M52hdQE","number":230,"title":"Drizzle Studio Infinite Loading","user":{"login":"alexbchr","id":3542313,"node_id":"MDQ6VXNlcjM1NDIzMTM=","avatar_url":"https://avatars.githubusercontent.com/u/3542313?v=4","gravatar_id":"","url":"https://api.github.com/users/alexbchr","html_url":"https://github.com/alexbchr","followers_url":"https://api.github.com/users/alexbchr/followers","following_url":"https://api.github.com/users/alexbchr/following{/other_user}","gists_url":"https://api.github.com/users/alexbchr/gists{/gist_id}","starred_url":"https://api.github.com/users/alexbchr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexbchr/subscriptions","organizations_url":"https://api.github.com/users/alexbchr/orgs","repos_url":"https://api.github.com/users/alexbchr/repos","events_url":"https://api.github.com/users/alexbchr/events{/privacy}","received_events_url":"https://api.github.com/users/alexbchr/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2023-11-10T22:09:12Z","updated_at":"2023-11-13T21:25:07Z","closed_at":"2023-11-13T14:18:31Z","author_association":"NONE","active_lock_reason":null,"body":"Using the following versions:\r\n\r\n```\r\ndrizzle-kit: v0.20.1\r\ndrizzle-orm: v0.29.0\r\n```\r\n\r\nDrizzle Studio loads indefinitely on the \"Open a Table\" view (see below).\r\n<img width=\"498\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/3542313/4fddb4b4-f694-40c4-958e-4c32038f313b\">\r\n\r\nEverything was working fine before upgrading to the latest versions of drizzle-kit and drizzle-orm.\r\n\r\nWe have a very simple `drizzle.config.ts` file (I only changed the export to use the new `defineConfig` export, but still no luck.\r\n\r\n```ts\r\nexport default defineConfig({\r\n  schema: './src/db/schema.ts',\r\n  out: './drizzle',\r\n  driver: 'pg',\r\n  dbCredentials: {\r\n    connectionString: '...',\r\n  },\r\n})\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/230/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/229","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/229/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/229/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/229/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/229","id":1987628361,"node_id":"I_kwDOHoY85M52eM1J","number":229,"title":"Generating Migrations: Update to 0.20.0 causes dropping of all tables except last declared Schema","user":{"login":"pascalmtts","id":12157131,"node_id":"MDQ6VXNlcjEyMTU3MTMx","avatar_url":"https://avatars.githubusercontent.com/u/12157131?v=4","gravatar_id":"","url":"https://api.github.com/users/pascalmtts","html_url":"https://github.com/pascalmtts","followers_url":"https://api.github.com/users/pascalmtts/followers","following_url":"https://api.github.com/users/pascalmtts/following{/other_user}","gists_url":"https://api.github.com/users/pascalmtts/gists{/gist_id}","starred_url":"https://api.github.com/users/pascalmtts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pascalmtts/subscriptions","organizations_url":"https://api.github.com/users/pascalmtts/orgs","repos_url":"https://api.github.com/users/pascalmtts/repos","events_url":"https://api.github.com/users/pascalmtts/events{/privacy}","received_events_url":"https://api.github.com/users/pascalmtts/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2023-11-10T13:26:24Z","updated_at":"2023-11-13T08:20:53Z","closed_at":"2023-11-13T08:20:40Z","author_association":"NONE","active_lock_reason":null,"body":"**Issue Description:**\r\n\r\nAfter a recent update to drizzle-kit 0.20.0, we've encountered a critical issue where generating new SQL migrations results in the unintended dropping of all tables, with the exception of the last declared schema. This behavior is unexpected and deviates from our previous migrations, where all schemas were recognized and preserved accordingly.\r\n\r\n**Configuration:**\r\n\r\nWe are utilizing the following configuration for our migrations:\r\n\r\n```javascript\r\nexport default defineConfig({\r\n  schema: \"./schema/*\",\r\n  out: \"./drizzle\",\r\n  driver: \"pg\",\r\n  dbCredentials: {\r\n    connectionString: env.DATABASE_URL,\r\n  },\r\n});\r\n```\r\n\r\nOur schema is based on the following structure:\r\n```\r\nschema\r\n‚îú‚îÄ‚îÄ enums\r\n‚îÇ   ‚îî‚îÄ‚îÄ enums.ts\r\n‚îú‚îÄ‚îÄ shared\r\n‚îÇ   ‚îî‚îÄ‚îÄ timestampColumns.ts\r\n‚îî‚îÄ‚îÄ tables\r\n    ‚îú‚îÄ‚îÄ bookingResources.ts\r\n    ‚îú‚îÄ‚îÄ bookingServices.ts\r\n    ‚îú‚îÄ‚îÄ ...\r\n```\r\n\r\n**Expected Behavior:**\r\n\r\nThe expected behavior upon generating migrations would be the recognition of all declared schemas and the preservation of their respective tables in the database.\r\n\r\n**Actual Behavior:**\r\n\r\nOnly the last declared schema is recognized, and as a result, only one table remains post-migration, leading to the loss of all other tables.\r\n\r\n**Steps to Reproduce:**\r\n\r\nUpdate drizzle-kit to the latest version (0.20.0).\r\nRun the command to generate new SQL migrations.\r\nObserve that all tables except for the last one declared in the schema are dropped.\r\nImpact:\r\n\r\nThis issue is critically impacting our development workflow and potentially could affect our production environment if not addressed promptly.\r\n\r\n**Additional Context:**\r\n\r\nThis problem began after updating drizzle-kit to 0.20.0.\r\nNo errors are thrown during the migration generation; the tables are simply dropped.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/229/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":2},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/229/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/228","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/228/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/228/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/228/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/228","id":1985671293,"node_id":"I_kwDOHoY85M52WvB9","number":228,"title":"issue","user":{"login":"ModAllama","id":84066808,"node_id":"MDQ6VXNlcjg0MDY2ODA4","avatar_url":"https://avatars.githubusercontent.com/u/84066808?v=4","gravatar_id":"","url":"https://api.github.com/users/ModAllama","html_url":"https://github.com/ModAllama","followers_url":"https://api.github.com/users/ModAllama/followers","following_url":"https://api.github.com/users/ModAllama/following{/other_user}","gists_url":"https://api.github.com/users/ModAllama/gists{/gist_id}","starred_url":"https://api.github.com/users/ModAllama/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ModAllama/subscriptions","organizations_url":"https://api.github.com/users/ModAllama/orgs","repos_url":"https://api.github.com/users/ModAllama/repos","events_url":"https://api.github.com/users/ModAllama/events{/privacy}","received_events_url":"https://api.github.com/users/ModAllama/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-09T13:51:41Z","updated_at":"2023-11-09T13:51:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I run that==> \"Drizzle Studio is up and running on http://0.0.0.0:4983\"\r\n\r\n\r\ni get that ==>\"This site can‚Äôt be reachedThe webpage at http://0.0.0.0:4983/ might be temporarily down or it may have moved permanently to a new web address.\r\nERR_ADDRESS_INVALID\r\n\"","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/228/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/227","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/227/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/227/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/227/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/227","id":1984545646,"node_id":"I_kwDOHoY85M52ScNu","number":227,"title":"There are three cases where drizzle-kit's introspect:mysql does not work. ","user":{"login":"araera111","id":63596736,"node_id":"MDQ6VXNlcjYzNTk2NzM2","avatar_url":"https://avatars.githubusercontent.com/u/63596736?v=4","gravatar_id":"","url":"https://api.github.com/users/araera111","html_url":"https://github.com/araera111","followers_url":"https://api.github.com/users/araera111/followers","following_url":"https://api.github.com/users/araera111/following{/other_user}","gists_url":"https://api.github.com/users/araera111/gists{/gist_id}","starred_url":"https://api.github.com/users/araera111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/araera111/subscriptions","organizations_url":"https://api.github.com/users/araera111/orgs","repos_url":"https://api.github.com/users/araera111/repos","events_url":"https://api.github.com/users/araera111/events{/privacy}","received_events_url":"https://api.github.com/users/araera111/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-08T23:09:23Z","updated_at":"2023-11-08T23:09:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"1. if default contains line breaks(\\n\\r)\r\n```sql\r\nCREATE TABLE `table_name` (\r\n `key` varchar(24) NOT NULL DEFAULT '„ÄÄ aaa\\r\\nbbbb',\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8\r\n```\r\nThe newline code causes a line break, which is invalid as typescript.\r\n\r\n2.\r\n```sql\r\nCREATE TABLE `table_2` (\r\n `1st_key` tinyint(3) NOT NULL DEFAULT '0',\r\n) \r\n```\r\nThis is an error because the beginning of the JavaScript key is a number.\r\n\r\n3.\r\n```sql\r\n `decimal_test` decimal(6,2) unsigned NOT NULL,\r\n```\r\nIf the value is unsignded in decimal, the output will be as follows and an error will result.\r\n\r\n```ts\r\ndecimal_test: decimal(\"decimal_test\", { precision: 6, scale: 2) unsigne }).notNull(),\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/227/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/227/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/226","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/226/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/226/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/226/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/226","id":1980277653,"node_id":"I_kwDOHoY85M52CKOV","number":226,"title":"postgres: foreign key relation to a table within a schema not working properly","user":{"login":"hexcowboy","id":8162609,"node_id":"MDQ6VXNlcjgxNjI2MDk=","avatar_url":"https://avatars.githubusercontent.com/u/8162609?v=4","gravatar_id":"","url":"https://api.github.com/users/hexcowboy","html_url":"https://github.com/hexcowboy","followers_url":"https://api.github.com/users/hexcowboy/followers","following_url":"https://api.github.com/users/hexcowboy/following{/other_user}","gists_url":"https://api.github.com/users/hexcowboy/gists{/gist_id}","starred_url":"https://api.github.com/users/hexcowboy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexcowboy/subscriptions","organizations_url":"https://api.github.com/users/hexcowboy/orgs","repos_url":"https://api.github.com/users/hexcowboy/repos","events_url":"https://api.github.com/users/hexcowboy/events{/privacy}","received_events_url":"https://api.github.com/users/hexcowboy/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-06T23:48:03Z","updated_at":"2023-11-06T23:48:03Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"issue described here https://github.com/drizzle-team/drizzle-orm/issues/636\r\n\r\nseems like the patch in the comments towards the bottom fixes this. is there any way to contribute to `drizzle-kit` or is it closed source? seems like this bug could already be fixed if there was a way to commit the patch.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/226/reactions","total_count":7,"+1":7,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/226/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/225","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/225/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/225/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/225/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/225","id":1976305339,"node_id":"I_kwDOHoY85M51zAa7","number":225,"title":"Option to specify or ask for migration name when creating one","user":{"login":"sdarnell","id":3684334,"node_id":"MDQ6VXNlcjM2ODQzMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/3684334?v=4","gravatar_id":"","url":"https://api.github.com/users/sdarnell","html_url":"https://github.com/sdarnell","followers_url":"https://api.github.com/users/sdarnell/followers","following_url":"https://api.github.com/users/sdarnell/following{/other_user}","gists_url":"https://api.github.com/users/sdarnell/gists{/gist_id}","starred_url":"https://api.github.com/users/sdarnell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdarnell/subscriptions","organizations_url":"https://api.github.com/users/sdarnell/orgs","repos_url":"https://api.github.com/users/sdarnell/repos","events_url":"https://api.github.com/users/sdarnell/events{/privacy}","received_events_url":"https://api.github.com/users/sdarnell/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2023-11-03T14:17:50Z","updated_at":"2024-05-15T16:38:57Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The developer experience of creating migrations could be improved if there was a way for us to specify what the migration name suffix should be.  Random names aren't particularly useful.\r\nCurrently we have to create the migration, then hunt around and change the filename, and then update the _journal.json file.\r\n\r\nOne improvement would be if the journal didn't include the suffix, as it can work out from the prefix number. Hence one less place to change.\r\n\r\nBut I suspect the easiest fix is to have an option to specify the name, and if not, ask on the console. ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/225/reactions","total_count":12,"+1":11,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/225/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/224","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/224/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/224/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/224/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/224","id":1976211633,"node_id":"I_kwDOHoY85M51ypix","number":224,"title":"Drizzle cannot create composite primary key in migrations","user":{"login":"parth-frinks","id":141614524,"node_id":"U_kgDOCHDdvA","avatar_url":"https://avatars.githubusercontent.com/u/141614524?v=4","gravatar_id":"","url":"https://api.github.com/users/parth-frinks","html_url":"https://github.com/parth-frinks","followers_url":"https://api.github.com/users/parth-frinks/followers","following_url":"https://api.github.com/users/parth-frinks/following{/other_user}","gists_url":"https://api.github.com/users/parth-frinks/gists{/gist_id}","starred_url":"https://api.github.com/users/parth-frinks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parth-frinks/subscriptions","organizations_url":"https://api.github.com/users/parth-frinks/orgs","repos_url":"https://api.github.com/users/parth-frinks/repos","events_url":"https://api.github.com/users/parth-frinks/events{/privacy}","received_events_url":"https://api.github.com/users/parth-frinks/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-03T13:30:23Z","updated_at":"2023-11-03T13:40:36Z","closed_at":"2023-11-03T13:40:36Z","author_association":"NONE","active_lock_reason":null,"body":"this is my drizzle schema \r\nexport const shiftSchema = mysqlTable(\r\n  'shifts',\r\n  {\r\n    id: int('id').primaryKey(),\r\n    beltId: varchar('belt_id', { length: 36 })\r\n      .notNull()\r\n      .references(() => beltSchema.id),\r\n    start: float('start').notNull(),\r\n    end: float('end').notNull(),\r\n  },\r\n  (table) => {\r\n    return {\r\n      pk: primaryKey(table.id, table.beltId),\r\n    }\r\n  }\r\n)\r\n\r\nThis is the generated sql migration\r\nCREATE TABLE `shifts` (\r\n\t`id` int NOT NULL,\r\n\t`belt_id` varchar(36) NOT NULL,\r\n\t`start` float NOT NULL,\r\n\t`end` float NOT NULL,\r\n\tCONSTRAINT `shifts_id` PRIMARY KEY(`id`)\r\n);\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/224/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/223","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/223/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/223/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/223/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/223","id":1975912177,"node_id":"I_kwDOHoY85M51xgbx","number":223,"title":"Support for import aliases in drizzle-kit","user":{"login":"sdarnell","id":3684334,"node_id":"MDQ6VXNlcjM2ODQzMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/3684334?v=4","gravatar_id":"","url":"https://api.github.com/users/sdarnell","html_url":"https://github.com/sdarnell","followers_url":"https://api.github.com/users/sdarnell/followers","following_url":"https://api.github.com/users/sdarnell/following{/other_user}","gists_url":"https://api.github.com/users/sdarnell/gists{/gist_id}","starred_url":"https://api.github.com/users/sdarnell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdarnell/subscriptions","organizations_url":"https://api.github.com/users/sdarnell/orgs","repos_url":"https://api.github.com/users/sdarnell/repos","events_url":"https://api.github.com/users/sdarnell/events{/privacy}","received_events_url":"https://api.github.com/users/sdarnell/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-11-03T10:46:50Z","updated_at":"2023-11-20T22:43:24Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"For some projects we use the helpful import aliases that typescript offers.\r\nFor example, in sveltekit, $lib maps to `src/lib` and is commonly used in imports.\r\nIn my case, my schema.ts file references some common constants in a file off $lib, and I (unwisely) had some custom column types declared in a file that also referenced other aliased paths.\r\n\r\nWhen I try to create a migration I get an error like:\r\n```\r\n> drizzle-kit generate:sqlite\r\n\r\ndrizzle-kit: v0.19.13\r\ndrizzle-orm: v0.28.6\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/Users/redacted/drizzle.config.ts'\r\nError: Cannot find module '$db/schema'\r\nRequire stack:\r\n- /Users/redacted/src/lib/server/db/db-helpers.ts\r\n- /Users/redacted/src/lib/server/db/schema.ts\r\n- /Users/redacted/node_modules/drizzle-kit/index.cjs\r\n    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:1026:15)\r\n    at Function.Module._load (node:internal/modules/cjs/loader:871:27)\r\n    at Module.require (node:internal/modules/cjs/loader:1098:19)\r\n    at require (node:internal/modules/cjs/helpers:108:18)\r\n    at Object.<anonymous> (/Users/redacted/src/lib/server/db/db-helpers.ts:7:25)\r\n    at Module._compile (node:internal/modules/cjs/loader:1196:14)\r\n    at Module._compile (/Users/redacted/node_modules/drizzle-kit/index.cjs:8623:30)\r\n    at Module._extensions..js (node:internal/modules/cjs/loader:1250:10)\r\n    at Object.newLoader [as .ts] (/Users/redacted/node_modules/drizzle-kit/index.cjs:8627:13)\r\n    at Module.load (node:internal/modules/cjs/loader:1074:32) {\r\n  code: 'MODULE_NOT_FOUND',\r\n  requireStack: [\r\n    '/Users/redacted/src/lib/server/db/db-helpers.ts',\r\n    '/Users/redacted/src/lib/server/db/schema.ts',\r\n    '/Users/redacted/node_modules/drizzle-kit/index.cjs'\r\n  ]\r\n```\r\nUltimately, the solution/work-around for now is to separate the custom column types, and use relative import paths, but it would be good if drizzle-kit didn't need that.\r\n\r\nIt would be nice if there was way for drizzle-kit to understand import aliases. Either from the real tsconfig.json (which is complicated a little by sveltekit which uses `extends` to reference a file in `./.sveltekit/tsconfig.json` which defines the aliases:\r\n```\r\n{\r\n\t\"compilerOptions\": {\r\n\t\t\"paths\": {\r\n\t\t\t\"$db\": [ \"../src/lib/server/db\" ],\r\n\t\t\t\"$db/*\": [ \"../src/lib/server/db/*\" ],\r\n\t\t\t\"$lib\": [ \"../src/lib\" ],\r\n\t\t\t\"$lib/*\": [ \"../src/lib/*\" ]\r\n\t\t},\r\n\t\t\"rootDirs\": ... etc\r\n```\r\n\r\nAnother option would be to allow path aliases to be added to `drizzle.config.ts`.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/223/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/223/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/222","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/222/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/222/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/222/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/222","id":1972134515,"node_id":"I_kwDOHoY85M51jGJz","number":222,"title":"This site can not be reached","user":{"login":"ervinkacar1991","id":85875552,"node_id":"MDQ6VXNlcjg1ODc1NTUy","avatar_url":"https://avatars.githubusercontent.com/u/85875552?v=4","gravatar_id":"","url":"https://api.github.com/users/ervinkacar1991","html_url":"https://github.com/ervinkacar1991","followers_url":"https://api.github.com/users/ervinkacar1991/followers","following_url":"https://api.github.com/users/ervinkacar1991/following{/other_user}","gists_url":"https://api.github.com/users/ervinkacar1991/gists{/gist_id}","starred_url":"https://api.github.com/users/ervinkacar1991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ervinkacar1991/subscriptions","organizations_url":"https://api.github.com/users/ervinkacar1991/orgs","repos_url":"https://api.github.com/users/ervinkacar1991/repos","events_url":"https://api.github.com/users/ervinkacar1991/events{/privacy}","received_events_url":"https://api.github.com/users/ervinkacar1991/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-01T10:50:21Z","updated_at":"2023-11-01T10:55:22Z","closed_at":"2023-11-01T10:55:22Z","author_association":"NONE","active_lock_reason":null,"body":"I have this kind of problem, can not reach this site","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/222/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/221","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/221/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/221/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/221/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/221","id":1971356525,"node_id":"I_kwDOHoY85M51gINt","number":221,"title":"BUG]: Ignoring table definitions with the same table name but in different schema","user":{"login":"jfcieslak","id":4223504,"node_id":"MDQ6VXNlcjQyMjM1MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/4223504?v=4","gravatar_id":"","url":"https://api.github.com/users/jfcieslak","html_url":"https://github.com/jfcieslak","followers_url":"https://api.github.com/users/jfcieslak/followers","following_url":"https://api.github.com/users/jfcieslak/following{/other_user}","gists_url":"https://api.github.com/users/jfcieslak/gists{/gist_id}","starred_url":"https://api.github.com/users/jfcieslak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jfcieslak/subscriptions","organizations_url":"https://api.github.com/users/jfcieslak/orgs","repos_url":"https://api.github.com/users/jfcieslak/repos","events_url":"https://api.github.com/users/jfcieslak/events{/privacy}","received_events_url":"https://api.github.com/users/jfcieslak/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-10-31T21:55:27Z","updated_at":"2023-10-31T21:55:27Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"‚ö†Ô∏è This issue was also added in https://github.com/drizzle-team/drizzle-orm/issues/1435\r\n\r\n### What version of `drizzle-orm` are you using?\r\n\r\n0.28.6\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.19.13\r\n\r\n### Describe the Bug\r\n\r\nDefining two tables that have the same name, but are in different schemas, will result in one of them overriding the other. As a result a migration for only one of the tables is created.\r\nExample:\r\n```ts\r\nconst customSchema = pgSchema('custom')\r\n\r\nexport const customTableA = customSchema.table('table_a',\r\n\t{id: uuid('id').primaryKey()}\r\n)\r\nexport const customTableB = customSchema.table('table_b',\r\n\t{id: uuid('id').primaryKey()}\r\n)\r\nexport const defaultTableA = pgTable('table_a',\r\n\t{id: uuid('id').primaryKey()}\r\n)\r\n```\r\n\r\nWill result in migrations for the following tables:\r\n```\r\ntable_a 1 columns 1 indexes 0 fks // in schema 'public'\r\ntable_b 1 columns 1 indexes 0 fks // in schema 'custom'\r\n```\r\nHowever there will be no migration created for `table_a` in schema 'custom'\r\n\r\n### Expected behavior\r\n\r\nSchema definition should result in migrations for the following tables:\r\n```\r\ntable_a 1 columns 1 indexes 0 fks // in schema 'public'\r\ntable_a 1 columns 1 indexes 0 fks // in schema 'custom'\r\ntable_b 1 columns 1 indexes 0 fks // in schema 'custom'\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/221/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/220","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/220/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/220/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/220/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/220","id":1971343156,"node_id":"I_kwDOHoY85M51gE80","number":220,"title":"pgEnum values with single quotes are not escaped in migration files","user":{"login":"imhoffd","id":236501,"node_id":"MDQ6VXNlcjIzNjUwMQ==","avatar_url":"https://avatars.githubusercontent.com/u/236501?v=4","gravatar_id":"","url":"https://api.github.com/users/imhoffd","html_url":"https://github.com/imhoffd","followers_url":"https://api.github.com/users/imhoffd/followers","following_url":"https://api.github.com/users/imhoffd/following{/other_user}","gists_url":"https://api.github.com/users/imhoffd/gists{/gist_id}","starred_url":"https://api.github.com/users/imhoffd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imhoffd/subscriptions","organizations_url":"https://api.github.com/users/imhoffd/orgs","repos_url":"https://api.github.com/users/imhoffd/repos","events_url":"https://api.github.com/users/imhoffd/events{/privacy}","received_events_url":"https://api.github.com/users/imhoffd/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-10-31T21:41:45Z","updated_at":"2023-10-31T21:42:26Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```ts\r\nconst myEnum = pgEnum(\r\n  'my_enum_type',\r\n  [\"drizzle's awesome\"]\r\n)\r\n```\r\n\r\nThe above `pgEnum` run through `drizzle-kit generate:pg` generates malformed SQL in migration files:\r\n\r\n```sql\r\nDO $$ BEGIN\r\n CREATE TYPE \"my_enum\" AS ENUM('drizzle's awesome');\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```\r\n\r\nCorrect SQL:\r\n\r\n```sql\r\nDO $$ BEGIN\r\n CREATE TYPE \"my_enum\" AS ENUM('drizzle''s awesome');\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/220/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/219","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/219/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/219/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/219/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/219","id":1971014549,"node_id":"I_kwDOHoY85M51e0uV","number":219,"title":"generate:pg reports \"0 tables, No schema changes, nothing to migrate\" even when there is a simple table","user":{"login":"flipperbw","id":796868,"node_id":"MDQ6VXNlcjc5Njg2OA==","avatar_url":"https://avatars.githubusercontent.com/u/796868?v=4","gravatar_id":"","url":"https://api.github.com/users/flipperbw","html_url":"https://github.com/flipperbw","followers_url":"https://api.github.com/users/flipperbw/followers","following_url":"https://api.github.com/users/flipperbw/following{/other_user}","gists_url":"https://api.github.com/users/flipperbw/gists{/gist_id}","starred_url":"https://api.github.com/users/flipperbw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flipperbw/subscriptions","organizations_url":"https://api.github.com/users/flipperbw/orgs","repos_url":"https://api.github.com/users/flipperbw/repos","events_url":"https://api.github.com/users/flipperbw/events{/privacy}","received_events_url":"https://api.github.com/users/flipperbw/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-10-31T17:56:40Z","updated_at":"2023-11-08T15:41:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Attempting a first run to generate a migration. This is the schema file being passed in:\r\n\r\nThe tree structure is `src/db/{schema.ts,migrations}`\r\n\r\n```js\r\nimport { pgTable, serial } from 'drizzle-orm/pg-core';\r\n\r\nexport const testTable = pgTable('test_table', {\r\n  id: serial('id').primaryKey(),\r\n});\r\n```\r\n\r\nThis is the command I'm running:\r\n\r\n`drizzle-kit generate:pg --out src/db/migrations --schema src/db/schema.ts`\r\n\r\nI have tried multiple different options (using `drizzle.config.js`, not using it), but it just keeps reporting:\r\n\r\n```\r\n0 tables\r\nNo schema changes, nothing to migrate üò¥\r\n```\r\n\r\nI should mention that I'm using `bun` here - maybe that is causing issues?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/219/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/219/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/218","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/218/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/218/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/218/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/218","id":1966515513,"node_id":"I_kwDOHoY85M51NqU5","number":218,"title":"BUG: introspect:pg generates timestamp columns with mode: 'string'","user":{"login":"dhruvrajvanshi","id":6960747,"node_id":"MDQ6VXNlcjY5NjA3NDc=","avatar_url":"https://avatars.githubusercontent.com/u/6960747?v=4","gravatar_id":"","url":"https://api.github.com/users/dhruvrajvanshi","html_url":"https://github.com/dhruvrajvanshi","followers_url":"https://api.github.com/users/dhruvrajvanshi/followers","following_url":"https://api.github.com/users/dhruvrajvanshi/following{/other_user}","gists_url":"https://api.github.com/users/dhruvrajvanshi/gists{/gist_id}","starred_url":"https://api.github.com/users/dhruvrajvanshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhruvrajvanshi/subscriptions","organizations_url":"https://api.github.com/users/dhruvrajvanshi/orgs","repos_url":"https://api.github.com/users/dhruvrajvanshi/repos","events_url":"https://api.github.com/users/dhruvrajvanshi/events{/privacy}","received_events_url":"https://api.github.com/users/dhruvrajvanshi/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-10-28T09:16:54Z","updated_at":"2024-04-05T08:26:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When I introspect an existing postgres database table with a timestamp column, it ges generated as { mode: 'string' } instead of a date.\r\n\r\n```sql\r\nCREATE TABLE IF NOT EXISTS \"Entry\" (\r\n\t\"id\" bigserial PRIMARY KEY NOT NULL,\r\n\t\"userId\" integer NOT NULL,\r\n\t\"text\" text NOT NULL,\r\n\t\"timestamp\" timestamp(3) DEFAULT CURRENT_TIMESTAMP NOT NULL\r\n);\r\n```\r\n\r\n```\r\ndrizzle-kit introspect:pg\r\n```\r\n```ts\r\nexport const entry= pgTable(\"JournalEntry\", {\r\n\tid: bigserial(\"id\", { mode: \"bigint\" }).primaryKey().notNull(),\r\n\tuserId: integer(\"userId\").notNull().references(() => user.id, { onDelete: \"restrict\", onUpdate: \"cascade\" } ),\r\n\ttext: text(\"text\").notNull(),\r\n\ttimestamp: timestamp(\"timestamp\", { precision: 3, mode: 'string' }).defaultNow().notNull()\r\n}\r\n```\r\n\r\nFurther, because of mode 'string', `entry.timestamp` is inferred as string, but the actual row returned by `db.select().from(entry)` contains a Date object, not a string.\r\n\r\nVersions:\r\n```\r\ndrizzle-orm: \"0.28.6\"\r\ndrizzle-kit: \"0.19.13\"\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/218/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/217","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/217/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/217/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/217/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/217","id":1966174283,"node_id":"I_kwDOHoY85M51MXBL","number":217,"title":"Allow customizing dictionary of random words","user":{"login":"essential-randomness","id":47095486,"node_id":"MDQ6VXNlcjQ3MDk1NDg2","avatar_url":"https://avatars.githubusercontent.com/u/47095486?v=4","gravatar_id":"","url":"https://api.github.com/users/essential-randomness","html_url":"https://github.com/essential-randomness","followers_url":"https://api.github.com/users/essential-randomness/followers","following_url":"https://api.github.com/users/essential-randomness/following{/other_user}","gists_url":"https://api.github.com/users/essential-randomness/gists{/gist_id}","starred_url":"https://api.github.com/users/essential-randomness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/essential-randomness/subscriptions","organizations_url":"https://api.github.com/users/essential-randomness/orgs","repos_url":"https://api.github.com/users/essential-randomness/repos","events_url":"https://api.github.com/users/essential-randomness/events{/privacy}","received_events_url":"https://api.github.com/users/essential-randomness/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-10-27T20:48:23Z","updated_at":"2023-10-27T20:53:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"(sorry for the initially empty issue, keyboard shortcuts got me)\r\n\r\nThis is a very \"first world problems\" request, but I run a project for a very specific niche, and people would get a real kick out of seeing migrations named after popular concepts in our community. Any chance we could be able to customize the adjectives/heroes arrays seen in the screenshot? \r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/47095486/d4451815-38d5-4174-9d75-c85a2c6080a7)\r\n\r\nIf that's not possible, how terrible of an idea would it be to change the name of the generated migration file (and also update it in `meta/_journal.json`)?\r\n\r\nThank you in advance for entertaining the request :)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/217/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":2},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/217/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/216","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/216/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/216/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/216/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/216","id":1957116171,"node_id":"I_kwDOHoY85M50pzkL","number":216,"title":"BUG `drizzle-kit introspect:mysql` from Planetscale db returns wrong primary key","user":{"login":"pbochis","id":9076897,"node_id":"MDQ6VXNlcjkwNzY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/9076897?v=4","gravatar_id":"","url":"https://api.github.com/users/pbochis","html_url":"https://github.com/pbochis","followers_url":"https://api.github.com/users/pbochis/followers","following_url":"https://api.github.com/users/pbochis/following{/other_user}","gists_url":"https://api.github.com/users/pbochis/gists{/gist_id}","starred_url":"https://api.github.com/users/pbochis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pbochis/subscriptions","organizations_url":"https://api.github.com/users/pbochis/orgs","repos_url":"https://api.github.com/users/pbochis/repos","events_url":"https://api.github.com/users/pbochis/events{/privacy}","received_events_url":"https://api.github.com/users/pbochis/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":16,"created_at":"2023-10-23T13:02:33Z","updated_at":"2024-01-12T19:33:02Z","closed_at":"2023-12-18T21:11:57Z","author_association":"NONE","active_lock_reason":null,"body":"Running `drizzle-kit introspect:mysql` on a planetscale database returns wrong primary key. \r\nThis bug also breaks `drizzle-kit push:mysql` because the schema diff generated before trying to make changes is wrong.\r\n\r\nI've tried to drop the entire planetscale database, recreate it from `schema.ts` with `drizzle-kit push:mysql`, and then do another introspect right after to check the result. It came out with wrong primary keys again.\r\n\r\nDoing the above process with a local docker mysql worked fine, with no issue in pulling the primary keys.\r\n\r\nActual schema, generated with running `show create table [tableName]`:\r\n```\r\nCREATE TABLE `People`\r\n(\r\n    `PersonId`   int NOT NULL AUTO_INCREMENT,\r\n    `FirstName`  varchar(50) DEFAULT NULL,\r\n    `LastName`   varchar(50) DEFAULT NULL,\r\n    `Employment` varchar(50) DEFAULT NULL,\r\n    `Email`      varchar(50) DEFAULT NULL,\r\n    `ClerkId`    varchar(40) DEFAULT NULL,\r\n    PRIMARY KEY (`PersonId`),\r\n    UNIQUE KEY `email_uniq_idx` (`Email`),\r\n    KEY          `clerk_idx` (`ClerkId`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci\r\n\r\nCREATE TABLE `TrainingRegistrations`\r\n(\r\n    `TrainingRegistrationId` int  NOT NULL AUTO_INCREMENT,\r\n    `TrainingId`             int  NOT NULL,\r\n    `PersonId`               int  NOT NULL,\r\n    `RegistrationDate`       date NOT NULL,\r\n    PRIMARY KEY (`TrainingRegistrationId`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci\r\n\r\nCREATE TABLE `Trainings`\r\n(\r\n    `TrainingId`       int  NOT NULL AUTO_INCREMENT,\r\n    `StartDate`        date NOT NULL,\r\n    `EndDate`          date NOT NULL,\r\n    `City`             varchar(50) DEFAULT NULL,\r\n    `Venue`            varchar(50) DEFAULT NULL,\r\n    `TrainingType`     varchar(50) DEFAULT NULL,\r\n    `TrainingCategory` varchar(50) DEFAULT NULL,\r\n    PRIMARY KEY (`TrainingId`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci\r\n```\r\n\r\nSchema generated by `drizzle-kit introspect:mysql`\r\n\r\n```\r\nCREATE TABLE `People` (\r\n\t`PersonId` int AUTO_INCREMENT NOT NULL,\r\n\t`FirstName` varchar(50),\r\n\t`LastName` varchar(50),\r\n\t`Employment` varchar(50),\r\n\t`Email` varchar(50),\r\n\t`ClerkId` varchar(40),\r\n\tCONSTRAINT `People_PersonId` PRIMARY KEY(`PersonId`),\r\n\tCONSTRAINT `email_uniq_idx` UNIQUE(`Email`)\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE `TrainingRegistrations` (\r\n\t`TrainingRegistrationId` int AUTO_INCREMENT NOT NULL,\r\n\t`TrainingId` int NOT NULL,\r\n\t`PersonId` int NOT NULL,\r\n\t`RegistrationDate` date NOT NULL,\r\n\tCONSTRAINT `TrainingRegistrations_PersonId` PRIMARY KEY(`PersonId`)\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE `Trainings` (\r\n\t`TrainingId` int AUTO_INCREMENT NOT NULL,\r\n\t`StartDate` date NOT NULL,\r\n\t`EndDate` date NOT NULL,\r\n\t`City` varchar(50),\r\n\t`Venue` varchar(50),\r\n\t`TrainingType` varchar(50),\r\n\t`TrainingCategory` varchar(50),\r\n\tCONSTRAINT `Trainings_PersonId` PRIMARY KEY(`PersonId`)\r\n);\r\n--> statement-breakpoint\r\nCREATE INDEX `clerk_idx` ON `People` (`ClerkId`);\r\n```\r\n\r\nAnd the typescript schema, generated by drizzle\r\n\r\n```\r\nexport const people = mysqlTable(\"People\", {\r\n\tpersonId: int(\"PersonId\").autoincrement().notNull(),\r\n\tfirstName: varchar(\"FirstName\", { length: 50 }),\r\n\tlastName: varchar(\"LastName\", { length: 50 }),\r\n\temployment: varchar(\"Employment\", { length: 50 }),\r\n\temail: varchar(\"Email\", { length: 50 }),\r\n\tclerkId: varchar(\"ClerkId\", { length: 40 }),\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\tclerkIdx: index(\"clerk_idx\").on(table.clerkId),\r\n\t\tpeoplePersonId: primaryKey(table.personId),\r\n\t\temailUniqIdx: unique(\"email_uniq_idx\").on(table.email),\r\n\t}\r\n});\r\n\r\nexport const trainingRegistrations = mysqlTable(\"TrainingRegistrations\", {\r\n\ttrainingRegistrationId: int(\"TrainingRegistrationId\").autoincrement().notNull(),\r\n\ttrainingId: int(\"TrainingId\").notNull(),\r\n\tpersonId: int(\"PersonId\").notNull(),\r\n\t// you can use { mode: 'date' }, if you want to have Date as type for this column\r\n\tregistrationDate: date(\"RegistrationDate\", { mode: 'string' }).notNull(),\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\ttrainingRegistrationsPersonId: primaryKey(table.personId),\r\n\t}\r\n});\r\n\r\nexport const trainings = mysqlTable(\"Trainings\", {\r\n\ttrainingId: int(\"TrainingId\").autoincrement().notNull(),\r\n\t// you can use { mode: 'date' }, if you want to have Date as type for this column\r\n\tstartDate: date(\"StartDate\", { mode: 'string' }).notNull(),\r\n\t// you can use { mode: 'date' }, if you want to have Date as type for this column\r\n\tendDate: date(\"EndDate\", { mode: 'string' }).notNull(),\r\n\tcity: varchar(\"City\", { length: 50 }),\r\n\tvenue: varchar(\"Venue\", { length: 50 }),\r\n\ttrainingType: varchar(\"TrainingType\", { length: 50 }),\r\n\ttrainingCategory: varchar(\"TrainingCategory\", { length: 50 }),\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\ttrainingsPersonId: primaryKey(table.personId),\r\n\t}\r\n});\r\n```\r\n\r\nAs you can see, `PersonId` is taken as primary key for all 3 tables, even if clearly it is not, and one of them doesn't even have such a column\r\n ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/216/reactions","total_count":7,"+1":7,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/216/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/215","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/215/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/215/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/215/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/215","id":1955983748,"node_id":"I_kwDOHoY85M50lfGE","number":215,"title":"db:generate fails: SyntaxError: Expected double-quoted property name in JSON","user":{"login":"Mitchell-Cook-OWC","id":134230817,"node_id":"U_kgDOCAAzIQ","avatar_url":"https://avatars.githubusercontent.com/u/134230817?v=4","gravatar_id":"","url":"https://api.github.com/users/Mitchell-Cook-OWC","html_url":"https://github.com/Mitchell-Cook-OWC","followers_url":"https://api.github.com/users/Mitchell-Cook-OWC/followers","following_url":"https://api.github.com/users/Mitchell-Cook-OWC/following{/other_user}","gists_url":"https://api.github.com/users/Mitchell-Cook-OWC/gists{/gist_id}","starred_url":"https://api.github.com/users/Mitchell-Cook-OWC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mitchell-Cook-OWC/subscriptions","organizations_url":"https://api.github.com/users/Mitchell-Cook-OWC/orgs","repos_url":"https://api.github.com/users/Mitchell-Cook-OWC/repos","events_url":"https://api.github.com/users/Mitchell-Cook-OWC/events{/privacy}","received_events_url":"https://api.github.com/users/Mitchell-Cook-OWC/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-10-22T17:23:06Z","updated_at":"2023-10-22T17:28:04Z","closed_at":"2023-10-22T17:27:44Z","author_association":"NONE","active_lock_reason":null,"body":"I can't run `db:generate` without getting the following error\r\n\r\n```\r\n> drizzle-kit generate:pg\r\n\r\ndrizzle-kit: v0.19.13\r\ndrizzle-orm: v0.28.6\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/Users/coomitch/workspace/OWC/drizzle.config.ts'\r\nSyntaxError: Expected double-quoted property name in JSON at position 39\r\n    at JSON.parse (<anonymous>)\r\n    at snapshots.reduce.malformed (/Users/coomitch/workspace/OWC/node_modules/drizzle-kit/index.cjs:18548:28)\r\n    at Array.reduce (<anonymous>)\r\n    at validateWithReport (/Users/coomitch/workspace/OWC/node_modules/drizzle-kit/index.cjs:18546:32)\r\n    at prepareMigrationFolder (/Users/coomitch/workspace/OWC/node_modules/drizzle-kit/index.cjs:18588:22)\r\n    at prepareAndMigratePg (/Users/coomitch/workspace/OWC/node_modules/drizzle-kit/index.cjs:14649:40)\r\n    at Command.<anonymous> (/Users/coomitch/workspace/OWC/node_modules/drizzle-kit/index.cjs:53150:9)\r\n```\r\n\r\nDrizzle config is the below\r\n\r\ndrizzle.config.ts\r\n```\r\nimport { cwd } from \"node:process\";\r\nimport type { Config } from \"drizzle-kit\";\r\nimport { loadEnvConfig } from \"@next/env\";\r\n\r\nloadEnvConfig(cwd());\r\n\r\nexport default {\r\n  schema: \"./src/backend/db/schema.ts\",\r\n  driver: \"pg\",\r\n  out: \"./drizzle\",\r\n  dbCredentials: {\r\n    connectionString: process.env.NEON_URL!,\r\n  },\r\n} satisfies Config;\r\n\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/215/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/214","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/214/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/214/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/214/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/214","id":1955258963,"node_id":"I_kwDOHoY85M50iuJT","number":214,"title":"site cannot reached ","user":{"login":"princecr784","id":113668370,"node_id":"U_kgDOBsZxEg","avatar_url":"https://avatars.githubusercontent.com/u/113668370?v=4","gravatar_id":"","url":"https://api.github.com/users/princecr784","html_url":"https://github.com/princecr784","followers_url":"https://api.github.com/users/princecr784/followers","following_url":"https://api.github.com/users/princecr784/following{/other_user}","gists_url":"https://api.github.com/users/princecr784/gists{/gist_id}","starred_url":"https://api.github.com/users/princecr784/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/princecr784/subscriptions","organizations_url":"https://api.github.com/users/princecr784/orgs","repos_url":"https://api.github.com/users/princecr784/repos","events_url":"https://api.github.com/users/princecr784/events{/privacy}","received_events_url":"https://api.github.com/users/princecr784/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-10-21T03:05:11Z","updated_at":"2023-11-09T18:55:15Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I am trying to access drizzle studio through the terminal but this site can't be reached error comes ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/214/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/213","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/213/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/213/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/213/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/213","id":1954449175,"node_id":"I_kwDOHoY85M50focX","number":213,"title":"`drizzle-kit generate:mysql --custom` ignores `--custom` flag","user":{"login":"rbuchberger","id":10504142,"node_id":"MDQ6VXNlcjEwNTA0MTQy","avatar_url":"https://avatars.githubusercontent.com/u/10504142?v=4","gravatar_id":"","url":"https://api.github.com/users/rbuchberger","html_url":"https://github.com/rbuchberger","followers_url":"https://api.github.com/users/rbuchberger/followers","following_url":"https://api.github.com/users/rbuchberger/following{/other_user}","gists_url":"https://api.github.com/users/rbuchberger/gists{/gist_id}","starred_url":"https://api.github.com/users/rbuchberger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rbuchberger/subscriptions","organizations_url":"https://api.github.com/users/rbuchberger/orgs","repos_url":"https://api.github.com/users/rbuchberger/repos","events_url":"https://api.github.com/users/rbuchberger/events{/privacy}","received_events_url":"https://api.github.com/users/rbuchberger/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-10-20T14:49:43Z","updated_at":"2023-10-21T18:04:43Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello! Thanks for the great library.\r\n\r\nI'm handling schema changes with planetcale's branching & deploy request workflow, but I would like to use drizzle's migration files to handle changes to existing data. I believe the `--custom` flag is meant to handle this use case, but when I run `drizzle-kit generate:mysql --custom` it behaves as it would without the flag. (On the first run it creates a SQL file that builds all my existing tables, and on subsequent runs it exits saying that no changes are required.)\r\n\r\n- Is my understanding correct? Is this the correct use case?\r\n- Is there any reason I can't just delete everything in the generated SQL file and replace it with my own instructions?\r\n- Is this a bug? It seems like a bug.\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/213/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/212","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/212/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/212/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/212/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/212","id":1942632575,"node_id":"I_kwDOHoY85M5zyjh_","number":212,"title":"Transforming const to the configured target environment (\"es5\") is not supported yet","user":{"login":"basarat","id":874898,"node_id":"MDQ6VXNlcjg3NDg5OA==","avatar_url":"https://avatars.githubusercontent.com/u/874898?v=4","gravatar_id":"","url":"https://api.github.com/users/basarat","html_url":"https://github.com/basarat","followers_url":"https://api.github.com/users/basarat/followers","following_url":"https://api.github.com/users/basarat/following{/other_user}","gists_url":"https://api.github.com/users/basarat/gists{/gist_id}","starred_url":"https://api.github.com/users/basarat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/basarat/subscriptions","organizations_url":"https://api.github.com/users/basarat/orgs","repos_url":"https://api.github.com/users/basarat/repos","events_url":"https://api.github.com/users/basarat/events{/privacy}","received_events_url":"https://api.github.com/users/basarat/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-10-13T20:55:43Z","updated_at":"2023-10-16T04:03:45Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Running drizzle-kit on a fresh nextjs typescript repo errors out:\r\n\r\n```sh\r\n> drizzle-kit generate:pg\r\n\r\ndrizzle-kit: v0.19.13\r\ndrizzle-orm: v0.28.6\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/Users/bas/REPOS/booleanart/drizzle.config.ts'\r\nError: Transform failed with 2 errors:\r\n/Users/bas/REPOS/booleanart/src/database/schema.ts:12:7: ERROR: Transforming const to the configured target environment (\"es5\") is not supported yet\r\n/Users/bas/REPOS/booleanart/src/database/schema.ts:33:7: ERROR: Transforming const to the configured target environment (\"es5\") is not supported yet\r\n```\r\n\r\nThis should not happen as target:es5 is the correct one for NextJS (for now). \r\nIssue is esbuild is complaining (while TypeScript will happily transpile target:es5 for const).","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/212/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/211","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/211/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/211/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/211/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/211","id":1939590924,"node_id":"I_kwDOHoY85M5zm88M","number":211,"title":"drizzle-kit check:pg says everything is fine even if the DB is down","user":{"login":"zsolt-dev","id":18726534,"node_id":"MDQ6VXNlcjE4NzI2NTM0","avatar_url":"https://avatars.githubusercontent.com/u/18726534?v=4","gravatar_id":"","url":"https://api.github.com/users/zsolt-dev","html_url":"https://github.com/zsolt-dev","followers_url":"https://api.github.com/users/zsolt-dev/followers","following_url":"https://api.github.com/users/zsolt-dev/following{/other_user}","gists_url":"https://api.github.com/users/zsolt-dev/gists{/gist_id}","starred_url":"https://api.github.com/users/zsolt-dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zsolt-dev/subscriptions","organizations_url":"https://api.github.com/users/zsolt-dev/orgs","repos_url":"https://api.github.com/users/zsolt-dev/repos","events_url":"https://api.github.com/users/zsolt-dev/events{/privacy}","received_events_url":"https://api.github.com/users/zsolt-dev/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-10-12T09:30:00Z","updated_at":"2023-10-12T09:30:00Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nI am using this command to see if I am on the latest migration: `drizzle-kit check:pg`.\r\n\r\nBut just noticed that even if the database is down completely, I am getting: `Everything's fine üê∂üî•`.\r\n\r\nIs there a way to see if my DB schema is valid and with the latest migration applied?\r\n\r\nThank you","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/211/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/211/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/210","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/210/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/210/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/210/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/210","id":1933098572,"node_id":"I_kwDOHoY85M5zOL5M","number":210,"title":"Don't add quotes for interpolated dataTypes. ","user":{"login":"seivan","id":55424,"node_id":"MDQ6VXNlcjU1NDI0","avatar_url":"https://avatars.githubusercontent.com/u/55424?v=4","gravatar_id":"","url":"https://api.github.com/users/seivan","html_url":"https://github.com/seivan","followers_url":"https://api.github.com/users/seivan/followers","following_url":"https://api.github.com/users/seivan/following{/other_user}","gists_url":"https://api.github.com/users/seivan/gists{/gist_id}","starred_url":"https://api.github.com/users/seivan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seivan/subscriptions","organizations_url":"https://api.github.com/users/seivan/orgs","repos_url":"https://api.github.com/users/seivan/repos","events_url":"https://api.github.com/users/seivan/events{/privacy}","received_events_url":"https://api.github.com/users/seivan/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2023-10-09T13:38:50Z","updated_at":"2024-05-03T21:05:58Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Was trying to add a fix for it myself, only to find out the code isn't available, or am I wrong?\r\n\r\nRelated: https://github.com/drizzle-team/drizzle-orm/issues/295#issuecomment-1722510868\r\n\r\nThis kinda breaks custom types completely. ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/210/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/210/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/209","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/209/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/209/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/209/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/209","id":1930022909,"node_id":"I_kwDOHoY85M5zCc_9","number":209,"title":"drizzle studio is not running and it shows the following error","user":{"login":"Ruby-abym","id":144430421,"node_id":"U_kgDOCJvVVQ","avatar_url":"https://avatars.githubusercontent.com/u/144430421?v=4","gravatar_id":"","url":"https://api.github.com/users/Ruby-abym","html_url":"https://github.com/Ruby-abym","followers_url":"https://api.github.com/users/Ruby-abym/followers","following_url":"https://api.github.com/users/Ruby-abym/following{/other_user}","gists_url":"https://api.github.com/users/Ruby-abym/gists{/gist_id}","starred_url":"https://api.github.com/users/Ruby-abym/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ruby-abym/subscriptions","organizations_url":"https://api.github.com/users/Ruby-abym/orgs","repos_url":"https://api.github.com/users/Ruby-abym/repos","events_url":"https://api.github.com/users/Ruby-abym/events{/privacy}","received_events_url":"https://api.github.com/users/Ruby-abym/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-10-06T11:59:47Z","updated_at":"2023-10-07T01:21:59Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The web page at http://0.0.0.0:4983/ might be temporarily down or it may have moved permanently to a new web address.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/209/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/208","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/208/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/208/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/208/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/208","id":1926763576,"node_id":"I_kwDOHoY85M5y2BQ4","number":208,"title":"Drizzle studio is not working","user":{"login":"thegreatestcompany","id":143733398,"node_id":"U_kgDOCJEylg","avatar_url":"https://avatars.githubusercontent.com/u/143733398?v=4","gravatar_id":"","url":"https://api.github.com/users/thegreatestcompany","html_url":"https://github.com/thegreatestcompany","followers_url":"https://api.github.com/users/thegreatestcompany/followers","following_url":"https://api.github.com/users/thegreatestcompany/following{/other_user}","gists_url":"https://api.github.com/users/thegreatestcompany/gists{/gist_id}","starred_url":"https://api.github.com/users/thegreatestcompany/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thegreatestcompany/subscriptions","organizations_url":"https://api.github.com/users/thegreatestcompany/orgs","repos_url":"https://api.github.com/users/thegreatestcompany/repos","events_url":"https://api.github.com/users/thegreatestcompany/events{/privacy}","received_events_url":"https://api.github.com/users/thegreatestcompany/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-10-04T18:31:38Z","updated_at":"2023-10-14T08:15:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Can't fin the URL http://0.0.0.0:4983/ when running Drizzle studio. Here is my drizzle.config.ts :\r\n\r\nimport type { Config } from \"drizzle-kit\";\r\nimport * as dotenv from \"dotenv\";\r\n\r\ndotenv.config({ path: \".env\" });\r\n\r\nexport default {\r\n    driver: \"pg\",\r\n    schema: \"./lib/db/schema.ts\",\r\n    dbCredentials: {\r\n        connectionString: process.env.DATABASE_URL!,\r\n    }\r\n} satisfies Config;","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/208/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/207","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/207/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/207/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/207/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/207","id":1925737927,"node_id":"I_kwDOHoY85M5yyG3H","number":207,"title":"Drizzle push not working.","user":{"login":"Sukrittt","id":106579296,"node_id":"U_kgDOBlpFYA","avatar_url":"https://avatars.githubusercontent.com/u/106579296?v=4","gravatar_id":"","url":"https://api.github.com/users/Sukrittt","html_url":"https://github.com/Sukrittt","followers_url":"https://api.github.com/users/Sukrittt/followers","following_url":"https://api.github.com/users/Sukrittt/following{/other_user}","gists_url":"https://api.github.com/users/Sukrittt/gists{/gist_id}","starred_url":"https://api.github.com/users/Sukrittt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sukrittt/subscriptions","organizations_url":"https://api.github.com/users/Sukrittt/orgs","repos_url":"https://api.github.com/users/Sukrittt/repos","events_url":"https://api.github.com/users/Sukrittt/events{/privacy}","received_events_url":"https://api.github.com/users/Sukrittt/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-10-04T09:03:16Z","updated_at":"2023-10-04T09:03:16Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"# Description\r\nI made changes in my schema.ts and tried to push it to the database.\r\nBut there is a weird sql command that is being displayed even though the changes I have made has nothing to do with the model 'books'.\r\n\r\n![drizzle-error](https://github.com/drizzle-team/drizzle-kit-mirror/assets/106579296/b9a74906-2774-40fc-b423-d64f36aee342)\r\n\r\nThis is what I got after regenerating the sql for the updated schema:\r\n```\r\nALTER TABLE `dues` ADD `transferAccountType` varchar(100);--> statement-breakpoint\r\nALTER TABLE `dues` ADD `transferAccountId` int;\r\n```\r\n\r\nHowever, when I delete my database (PlanetScale) and create a new one and again regenerate the sql for the whole schema and push it. It works.\r\n\r\n\r\n```\r\n// Books schema\r\nexport const books = mysqlTable(\"books\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  userId: varchar(\"userId\", { length: 255 }).notNull(),\r\n  monthIncome: float(\"monthIncome\").notNull(),\r\n  totalSpendings: float(\"totalSpendings\").notNull().default(0),\r\n  createdAt: timestamp(\"createdAt\").notNull().defaultNow(),\r\n  needsPercentage: float(\"needsPercentage\").notNull(),\r\n  wantsPercentage: float(\"wantsPercentage\").notNull(),\r\n  investmentsPercentage: float(\"investmentsPercentage\").notNull(),\r\n});\r\n```\r\n\r\nWould like to know if I am doing something wrong.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/207/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/206","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/206/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/206/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/206/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/206","id":1924538126,"node_id":"I_kwDOHoY85M5yth8O","number":206,"title":"PostgreSQL - Remove DO $$ BEGIN ... END $$; wrapper","user":{"login":"steve-taylor","id":1135589,"node_id":"MDQ6VXNlcjExMzU1ODk=","avatar_url":"https://avatars.githubusercontent.com/u/1135589?v=4","gravatar_id":"","url":"https://api.github.com/users/steve-taylor","html_url":"https://github.com/steve-taylor","followers_url":"https://api.github.com/users/steve-taylor/followers","following_url":"https://api.github.com/users/steve-taylor/following{/other_user}","gists_url":"https://api.github.com/users/steve-taylor/gists{/gist_id}","starred_url":"https://api.github.com/users/steve-taylor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steve-taylor/subscriptions","organizations_url":"https://api.github.com/users/steve-taylor/orgs","repos_url":"https://api.github.com/users/steve-taylor/repos","events_url":"https://api.github.com/users/steve-taylor/events{/privacy}","received_events_url":"https://api.github.com/users/steve-taylor/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-10-03T16:43:17Z","updated_at":"2023-10-03T16:44:28Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"In my drizzle-kit generated migration file, this type of statement fails, stating that the target table (`\"article\"` in this case) doesn't exist. However, the table creation statement exists well above this statement.\r\n\r\n```sql\r\nDO $$ BEGIN\r\n ALTER TABLE \"article_cards_block\" ADD CONSTRAINT \"article_cards_block_article_id_article_id_fk\" FOREIGN KEY (\"article_id\") REFERENCES \"article\"(\"id\") ON DELETE no action ON UPDATE no action;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```\r\n\r\nI tried removing all the `DO $$ BEGIN ... END $$;` wrappers around the `ALTER TABLE` statements that create foreign keys. The migration script completed without any errors, as opposed to the weird state I'd otherwise be left with, where only a subset of tables are created.\r\n\r\nIn the next version of drizzle-kit, please stop generating these `DO $$ BEGIN ... END $$;` wrappers around foreign key creation statements.\r\n\r\n**I'd be more than happy to create a pull request if drizzle-kit was open source.**","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/206/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/205","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/205/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/205/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/205/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/205","id":1921153596,"node_id":"I_kwDOHoY85M5ygno8","number":205,"title":"Mysql upgrade for bun","user":{"login":"Djboy08","id":34119605,"node_id":"MDQ6VXNlcjM0MTE5NjA1","avatar_url":"https://avatars.githubusercontent.com/u/34119605?v=4","gravatar_id":"","url":"https://api.github.com/users/Djboy08","html_url":"https://github.com/Djboy08","followers_url":"https://api.github.com/users/Djboy08/followers","following_url":"https://api.github.com/users/Djboy08/following{/other_user}","gists_url":"https://api.github.com/users/Djboy08/gists{/gist_id}","starred_url":"https://api.github.com/users/Djboy08/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Djboy08/subscriptions","organizations_url":"https://api.github.com/users/Djboy08/orgs","repos_url":"https://api.github.com/users/Djboy08/repos","events_url":"https://api.github.com/users/Djboy08/events{/privacy}","received_events_url":"https://api.github.com/users/Djboy08/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-10-02T02:42:35Z","updated_at":"2023-10-02T02:42:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Drizzle-kit does not function as expected due to using the older version of node-mysql that does not have bun fixes. \r\n\r\nA upgrade is needed.\r\n\r\nSee this issue: https://github.com/sidorares/node-mysql2/issues/2227","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/205/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/204","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/204/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/204/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/204/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/204","id":1920652125,"node_id":"I_kwDOHoY85M5yetNd","number":204,"title":"[BUG]: drizzle-kit fails to generate a PRIMARY key even though the id column has primaryKey()","user":{"login":"callmeberzerker","id":1324069,"node_id":"MDQ6VXNlcjEzMjQwNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1324069?v=4","gravatar_id":"","url":"https://api.github.com/users/callmeberzerker","html_url":"https://github.com/callmeberzerker","followers_url":"https://api.github.com/users/callmeberzerker/followers","following_url":"https://api.github.com/users/callmeberzerker/following{/other_user}","gists_url":"https://api.github.com/users/callmeberzerker/gists{/gist_id}","starred_url":"https://api.github.com/users/callmeberzerker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/callmeberzerker/subscriptions","organizations_url":"https://api.github.com/users/callmeberzerker/orgs","repos_url":"https://api.github.com/users/callmeberzerker/repos","events_url":"https://api.github.com/users/callmeberzerker/events{/privacy}","received_events_url":"https://api.github.com/users/callmeberzerker/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-10-01T08:58:31Z","updated_at":"2023-10-01T09:18:33Z","closed_at":"2023-10-01T09:18:33Z","author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\r\n\r\n0.28.6\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.9.13\r\n\r\n### Describe the Bug\r\n\r\nHave the following two files.\r\n\r\n```ts\r\n// db/auth-user.ts\r\nimport { auditAwarePartial } from './shared/audit-aware';\r\n\r\nexport const authUser = pgTable(\r\n    'auth_user',\r\n    {\r\n        id: varchar('id', {\r\n            length: 15 // change this when using custom user ids\r\n        }).primaryKey(),\r\n        // other user attributes\r\n        email: varchar('email', {\r\n            length: 255\r\n        }).notNull(),\r\n        roles: varchar('roles', { length: 50, enum: ['ADMIN', 'USER'] })\r\n            .array()\r\n            .notNull(),\r\n        emailVerified: boolean('email_verified').notNull().default(false),\r\n        ...auditAwarePartial\r\n    },\r\n    (table) => ({\r\n        emailIdx: uniqueIndex('email_idx').on(table.email)\r\n    })\r\n);\r\n\r\n```\r\n\r\n```ts\r\n// ./shared/audit-aware.ts\r\n\r\nexport const auditAwarePartial = {\r\n    ...createdAtPartial,\r\n    updatedAt: date('updated_at', { mode: 'date' }).notNull(),\r\n    updatedBy: varchar('id', {\r\n        length: 15 // change this when using custom user ids\r\n    }).notNull()\r\n} as const;\r\n\r\n```\r\n\r\nWhen you run `drizzle-kit generate:pg` (or w/e db) -> you will see that the definition for the table `auth_user` is missing `PRIMARY` for the `id` column. Alternatively if you remove the spread of `auditAwarePartial` (or simply move it to the top of the table) -> then the `PRIMARY` keyword will be present in the definition in the `id` column.\r\n\r\n### Expected behavior\r\n\r\n`PRIMARY` keyword should always be present.\r\n\r\n### Environment & setup\r\n\r\nNothing special.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/204/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/203","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/203/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/203/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/203/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/203","id":1920060692,"node_id":"I_kwDOHoY85M5ycc0U","number":203,"title":"drizzle studio not working well with turso dev","user":{"login":"numso","id":1761757,"node_id":"MDQ6VXNlcjE3NjE3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/1761757?v=4","gravatar_id":"","url":"https://api.github.com/users/numso","html_url":"https://github.com/numso","followers_url":"https://api.github.com/users/numso/followers","following_url":"https://api.github.com/users/numso/following{/other_user}","gists_url":"https://api.github.com/users/numso/gists{/gist_id}","starred_url":"https://api.github.com/users/numso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/numso/subscriptions","organizations_url":"https://api.github.com/users/numso/orgs","repos_url":"https://api.github.com/users/numso/repos","events_url":"https://api.github.com/users/numso/events{/privacy}","received_events_url":"https://api.github.com/users/numso/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-09-30T01:53:02Z","updated_at":"2023-09-30T01:53:02Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Great work on drizzle. I've been loving it so far!\r\n\r\nIf I create 2 or more tables in turso then drizzle studio will intermittently fail to load. Drizzle studio loads correctly about half the time, and errors out the other half. I've had this happen with empty tables as well as ones that have ~10 rows each. I apologize if this is the wrong place to report this; both turso and drizzle are fairly new to me.\r\n\r\nTo reproduce, run `turso dev` in one terminal and `npx drizzle-kit push:sqlite` followed by `npx drizzle-kit studio --verbose` in another. Then open up `http://localhost:4983` and refresh a bunch of times.\r\n\r\n## Errors\r\n\r\nError from drizzle studio:\r\n```\r\nQuery: select count(*) from \"a\"\r\nQuery: select count(*) from \"b\"\r\nLibsqlError: SERVER_ERROR: Server returned HTTP status 500\r\n    at #send (/my-project/node_modules/drizzle-kit/index.cjs:51819:17)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async HttpClient.execute (/my-project/node_modules/drizzle-kit/index.cjs:51726:28)\r\n    at PreparedQuery.all (/my-project/node_modules/src/libsql/session.ts:223:16)\r\n    at async /my-project/node_modules/@drizzle-team/studio/index.cjs:50986:26\r\n    at async Promise.all (index 0)\r\n    at async Object.<anonymous> (/my-project/node_modules/@drizzle-team/studio/index.cjs:51200:17) {\r\n  code: 'SERVER_ERROR',\r\n  [cause]: undefined\r\n}\r\n```\r\n\r\nError from turso:\r\n```\r\n2023-09-30T01:37:54.415562Z ERROR sqld::error: HTTP API: 500 Internal Server Error, {\"error\":\"Internal Error: `Error code 5: The database file is locked`\"}\r\n2023-09-30T01:37:54.415622Z ERROR tower_http::trace::on_failure: response failed classification=Status code: 500 Internal Server Error latency=1 ms\r\n```\r\n\r\n## Files\r\n\r\ndrizzle.config.ts\r\n```\r\nimport type { Config } from 'drizzle-kit'\r\nexport default {\r\n  schema: './schema.ts',\r\n  out: './migrations',\r\n  driver: 'turso',\r\n  dbCredentials: { url: 'http://127.0.0.1:8080' }\r\n} satisfies Config\r\n```\r\n\r\nschema.ts\r\n```\r\nimport { integer, sqliteTable } from 'drizzle-orm/sqlite-core'\r\nexport const a = sqliteTable('a', { id: integer('id') })\r\nexport const b = sqliteTable('b', { id: integer('id') })\r\n```\r\n\r\n## Versions\r\n\r\n@libsql/client: 0.3.5\r\ndrizzle-orm: 0.28.6\r\ndrizzle-kit: 0.19.13\r\nbetter-sqlite3: 8.6.0\r\n\r\nturso: v0.85.3\r\n\r\nnode: v20.7.0\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/203/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/202","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/202/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/202/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/202/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/202","id":1918096920,"node_id":"I_kwDOHoY85M5yU9YY","number":202,"title":"[FEATURE]: drizzle-kit introspect should generate relation in generated schema.ts","user":{"login":"conanak99","id":6670026,"node_id":"MDQ6VXNlcjY2NzAwMjY=","avatar_url":"https://avatars.githubusercontent.com/u/6670026?v=4","gravatar_id":"","url":"https://api.github.com/users/conanak99","html_url":"https://github.com/conanak99","followers_url":"https://api.github.com/users/conanak99/followers","following_url":"https://api.github.com/users/conanak99/following{/other_user}","gists_url":"https://api.github.com/users/conanak99/gists{/gist_id}","starred_url":"https://api.github.com/users/conanak99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/conanak99/subscriptions","organizations_url":"https://api.github.com/users/conanak99/orgs","repos_url":"https://api.github.com/users/conanak99/repos","events_url":"https://api.github.com/users/conanak99/events{/privacy}","received_events_url":"https://api.github.com/users/conanak99/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2023-09-28T18:57:35Z","updated_at":"2024-04-18T18:36:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Describe what you want\r\n\r\nCurrently, running `drizzle-kit introspect:{dialect}` command lets you pull DDL from an existing database and generate `schema.ts`.\r\n\r\nHowever, the generated `schema.ts` only contains the declaration for each table. \r\nExample:\r\n```typescript\r\nimport { pgTable, serial, text, integer, jsonb } from 'drizzle-orm/pg-core';\r\nimport { relations } from 'drizzle-orm';\r\n \r\nexport const users = pgTable('users', {\r\n\tid: serial('id').primaryKey(),\r\n\tname: text('name'),\r\n});\r\n \r\nexport const profileInfo = pgTable('profile_info', {\r\n\tid: serial('id').primaryKey(),\r\n\tuserId: integer(\"user_id\").references(() => users.id),\r\n\tmetadata: jsonb(\"metadata\"),\r\n});\r\n\r\n// Missing the relation between users and profileInfo. \r\n// Even though drizzle generated the reference correctly.\r\n```\r\n\r\nIt would be useful if drizzle-kit could infer and generate the relations based on foreign key references. This approach is used by other frameworks\r\nhttps://www.prisma.io/docs/concepts/components/introspection#relations\r\n\r\nThe generated `schema.ts` should look like this.\r\n\r\n```typescript\r\nimport { pgTable, serial, text, integer, jsonb } from 'drizzle-orm/pg-core';\r\nimport { relations } from 'drizzle-orm';\r\n \r\nexport const users = pgTable('users', {\r\n\tid: serial('id').primaryKey(),\r\n\tname: text('name'),\r\n});\r\n  \r\nexport const profileInfo = pgTable('profile_info', {\r\n\tid: serial('id').primaryKey(),\r\n\tuserId: integer(\"user_id\").references(() => users.id),\r\n\tmetadata: jsonb(\"metadata\"),\r\n});\r\n\r\n// Auto generated the relation\r\nexport const usersProfileInfoRelations = relations(users, ({ one }) => ({\r\n\tprofileInfo: one(profileInfo, {\r\n\t\tfields: [users.id],\r\n\t\treferences: [profileInfo.userId],\r\n\t}),\r\n}));\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/202/reactions","total_count":23,"+1":21,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/202/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/201","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/201/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/201/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/201/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/201","id":1915616621,"node_id":"I_kwDOHoY85M5yLf1t","number":201,"title":"[BUG]: composite primary keys on planetscale are always recreated","user":{"login":"mlecoq","id":3649784,"node_id":"MDQ6VXNlcjM2NDk3ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/3649784?v=4","gravatar_id":"","url":"https://api.github.com/users/mlecoq","html_url":"https://github.com/mlecoq","followers_url":"https://api.github.com/users/mlecoq/followers","following_url":"https://api.github.com/users/mlecoq/following{/other_user}","gists_url":"https://api.github.com/users/mlecoq/gists{/gist_id}","starred_url":"https://api.github.com/users/mlecoq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mlecoq/subscriptions","organizations_url":"https://api.github.com/users/mlecoq/orgs","repos_url":"https://api.github.com/users/mlecoq/repos","events_url":"https://api.github.com/users/mlecoq/events{/privacy}","received_events_url":"https://api.github.com/users/mlecoq/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-09-27T13:39:44Z","updated_at":"2023-09-27T13:39:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\r\n\r\n0.28.6\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.19.13\r\n\r\n### Describe the Bug\r\n\r\nI have a table with a composite primary on a planetscale database\r\n\r\n```\r\n CREATE TABLE `Follow` (\r\n    `followerId` char(24) NOT NULL,\r\n    `followingId` char(24) NOT NULL,\r\n    `createdAt` datetime(3) NOT NULL DEFAULT current_timestamp(3),\r\n    PRIMARY KEY (`followerId`, `followingId`),\r\n    KEY `Follow_followingId_idx` (`followingId`),\r\n    KEY `Follow_followerId_idx` (`followerId`)\r\n) ENGINE InnoDB,\r\n  CHARSET utf8mb4,\r\n  COLLATE utf8mb4_0900_ai_ci; \r\n```\r\n\r\nUsing introspect I have \r\n\r\n```\r\n --> statement-breakpoint\r\nCREATE TABLE `Follow` (\r\n    `followerId` char(24) NOT NULL,\r\n    `followingId` char(24) NOT NULL,\r\n    `createdAt` datetime(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),\r\n    CONSTRAINT `Follow_id` PRIMARY KEY(`id`)\r\n);\r\n```\r\n\r\nso drizzle sees a migration (generating migration file): \r\n\r\n```\r\nALTER TABLE `Follow` DROP PRIMARY KEY;--> statement-breakpoint\r\nALTER TABLE `Follow` ADD PRIMARY KEY(`followerId`,`followingId`);--> statement-breakpoint \r\n```\r\n\r\n\r\nLooking at made queries by drizzle-kit, I have found that this query causes the issue \r\n\r\n```\r\nconst tablePks = await db.execute(\r\n        `SELECT table_name, column_name\r\n  FROM information_schema.table_constraints t\r\n  LEFT JOIN information_schema.key_column_usage k\r\n  USING(constraint_name,table_schema,table_name)\r\n  WHERE t.constraint_type='PRIMARY KEY'\r\n      and table_name != '__drizzle_migrations'\r\n      AND t.table_schema = ?`,\r\n        [inputSchema]\r\n      );\r\n```\r\n\r\n\r\nreplacing left join with inner join fixes this issue\r\n\r\n```\r\nconst tablePks = await db.execute(\r\n        `SELECT table_name, column_name\r\n  FROM information_schema.table_constraints t\r\n  INNER JOIN information_schema.key_column_usage k\r\n  USING(constraint_name,table_schema,table_name)\r\n  WHERE t.constraint_type='PRIMARY KEY'\r\n      and table_name != '__drizzle_migrations'\r\n      AND t.table_schema = ?`,\r\n        [inputSchema]\r\n      );\r\n```\r\n\r\n\r\n### Expected behavior\r\n\r\nIntrospect gives corresponding schema on composite primary keys\r\n\r\n### Environment & setup\r\n\r\nI am on planetscale and I run drizzle-kit `introspect` than `generate:mysql` (I except to have no migration but I have one on all composite primary keys)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/201/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/201/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/200","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/200/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/200/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/200/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/200","id":1913435808,"node_id":"I_kwDOHoY85M5yDLag","number":200,"title":"`driver: 'postgres'`","user":{"login":"mkantor","id":35091,"node_id":"MDQ6VXNlcjM1MDkx","avatar_url":"https://avatars.githubusercontent.com/u/35091?v=4","gravatar_id":"","url":"https://api.github.com/users/mkantor","html_url":"https://github.com/mkantor","followers_url":"https://api.github.com/users/mkantor/followers","following_url":"https://api.github.com/users/mkantor/following{/other_user}","gists_url":"https://api.github.com/users/mkantor/gists{/gist_id}","starred_url":"https://api.github.com/users/mkantor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkantor/subscriptions","organizations_url":"https://api.github.com/users/mkantor/orgs","repos_url":"https://api.github.com/users/mkantor/repos","events_url":"https://api.github.com/users/mkantor/events{/privacy}","received_events_url":"https://api.github.com/users/mkantor/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-09-26T12:45:31Z","updated_at":"2023-10-26T14:49:38Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Drizzle ORM supports using [Postgres.js](https://github.com/porsager/postgres) as a driver, but it doesn't seem like Drizzle Kit does. It would be great if I could avoid installing `pg` separately just for Drizzle Kit/Studio.\r\n\r\nBy the way, great work on Drizzle. It's been a joy to use so far.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/200/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/200/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/199","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/199/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/199/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/199/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/199","id":1911241532,"node_id":"I_kwDOHoY85M5x6zs8","number":199,"title":"Bun support with `--bun`","user":{"login":"mikerockett","id":4586280,"node_id":"MDQ6VXNlcjQ1ODYyODA=","avatar_url":"https://avatars.githubusercontent.com/u/4586280?v=4","gravatar_id":"","url":"https://api.github.com/users/mikerockett","html_url":"https://github.com/mikerockett","followers_url":"https://api.github.com/users/mikerockett/followers","following_url":"https://api.github.com/users/mikerockett/following{/other_user}","gists_url":"https://api.github.com/users/mikerockett/gists{/gist_id}","starred_url":"https://api.github.com/users/mikerockett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikerockett/subscriptions","organizations_url":"https://api.github.com/users/mikerockett/orgs","repos_url":"https://api.github.com/users/mikerockett/repos","events_url":"https://api.github.com/users/mikerockett/events{/privacy}","received_events_url":"https://api.github.com/users/mikerockett/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2023-09-25T11:08:15Z","updated_at":"2024-03-14T21:33:06Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I am trying to execute drizzle-kit commands using bun (instead of passing it off to `node` by way of the default shebang).\r\n\r\nFor example:\r\n\r\n```\r\nbun run --bun drizzle-kit generate:pg\r\n```\r\n\r\nor via `package.json`:\r\n\r\n```jsonc\r\n{\r\n  \"scripts\": {\r\n    \"db:generate\": \"bun run --bun drizzle-kit generate:pg\"\r\n    // $ bun run db:generate\r\n  }\r\n}\r\n```\r\n\r\nWhen I do this, the command executes, but it cannot see my schema files. If I generated previously with node (ie, via the default shebang), and then with bun, it would generate a migration that drops all tables.\r\n\r\nOutput of the above command is always as if no schema files were present.\r\n\r\n### Drizzle Kit Config\r\n\r\n```ts\r\nimport type { Config } from 'drizzle-kit'\r\n\r\nexport default {\r\n  driver: 'pg',\r\n  dbCredentials: { connectionString: process.env.DATABASE_URL! },\r\n  schema: './lib/db/schema/*.ts',\r\n  out: './lib/db/migrations',\r\n  introspect: { casing: 'preserve' },\r\n  schemaFilter: ['public'],\r\n  strict: true,\r\n  verbose: true,\r\n} satisfies Config\r\n\r\n```\r\n\r\nCould it be because I am globbing the schema? Or, am I missing something?\r\n\r\n### Versions:\r\n\r\n```shell\r\n$ bun pm ls | grep drizzle\r\n[0.03ms] \".env\"\r\n‚îú‚îÄ‚îÄ drizzle-kit@0.19.13\r\n‚îú‚îÄ‚îÄ drizzle-orm@0.28.6\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/199/reactions","total_count":11,"+1":11,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/199/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/198","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/198/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/198/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/198/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/198","id":1910986019,"node_id":"I_kwDOHoY85M5x51Uj","number":198,"title":"Allow skipping the confirmation prompt for the `drizzle-kit push` command","user":{"login":"myftija","id":19681398,"node_id":"MDQ6VXNlcjE5NjgxMzk4","avatar_url":"https://avatars.githubusercontent.com/u/19681398?v=4","gravatar_id":"","url":"https://api.github.com/users/myftija","html_url":"https://github.com/myftija","followers_url":"https://api.github.com/users/myftija/followers","following_url":"https://api.github.com/users/myftija/following{/other_user}","gists_url":"https://api.github.com/users/myftija/gists{/gist_id}","starred_url":"https://api.github.com/users/myftija/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myftija/subscriptions","organizations_url":"https://api.github.com/users/myftija/orgs","repos_url":"https://api.github.com/users/myftija/repos","events_url":"https://api.github.com/users/myftija/events{/privacy}","received_events_url":"https://api.github.com/users/myftija/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-09-25T08:44:06Z","updated_at":"2023-10-08T17:10:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"There is currently a `--strict` flag to always prompt for confirmation. It would be useful to also have a flag to always skip the confirmation prompt for cases where interaction is not viable. E.g., cleaning up a local DB in the CI after integration tests have been run.\r\n\r\nMore generally, it would also be useful to have a top level configuration key to disable interactive mode across all commands. Is this something you would consider adding?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/198/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/198/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/197","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/197/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/197/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/197/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/197","id":1910140950,"node_id":"I_kwDOHoY85M5x2nAW","number":197,"title":"Error: type \"serial\" does not exist","user":{"login":"MuhammadSharyar","id":50079196,"node_id":"MDQ6VXNlcjUwMDc5MTk2","avatar_url":"https://avatars.githubusercontent.com/u/50079196?v=4","gravatar_id":"","url":"https://api.github.com/users/MuhammadSharyar","html_url":"https://github.com/MuhammadSharyar","followers_url":"https://api.github.com/users/MuhammadSharyar/followers","following_url":"https://api.github.com/users/MuhammadSharyar/following{/other_user}","gists_url":"https://api.github.com/users/MuhammadSharyar/gists{/gist_id}","starred_url":"https://api.github.com/users/MuhammadSharyar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MuhammadSharyar/subscriptions","organizations_url":"https://api.github.com/users/MuhammadSharyar/orgs","repos_url":"https://api.github.com/users/MuhammadSharyar/repos","events_url":"https://api.github.com/users/MuhammadSharyar/events{/privacy}","received_events_url":"https://api.github.com/users/MuhammadSharyar/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-09-24T07:44:56Z","updated_at":"2024-05-30T23:16:59Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When I push my schema using \"npx drizzle-kit push:pg\" it throws this error\r\nerror: type \"serial\" does not exist\r\nseverity: 'ERROR',\r\ncode: '42704',\r\n\r\n### My Schemas\r\nimport { pgEnum, pgTable, text, serial, integer, timestamp, varchar } from \"drizzle-orm/pg-core\";\r\n\r\nexport const userSystemEnum = pgEnum(\"user_system_enum\", [\"user\", \"system\"]);\r\n\r\nexport const chats = pgTable(\"chats\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  pdfName: text(\"pdf_name\").notNull(),\r\n  pdfUrl: text(\"pdf_url\").notNull(),\r\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\r\n  userId: varchar(\"user_id\", { length: 256 }).notNull(),\r\n  fileKey: text(\"file_key\").notNull(),\r\n});\r\n\r\nexport const messages = pgTable(\"messages\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  chatId: integer(\"chat_id\")\r\n    .references(() => chats.id)\r\n    .notNull(),\r\n  content: text(\"content\").notNull(),\r\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\r\n  role: userSystemEnum(\"role\").notNull(),\r\n});\r\n\r\n### My drizzle.config.ts file\r\n\r\nimport type { Config } from \"drizzle-kit\";\r\nimport * as dotenv from \"dotenv\";\r\ndotenv.config({ path: \".env\" });\r\n\r\nexport default {\r\n  driver: \"pg\",\r\n  schema: \"./src/lib/db/schema.ts\",\r\n  dbCredentials: { connectionString: process.env.DATABASE_URL! },\r\n} satisfies Config;\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/197/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/197/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/196","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/196/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/196/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/196/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/196","id":1899851162,"node_id":"I_kwDOHoY85M5xPW2a","number":196,"title":"Purpose of `_meta` directory","user":{"login":"septatrix","id":24257556,"node_id":"MDQ6VXNlcjI0MjU3NTU2","avatar_url":"https://avatars.githubusercontent.com/u/24257556?v=4","gravatar_id":"","url":"https://api.github.com/users/septatrix","html_url":"https://github.com/septatrix","followers_url":"https://api.github.com/users/septatrix/followers","following_url":"https://api.github.com/users/septatrix/following{/other_user}","gists_url":"https://api.github.com/users/septatrix/gists{/gist_id}","starred_url":"https://api.github.com/users/septatrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/septatrix/subscriptions","organizations_url":"https://api.github.com/users/septatrix/orgs","repos_url":"https://api.github.com/users/septatrix/repos","events_url":"https://api.github.com/users/septatrix/events{/privacy}","received_events_url":"https://api.github.com/users/septatrix/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-09-17T17:08:39Z","updated_at":"2024-02-09T19:04:46Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"It is unclear what the `_meta` directory is used for as there is no documentation for it (and the source code is not available yet, see https://github.com/drizzle-team/drizzle-orm/issues/580). Currently I wonder if it has to be checked in to git, and under what circumstances it is required to read from as well as write to this directory.\r\n\r\nThis would influence how drizzle migrations can/will be deployed on production: Does have to be part of the deployed code, can it be non-existent, is it only needed for ephemeral data or does it have to persist (i.e. in docker this would have to be a mounted volume), is it sufficient to only read from there (i.e. in docker this would allow increased security by marking the filesystem as readonly) etc...","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/196/reactions","total_count":10,"+1":10,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/196/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/195","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/195/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/195/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/195/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/195","id":1899677088,"node_id":"I_kwDOHoY85M5xOsWg","number":195,"title":"This site can‚Äôt be reached","user":{"login":"gaonkarBhai","id":118743210,"node_id":"U_kgDOBxPgqg","avatar_url":"https://avatars.githubusercontent.com/u/118743210?v=4","gravatar_id":"","url":"https://api.github.com/users/gaonkarBhai","html_url":"https://github.com/gaonkarBhai","followers_url":"https://api.github.com/users/gaonkarBhai/followers","following_url":"https://api.github.com/users/gaonkarBhai/following{/other_user}","gists_url":"https://api.github.com/users/gaonkarBhai/gists{/gist_id}","starred_url":"https://api.github.com/users/gaonkarBhai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaonkarBhai/subscriptions","organizations_url":"https://api.github.com/users/gaonkarBhai/orgs","repos_url":"https://api.github.com/users/gaonkarBhai/repos","events_url":"https://api.github.com/users/gaonkarBhai/events{/privacy}","received_events_url":"https://api.github.com/users/gaonkarBhai/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-09-17T06:37:49Z","updated_at":"2023-09-17T18:51:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I run this command `npx drizzle-kit studio `\r\nit showing like this\r\n`No config path provided, using default path\r\nReading config file 'A:\\Mern Stack\\Next js\\kanoon-ai\\drizzle.config.ts'\r\n\r\n[Warning] Drizzle Studio is currently in Beta. If you find anything that is not working as expected or should be improved, feel free to create an issue on GitHub: https://github.com/drizzle-team/drizzle-kit-mirror/issues/new or write to us on Discord: https://discord.gg/WcRKz2FFxN\r\n\r\nDrizzle Studio is up and running on http://0.0.0.0:4983`\r\n\r\nbut chrome is showing :\r\n\r\n- This site can‚Äôt be reachedThe webpage at http://0.0.0.0:4983/ might be temporarily down or it may have moved permanently to a new web address.\r\nERR_ADDRESS_INVALID\r\n\r\n\r\nmy drazzile.config.ts file:\r\n\r\n`import type { Config } from \"drizzle-kit\";\r\nimport * as dotenv from \"dotenv\";\r\ndotenv.config({ path: \".env\" });\r\n\r\nexport default {\r\n  driver: \"pg\",\r\n  schema: \"./src/lib/db/schema.ts\",\r\n  dbCredentials: {\r\n    connectionString: process.env.DATABASE_URL!,\r\n  },\r\n} satisfies Config;\r\n`\r\n\r\nplease can anyone help to get rid out of this .....\r\nit is urgent üò•üò≠","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/195/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/194","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/194/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/194/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/194/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/194","id":1898472735,"node_id":"I_kwDOHoY85M5xKGUf","number":194,"title":"[Studio] Multiline text","user":{"login":"typeofweb","id":1338731,"node_id":"MDQ6VXNlcjEzMzg3MzE=","avatar_url":"https://avatars.githubusercontent.com/u/1338731?v=4","gravatar_id":"","url":"https://api.github.com/users/typeofweb","html_url":"https://github.com/typeofweb","followers_url":"https://api.github.com/users/typeofweb/followers","following_url":"https://api.github.com/users/typeofweb/following{/other_user}","gists_url":"https://api.github.com/users/typeofweb/gists{/gist_id}","starred_url":"https://api.github.com/users/typeofweb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/typeofweb/subscriptions","organizations_url":"https://api.github.com/users/typeofweb/orgs","repos_url":"https://api.github.com/users/typeofweb/repos","events_url":"https://api.github.com/users/typeofweb/events{/privacy}","received_events_url":"https://api.github.com/users/typeofweb/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-09-15T13:48:36Z","updated_at":"2023-09-15T13:48:36Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Multiline text cannot be pasted or copied into columns using Drizzle Studio.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/194/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/193","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/193/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/193/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/193/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/193","id":1895520319,"node_id":"I_kwDOHoY85M5w-1g_","number":193,"title":"[BUG]: generate:pg ignores all but one onDelete: 'cascade' modification per table","user":{"login":"Geomitron","id":22552797,"node_id":"MDQ6VXNlcjIyNTUyNzk3","avatar_url":"https://avatars.githubusercontent.com/u/22552797?v=4","gravatar_id":"","url":"https://api.github.com/users/Geomitron","html_url":"https://github.com/Geomitron","followers_url":"https://api.github.com/users/Geomitron/followers","following_url":"https://api.github.com/users/Geomitron/following{/other_user}","gists_url":"https://api.github.com/users/Geomitron/gists{/gist_id}","starred_url":"https://api.github.com/users/Geomitron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Geomitron/subscriptions","organizations_url":"https://api.github.com/users/Geomitron/orgs","repos_url":"https://api.github.com/users/Geomitron/repos","events_url":"https://api.github.com/users/Geomitron/events{/privacy}","received_events_url":"https://api.github.com/users/Geomitron/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-09-14T02:03:29Z","updated_at":"2024-01-19T14:38:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of drizzle-orm are you using?\r\n0.28.5\r\n\r\n### What version of drizzle-kit are you using?\r\n0.19.13\r\n\r\n### Describe the Bug\r\nI'm using postgresql, and this is a table in my schema:\r\n\r\n```ts\r\nexport const chartDriveCharts = pgTable('chartDriveCharts', {\r\n\tid: serial('id').primaryKey(),\r\n\tdriveChartPath: text('driveChartPath'),\r\n\tchartId: integer('chartId').notNull().references(() => charts.id),\r\n\tdriveChartId: integer('driveChartId').notNull().references(() => driveCharts.id),\r\n})\r\n```\r\n\r\nI modified this table to add `{ onDelete: 'cascade' }` to both `chartId` and `driveChartId`.\r\nI ran `drizzle-kit generate:pg`.\r\nThe generated migration SQL looks like this:\r\n```sql\r\nALTER TABLE \"chartDriveCharts\" DROP CONSTRAINT \"chartDriveCharts_chartId_charts_id_fk\";\r\n--> statement-breakpoint\r\nDO $$ BEGIN\r\n ALTER TABLE \"chartDriveCharts\" ADD CONSTRAINT \"chartDriveCharts_chartId_charts_id_fk\" FOREIGN KEY (\"chartId\") REFERENCES \"charts\"(\"id\") ON DELETE cascade ON UPDATE no action;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```\r\n\r\nThe `{ onDelete: 'cascade' }` was only added to the first modified column, and it should have applied to both.\r\nNote: I added this to all the other foreign keys in my schema. All the other tables with only one foreign key generated the correct SQL. The tables with two foreign keys only generated SQL for one of the columns.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/193/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/193/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/192","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/192/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/192/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/192/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/192","id":1893083455,"node_id":"I_kwDOHoY85M5w1ik_","number":192,"title":"pg:push pg:up commands don't work at all no error is reported.","user":{"login":"DanielSharp01","id":9963251,"node_id":"MDQ6VXNlcjk5NjMyNTE=","avatar_url":"https://avatars.githubusercontent.com/u/9963251?v=4","gravatar_id":"","url":"https://api.github.com/users/DanielSharp01","html_url":"https://github.com/DanielSharp01","followers_url":"https://api.github.com/users/DanielSharp01/followers","following_url":"https://api.github.com/users/DanielSharp01/following{/other_user}","gists_url":"https://api.github.com/users/DanielSharp01/gists{/gist_id}","starred_url":"https://api.github.com/users/DanielSharp01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanielSharp01/subscriptions","organizations_url":"https://api.github.com/users/DanielSharp01/orgs","repos_url":"https://api.github.com/users/DanielSharp01/repos","events_url":"https://api.github.com/users/DanielSharp01/events{/privacy}","received_events_url":"https://api.github.com/users/DanielSharp01/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-09-12T18:56:16Z","updated_at":"2023-09-12T21:34:43Z","closed_at":"2023-09-12T21:34:42Z","author_association":"NONE","active_lock_reason":null,"body":"I'm puzzled because I think I'm doing everything right (according to documentation anyway) and can't find any info on this whatsoever. Is this feature supposed to work yet?\r\n\r\nFor context here's an example I tried to work with\r\n\r\ndrizzle.config.ts\r\n```ts\r\nimport type { Config } from \"drizzle-kit\";\r\n\r\nexport default {\r\n  schema: \"./src/schema.ts\",\r\n  out: \"./drizzle\",\r\n  driver: \"pg\",\r\n  dbCredentials: {\r\n    connectionString: \"postgresql://postgres:postgres@127.0.0.1:5432/postgres\",\r\n  },\r\n} satisfies Config;\r\n```\r\n\r\n./src/schema.ts\r\n```ts\r\nexport const exampleSchema = pgSchema(\"example\");\r\n```\r\n\r\nIf you run push it just happily says:\r\n\r\n```\r\nbunx drizzle-kit push:pg\r\ndrizzle-kit: v0.19.13\r\ndrizzle-orm: v0.28.6\r\n\r\nNo config path provided, using default path\r\nReading config file '/home/danieldog/personal/bun/app/drizzle.config.ts'\r\n[i] No changes detected\r\n```\r\n\r\nIt can generate files fine. with `bunx drizzle-kit generate:pg`\r\n\r\n```sql\r\nCREATE SCHEMA \"example\";\r\n```\r\n\r\nBut it can't apply it with up either.\r\n\r\n```\r\nbunx drizzle-kit up:pg\r\ndrizzle-kit: v0.19.13\r\ndrizzle-orm: v0.28.6\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/home/danieldog/personal/bun/app/drizzle.config.ts'\r\nEverything's fine üê∂üî•\r\n```\r\n\r\nI used bun but this should not be bun specific as npx run also does not work.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/192/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/191","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/191/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/191/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/191/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/191","id":1892666124,"node_id":"I_kwDOHoY85M5wz8sM","number":191,"title":"address error. drizzle-kit studio not opening in chrome","user":{"login":"mxnan","id":128995981,"node_id":"U_kgDOB7BSjQ","avatar_url":"https://avatars.githubusercontent.com/u/128995981?v=4","gravatar_id":"","url":"https://api.github.com/users/mxnan","html_url":"https://github.com/mxnan","followers_url":"https://api.github.com/users/mxnan/followers","following_url":"https://api.github.com/users/mxnan/following{/other_user}","gists_url":"https://api.github.com/users/mxnan/gists{/gist_id}","starred_url":"https://api.github.com/users/mxnan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mxnan/subscriptions","organizations_url":"https://api.github.com/users/mxnan/orgs","repos_url":"https://api.github.com/users/mxnan/repos","events_url":"https://api.github.com/users/mxnan/events{/privacy}","received_events_url":"https://api.github.com/users/mxnan/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-09-12T14:37:53Z","updated_at":"2023-09-16T06:02:03Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"terminal shows no error, but npx drizzle-kit studio shows that it is up and running and gives an address but the address shows error in browser and not working.\r\n\r\n//drizzle.config.ts\r\nimport type { Config } from \"drizzle-kit\";\r\nimport * as dotenv from \"dotenv\";\r\ndotenv.config({ path: \".env\" });\r\n\r\nexport default {\r\n  driver: \"pg\",\r\n  schema: \"./src/lib/db/schema.ts\",\r\n  dbCredentials: {\r\n    connectionString: process.env.DATABASE_URL!,\r\n  },\r\n} satisfies Config;\r\n\r\n\r\n//","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/191/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/190","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/190/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/190/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/190/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/190","id":1889069293,"node_id":"I_kwDOHoY85M5wmOjt","number":190,"title":"Support for USING while creating Index's","user":{"login":"fireayehu","id":35679017,"node_id":"MDQ6VXNlcjM1Njc5MDE3","avatar_url":"https://avatars.githubusercontent.com/u/35679017?v=4","gravatar_id":"","url":"https://api.github.com/users/fireayehu","html_url":"https://github.com/fireayehu","followers_url":"https://api.github.com/users/fireayehu/followers","following_url":"https://api.github.com/users/fireayehu/following{/other_user}","gists_url":"https://api.github.com/users/fireayehu/gists{/gist_id}","starred_url":"https://api.github.com/users/fireayehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fireayehu/subscriptions","organizations_url":"https://api.github.com/users/fireayehu/orgs","repos_url":"https://api.github.com/users/fireayehu/repos","events_url":"https://api.github.com/users/fireayehu/events{/privacy}","received_events_url":"https://api.github.com/users/fireayehu/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-09-10T09:24:34Z","updated_at":"2023-09-10T09:24:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I am working on a project involving geo spatial data. I have to create `GiST` index's but currently drizzle-kit does not support adding `USING` while creating index's.\r\n\r\nI can generate a migration and add the `USING` part but this will not work with `drizzle-kit push:pg` while prototyping ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/190/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/190/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/189","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/189/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/189/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/189/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/189","id":1885615044,"node_id":"I_kwDOHoY85M5wZDPE","number":189,"title":"Any way to create a sqlite database and push the schema without using the command (using like a function in javascript)","user":{"login":"yxshv","id":93475253,"node_id":"U_kgDOBZJRtQ","avatar_url":"https://avatars.githubusercontent.com/u/93475253?v=4","gravatar_id":"","url":"https://api.github.com/users/yxshv","html_url":"https://github.com/yxshv","followers_url":"https://api.github.com/users/yxshv/followers","following_url":"https://api.github.com/users/yxshv/following{/other_user}","gists_url":"https://api.github.com/users/yxshv/gists{/gist_id}","starred_url":"https://api.github.com/users/yxshv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yxshv/subscriptions","organizations_url":"https://api.github.com/users/yxshv/orgs","repos_url":"https://api.github.com/users/yxshv/repos","events_url":"https://api.github.com/users/yxshv/events{/privacy}","received_events_url":"https://api.github.com/users/yxshv/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-09-07T10:28:49Z","updated_at":"2023-09-07T13:21:11Z","closed_at":"2023-09-07T13:21:11Z","author_association":"NONE","active_lock_reason":null,"body":null,"reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/189/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/188","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/188/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/188/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/188/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/188","id":1885507723,"node_id":"I_kwDOHoY85M5wYpCL","number":188,"title":"[BUG]: db:generate and db:push does not create enum from schema","user":{"login":"SamuelBarnholdt","id":33251499,"node_id":"MDQ6VXNlcjMzMjUxNDk5","avatar_url":"https://avatars.githubusercontent.com/u/33251499?v=4","gravatar_id":"","url":"https://api.github.com/users/SamuelBarnholdt","html_url":"https://github.com/SamuelBarnholdt","followers_url":"https://api.github.com/users/SamuelBarnholdt/followers","following_url":"https://api.github.com/users/SamuelBarnholdt/following{/other_user}","gists_url":"https://api.github.com/users/SamuelBarnholdt/gists{/gist_id}","starred_url":"https://api.github.com/users/SamuelBarnholdt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SamuelBarnholdt/subscriptions","organizations_url":"https://api.github.com/users/SamuelBarnholdt/orgs","repos_url":"https://api.github.com/users/SamuelBarnholdt/repos","events_url":"https://api.github.com/users/SamuelBarnholdt/events{/privacy}","received_events_url":"https://api.github.com/users/SamuelBarnholdt/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-09-07T09:37:35Z","updated_at":"2023-09-23T09:48:11Z","closed_at":"2023-09-07T09:49:20Z","author_association":"NONE","active_lock_reason":null,"body":"### What version of drizzle-orm are you using?\r\n0.28.1\r\n\r\n### What version of drizzle-kit are you using?\r\n0.19.13\r\n\r\n### Describe the Bug\r\nWhen adding a new pgEnum to the schema, and adding it as a column on a table, neither generate:pg or push:pg works as expected.\r\n\r\nReproduction steps:\r\n\r\n```ts\r\nconst languageEnum = pgEnum(\"language\", [\"swedish\", \"english\"]);\r\n\r\nexport const userTable = pgTable(\"user\", {\r\n  id: text(\"id\").notNull().primaryKey(),\r\n  name: text(\"name\"),\r\n  email: text(\"email\").notNull(),\r\n  emailVerified: timestamp(\"emailVerified\", { mode: \"date\" }),\r\n  image: text(\"image\"),\r\n  createdAt: timestamp(\"createdAt\", { withTimezone: true })\r\n    .notNull()\r\n    .defaultNow(),\r\n  updatedAt: timestamp(\"updatedAt\", { withTimezone: true })\r\n    .notNull()\r\n    .defaultNow(),\r\n  language: languageEnum(\"language\").notNull().default(\"swedish\"),\r\n\r\n});\r\n```\r\nRunning drizzle-kit push:pg:\r\n\r\n```bash\r\npnpm drizzle-kit push:pg\r\n\r\ndrizzle-kit: v0.19.13\r\ndrizzle-orm: v0.28.1\r\n\r\nNo config path provided, using default path\r\nReading config file '...'\r\nerror: type \"language\" does not exist\r\n```\r\n\r\nRunning drizzle-kit generate:pg:\r\n```sql\r\nALTER TABLE \"user\" ADD COLUMN \"language\" \"language\" DEFAULT 'swedish' NOT NULL;--> statement-breakpoint\r\n```\r\n\r\n### Expected behavior\r\nGenerate should generate below (?), and push should work.\r\n\r\n```sql\r\nCREATE TYPE \"language\" AS ENUM ('swedish', 'english');\r\nALTER TABLE \"user\" ADD COLUMN \"language\" \"language\" DEFAULT 'swedish' NOT NULL;--> statement-breakpoint\r\n```\r\n\r\n### Environment & setup\r\nMac OS 12.2.1\r\nNode 18.16\r\nPostgres 15.4","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/188/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/187","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/187/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/187/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/187/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/187","id":1882634312,"node_id":"I_kwDOHoY85M5wNrhI","number":187,"title":"About ER diagram tools in Drizzle Studio","user":{"login":"marceloloureiro","id":2234201,"node_id":"MDQ6VXNlcjIyMzQyMDE=","avatar_url":"https://avatars.githubusercontent.com/u/2234201?v=4","gravatar_id":"","url":"https://api.github.com/users/marceloloureiro","html_url":"https://github.com/marceloloureiro","followers_url":"https://api.github.com/users/marceloloureiro/followers","following_url":"https://api.github.com/users/marceloloureiro/following{/other_user}","gists_url":"https://api.github.com/users/marceloloureiro/gists{/gist_id}","starred_url":"https://api.github.com/users/marceloloureiro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marceloloureiro/subscriptions","organizations_url":"https://api.github.com/users/marceloloureiro/orgs","repos_url":"https://api.github.com/users/marceloloureiro/repos","events_url":"https://api.github.com/users/marceloloureiro/events{/privacy}","received_events_url":"https://api.github.com/users/marceloloureiro/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-09-05T19:57:26Z","updated_at":"2023-11-30T16:02:29Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, guys, first of all, Drizzle is awesome. You know, if we know SQL, then we know Drizzle.\r\n\r\nGenerally, even knowing SQL, we use to design databases with ER diagram tools. We then export the diagram's DDL script.\r\n\r\nWith Drizzle, we now have one step more. We must convert the DDL script into a Typescript Drizzle Schema.\r\n\r\nI was wondering if there are plans to introduce an ER design tool that is capable of exporting an ER diagram directly into a Drizzle schema.\r\n\r\nIn my mind, that would be a game changer feature, for sure.\r\n\r\nThank you all.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/187/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/187/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/186","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/186/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/186/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/186/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/186","id":1881046724,"node_id":"I_kwDOHoY85M5wHn7E","number":186,"title":"Adding introspection of the `auth` schema in a local supabase setup results in introspection crash","user":{"login":"fnimick","id":704308,"node_id":"MDQ6VXNlcjcwNDMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/704308?v=4","gravatar_id":"","url":"https://api.github.com/users/fnimick","html_url":"https://github.com/fnimick","followers_url":"https://api.github.com/users/fnimick/followers","following_url":"https://api.github.com/users/fnimick/following{/other_user}","gists_url":"https://api.github.com/users/fnimick/gists{/gist_id}","starred_url":"https://api.github.com/users/fnimick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fnimick/subscriptions","organizations_url":"https://api.github.com/users/fnimick/orgs","repos_url":"https://api.github.com/users/fnimick/repos","events_url":"https://api.github.com/users/fnimick/events{/privacy}","received_events_url":"https://api.github.com/users/fnimick/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-09-05T01:52:01Z","updated_at":"2023-12-01T22:02:18Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm not entirely sure which table causes it, but adding an (unmodified) `auth` schema from a supabase local installation to `schemaFilter` in `drizzle.config.ts` causes introspection to fail with the following error:\r\n\r\n```\r\n/Users/francis/millionmarker/future/node_modules/drizzle-kit/index.cjs:12466\r\n                  name: tableCompositePkName[0].primary_key,\r\n                                                ^\r\n\r\nTypeError: Cannot read properties of undefined (reading 'primary_key')\r\n    at /Users/francis/millionmarker/future/node_modules/drizzle-kit/index.cjs:12466:49\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/186/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/186/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/185","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/185/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/185/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/185/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/185","id":1880787594,"node_id":"I_kwDOHoY85M5wGoqK","number":185,"title":"Drizzle studio doesn't message about localhost, instead 0.0.0.0","user":{"login":"janat08","id":11337345,"node_id":"MDQ6VXNlcjExMzM3MzQ1","avatar_url":"https://avatars.githubusercontent.com/u/11337345?v=4","gravatar_id":"","url":"https://api.github.com/users/janat08","html_url":"https://github.com/janat08","followers_url":"https://api.github.com/users/janat08/followers","following_url":"https://api.github.com/users/janat08/following{/other_user}","gists_url":"https://api.github.com/users/janat08/gists{/gist_id}","starred_url":"https://api.github.com/users/janat08/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janat08/subscriptions","organizations_url":"https://api.github.com/users/janat08/orgs","repos_url":"https://api.github.com/users/janat08/repos","events_url":"https://api.github.com/users/janat08/events{/privacy}","received_events_url":"https://api.github.com/users/janat08/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2023-09-04T19:36:53Z","updated_at":"2024-04-29T06:09:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Drizzle Studio is up and running on http://0.0.0.0:4983\r\n\r\n0.0.0.0 isn't something that will work on windows or chrome. I just assumed that something is broken.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/185/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/185/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/184","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/184/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/184/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/184/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/184","id":1880292829,"node_id":"I_kwDOHoY85M5wEv3d","number":184,"title":"Mysql introspection process imports and uses wrong keyword for unique indexes","user":{"login":"sromic","id":10515693,"node_id":"MDQ6VXNlcjEwNTE1Njkz","avatar_url":"https://avatars.githubusercontent.com/u/10515693?v=4","gravatar_id":"","url":"https://api.github.com/users/sromic","html_url":"https://github.com/sromic","followers_url":"https://api.github.com/users/sromic/followers","following_url":"https://api.github.com/users/sromic/following{/other_user}","gists_url":"https://api.github.com/users/sromic/gists{/gist_id}","starred_url":"https://api.github.com/users/sromic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sromic/subscriptions","organizations_url":"https://api.github.com/users/sromic/orgs","repos_url":"https://api.github.com/users/sromic/repos","events_url":"https://api.github.com/users/sromic/events{/privacy}","received_events_url":"https://api.github.com/users/sromic/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-09-04T13:27:59Z","updated_at":"2023-09-04T15:57:17Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When doing Mysql DB introspection generated schema file imports and uses wrong keyword for an unique index.\r\nCurrently kit imports and uses unknown `unique` keyword instead of `uniqueIndex` one.\r\n\r\nThe problem seems to be in `createTableUniques` function and  when defining `const uniqueImports =...` for `imports` values.\r\n\r\nAn example of generated schema file:\r\n\r\n```typescript\r\nimport { mysqlTable, mysqlSchema, AnyMySqlColumn, primaryKey, unique, int, bigint, text, datetime } from \"drizzle-orm/mysql-core\"\r\nimport { sql } from \"drizzle-orm\"\r\n\r\n\r\nexport const test = mysqlTable(\"test\", {\r\n\tid: int(\"id\").autoincrement().notNull(),\r\n\ti: bigint(\"i\", { mode: \"number\" }).notNull(),\r\n\tcreatedAt: datetime(\"created_at\", { mode: 'string'}).default(sql`CURRENT_TIMESTAMP`),\r\n\tupdatedAt: datetime(\"updated_at\", { mode: 'string'}).default(sql`CURRENT_TIMESTAMP`),\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\ttestId: primaryKey(table.id),\r\n\t\ti: unique(\"i\").on(table.i),\r\n\t}\r\n});\r\n```\r\n\r\nVersion - v0.19.13","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/184/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/183","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/183/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/183/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/183/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/183","id":1879175068,"node_id":"I_kwDOHoY85M5wAe-c","number":183,"title":"Inability to Revert Migrations in Drizzle","user":{"login":"wojtekKrol","id":64773541,"node_id":"MDQ6VXNlcjY0NzczNTQx","avatar_url":"https://avatars.githubusercontent.com/u/64773541?v=4","gravatar_id":"","url":"https://api.github.com/users/wojtekKrol","html_url":"https://github.com/wojtekKrol","followers_url":"https://api.github.com/users/wojtekKrol/followers","following_url":"https://api.github.com/users/wojtekKrol/following{/other_user}","gists_url":"https://api.github.com/users/wojtekKrol/gists{/gist_id}","starred_url":"https://api.github.com/users/wojtekKrol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojtekKrol/subscriptions","organizations_url":"https://api.github.com/users/wojtekKrol/orgs","repos_url":"https://api.github.com/users/wojtekKrol/repos","events_url":"https://api.github.com/users/wojtekKrol/events{/privacy}","received_events_url":"https://api.github.com/users/wojtekKrol/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2023-09-03T17:30:25Z","updated_at":"2023-10-07T07:26:25Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Problem Description\r\n\r\nIn TypeORM, reverting a database migration is straightforward due to the `up()` and `down()` methods generated with each migration file. Drizzle, however, lacks this essential feature, making it difficult to rollback database schema changes.\r\n\r\n#### Steps to Reproduce\r\n\r\n1. **Initial Schema**: Assume we have a table `TODO` with fields `{id, title}`.\r\n2. **Add Field**: Add a new field `description` to the `TODO` table so that the schema becomes `{id, title, description}`.\r\n    - Generate a migration file and migrate changes to the database.\r\n3. **Attempt to Revert**: Now, let's say you want to revert these changes to `{id, title}`.\r\n    - Run `drizzle-kit drop` to choose which migration file to delete. Assume you remove the last generated file that adds the 'description' field.\r\n    - Run the application to try and revert the schema change. This fails to revert the database to `{id, title}`.\r\n\r\n#### Issues Encountered\r\n\r\n1. Drizzle doesn't offer an automatic way to revert migrations.\r\n2. After dropping the last migration file, generating a new migration file via `drizzle-kit generate:{dialect}` results in an empty file. This is because Drizzle checks the last migration file and the current schema, both of which are `{id, title}`, thus seeing no changes to migrate.\r\n\r\n#### Suggested Improvement\r\n\r\nImplement functionality similar to TypeORM‚Äôs `up()` and `down()` methods to facilitate easy migration rollbacks.\r\n\r\n### Note\r\nI would have contributed this feature myself, but unfortunately, Drizzle-kit doesn't seem to be open source.\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/183/reactions","total_count":9,"+1":9,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/183/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/182","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/182/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/182/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/182/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/182","id":1879137042,"node_id":"I_kwDOHoY85M5wAVsS","number":182,"title":"Issues with PostgreSQL Migrations: Unexplained Column Existence Errors, Revert Challenges, and Supabase Dashboard","user":{"login":"wojtekKrol","id":64773541,"node_id":"MDQ6VXNlcjY0NzczNTQx","avatar_url":"https://avatars.githubusercontent.com/u/64773541?v=4","gravatar_id":"","url":"https://api.github.com/users/wojtekKrol","html_url":"https://github.com/wojtekKrol","followers_url":"https://api.github.com/users/wojtekKrol/followers","following_url":"https://api.github.com/users/wojtekKrol/following{/other_user}","gists_url":"https://api.github.com/users/wojtekKrol/gists{/gist_id}","starred_url":"https://api.github.com/users/wojtekKrol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojtekKrol/subscriptions","organizations_url":"https://api.github.com/users/wojtekKrol/orgs","repos_url":"https://api.github.com/users/wojtekKrol/repos","events_url":"https://api.github.com/users/wojtekKrol/events{/privacy}","received_events_url":"https://api.github.com/users/wojtekKrol/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-09-03T15:24:55Z","updated_at":"2023-12-31T16:34:00Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"#### Describe the bug\r\n\r\nWhen working with migrations in PostgreSQL using Drizzle Kit, I encounter a series of challenges. Most notably, I get console errors claiming that a column already exists, even after attempts to revert the changes. Additionally, none of these changes appear to be reflected in the Supabase dashboard.\r\n\r\n#### To Reproduce\r\n\r\nHere are the steps to reproduce:\r\n\r\n1. Create an initial table definition using Drizzle Kit:\r\n\r\n    ```js\r\n    export const todos = pgTable('todos', {\r\n      id: serial('id').primaryKey(),\r\n      title: varchar('title', { length: 256 }),\r\n      description: varchar('description', { length: 256 }),\r\n      isDone: boolean('isDone').default(false),\r\n    });\r\n    ```\r\n2. Run `yarn dev` to fire the migration on server startup.\r\n3. Add a new column to the table definition:\r\n\r\n    ```js\r\n    export const todos = pgTable('todos', {\r\n      // ... (previous columns),\r\n      isNotDone: boolean('isNotDone').default(false),\r\n    });\r\n    ```\r\n4. Run the migration again.\r\n5. Console error suggests that the column \"isNotDone\" already exists.\r\n6. Revert the table definition to its previous state and generate a new migration file.\r\n7. Run the migration script again.\r\n\r\n#### Expected behavior\r\n\r\nI expect the migration to work smoothly without throwing errors about pre-existing columns when a new column is actually being added. \r\n**Additionally, reverting changes should be straightforward and reflected in the Supabase dashboard.**\r\n\r\n#### Error Messages / Logs\r\n\r\nHere are some of the console errors received:\r\n\r\n```\r\nPostgresError: column \"isNotDone\" of relation \"todos\" already exists\r\n```\r\n\r\nMoreover, each migration run logs the following notices:\r\n\r\n```json\r\n{\r\n  \"severity_local\": \"NOTICE\",\r\n  \"code\": \"42P06\",\r\n  \"message\": \"schema \\\"drizzle\\\" already exists, skipping\",\r\n  ...\r\n}\r\n```\r\n\r\n#### Questions\r\n\r\n1. Is there a simpler way to revert changes to a table? \r\n2. Can `drizzle kit drop` be used to remove the last migration files and run the app again?\r\n3. Are the 'NOTICE' logs just informational or is there something I should address?\r\n4. Why are the changes not being reflected in the Supabase dashboard?\r\n\r\n#### Additional Context\r\n\r\nMy migration script is as follows:\r\n\r\n```js\r\nimport { migrate } from 'drizzle-orm/postgres-js/migrator';\r\nimport db from './db';\r\n\r\nexport const migrateDB = async () => {\r\n  console.log('migrating db');\r\n  await migrate(db, { migrationsFolder: 'drizzle/migrations' });\r\n  console.log('db migrated');\r\n};\r\n\r\nmigrateDB();\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/182/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/182/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/181","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/181/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/181/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/181/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/181","id":1878827019,"node_id":"I_kwDOHoY85M5v_KAL","number":181,"title":"Add a programatic JavaScript API","user":{"login":"kwangure","id":86817609,"node_id":"MDQ6VXNlcjg2ODE3NjA5","avatar_url":"https://avatars.githubusercontent.com/u/86817609?v=4","gravatar_id":"","url":"https://api.github.com/users/kwangure","html_url":"https://github.com/kwangure","followers_url":"https://api.github.com/users/kwangure/followers","following_url":"https://api.github.com/users/kwangure/following{/other_user}","gists_url":"https://api.github.com/users/kwangure/gists{/gist_id}","starred_url":"https://api.github.com/users/kwangure/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kwangure/subscriptions","organizations_url":"https://api.github.com/users/kwangure/orgs","repos_url":"https://api.github.com/users/kwangure/repos","events_url":"https://api.github.com/users/kwangure/events{/privacy}","received_events_url":"https://api.github.com/users/kwangure/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-09-02T20:03:17Z","updated_at":"2024-04-18T19:20:21Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm currently working on a CMS. It automatically feeds data from markdown, json and yaml into SQLite DB for user-friendly querying. Our library, and not the user, generates the Drizzle schemas etc. At the moment, I need to run drizzle-kit using Node's `exec` child process API and contend with checking stdout and stderr for output.\r\n\r\nIt would be helpful if I could run `generate` and `push` programatically via a JavaScript API instead of via the CLI.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/181/reactions","total_count":13,"+1":13,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/181/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/180","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/180/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/180/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/180/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/180","id":1878569209,"node_id":"I_kwDOHoY85M5v-LD5","number":180,"title":"Concern about Unauthorized drizzle-kit push Commands","user":{"login":"wojtekKrol","id":64773541,"node_id":"MDQ6VXNlcjY0NzczNTQx","avatar_url":"https://avatars.githubusercontent.com/u/64773541?v=4","gravatar_id":"","url":"https://api.github.com/users/wojtekKrol","html_url":"https://github.com/wojtekKrol","followers_url":"https://api.github.com/users/wojtekKrol/followers","following_url":"https://api.github.com/users/wojtekKrol/following{/other_user}","gists_url":"https://api.github.com/users/wojtekKrol/gists{/gist_id}","starred_url":"https://api.github.com/users/wojtekKrol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojtekKrol/subscriptions","organizations_url":"https://api.github.com/users/wojtekKrol/orgs","repos_url":"https://api.github.com/users/wojtekKrol/repos","events_url":"https://api.github.com/users/wojtekKrol/events{/privacy}","received_events_url":"https://api.github.com/users/wojtekKrol/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-09-02T10:11:34Z","updated_at":"2023-09-25T03:35:27Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Issue Description:\r\n\r\n#### Summary:\r\n\r\nI'm using `drizzle-kit` for database operations. I'm concerned about securing the database against unauthorized `drizzle-kit push` commands that could alter the schema or data.\r\n\r\n#### Steps to Reproduce:\r\n\r\n1. Run `drizzle-kit push:pg` from the shell.\r\n2. Notice that the database schema can be modified without additional verification of user credentials or roles.\r\n\r\n#### Expected Behavior:\r\n\r\nThere should be some form of protection or verification to ensure that only authorized developers can run `drizzle-kit push` commands that modify the database schema or data.\r\n\r\n#### Possible Solutions:\r\n\r\n1. Implement a two-factor authentication mechanism before accepting `push` commands that modify the schema or data.\r\n2. Introduce a digital signature verification for schema changes, where only approved digital signatures can execute schema-altering commands.\r\n3. Create an authorization layer that works independently of the database or front-end technology, requiring explicit permission for schema modifications.\r\n  \r\n#### Additional Context:\r\n\r\nThe `db:push` command is currently executed from `package.json` as follows:\r\n```json\r\n\"db:push\": \"drizzle-kit push:pg\"\r\n```\r\n\r\nWould be great to hear if you have any recommendations or if this is in the pipeline for future releases.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/180/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/177","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/177/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/177/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/177/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/177","id":1875256372,"node_id":"I_kwDOHoY85M5vxiQ0","number":177,"title":"[BUG]: timstamp space in postgresql","user":{"login":"chtibizoux","id":45465110,"node_id":"MDQ6VXNlcjQ1NDY1MTEw","avatar_url":"https://avatars.githubusercontent.com/u/45465110?v=4","gravatar_id":"","url":"https://api.github.com/users/chtibizoux","html_url":"https://github.com/chtibizoux","followers_url":"https://api.github.com/users/chtibizoux/followers","following_url":"https://api.github.com/users/chtibizoux/following{/other_user}","gists_url":"https://api.github.com/users/chtibizoux/gists{/gist_id}","starred_url":"https://api.github.com/users/chtibizoux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chtibizoux/subscriptions","organizations_url":"https://api.github.com/users/chtibizoux/orgs","repos_url":"https://api.github.com/users/chtibizoux/repos","events_url":"https://api.github.com/users/chtibizoux/events{/privacy}","received_events_url":"https://api.github.com/users/chtibizoux/received_events","type":"User","site_admin":false},"labels":[{"id":4311178953,"node_id":"LA_kwDOHoY85M8AAAABAPdeyQ","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2023-08-31T09:43:46Z","updated_at":"2024-04-06T19:06:30Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\n\n0.28.5\n\n### What version of `drizzle-kit` are you using?\n\n0.19.13\n\n### Describe the Bug\n\nI'm using postgresql and i have this simple table:\r\n\r\n```\r\nexport const users = pgTable('users', {\r\n\tid: text('id')\r\n\t\t.$defaultFn(() => createId())\r\n\t\t.primaryKey(),\r\n\tname: text('name').unique().notNull(),\r\n\temail: varchar('email', { length: 320 }).unique().notNull(),\r\n\tpassword: text('password'),\r\n\tcreatedAt: timestamp('created_at', { precision: 3 }).defaultNow().notNull(),\r\n});\r\n```\r\n\n\n### Expected behavior\n\nwhen i run `npx drizzle-kit push:pg` drizzle truncate my table because of a space.\r\n\r\n> You're about to change created_at column type from timestamp(3) to timestamp (3) with 1 items\r\n\r\n\n\n### Environment & setup\n\n_No response_","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/177/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/177/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/175","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/175/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/175/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/175/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/175","id":1872176264,"node_id":"I_kwDOHoY85M5vlySI","number":175,"title":"`.primaryKey()` isn't picked up when updating an existing table.","user":{"login":"andreterron","id":1753594,"node_id":"MDQ6VXNlcjE3NTM1OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1753594?v=4","gravatar_id":"","url":"https://api.github.com/users/andreterron","html_url":"https://github.com/andreterron","followers_url":"https://api.github.com/users/andreterron/followers","following_url":"https://api.github.com/users/andreterron/following{/other_user}","gists_url":"https://api.github.com/users/andreterron/gists{/gist_id}","starred_url":"https://api.github.com/users/andreterron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreterron/subscriptions","organizations_url":"https://api.github.com/users/andreterron/orgs","repos_url":"https://api.github.com/users/andreterron/repos","events_url":"https://api.github.com/users/andreterron/events{/privacy}","received_events_url":"https://api.github.com/users/andreterron/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-08-29T18:20:34Z","updated_at":"2023-08-29T18:20:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Creating a new table on our schema:\r\n\r\n```ts\r\nexport const testTable = pgTable(\"test\", {\r\n  id: uuid(\"id\")\r\n    .default(sql`extensions.uuid_generate_v4()`)\r\n    .notNull()\r\n    .primaryKey(),\r\n  name: text(\"name\"),\r\n});\r\n```\r\n\r\nCorrectly generates the sql migration (With `PRIMARY KEY`):\r\n\r\n```sql\r\nCREATE TABLE IF NOT EXISTS \"test\" (\r\n\t\"id\" uuid PRIMARY KEY DEFAULT extensions.uuid_generate_v4() NOT NULL,\r\n\t\"name\" text\r\n);\r\n```\r\n\r\nBut if I start with the following schema\r\n\r\n```ts\r\nexport const testTable = pgTable(\"test\", {\r\n  name: text(\"name\"),\r\n});\r\n```\r\n\r\nAnd then **add the `id` property**, I get the following migration (Nothing about the primary key):\r\n\r\n```sql\r\nALTER TABLE \"test\" ADD COLUMN \"id\" uuid DEFAULT extensions.uuid_generate_v4() NOT NULL;\r\n```\r\n\r\nI would expect the sql migration to also set `id` as the primary key, but I had to manually add the following SQL statement to our migration:\r\n\r\n```sql\r\nALTER TABLE \"test\" ADD PRIMARY KEY (\"id\");\r\n```\r\n\r\nSharing it here so that others can be aware of it, and hopefully be fixed!\r\n\r\nEnvironment:\r\n- Adapter `drizzle-orm/pg-core`\r\n- Command: `drizzle-kit generate:pg`\r\n- drizzle-kit: v0.19.12\r\n- drizzle-orm: v0.27.2","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/175/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/175/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/174","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/174/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/174/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/174/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/174","id":1871820234,"node_id":"I_kwDOHoY85M5vkbXK","number":174,"title":"Inconsistent prepending of schema names in migrations with cross-schema references","user":{"login":"iolyd","id":52970928,"node_id":"MDQ6VXNlcjUyOTcwOTI4","avatar_url":"https://avatars.githubusercontent.com/u/52970928?v=4","gravatar_id":"","url":"https://api.github.com/users/iolyd","html_url":"https://github.com/iolyd","followers_url":"https://api.github.com/users/iolyd/followers","following_url":"https://api.github.com/users/iolyd/following{/other_user}","gists_url":"https://api.github.com/users/iolyd/gists{/gist_id}","starred_url":"https://api.github.com/users/iolyd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iolyd/subscriptions","organizations_url":"https://api.github.com/users/iolyd/orgs","repos_url":"https://api.github.com/users/iolyd/repos","events_url":"https://api.github.com/users/iolyd/events{/privacy}","received_events_url":"https://api.github.com/users/iolyd/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-08-29T14:36:59Z","updated_at":"2023-08-29T15:09:23Z","closed_at":"2023-08-29T15:09:00Z","author_association":"NONE","active_lock_reason":null,"body":"Generating migrations where tables across different `pgSchema`s reference one another sometimes leads to problematic omissions of schema prefixes to the referenced tables' names or outright erroneous schema names.\r\n\r\nConsider the following (sorry for the big code blocks, I tried to reduce it down to a minimum without losing too much context):\r\n```ts\r\n// schema/auth.ts\r\n\r\nexport const authSchema = pgSchema('auth');\r\n\r\nexport const userRoles = authSchema.table('user_roles', {\r\n  role: userRole('role').primaryKey(),\r\n});\r\n\r\nexport const userRolesTranslations = authSchema.table(\r\n  'user_roles_t',\r\n  {\r\n    role: userRole('role').references(() => userRoles.role, {\r\n      onDelete: 'cascade',\r\n      onUpdate: 'cascade',\r\n    }),\r\n    locale: locale('locale').references(() => locales.code, {\r\n      onDelete: 'cascade',\r\n      onUpdate: 'cascade',\r\n    }),\r\n    name: text('title'),\r\n    description: text('description'),\r\n  },\r\n  (table) => {\r\n    return { pk: primaryKey(table.role, table.locale) };\r\n  }\r\n);\r\n\r\nexport const users = authSchema.table('users', {\r\n  id: uuid('id').defaultRandom().primaryKey(),\r\n  role: userRole('role')\r\n    .references(() => userRoles.role, {\r\n      onDelete: 'set default',\r\n      onUpdate: 'cascade',\r\n    })\r\n    .default(USER_ROLES.VISITOR)\r\n    .notNull(),\r\n  email: text('email').unique().notNull(),\r\n});\r\n```\r\n```ts\r\n// schema/i18n.ts\r\n\r\nexport const i18nSchema = pgSchema('i18n');\r\n\r\nexport const locales = i18nSchema.table('locales', {\r\n  code: locale('locale').primaryKey(),\r\n  name: text('name').notNull().unique(),\r\n});\r\n```\r\n```ts\r\n// schema/public.ts\r\n\r\nexport const projects = pgTable('projects', {\r\n  id: uuid('id').defaultRandom().primaryKey(),\r\n  createdAt: timestamp('created_at', { withTimezone: true }).defaultNow().notNull(),\r\n  createdBy: varchar('created_by')\r\n    .notNull()\r\n    .references(() => users.id, { onDelete: 'restrict', onUpdate: 'cascade' }),\r\n});\r\n\r\nexport const projectsTranslations = pgTable(\r\n  'projects_t',\r\n  {\r\n    id: uuid('id').references(() => projects.id, {\r\n      onDelete: 'cascade',\r\n      onUpdate: 'cascade',\r\n    }),\r\n    locale: locale('locale').references(() => locales.code, {\r\n      onDelete: 'cascade',\r\n      onUpdate: 'cascade',\r\n    }),\r\n    title: text('title'),\r\n    description: text('description'),\r\n  },\r\n  (table) => {\r\n    return { pk: primaryKey(table.id, table.locale) };\r\n  }\r\n);\r\n```\r\n\r\nUsing these schema declarations, `drizzle-kit generate:pg` outputs:\r\n```sql\r\nCREATE SCHEMA \"auth\";\r\n--> statement-breakpoint\r\nCREATE SCHEMA \"i18n\";\r\n--> statement-breakpoint\r\nCREATE TABLE IF NOT EXISTS \"auth\".\"user_roles\" (\r\n\t\"role\" text PRIMARY KEY NOT NULL\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE IF NOT EXISTS \"auth\".\"user_roles_t\" (\r\n\t\"role\" text,\r\n\t\"locale\" text,\r\n\t\"title\" text,\r\n\t\"description\" text,\r\n\tCONSTRAINT user_roles_t_role_locale PRIMARY KEY(\"role\",\"locale\")\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE IF NOT EXISTS \"auth\".\"users\" (\r\n\t\"id\" uuid PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,\r\n\t\"role\" text DEFAULT 'visitor' NOT NULL,\r\n\t\"email\" text NOT NULL,\r\n\tCONSTRAINT \"users_email_unique\" UNIQUE(\"email\")\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE IF NOT EXISTS \"i18n\".\"locales\" (\r\n\t\"code\" text PRIMARY KEY NOT NULL,\r\n\t\"name\" text NOT NULL,\r\n\tCONSTRAINT \"locales_name_unique\" UNIQUE(\"name\")\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE IF NOT EXISTS \"projects\" (\r\n\t\"id\" uuid PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,\r\n\t\"created_at\" timestamp with time zone DEFAULT now() NOT NULL,\r\n\t\"created_by\" varchar NOT NULL\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE IF NOT EXISTS \"projects_t\" (\r\n\t\"id\" uuid,\r\n\t\"locale\" text,\r\n\t\"title\" text,\r\n\t\"description\" text,\r\n\tCONSTRAINT projects_t_id_locale PRIMARY KEY(\"id\",\"locale\")\r\n);\r\n--> statement-breakpoint\r\nDO $$ BEGIN\r\n ALTER TABLE \"auth\".\"user_roles_t\" ADD CONSTRAINT \"user_roles_t_role_user_roles_role_fk\" FOREIGN KEY (\"role\") REFERENCES \"auth\".\"user_roles\"(\"role\") ON DELETE cascade ON UPDATE cascade;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n--> statement-breakpoint\r\nDO $$ BEGIN\r\n ALTER TABLE \"auth\".\"user_roles_t\" ADD CONSTRAINT \"user_roles_t_locale_locales_code_fk\" FOREIGN KEY (\"locale\") REFERENCES \"auth\".\"locales\"(\"code\") ON DELETE cascade ON UPDATE cascade;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n--> statement-breakpoint\r\nDO $$ BEGIN\r\n ALTER TABLE \"auth\".\"users\" ADD CONSTRAINT \"users_role_user_roles_role_fk\" FOREIGN KEY (\"role\") REFERENCES \"auth\".\"user_roles\"(\"role\") ON DELETE set default ON UPDATE cascade;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n--> statement-breakpoint\r\nDO $$ BEGIN\r\n ALTER TABLE \"projects\" ADD CONSTRAINT \"projects_created_by_users_id_fk\" FOREIGN KEY (\"created_by\") REFERENCES \"users\"(\"id\") ON DELETE restrict ON UPDATE cascade;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n--> statement-breakpoint\r\nDO $$ BEGIN\r\n ALTER TABLE \"projects_t\" ADD CONSTRAINT \"projects_t_id_projects_id_fk\" FOREIGN KEY (\"id\") REFERENCES \"projects\"(\"id\") ON DELETE cascade ON UPDATE cascade;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n--> statement-breakpoint\r\nDO $$ BEGIN\r\n ALTER TABLE \"projects_t\" ADD CONSTRAINT \"projects_t_locale_locales_code_fk\" FOREIGN KEY (\"locale\") REFERENCES \"locales\"(\"code\") ON DELETE cascade ON UPDATE cascade;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```\r\n\r\nNotice the references to `\"users\"` sometimes missing the schema - leading to referential errors - and the wrong reference to `\"auth\".\"locales\"`.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/174/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/176","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/176/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/176/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/176/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/176","id":1875255930,"node_id":"I_kwDOHoY85M5vxiJ6","number":176,"title":"[BUG]: Drizzle Kit migrations should include `foreign_key_checks` statements","user":{"login":"paul-uz","id":73826774,"node_id":"MDQ6VXNlcjczODI2Nzc0","avatar_url":"https://avatars.githubusercontent.com/u/73826774?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-uz","html_url":"https://github.com/paul-uz","followers_url":"https://api.github.com/users/paul-uz/followers","following_url":"https://api.github.com/users/paul-uz/following{/other_user}","gists_url":"https://api.github.com/users/paul-uz/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-uz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-uz/subscriptions","organizations_url":"https://api.github.com/users/paul-uz/orgs","repos_url":"https://api.github.com/users/paul-uz/repos","events_url":"https://api.github.com/users/paul-uz/events{/privacy}","received_events_url":"https://api.github.com/users/paul-uz/received_events","type":"User","site_admin":false},"labels":[{"id":4311178953,"node_id":"LA_kwDOHoY85M8AAAABAPdeyQ","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-08-29T08:06:50Z","updated_at":"2023-08-31T10:37:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\n\n0.28.2\n\n### What version of `drizzle-kit` are you using?\n\n0.19.12\n\n### Describe the Bug\n\nMySQL migration files created by Drizzle Kit do not include `foreign_key_checks` statements when it generates migration files that deal with FK constraints.\r\n\r\nIssue submitted upon request, see [here](https://discord.com/channels/1043890932593987624/1144572247579828315/1145780231144218764)\n\n### Expected behavior\n\n_No response_\n\n### Environment & setup\n\n_No response_","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/176/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/178","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/178/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/178/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/178/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/178","id":1875256713,"node_id":"I_kwDOHoY85M5vxiWJ","number":178,"title":"[BUG]: No migration is generated for `pgEnum` deletion","user":{"login":"MatanYadaev","id":13586343,"node_id":"MDQ6VXNlcjEzNTg2MzQz","avatar_url":"https://avatars.githubusercontent.com/u/13586343?v=4","gravatar_id":"","url":"https://api.github.com/users/MatanYadaev","html_url":"https://github.com/MatanYadaev","followers_url":"https://api.github.com/users/MatanYadaev/followers","following_url":"https://api.github.com/users/MatanYadaev/following{/other_user}","gists_url":"https://api.github.com/users/MatanYadaev/gists{/gist_id}","starred_url":"https://api.github.com/users/MatanYadaev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MatanYadaev/subscriptions","organizations_url":"https://api.github.com/users/MatanYadaev/orgs","repos_url":"https://api.github.com/users/MatanYadaev/repos","events_url":"https://api.github.com/users/MatanYadaev/events{/privacy}","received_events_url":"https://api.github.com/users/MatanYadaev/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2023-08-29T07:27:23Z","updated_at":"2024-01-12T21:04:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\n\n0.28.5\n\n### What version of `drizzle-kit` are you using?\n\n0.19.13\n\n### Describe the Bug\n\nWhen adding a new `pgEnum` to the schema, and running `drizzle-kit generate:pg`, it generates a new SQL migration, but when removing this `pgEnum` and running the same command, it doesn't do anything.\r\n\r\nReproduction steps:\r\n\r\nAdd the `pgEnum` to the schema:\r\n```ts\r\n// schema.ts\r\nexport const statusEnum = pgEnum('status', [\r\n  'draft',\r\n  'in-progress',\r\n  'completed',\r\n]);\r\n```\r\n\r\nRunning `drizzle-kit generate:pg`:\r\n```sql\r\n# drizzle/0001_dusty_jack_power.sql\r\nDO $$ BEGIN\r\n CREATE TYPE \"status\" AS ENUM('draft', 'in-progress', 'completed');\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```\r\n\r\nRemoving the `pgEnum`:\r\n```ts\r\n// schema.ts\r\n// Empty file\r\n```\r\n\r\nRunning `drizzle-kit generate:pg`:\r\n```\r\nNo schema changes, nothing to migrate üò¥\r\n```\n\n### Expected behavior\n\nThe last command execution should create a new SQL migration:\r\n```sql\r\nDROP TYPE \"status\";\r\n```\n\n### Environment & setup\n\nMac OS 13.5\r\nNode 20\r\nPostgres 15.3","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/178/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/178/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/173","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/173/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/173/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/173/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/173","id":1870418041,"node_id":"I_kwDOHoY85M5vfFB5","number":173,"title":"`@drizzle-team/studio`  Unknown license","user":{"login":"davlet61","id":30911739,"node_id":"MDQ6VXNlcjMwOTExNzM5","avatar_url":"https://avatars.githubusercontent.com/u/30911739?v=4","gravatar_id":"","url":"https://api.github.com/users/davlet61","html_url":"https://github.com/davlet61","followers_url":"https://api.github.com/users/davlet61/followers","following_url":"https://api.github.com/users/davlet61/following{/other_user}","gists_url":"https://api.github.com/users/davlet61/gists{/gist_id}","starred_url":"https://api.github.com/users/davlet61/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davlet61/subscriptions","organizations_url":"https://api.github.com/users/davlet61/orgs","repos_url":"https://api.github.com/users/davlet61/repos","events_url":"https://api.github.com/users/davlet61/events{/privacy}","received_events_url":"https://api.github.com/users/davlet61/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-08-28T20:04:28Z","updated_at":"2023-09-09T17:27:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, \r\nI am trying to introduce `drizzle` to a codebase to use with existing `knex` queries for better typesafety. \r\nHowever, I am getting a `License violation` in **Snyk**, so I was wondering if it would be possible to add a license to it.\r\n\r\nThanks in advance! ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/173/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/173/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/172","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/172/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/172/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/172/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/172","id":1870067140,"node_id":"I_kwDOHoY85M5vdvXE","number":172,"title":"Conveniences in Drizzle Studio - Enum support, Relations support and Column types ","user":{"login":"413n","id":16388025,"node_id":"MDQ6VXNlcjE2Mzg4MDI1","avatar_url":"https://avatars.githubusercontent.com/u/16388025?v=4","gravatar_id":"","url":"https://api.github.com/users/413n","html_url":"https://github.com/413n","followers_url":"https://api.github.com/users/413n/followers","following_url":"https://api.github.com/users/413n/following{/other_user}","gists_url":"https://api.github.com/users/413n/gists{/gist_id}","starred_url":"https://api.github.com/users/413n/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/413n/subscriptions","organizations_url":"https://api.github.com/users/413n/orgs","repos_url":"https://api.github.com/users/413n/repos","events_url":"https://api.github.com/users/413n/events{/privacy}","received_events_url":"https://api.github.com/users/413n/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-08-28T16:19:19Z","updated_at":"2024-03-02T03:21:38Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I really love Drizzle Studio, but I have a couple of conveniences I'd like to propose.\r\n\r\n## Enums support\r\nWhen editing a column that is a Enum, it would be great to have a dropdown with the available options.\r\n\r\n## Relations support\r\nWhen editing a column that has a one() relation to another table, it would be cool to be able to see the \"available\" users, for example, in a dropdown.\r\n\r\n## Column types\r\nSeeing the column type under the name in the Table view. Something like this:\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/16388025/ce479013-1d8d-4d01-9405-49ea1a9caa9a)\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/172/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/171","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/171/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/171/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/171/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/171","id":1869174095,"node_id":"I_kwDOHoY85M5vaVVP","number":171,"title":"`introspect:mysql` ignores cloned tables","user":{"login":"205g0","id":74575852,"node_id":"MDQ6VXNlcjc0NTc1ODUy","avatar_url":"https://avatars.githubusercontent.com/u/74575852?v=4","gravatar_id":"","url":"https://api.github.com/users/205g0","html_url":"https://github.com/205g0","followers_url":"https://api.github.com/users/205g0/followers","following_url":"https://api.github.com/users/205g0/following{/other_user}","gists_url":"https://api.github.com/users/205g0/gists{/gist_id}","starred_url":"https://api.github.com/users/205g0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/205g0/subscriptions","organizations_url":"https://api.github.com/users/205g0/orgs","repos_url":"https://api.github.com/users/205g0/repos","events_url":"https://api.github.com/users/205g0/events{/privacy}","received_events_url":"https://api.github.com/users/205g0/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-08-28T07:38:27Z","updated_at":"2023-08-29T04:48:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"With MySQL you can create different tables but as clones from others and without redeclaring the same columns, e.g.\r\n```sql\r\nCREATE TABLE drafts AS\r\nSELECT\r\n  *\r\nFROM\r\n  posts\r\nWHERE\r\n  1 = 0;\r\n```\r\n...which is ignored by drizzle-kit","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/171/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/170","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/170/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/170/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/170/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/170","id":1868577140,"node_id":"I_kwDOHoY85M5vYDl0","number":170,"title":"Error on removal of composite keys on `pgTable` in `postgres`","user":{"login":"Odas0R","id":32167770,"node_id":"MDQ6VXNlcjMyMTY3Nzcw","avatar_url":"https://avatars.githubusercontent.com/u/32167770?v=4","gravatar_id":"","url":"https://api.github.com/users/Odas0R","html_url":"https://github.com/Odas0R","followers_url":"https://api.github.com/users/Odas0R/followers","following_url":"https://api.github.com/users/Odas0R/following{/other_user}","gists_url":"https://api.github.com/users/Odas0R/gists{/gist_id}","starred_url":"https://api.github.com/users/Odas0R/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Odas0R/subscriptions","organizations_url":"https://api.github.com/users/Odas0R/orgs","repos_url":"https://api.github.com/users/Odas0R/repos","events_url":"https://api.github.com/users/Odas0R/events{/privacy}","received_events_url":"https://api.github.com/users/Odas0R/received_events","type":"User","site_admin":false},"labels":[{"id":4311178953,"node_id":"LA_kwDOHoY85M8AAAABAPdeyQ","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2023-08-27T17:48:37Z","updated_at":"2024-05-23T09:33:15Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When removed a composite primary key and renamed a pgTable defined:\r\n```ts\r\n//old\r\nconst table = pgTable(\r\n  \"table\",\r\n  {\r\n    id: text(\"id\").notNull(),\r\n    name: text(\"name\").notNull(),\r\n  },\r\n  (t) => ({\r\n    pk: primaryKey(t.id, t.name),\r\n  }),\r\n);\r\n\r\n// new\r\nconst table = pgTable(\r\n  \"table_two\",\r\n  {\r\n    id: text(\"id\").notNull().primaryKey(),\r\n    name: text(\"name\").notNull(),\r\n  }\r\n);\r\n```\r\n\r\nThrows the error when `npx drizzle-kit generate:pg`:\r\n\r\n```\r\nTypeError: Cannot read properties of undefined (reading 'compositePrimaryKeys')\r\n```\r\n\r\n**Versions:**\r\n```\r\n\"drizzle-kit\": \"^0.19.13\",\r\n\"drizzle-orm\": \"0.28.2\",\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/170/reactions","total_count":23,"+1":23,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/170/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/179","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/179/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/179/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/179/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/179","id":1875259693,"node_id":"I_kwDOHoY85M5vxjEt","number":179,"title":"[BUG]:  Can't parse float(8,2) from database (precision and scale and/or unsigned breaks float types)","user":{"login":"tslater","id":449326,"node_id":"MDQ6VXNlcjQ0OTMyNg==","avatar_url":"https://avatars.githubusercontent.com/u/449326?v=4","gravatar_id":"","url":"https://api.github.com/users/tslater","html_url":"https://github.com/tslater","followers_url":"https://api.github.com/users/tslater/followers","following_url":"https://api.github.com/users/tslater/following{/other_user}","gists_url":"https://api.github.com/users/tslater/gists{/gist_id}","starred_url":"https://api.github.com/users/tslater/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tslater/subscriptions","organizations_url":"https://api.github.com/users/tslater/orgs","repos_url":"https://api.github.com/users/tslater/repos","events_url":"https://api.github.com/users/tslater/events{/privacy}","received_events_url":"https://api.github.com/users/tslater/received_events","type":"User","site_admin":false},"labels":[{"id":4311178953,"node_id":"LA_kwDOHoY85M8AAAABAPdeyQ","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":15,"created_at":"2023-08-27T09:46:50Z","updated_at":"2024-05-22T04:52:16Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\r\n\r\n0.28.5\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.19.13\r\n\r\n### Describe the Bug\r\n\r\nThen the schema file fails to generate the column definition/type for any column defined as `float(x,y)`\r\n\r\nWhen I call `drizzle-kit introspect:mysql`, I get this in my output:\r\n`uknown float(8,2)`\r\n\r\n\r\nThis is what the generated schema.ts looks like\r\n```\r\nimport { mysqlTable, mysqlSchema, AnyMySqlColumn, primaryKey } from \"drizzle-orm/mysql-core\"\r\nimport { sql } from \"drizzle-orm\"\r\n\r\nexport const testTable = mysqlTable(\"test_table\", {\r\n\tid: int(\"id\").autoincrement().notNull(),\r\n\t// Warning: Can't parse float(8,2) from database\r\n\t// float(8,2)Type: float(8,2)(\"test_float\"),\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\ttestTableId: primaryKey(table.id),\r\n\t}\r\n});\r\n```\r\n\r\n\r\nHere's my actual MySQL schema:\r\n```\r\nCREATE TABLE `test_table` (\r\n  `id` int unsigned NOT NULL AUTO_INCREMENT,\r\n  `test_float` float(8,2) DEFAULT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;\r\n```\r\n\r\n### Expected behavior\r\n\r\nI expect the output to looks something like this:\r\n\r\n```\r\nexport const testTable = mysqlTable(\"test_table\", {\r\n\tid: int(\"id\").autoincrement().notNull(),\r\n\ttestFloat: float(\"test_float\", { precision: 8, scale: 2 }),\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\ttestTableId: primaryKey(table.id),\r\n\t}\r\n});\r\n```\r\n\r\n\r\n### Environment & setup\r\n\r\nNode v18.12.1\r\nMacOS Ventura 13.4\r\nMySQL 8.0.33","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/179/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/169","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/169/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/169/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/169/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/169","id":1867698421,"node_id":"I_kwDOHoY85M5vUtD1","number":169,"title":"adding default to array of text creates invalid migrations","user":{"login":"ak4zh","id":26350053,"node_id":"MDQ6VXNlcjI2MzUwMDUz","avatar_url":"https://avatars.githubusercontent.com/u/26350053?v=4","gravatar_id":"","url":"https://api.github.com/users/ak4zh","html_url":"https://github.com/ak4zh","followers_url":"https://api.github.com/users/ak4zh/followers","following_url":"https://api.github.com/users/ak4zh/following{/other_user}","gists_url":"https://api.github.com/users/ak4zh/gists{/gist_id}","starred_url":"https://api.github.com/users/ak4zh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ak4zh/subscriptions","organizations_url":"https://api.github.com/users/ak4zh/orgs","repos_url":"https://api.github.com/users/ak4zh/repos","events_url":"https://api.github.com/users/ak4zh/events{/privacy}","received_events_url":"https://api.github.com/users/ak4zh/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-08-25T21:19:48Z","updated_at":"2024-02-15T04:56:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```js\r\nvalues: text('values').array().notNull().default(['a', 'b'])\r\n```\r\n\r\ngenerates:\r\n```SQL\r\nALTER TABLE \"test\" ALTER COLUMN \"values\" SET DEFAULT a,b;\r\n```\r\n\r\nShould be:\r\n```SQL\r\nALTER TABLE \"test\" ALTER COLUMN \"values\" SET DEFAULT ARRAY['a', 'b'];\r\n```\r\n\r\nReference: https://discord.com/channels/1043890932593987624/1144185578657685566/1144185578657685566","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/169/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/168","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/168/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/168/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/168/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/168","id":1866283882,"node_id":"I_kwDOHoY85M5vPTtq","number":168,"title":"Multiple postgres primary keys causes opaque introspection error","user":{"login":"Hum4n01d","id":17228477,"node_id":"MDQ6VXNlcjE3MjI4NDc3","avatar_url":"https://avatars.githubusercontent.com/u/17228477?v=4","gravatar_id":"","url":"https://api.github.com/users/Hum4n01d","html_url":"https://github.com/Hum4n01d","followers_url":"https://api.github.com/users/Hum4n01d/followers","following_url":"https://api.github.com/users/Hum4n01d/following{/other_user}","gists_url":"https://api.github.com/users/Hum4n01d/gists{/gist_id}","starred_url":"https://api.github.com/users/Hum4n01d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hum4n01d/subscriptions","organizations_url":"https://api.github.com/users/Hum4n01d/orgs","repos_url":"https://api.github.com/users/Hum4n01d/repos","events_url":"https://api.github.com/users/Hum4n01d/events{/privacy}","received_events_url":"https://api.github.com/users/Hum4n01d/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-08-25T04:55:21Z","updated_at":"2023-08-27T23:55:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When introspecting a postgres database with a table containing multiple `PRIMARY KEY` columns\r\n\r\n<img width=\"504\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/17228477/36a55df2-2be6-4032-8dce-b5d3351ef4c4\">\r\n\r\nRunning\r\n\r\n`pnpm drizzle-kit introspect:pg`\r\n\r\nresults in a crash with the error\r\n\r\n```\r\nTypeError: Cannot read properties of undefined (reading 'primary_key')\r\n    at /Users/kw/Library/Mobile Documents/com~apple~CloudDocs/kw/Projects/yuki-backend/node_modules/.pnpm/drizzle-kit@0.19.13/node_modules/drizzle-kit/index.cjs:12466:49\r\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\r\n```\r\n\r\nCommenting out \r\n\r\n```\r\nprimaryKeys[`${tableName}_${cprimaryKey.map((pk) => pk.column_name).join(\"_\")}`] = {\r\n  name: tableCompositePkName[0].primary_key,\r\n  columns: cprimaryKey.map((c) => c.column_name)\r\n};\r\n```\r\n\r\nin `drizzle-kit/index.cjs:12466:49` results in a clean run, but a primary key is not added to either of the columns in the introspected drizzle schema. \r\n\r\nNot sure what the expected behavior is in this case but a more specific error would be helpful! üòÅ ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/168/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/167","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/167/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/167/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/167/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/167","id":1865805762,"node_id":"I_kwDOHoY85M5vNe_C","number":167,"title":"[BUG] Custom types generating \"\" around non-standard types (pg)","user":{"login":"eajr","id":43855019,"node_id":"MDQ6VXNlcjQzODU1MDE5","avatar_url":"https://avatars.githubusercontent.com/u/43855019?v=4","gravatar_id":"","url":"https://api.github.com/users/eajr","html_url":"https://github.com/eajr","followers_url":"https://api.github.com/users/eajr/followers","following_url":"https://api.github.com/users/eajr/following{/other_user}","gists_url":"https://api.github.com/users/eajr/gists{/gist_id}","starred_url":"https://api.github.com/users/eajr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eajr/subscriptions","organizations_url":"https://api.github.com/users/eajr/orgs","repos_url":"https://api.github.com/users/eajr/repos","events_url":"https://api.github.com/users/eajr/events{/privacy}","received_events_url":"https://api.github.com/users/eajr/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-08-24T20:04:49Z","updated_at":"2024-05-03T20:14:56Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of drizzle-orm are you using?\r\n^0.28.3\r\n\r\n### What version of drizzle-kit are you using?\r\n^0.19.13\r\n\r\n### Describe the Bug\r\n\r\nWhen using custom types it puts quotes around the type string on `generate:pg`\r\n\r\n#### Example `schema.ts`\r\n```typescript\r\nimport { timestamp, uuid, customType, pgTable } from \"drizzle-orm/pg-core\";\r\n\r\nconst geometryCType = customType<\r\n    { \r\n        data: string,\r\n        config: { type: string; SRID: number }\r\n    }\r\n>({\r\n    dataType(config) {\r\n        return `geometry(${config?.type},${config?.SRID})`;\r\n    },\r\n});\r\n\r\nexport const locations = pgTable(\"locations\", {\r\n    id: uuid(\"id\").defaultRandom().notNull(),\r\n    geom: geometryCType(\"geom\", { type: \"POINT\", SRID: 4326 }),\r\n    createdAt: timestamp(\"created_at\")\r\n});\r\n```\r\n\r\n#### Example output from `generate:pg`\r\n\r\n```sql\r\nCREATE TABLE IF NOT EXISTS \"locations\" (\r\n\t\"id\" uuid DEFAULT gen_random_uuid() NOT NULL,\r\n\t\"geom\" \"geometry(POINT,4326)\",\r\n\t\"created_at\" timestamp\r\n);\r\n```\r\n\r\n#### How it should look\r\n\r\n```sql\r\nCREATE TABLE IF NOT EXISTS \"locations\" (\r\n\t\"id\" uuid DEFAULT gen_random_uuid() NOT NULL,\r\n\t\"geom\" geometry(POINT,4326),\r\n\t\"created_at\" timestamp\r\n);\r\n```\r\n\r\n#### Additional Info\r\n\r\nIf you create a custom type that returns a standard pg data type ie \"varchar\" from `dataType() {}` the \"\" are not there (as expected).\r\n\r\n### Workarounds\r\nAfter `generate:pg` you can just modify the migration sql that was generated and remove the \"\", and it works, but this is obviously not ideal.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/167/reactions","total_count":17,"+1":17,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/167/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/166","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/166/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/166/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/166/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/166","id":1865758013,"node_id":"I_kwDOHoY85M5vNTU9","number":166,"title":"Add Drizzle-kit db push --force reset command combined with seed integration","user":{"login":"ThimoDEV","id":68739517,"node_id":"MDQ6VXNlcjY4NzM5NTE3","avatar_url":"https://avatars.githubusercontent.com/u/68739517?v=4","gravatar_id":"","url":"https://api.github.com/users/ThimoDEV","html_url":"https://github.com/ThimoDEV","followers_url":"https://api.github.com/users/ThimoDEV/followers","following_url":"https://api.github.com/users/ThimoDEV/following{/other_user}","gists_url":"https://api.github.com/users/ThimoDEV/gists{/gist_id}","starred_url":"https://api.github.com/users/ThimoDEV/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThimoDEV/subscriptions","organizations_url":"https://api.github.com/users/ThimoDEV/orgs","repos_url":"https://api.github.com/users/ThimoDEV/repos","events_url":"https://api.github.com/users/ThimoDEV/events{/privacy}","received_events_url":"https://api.github.com/users/ThimoDEV/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-08-24T19:29:03Z","updated_at":"2024-01-18T09:54:36Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Context: \r\n\r\nIn a previous project where I used Prisma I found myself clearing the database and seeding it again to quickly continue developing with a clean slate. For example easily retriggering OAuth flows, seeing diffrences between data that is or is not available etc.\r\n\r\nThe issue that explains my flow even more: https://github.com/prisma/prisma/issues/11261 \r\n\r\nFeature suggestion:\r\n\r\nAdd drizzle-kit db push --force-reset together with the seed functionality like prisma has. \r\nIt would be nice if it could work with multiple adapters like turso/planetscale/neon etc, but i'm not sure how easily this can be done.\r\n\r\nTwo discussions I had in the discord for more context and solutions that can be used now: \r\n\r\nSeeding: https://discord.com/channels/1043890932593987624/1141321911155036232\r\n\r\nDB clearing: https://discord.com/channels/1043890932593987624/1130802621750448160\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/166/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/166/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/165","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/165/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/165/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/165/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/165","id":1865324871,"node_id":"I_kwDOHoY85M5vLplH","number":165,"title":"Add --dry-run flag to push feature","user":{"login":"jakeleventhal","id":15133828,"node_id":"MDQ6VXNlcjE1MTMzODI4","avatar_url":"https://avatars.githubusercontent.com/u/15133828?v=4","gravatar_id":"","url":"https://api.github.com/users/jakeleventhal","html_url":"https://github.com/jakeleventhal","followers_url":"https://api.github.com/users/jakeleventhal/followers","following_url":"https://api.github.com/users/jakeleventhal/following{/other_user}","gists_url":"https://api.github.com/users/jakeleventhal/gists{/gist_id}","starred_url":"https://api.github.com/users/jakeleventhal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakeleventhal/subscriptions","organizations_url":"https://api.github.com/users/jakeleventhal/orgs","repos_url":"https://api.github.com/users/jakeleventhal/repos","events_url":"https://api.github.com/users/jakeleventhal/events{/privacy}","received_events_url":"https://api.github.com/users/jakeleventhal/received_events","type":"User","site_admin":false},"labels":[{"id":4311178956,"node_id":"LA_kwDOHoY85M8AAAABAPdezA","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"}],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-08-24T14:45:28Z","updated_at":"2024-05-30T20:33:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"A great feature would be a way to do push as a \"dry run\" to let you know if there are blocking changes (like column rename) that might lead to data losses. If you want to follow the [expand and contract pattern](https://www.prisma.io/dataguide/types/relational/expand-and-contract-pattern), this would be a good check in CI to ensure that it will work properly.\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/165/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/165/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/164","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/164/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/164/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/164/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/164","id":1862647439,"node_id":"I_kwDOHoY85M5vBb6P","number":164,"title":"I can not start studio using ssl","user":{"login":"salemkode","id":58360393,"node_id":"MDQ6VXNlcjU4MzYwMzkz","avatar_url":"https://avatars.githubusercontent.com/u/58360393?v=4","gravatar_id":"","url":"https://api.github.com/users/salemkode","html_url":"https://github.com/salemkode","followers_url":"https://api.github.com/users/salemkode/followers","following_url":"https://api.github.com/users/salemkode/following{/other_user}","gists_url":"https://api.github.com/users/salemkode/gists{/gist_id}","starred_url":"https://api.github.com/users/salemkode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/salemkode/subscriptions","organizations_url":"https://api.github.com/users/salemkode/orgs","repos_url":"https://api.github.com/users/salemkode/repos","events_url":"https://api.github.com/users/salemkode/events{/privacy}","received_events_url":"https://api.github.com/users/salemkode/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-08-23T06:22:55Z","updated_at":"2023-12-10T22:49:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"my config\r\n```ts\r\nimport type { Config } from \"drizzle-kit\";\r\nimport * as dotenv from \"dotenv\";\r\ndotenv.config();\r\n\r\nexport default {\r\n  schema: \"./src/db/schema.ts\",\r\n  out: \"drizzle\",\r\n  driver: \"pg\",\r\n  dbCredentials: {\r\n    connectionString: process.env.DATABASE_URL,\r\n    ssl: true,\r\n  },\r\n} satisfies Config;\r\n```\r\n\r\nAnd I have this error\r\n```bash\r\nDrizzle Studio is up and running on http://0.0.0.0:4983\r\nerror: connection is insecure (try using `sslmode=require`)\r\n    at Parser.parseErrorMessage (/home/salemkode/Project/things/node_modules/.pnpm/drizzle-kit@0.19.13/node_modules/drizzle-kit/index.cjs:40722:98)\r\n    at Parser.handlePacket (/home/salemkode/Project/things/node_modules/.pnpm/drizzle-kit@0.19.13/node_modules/drizzle-kit/index.cjs:40563:25)\r\n    at Parser.parse (/home/salemkode/Project/things/node_modules/.pnpm/drizzle-kit@0.19.13/node_modules/drizzle-kit/index.cjs:40487:34)\r\n    at Socket.<anonymous> (/home/salemkode/Project/things/node_modules/.pnpm/drizzle-kit@0.19.13/node_modules/drizzle-kit/index.cjs:40763:44)\r\n    at Socket.emit (node:events:513:28)\r\n    at addChunk (node:internal/streams/readable:324:12)\r\n    at readableAddChunk (node:internal/streams/readable:297:9)\r\n    at Readable.push (node:internal/streams/readable:234:10)\r\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23) {\r\n  length: 73,\r\n  severity: 'ERROR',\r\n  code: 'XX000',\r\n  detail: undefined,\r\n  hint: undefined,\r\n  position: undefined,\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: undefined,\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: undefined,\r\n  line: undefined,\r\n  routine: undefined\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/164/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/163","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/163/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/163/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/163/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/163","id":1862380472,"node_id":"I_kwDOHoY85M5vAau4","number":163,"title":"v0.19.13 `NotNull` not assignable to `PgColumnBuilder`","user":{"login":"shellscape","id":76371,"node_id":"MDQ6VXNlcjc2Mzcx","avatar_url":"https://avatars.githubusercontent.com/u/76371?v=4","gravatar_id":"","url":"https://api.github.com/users/shellscape","html_url":"https://github.com/shellscape","followers_url":"https://api.github.com/users/shellscape/followers","following_url":"https://api.github.com/users/shellscape/following{/other_user}","gists_url":"https://api.github.com/users/shellscape/gists{/gist_id}","starred_url":"https://api.github.com/users/shellscape/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shellscape/subscriptions","organizations_url":"https://api.github.com/users/shellscape/orgs","repos_url":"https://api.github.com/users/shellscape/repos","events_url":"https://api.github.com/users/shellscape/events{/privacy}","received_events_url":"https://api.github.com/users/shellscape/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-08-23T00:43:14Z","updated_at":"2024-05-01T06:45:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Updated to v0.19.3 and ran against our db (which was working well with v0.19.2) and received the following error for schema below:\r\n\r\n```\r\nType 'NotNull<NotNull<HasDefault<PgUUIDBuilderInitial<\"id\">>>>' is not assignable to type 'PgColumnBuilder<ColumnBuilderBaseConfig<ColumnDataType, string> & { data: any; }, object, object, ColumnBuilderExtraConfig>'.\r\n  The types of 'array(...).array(...)._' are incompatible between these types.\r\n    Type 'ColumnBuilderTypeConfig<{ name: \"id\"; dataType: \"array\"; columnType: \"PgArray\"; data: string[][]; driverParam: string | (string | string[])[]; enumValues: undefined; }, { baseBuilder: PgColumnBuilder<{ name: \"id\"; dataType: \"array\"; columnType: \"PgArray\"; data: string[]; driverParam: string | string[]; enumValues: u...' is not assignable to type 'ColumnBuilderTypeConfig<{ name: string; dataType: \"array\"; columnType: \"PgArray\"; data: any[][]; driverParam: string | (string | unknown[])[]; enumValues: string[] | undefined; }, { baseBuilder: PgColumnBuilder<{ name: string; dataType: \"array\"; columnType: \"PgArray\"; data: any[]; driverParam: string | unknown[]; en...'.\r\n      Type 'ColumnBuilderTypeConfig<{ name: \"id\"; dataType: \"array\"; columnType: \"PgArray\"; data: string[][]; driverParam: string | (string | string[])[]; enumValues: undefined; }, { baseBuilder: PgColumnBuilder<{ name: \"id\"; dataType: \"array\"; columnType: \"PgArray\"; data: string[]; driverParam: string | string[]; enumValues: u...' is not assignable to type '{ baseBuilder: PgColumnBuilder<{ name: string; dataType: \"array\"; columnType: \"PgArray\"; data: any[]; driverParam: string | unknown[]; enumValues: string[] | undefined; }, object, object, ColumnBuilderExtraConfig>; }'.\r\n        Types of property 'baseBuilder' are incompatible.\r\n          Type 'PgColumnBuilder<{ name: \"id\"; dataType: \"array\"; columnType: \"PgArray\"; data: string[]; driverParam: string | string[]; enumValues: undefined; }, object, object, ColumnBuilderExtraConfig>' is not assignable to type 'PgColumnBuilder<{ name: string; dataType: \"array\"; columnType: \"PgArray\"; data: any[]; driverParam: string | unknown[]; enumValues: string[] | undefined; }, object, object, ColumnBuilderExtraConfig>'.\r\n            Type 'string' is not assignable to type '\"id\"'.ts(2322)\r\n```\r\n\r\n```\r\nexport const organizations = batman.table(\r\n  'organizations',\r\n  {\r\n    id: uuid('id')\r\n      .default(sql`uuid_generate_v4()`)\r\n      .primaryKey()\r\n      .notNull(),\r\n    authProviderId: text('auth_provider_id').notNull(),\r\n    createdAt: timestamp('created_at', { mode: 'string' }).defaultNow().notNull(),\r\n    displayName: text('display_name'),\r\n    name: text('name'),\r\n    ownedBy: uuid('owned_by')\r\n      .notNull()\r\n      .references((): AnyPgColumn => users.id),\r\n    updatedAt: timestamp('updated_at', { mode: 'string' }).defaultNow().notNull()\r\n  },\r\n  (table) => {\r\n    return {\r\n       batmanOrganizationsAuthProviderIdKey: index('batman_organizations_auth_provider_id_key').on(\r\n        table.authProviderId\r\n      )\r\n    };\r\n  }\r\n);\r\n```\r\n\r\nThis appears to be an issue with the generated file and `drizzle-orm@0.28.3`. When downgrading to v0.28.1 the error above is no longer present.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/163/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/162","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/162/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/162/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/162/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/162","id":1862374891,"node_id":"I_kwDOHoY85M5vAZXr","number":162,"title":"feat: option to skip generating `meta` and `sql`","user":{"login":"shellscape","id":76371,"node_id":"MDQ6VXNlcjc2Mzcx","avatar_url":"https://avatars.githubusercontent.com/u/76371?v=4","gravatar_id":"","url":"https://api.github.com/users/shellscape","html_url":"https://github.com/shellscape","followers_url":"https://api.github.com/users/shellscape/followers","following_url":"https://api.github.com/users/shellscape/following{/other_user}","gists_url":"https://api.github.com/users/shellscape/gists{/gist_id}","starred_url":"https://api.github.com/users/shellscape/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shellscape/subscriptions","organizations_url":"https://api.github.com/users/shellscape/orgs","repos_url":"https://api.github.com/users/shellscape/repos","events_url":"https://api.github.com/users/shellscape/events{/privacy}","received_events_url":"https://api.github.com/users/shellscape/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-08-23T00:34:15Z","updated_at":"2023-08-23T00:34:15Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"We're using our database as the source of truth and already have raw SQL migrations that we use `goose` to manage. We're simply not in need of the `drizzle/meta` or `drizzle/0000_*.sql` direct and file. We currently have a build step to remove these afterwards, but it would be cool not to have to do that manually, and instead just tell drizzle-kit to skip those.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/162/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/161","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/161/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/161/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/161/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/161","id":1860172139,"node_id":"I_kwDOHoY85M5u3_lr","number":161,"title":"Relationships with \"binary\" data type not working","user":{"login":"pedro199288","id":40956528,"node_id":"MDQ6VXNlcjQwOTU2NTI4","avatar_url":"https://avatars.githubusercontent.com/u/40956528?v=4","gravatar_id":"","url":"https://api.github.com/users/pedro199288","html_url":"https://github.com/pedro199288","followers_url":"https://api.github.com/users/pedro199288/followers","following_url":"https://api.github.com/users/pedro199288/following{/other_user}","gists_url":"https://api.github.com/users/pedro199288/gists{/gist_id}","starred_url":"https://api.github.com/users/pedro199288/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pedro199288/subscriptions","organizations_url":"https://api.github.com/users/pedro199288/orgs","repos_url":"https://api.github.com/users/pedro199288/repos","events_url":"https://api.github.com/users/pedro199288/events{/privacy}","received_events_url":"https://api.github.com/users/pedro199288/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-08-21T21:22:05Z","updated_at":"2023-08-21T21:22:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When having a relationship like this\r\n```js\r\nexport const users = mysqlTable(\"users\", { \r\n  _id: serial(\"_id\").primaryKey()\r\n})\r\nexport const profiles = mysqlTable(\"profiles\", {\r\n  userId: int(\"userId\").references(() => users._id),\r\n});\r\n```\r\nthe studio shows the linked row properly.\r\n\r\nBut when having it with binary data type, like this:\r\n```js\r\nexport const users = mysqlTable(\"users\", { \r\n  _id: binary(\"userId\", { length: 16 }).notNull().primaryKey()\r\n})\r\nexport const profiles = mysqlTable(\"profiles\", {\r\n  userId: binary(\"userId\", { length: 16 })\r\n    .references(() => users._id),\r\n});\r\n```\r\nthe studio doesn't show the linked row of the other table","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/161/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/160","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/160/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/160/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/160/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/160","id":1860022246,"node_id":"I_kwDOHoY85M5u3a_m","number":160,"title":"Migration files and merge conflicts","user":{"login":"SamyPesse","id":845425,"node_id":"MDQ6VXNlcjg0NTQyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/845425?v=4","gravatar_id":"","url":"https://api.github.com/users/SamyPesse","html_url":"https://github.com/SamyPesse","followers_url":"https://api.github.com/users/SamyPesse/followers","following_url":"https://api.github.com/users/SamyPesse/following{/other_user}","gists_url":"https://api.github.com/users/SamyPesse/gists{/gist_id}","starred_url":"https://api.github.com/users/SamyPesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SamyPesse/subscriptions","organizations_url":"https://api.github.com/users/SamyPesse/orgs","repos_url":"https://api.github.com/users/SamyPesse/repos","events_url":"https://api.github.com/users/SamyPesse/events{/privacy}","received_events_url":"https://api.github.com/users/SamyPesse/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-08-21T19:40:21Z","updated_at":"2024-03-07T14:26:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Currently, when using `drizzle-kit` and storing the migration files in Git, handling merge conflicts is currently very very hard.\r\n\r\nThe main issues is that Drizzle doesn't use an approach where it avoids conflicts (like `changeset` does, or similar tools).\r\n\r\nIt'd be great if there was a command to resolve merge conflicts in migration files.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/160/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/160/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/159","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/159/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/159/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/159/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/159","id":1857821652,"node_id":"I_kwDOHoY85M5uvBvU","number":159,"title":"[Mysql] Drizzle kit generates invalid SQL syntax for `onUpdateNow` when an `fsp` is provided to timestamp","user":{"login":"Angelelz","id":34462576,"node_id":"MDQ6VXNlcjM0NDYyNTc2","avatar_url":"https://avatars.githubusercontent.com/u/34462576?v=4","gravatar_id":"","url":"https://api.github.com/users/Angelelz","html_url":"https://github.com/Angelelz","followers_url":"https://api.github.com/users/Angelelz/followers","following_url":"https://api.github.com/users/Angelelz/following{/other_user}","gists_url":"https://api.github.com/users/Angelelz/gists{/gist_id}","starred_url":"https://api.github.com/users/Angelelz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Angelelz/subscriptions","organizations_url":"https://api.github.com/users/Angelelz/orgs","repos_url":"https://api.github.com/users/Angelelz/repos","events_url":"https://api.github.com/users/Angelelz/events{/privacy}","received_events_url":"https://api.github.com/users/Angelelz/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-08-19T17:53:59Z","updated_at":"2023-08-19T17:53:59Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Say you have the following table with a timestamp:\r\n```typescript\r\nexport const users = mysqlTable(\"users\", {\r\n  id: char(\"id\", { length: 26 }).primaryKey().notNull(),\r\n  updatedAt: timestamp(\"updatedAt\", { mode: \"date\", fsp: 3 })\r\n    .onUpdateNow()\r\n}\r\n```\r\n\r\nThe generated SQL with `drizzle-kit generate` command will be:\r\n```SQL\r\nCREATE TABLE `users` (\r\n\t`id` char(26) NOT NULL,\r\n\t`updatedAt` timestamp(3) ON UPDATE CURRENT_TIMESTAMP,\r\n);\r\n```\r\n\r\nBut this is invalid syntax with the following result:\r\n```sh\r\ncode: 'ER_INVALID_ON_UPDATE',\r\n  errno: 1294,\r\n  ...\r\n  sqlMessage: \"Invalid ON UPDATE clause for 'updatedAt' column\"\r\n```\r\n\r\nAccording to the Mysql [documentation](https://dev.mysql.com/doc/refman/8.0/en/timestamp-initialization.html):\r\n\r\n> If a [TIMESTAMP](https://dev.mysql.com/doc/refman/8.0/en/datetime.html) or [DATETIME](https://dev.mysql.com/doc/refman/8.0/en/datetime.html) column definition includes an explicit fractional seconds precision value anywhere, the same value must be used throughout the column definition.\r\n\r\nAnd then it says:\r\n> This is not permitted:\r\nCREATE TABLE t1 (\r\n  ts TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP(3)\r\n);\r\n\r\nSo the correct SQL should be:\r\n```SQL\r\nCREATE TABLE `users` (\r\n\t`id` char(26) NOT NULL,\r\n\t`updatedAt` timestamp(3) ON UPDATE CURRENT_TIMESTAMP(3),\r\n);\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/159/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/158","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/158/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/158/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/158/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/158","id":1854540838,"node_id":"I_kwDOHoY85M5uigwm","number":158,"title":"Schema files paths is ignored","user":{"login":"rphlmr","id":20722140,"node_id":"MDQ6VXNlcjIwNzIyMTQw","avatar_url":"https://avatars.githubusercontent.com/u/20722140?v=4","gravatar_id":"","url":"https://api.github.com/users/rphlmr","html_url":"https://github.com/rphlmr","followers_url":"https://api.github.com/users/rphlmr/followers","following_url":"https://api.github.com/users/rphlmr/following{/other_user}","gists_url":"https://api.github.com/users/rphlmr/gists{/gist_id}","starred_url":"https://api.github.com/users/rphlmr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rphlmr/subscriptions","organizations_url":"https://api.github.com/users/rphlmr/orgs","repos_url":"https://api.github.com/users/rphlmr/repos","events_url":"https://api.github.com/users/rphlmr/events{/privacy}","received_events_url":"https://api.github.com/users/rphlmr/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-08-17T08:42:57Z","updated_at":"2023-11-28T19:33:15Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"drizzle-kit: v0.19.12\r\ndrizzle-orm: v0.28.2\r\n\r\nWith the given config file:\r\n\r\n```ts\r\nexport default {\r\n  out: `./src/drizzle`,\r\n  schema: `./src/drizzle/schema/*`,\r\n  driver: 'pg',\r\n  dbCredentials: {\r\n    connectionString: \"postgres://postgres:password@db:5432/postgres\",\r\n  }\r\n} satisfies Config;\r\n```\r\n\r\nConsole output:\r\n\r\n```terminal\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/Users/rphlmr/workspaces/rphlmr//my-app/drizzle.config.ts'\r\n[‚úì] 5  tables fetched\r\n[‚úì] 13 columns fetched\r\n[‚úì] 6  enums fetched\r\n[‚úì] 0  indexes fetched\r\n[‚úì] 4  foreign keys fetched\r\n\r\n[‚úì] Your SQL migration file ‚ûú src/drizzle/0000_lovely_reavers.sql üöÄ\r\n[‚úì] You schema file is ready ‚ûú src/drizzle/schema.ts üöÄ\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/158/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/158/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/157","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/157/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/157/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/157/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/157","id":1853632172,"node_id":"I_kwDOHoY85M5ufC6s","number":157,"title":"PG: Unable to connect with SSL","user":{"login":"rphlmr","id":20722140,"node_id":"MDQ6VXNlcjIwNzIyMTQw","avatar_url":"https://avatars.githubusercontent.com/u/20722140?v=4","gravatar_id":"","url":"https://api.github.com/users/rphlmr","html_url":"https://github.com/rphlmr","followers_url":"https://api.github.com/users/rphlmr/followers","following_url":"https://api.github.com/users/rphlmr/following{/other_user}","gists_url":"https://api.github.com/users/rphlmr/gists{/gist_id}","starred_url":"https://api.github.com/users/rphlmr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rphlmr/subscriptions","organizations_url":"https://api.github.com/users/rphlmr/orgs","repos_url":"https://api.github.com/users/rphlmr/repos","events_url":"https://api.github.com/users/rphlmr/events{/privacy}","received_events_url":"https://api.github.com/users/rphlmr/received_events","type":"User","site_admin":false},"labels":[{"id":4311178953,"node_id":"LA_kwDOHoY85M8AAAABAPdeyQ","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2023-08-16T17:18:46Z","updated_at":"2024-05-10T09:33:47Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hello,\r\n\r\nWhen we use a PG DB with self signe SSL (Supabase), it is not possible to connect:\r\n(`npx drizzle-kit introspect:pg ` for example)\r\n\r\n```terminal\r\nnode:internal/process/promises:288\r\n            triggerUncaughtException(err, true /* fromPromise */);\r\n            ^\r\n\r\nError: self-signed certificate in certificate chain\r\n    at TLSSocket.onConnectSecure (node:_tls_wrap:1545:34)\r\n    at TLSSocket.emit (node:events:513:28)\r\n    at TLSSocket._finishInit (node:_tls_wrap:959:8)\r\n    at ssl.onhandshakedone (node:_tls_wrap:743:12) {\r\n  code: 'SELF_SIGNED_CERT_IN_CHAIN'\r\n}\r\n```\r\n\r\nMaybe `dbCredentials` should follow `pg` ssl config when driver is `pg`?\r\n\r\nhttps://node-postgres.com/features/ssl#self-signed-cert\r\n\r\n```txt\r\nssl: {\r\n    rejectUnauthorized: boolean,\r\n    ca: fs.readFileSync('/path/to/server-certificates/root.crt').toString(),\r\n    key: fs.readFileSync('/path/to/client-key/postgresql.key').toString(),\r\n    cert: fs.readFileSync('/path/to/client-certificates/postgresql.crt').toString(),\r\n  },\r\n```\r\n\r\ndrizzle-kit: v0.19.12\r\ndrizzle-orm: v0.28.2","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/157/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/157/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/156","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/156/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/156/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/156/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/156","id":1853286059,"node_id":"I_kwDOHoY85M5uduar","number":156,"title":"Issue with introspecting PG views: columns are coming without the notNull parameter","user":{"login":"bcerquiare","id":25101720,"node_id":"MDQ6VXNlcjI1MTAxNzIw","avatar_url":"https://avatars.githubusercontent.com/u/25101720?v=4","gravatar_id":"","url":"https://api.github.com/users/bcerquiare","html_url":"https://github.com/bcerquiare","followers_url":"https://api.github.com/users/bcerquiare/followers","following_url":"https://api.github.com/users/bcerquiare/following{/other_user}","gists_url":"https://api.github.com/users/bcerquiare/gists{/gist_id}","starred_url":"https://api.github.com/users/bcerquiare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bcerquiare/subscriptions","organizations_url":"https://api.github.com/users/bcerquiare/orgs","repos_url":"https://api.github.com/users/bcerquiare/repos","events_url":"https://api.github.com/users/bcerquiare/events{/privacy}","received_events_url":"https://api.github.com/users/bcerquiare/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-08-16T13:45:58Z","updated_at":"2023-08-24T12:22:17Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi everyone,\r\n\r\nI'm facing an issue with the npx drizzle-kit introspect:pg command. My views are missing the .notNull() parameter in column definitions. I'm using drizzle-kit version 0.19.12. This problem doesn't occur in MySQL. \r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/156/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/155","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/155/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/155/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/155/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/155","id":1846766940,"node_id":"I_kwDOHoY85M5uE21c","number":155,"title":"Double quotes on defaults","user":{"login":"Cadienvan","id":5492927,"node_id":"MDQ6VXNlcjU0OTI5Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/5492927?v=4","gravatar_id":"","url":"https://api.github.com/users/Cadienvan","html_url":"https://github.com/Cadienvan","followers_url":"https://api.github.com/users/Cadienvan/followers","following_url":"https://api.github.com/users/Cadienvan/following{/other_user}","gists_url":"https://api.github.com/users/Cadienvan/gists{/gist_id}","starred_url":"https://api.github.com/users/Cadienvan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cadienvan/subscriptions","organizations_url":"https://api.github.com/users/Cadienvan/orgs","repos_url":"https://api.github.com/users/Cadienvan/repos","events_url":"https://api.github.com/users/Cadienvan/events{/privacy}","received_events_url":"https://api.github.com/users/Cadienvan/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":11,"created_at":"2023-08-11T12:47:14Z","updated_at":"2024-04-27T11:43:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"drizzle-kit introspect seems to generate double single quotes on every default value:\r\n![Screenshot 2023-08-11 alle 14 47 08](https://github.com/drizzle-team/drizzle-kit-mirror/assets/5492927/35ff60ac-aebd-40a6-9ca5-c5ab4fe89d95)\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/155/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/155/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/154","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/154/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/154/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/154/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/154","id":1846731399,"node_id":"I_kwDOHoY85M5uEuKH","number":154,"title":"Fulltext index support in index generation","user":{"login":"Angelelz","id":34462576,"node_id":"MDQ6VXNlcjM0NDYyNTc2","avatar_url":"https://avatars.githubusercontent.com/u/34462576?v=4","gravatar_id":"","url":"https://api.github.com/users/Angelelz","html_url":"https://github.com/Angelelz","followers_url":"https://api.github.com/users/Angelelz/followers","following_url":"https://api.github.com/users/Angelelz/following{/other_user}","gists_url":"https://api.github.com/users/Angelelz/gists{/gist_id}","starred_url":"https://api.github.com/users/Angelelz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Angelelz/subscriptions","organizations_url":"https://api.github.com/users/Angelelz/orgs","repos_url":"https://api.github.com/users/Angelelz/repos","events_url":"https://api.github.com/users/Angelelz/events{/privacy}","received_events_url":"https://api.github.com/users/Angelelz/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2023-08-11T12:22:32Z","updated_at":"2023-08-15T09:12:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"If Drizzle-orm implements fulltextIndex as suggested [here](https://github.com/drizzle-team/drizzle-orm/pull/449), Drizzle-kit would need to implement it as well, as suggested in [this comment](https://github.com/drizzle-team/drizzle-orm/pull/449#issuecomment-1604284434).\r\n\r\nThanks,","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/154/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/153","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/153/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/153/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/153/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/153","id":1845501772,"node_id":"I_kwDOHoY85M5uAB9M","number":153,"title":"Incompatible drizzle-orm & drizzle-kit versions causing drop all tables generated migrations","user":{"login":"Wyatt-SG","id":42128929,"node_id":"MDQ6VXNlcjQyMTI4OTI5","avatar_url":"https://avatars.githubusercontent.com/u/42128929?v=4","gravatar_id":"","url":"https://api.github.com/users/Wyatt-SG","html_url":"https://github.com/Wyatt-SG","followers_url":"https://api.github.com/users/Wyatt-SG/followers","following_url":"https://api.github.com/users/Wyatt-SG/following{/other_user}","gists_url":"https://api.github.com/users/Wyatt-SG/gists{/gist_id}","starred_url":"https://api.github.com/users/Wyatt-SG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Wyatt-SG/subscriptions","organizations_url":"https://api.github.com/users/Wyatt-SG/orgs","repos_url":"https://api.github.com/users/Wyatt-SG/repos","events_url":"https://api.github.com/users/Wyatt-SG/events{/privacy}","received_events_url":"https://api.github.com/users/Wyatt-SG/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-08-10T16:17:10Z","updated_at":"2023-08-10T16:26:40Z","closed_at":"2023-08-10T16:26:40Z","author_association":"NONE","active_lock_reason":null,"body":"drizzle-orm: 0.26.3\r\ndrizzle-kit: 0.19.12\r\n\r\ndrizzle-kit prompts upgrade to latest version to generate migrations. Upon upgrading to the latest drizzle-kit version running `drizzle-kit generate:pg` only generates migrations that drops all tables. \r\n\r\nThis issue was resolved by updating drizzle-orm to the latest (0.28.1). It would greatly improve DX if an error could be throw when the versions are incapable so other developers don't run into the same issue.\r\n\r\nSame issue/team to the [following in discord](https://discord.com/channels/1043890932593987624/1138977239489327167/1139042533759008869) but wanted to post the issues here for better visibility and tracking.\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/153/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/152","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/152/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/152/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/152/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/152","id":1844344462,"node_id":"I_kwDOHoY85M5t7naO","number":152,"title":"Cannot generate type for array of enum in postgres when introspecting","user":{"login":"essential-randomness","id":47095486,"node_id":"MDQ6VXNlcjQ3MDk1NDg2","avatar_url":"https://avatars.githubusercontent.com/u/47095486?v=4","gravatar_id":"","url":"https://api.github.com/users/essential-randomness","html_url":"https://github.com/essential-randomness","followers_url":"https://api.github.com/users/essential-randomness/followers","following_url":"https://api.github.com/users/essential-randomness/following{/other_user}","gists_url":"https://api.github.com/users/essential-randomness/gists{/gist_id}","starred_url":"https://api.github.com/users/essential-randomness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/essential-randomness/subscriptions","organizations_url":"https://api.github.com/users/essential-randomness/orgs","repos_url":"https://api.github.com/users/essential-randomness/repos","events_url":"https://api.github.com/users/essential-randomness/events{/privacy}","received_events_url":"https://api.github.com/users/essential-randomness/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-08-10T03:21:59Z","updated_at":"2023-08-18T11:19:50Z","closed_at":"2023-08-18T11:19:50Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\nI've been trying to generate types from my existing postgres db, but have found a case where introspection doesn't work correctly.\r\n\r\nThis is a minimal reproduction:\r\n```sql\r\n\r\nCREATE TYPE board_restrictions_type AS ENUM ('lock_access', 'delist');\r\nCREATE TABLE IF NOT EXISTS board_restrictions(\r\n    logged_out_restrictions board_restrictions_type[] NOT NULL DEFAULT ARRAY[]::board_restrictions_type[],\r\n    logged_in_base_restrictions board_restrictions_type[] NOT NULL DEFAULT ARRAY[]::board_restrictions_type[]\r\n);\r\n```\r\n\r\ngenerates\r\n\r\n```ts\r\nimport { pgTable, pgEnum, pgSchema, AnyPgColumn } from \"drizzle-orm/pg-core\"\r\n\r\nexport const boardRestrictionsType = pgEnum(\"board_restrictions_type\", ['lock_access', 'delist'])\r\n\r\nimport { sql } from \"drizzle-orm\"\r\n\r\nexport const boardRestrictions = pgTable(\"board_restrictions\", {\r\n\t// TODO: failed to parse database type 'board_restrictions_type[]'\r\n\tloggedOutRestrictions: unknown(\"logged_out_restrictions\").array().notNull(),\r\n\t// TODO: failed to parse database type 'board_restrictions_type[]'\r\n\tloggedInBaseRestrictions: unknown(\"logged_in_base_restrictions\").array().notNull(),\r\n});\r\n```\r\n\r\nI would expect drizzle-kit to correctly interpret the type `board_restrictions_type[]` as related to the `boardRestrictionsType` enum. As far as I can tell, all generations in my db with columns as \"enum array\" have the same issue.\r\n\r\nI'd love to help fix this, but it seems like this codebase isn't open source. I hope it will be in the (near?) future.\r\n\r\nThank you for your work!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/152/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/151","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/151/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/151/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/151/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/151","id":1844205122,"node_id":"I_kwDOHoY85M5t7FZC","number":151,"title":"Generated SQL try to drop constrains on the wrong table name when renaming","user":{"login":"RustyNova016","id":50844553,"node_id":"MDQ6VXNlcjUwODQ0NTUz","avatar_url":"https://avatars.githubusercontent.com/u/50844553?v=4","gravatar_id":"","url":"https://api.github.com/users/RustyNova016","html_url":"https://github.com/RustyNova016","followers_url":"https://api.github.com/users/RustyNova016/followers","following_url":"https://api.github.com/users/RustyNova016/following{/other_user}","gists_url":"https://api.github.com/users/RustyNova016/gists{/gist_id}","starred_url":"https://api.github.com/users/RustyNova016/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RustyNova016/subscriptions","organizations_url":"https://api.github.com/users/RustyNova016/orgs","repos_url":"https://api.github.com/users/RustyNova016/repos","events_url":"https://api.github.com/users/RustyNova016/events{/privacy}","received_events_url":"https://api.github.com/users/RustyNova016/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-08-10T00:09:58Z","updated_at":"2023-08-18T11:19:15Z","closed_at":"2023-08-18T11:19:14Z","author_association":"NONE","active_lock_reason":null,"body":"I renamed one of my tables, and I found that the generated SQL is trying to drop constrains on the new table instead of the old names:\r\n\r\n```sql\r\nALTER TABLE \"posts_to_images\" DROP CONSTRAINT \"post_image_post_id_post_id_fk\"; -- Trying to drop on \"posts_to_images\", but this table doesn't exist! The correct table is \"post_image\"\r\n\r\nALTER TABLE \"posts_to_images\" DROP CONSTRAINT \"post_image_image_id_image_id_fk\";\r\n\r\nALTER TABLE \"post_image\" RENAME TO \"posts_to_images\"; -- It's only there that \"posts_to_images\" is known\r\n```\r\n\r\nThe rest of the querry is correct however. I'm using Drizzlekit 0.19.12 and DrizzleORM 0.28.1.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/151/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/150","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/150/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/150/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/150/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/150","id":1842402979,"node_id":"I_kwDOHoY85M5t0Naj","number":150,"title":"`introspect` Creates a `schema.ts` File with Unused Imports","user":{"login":"shellscape","id":76371,"node_id":"MDQ6VXNlcjc2Mzcx","avatar_url":"https://avatars.githubusercontent.com/u/76371?v=4","gravatar_id":"","url":"https://api.github.com/users/shellscape","html_url":"https://github.com/shellscape","followers_url":"https://api.github.com/users/shellscape/followers","following_url":"https://api.github.com/users/shellscape/following{/other_user}","gists_url":"https://api.github.com/users/shellscape/gists{/gist_id}","starred_url":"https://api.github.com/users/shellscape/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shellscape/subscriptions","organizations_url":"https://api.github.com/users/shellscape/orgs","repos_url":"https://api.github.com/users/shellscape/repos","events_url":"https://api.github.com/users/shellscape/events{/privacy}","received_events_url":"https://api.github.com/users/shellscape/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2023-08-09T03:39:45Z","updated_at":"2024-02-07T01:45:29Z","closed_at":"2023-08-18T11:19:18Z","author_association":"NONE","active_lock_reason":null,"body":"Upon running `introspect:pg` this evening, drizzle-kit did it's thing and created a `schema.ts` file successfully. However, it included named imports in the file which aren't used in the schema.\r\n\r\nFor anyone running a strict `tsconfig.json`, that's a problem which requires manual intervention. Not ideal for automation. Here's what was imported:\r\n\r\n```\r\nimport { pgTable, pgEnum, pgSchema, AnyPgColumn, serial, bigint, boolean, timestamp, uuid, text, jsonb, integer } from \"drizzle-orm/pg-core\"\r\n```\r\n\r\nWith these two being the offenders `pgSchema, AnyPgColumn`. I'm not exactly keen on having to have another `tsconfig.json` in the directory to turn off strictness just for drizzle, either. ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/150/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/149","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/149/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/149/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/149/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/149","id":1842399507,"node_id":"I_kwDOHoY85M5t0MkT","number":149,"title":"Invalid `jsonb` default value for `introspect`","user":{"login":"shellscape","id":76371,"node_id":"MDQ6VXNlcjc2Mzcx","avatar_url":"https://avatars.githubusercontent.com/u/76371?v=4","gravatar_id":"","url":"https://api.github.com/users/shellscape","html_url":"https://github.com/shellscape","followers_url":"https://api.github.com/users/shellscape/followers","following_url":"https://api.github.com/users/shellscape/following{/other_user}","gists_url":"https://api.github.com/users/shellscape/gists{/gist_id}","starred_url":"https://api.github.com/users/shellscape/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shellscape/subscriptions","organizations_url":"https://api.github.com/users/shellscape/orgs","repos_url":"https://api.github.com/users/shellscape/repos","events_url":"https://api.github.com/users/shellscape/events{/privacy}","received_events_url":"https://api.github.com/users/shellscape/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2023-08-09T03:34:28Z","updated_at":"2023-09-14T02:54:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Upon running `introspect:pg`, drizzle-kit does it's thing and manages to pull down the database and create a schema. However, it appears to choke on `jsonb` columns with a default value. This is what it outputs:\r\n\r\n```\r\nmetadata: jsonb(\"metadata\").default('{}'::json).notNull(),\r\n```\r\n\r\nFor what it's worth, that column is created as such:\r\n\r\n```\r\nmetadata jsonb NOT NULL DEFAULT '{}'::jsonb,\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/149/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/149/timeline","performed_via_github_app":null,"state_reason":"reopened"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/148","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/148/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/148/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/148/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/148","id":1842396273,"node_id":"I_kwDOHoY85M5t0Lxx","number":148,"title":"Docs Incorrect: Default Config File ","user":{"login":"shellscape","id":76371,"node_id":"MDQ6VXNlcjc2Mzcx","avatar_url":"https://avatars.githubusercontent.com/u/76371?v=4","gravatar_id":"","url":"https://api.github.com/users/shellscape","html_url":"https://github.com/shellscape","followers_url":"https://api.github.com/users/shellscape/followers","following_url":"https://api.github.com/users/shellscape/following{/other_user}","gists_url":"https://api.github.com/users/shellscape/gists{/gist_id}","starred_url":"https://api.github.com/users/shellscape/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shellscape/subscriptions","organizations_url":"https://api.github.com/users/shellscape/orgs","repos_url":"https://api.github.com/users/shellscape/repos","events_url":"https://api.github.com/users/shellscape/events{/privacy}","received_events_url":"https://api.github.com/users/shellscape/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-08-09T03:29:47Z","updated_at":"2023-08-18T11:32:52Z","closed_at":"2023-08-18T11:19:31Z","author_association":"NONE","active_lock_reason":null,"body":"The docs here https://orm.drizzle.team/kit-docs/commands#introspect--pull state that the default config file is `drizzle.config.ts`. However, that doesn't seem to be aligned with the current version of the drizzle-kit CLI. Upon creating `drizzle.config.ts` and running `drizzle-kit introspect:pg` I'm presented with this:\r\n\r\n```\r\ndrizzle-kit: v0.19.12\r\ndrizzle-orm: v0.28.1\r\n\r\nNo config path provided, using default 'drizzle.config.json'\r\n```\r\n\r\nI'm trying to convince a team to move over to Drizzle. Consistency in areas like this are important to a \"stable\" image.  ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/148/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/147","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/147/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/147/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/147","id":1842063243,"node_id":"I_kwDOHoY85M5ty6eL","number":147,"title":"'AnyPgColumn' is a type and must be imported using a type-only import","user":{"login":"JustMrMendez","id":56850299,"node_id":"MDQ6VXNlcjU2ODUwMjk5","avatar_url":"https://avatars.githubusercontent.com/u/56850299?v=4","gravatar_id":"","url":"https://api.github.com/users/JustMrMendez","html_url":"https://github.com/JustMrMendez","followers_url":"https://api.github.com/users/JustMrMendez/followers","following_url":"https://api.github.com/users/JustMrMendez/following{/other_user}","gists_url":"https://api.github.com/users/JustMrMendez/gists{/gist_id}","starred_url":"https://api.github.com/users/JustMrMendez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JustMrMendez/subscriptions","organizations_url":"https://api.github.com/users/JustMrMendez/orgs","repos_url":"https://api.github.com/users/JustMrMendez/repos","events_url":"https://api.github.com/users/JustMrMendez/events{/privacy}","received_events_url":"https://api.github.com/users/JustMrMendez/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-08-08T20:35:26Z","updated_at":"2023-08-18T11:19:35Z","closed_at":"2023-08-18T11:19:35Z","author_association":"NONE","active_lock_reason":null,"body":"## After generating schema with `drizzle-kit introspect:pg`\r\n\r\n#### AnyPgColumn is a type and must be imported using a type-only import when preserveValueImports and isolatedModules are both enabled.\r\n\r\nGenerated imports\r\n```js\r\nimport { pgTable, pgEnum, pgSchema, AnyPgColumn, foreignKey, ... } from \"drizzle-orm/pg-core\"\r\n```\r\n\r\nI am using svelte-kit\r\n\r\njust adding `type` would clear this warning/error","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/147/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/146","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/146/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/146/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/146/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/146","id":1841509961,"node_id":"I_kwDOHoY85M5twzZJ","number":146,"title":"BUG: drizzle-kit introspect:mysql tables with pk and unique keys","user":{"login":"bcerquiare","id":25101720,"node_id":"MDQ6VXNlcjI1MTAxNzIw","avatar_url":"https://avatars.githubusercontent.com/u/25101720?v=4","gravatar_id":"","url":"https://api.github.com/users/bcerquiare","html_url":"https://github.com/bcerquiare","followers_url":"https://api.github.com/users/bcerquiare/followers","following_url":"https://api.github.com/users/bcerquiare/following{/other_user}","gists_url":"https://api.github.com/users/bcerquiare/gists{/gist_id}","starred_url":"https://api.github.com/users/bcerquiare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bcerquiare/subscriptions","organizations_url":"https://api.github.com/users/bcerquiare/orgs","repos_url":"https://api.github.com/users/bcerquiare/repos","events_url":"https://api.github.com/users/bcerquiare/events{/privacy}","received_events_url":"https://api.github.com/users/bcerquiare/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2023-08-08T15:11:18Z","updated_at":"2024-04-17T08:02:16Z","closed_at":"2023-08-18T11:19:39Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\nAfter updating Drizzle Kit to version 0.19.12, I've encountered errors with the `npx drizzle-kit introspect:mysql` command when working with tables that have unique keys.\r\n\r\nWhen running the introspect command in Drizzle Kit, it doesn't place commas after the primaryKey column, which leads to an error because unique keys come right after the primary key:\r\n\r\n```\r\nexport const table_name = mysqlTable(\"table_name\", {\r\n\tcolumn1: varchar(\"column1\", { length: 65 }).notNull(),\r\n\tcolumn2: varchar(\"column2\", { length: 65 }).notNull(),\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\ttable_name_column1 : primaryKey(table.column1)\r\n\t\tunq1: unique(\"unq1\").on(table.unq_column2),\r\n\t}\r\n});\r\n\r\n```\r\n\r\nI've configured my drizzle.config.ts to use the MySQL driver (mysql2)\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/25101720/d7e21c0d-3465-46a0-bc8f-4dc96652f70a)\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/146/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/146/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/145","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/145/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/145/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/145/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/145","id":1839423609,"node_id":"I_kwDOHoY85M5to2B5","number":145,"title":"BUG: infinite loading state on inserting string in column of datatype integer.","user":{"login":"headshigh","id":93933601,"node_id":"U_kgDOBZlQIQ","avatar_url":"https://avatars.githubusercontent.com/u/93933601?v=4","gravatar_id":"","url":"https://api.github.com/users/headshigh","html_url":"https://github.com/headshigh","followers_url":"https://api.github.com/users/headshigh/followers","following_url":"https://api.github.com/users/headshigh/following{/other_user}","gists_url":"https://api.github.com/users/headshigh/gists{/gist_id}","starred_url":"https://api.github.com/users/headshigh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/headshigh/subscriptions","organizations_url":"https://api.github.com/users/headshigh/orgs","repos_url":"https://api.github.com/users/headshigh/repos","events_url":"https://api.github.com/users/headshigh/events{/privacy}","received_events_url":"https://api.github.com/users/headshigh/received_events","type":"User","site_admin":false},"labels":[{"id":5769803325,"node_id":"LA_kwDOHoY85M8AAAABV-g2PQ","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/studio","name":"studio","color":"7F6A16","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-08-07T13:07:16Z","updated_at":"2023-08-15T09:14:48Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Method to recreate:\r\n1) create a table with a column of integer datatype\r\n2) go do drizzle-kit studio\r\n3)insert a string value like 'abcd' to the column of integer datatype\r\n4) click on save changes\r\nthe button will display a loading state that will persist infinitely.\r\nExpected behaviour:\r\ndisplay a message alerting that user is not allowed to insert string value in integer column","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/145/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/144","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/144/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/144/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/144/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/144","id":1837840297,"node_id":"I_kwDOHoY85M5tizep","number":144,"title":"control infer mode for timestamp columns in `drizzle-kit introspect:pg`?","user":{"login":"Sejmou","id":31240010,"node_id":"MDQ6VXNlcjMxMjQwMDEw","avatar_url":"https://avatars.githubusercontent.com/u/31240010?v=4","gravatar_id":"","url":"https://api.github.com/users/Sejmou","html_url":"https://github.com/Sejmou","followers_url":"https://api.github.com/users/Sejmou/followers","following_url":"https://api.github.com/users/Sejmou/following{/other_user}","gists_url":"https://api.github.com/users/Sejmou/gists{/gist_id}","starred_url":"https://api.github.com/users/Sejmou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sejmou/subscriptions","organizations_url":"https://api.github.com/users/Sejmou/orgs","repos_url":"https://api.github.com/users/Sejmou/repos","events_url":"https://api.github.com/users/Sejmou/events{/privacy}","received_events_url":"https://api.github.com/users/Sejmou/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-08-05T16:43:28Z","updated_at":"2023-08-05T16:55:16Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nfirst of all thanks for all the amazing work around drizzle and drizzle-kit. I really love the developer experience <3\r\n\r\nHowever, I am having an issue with the `drizzle-kit introspect:pg` command. I can't find a way to control the way timestamp columns in my DB are handled upon introspection/schema generation.\r\n\r\nThe [drizzle docs](https://orm.drizzle.team/docs/column-types/pg#timestamp) state that there are two types of 'infer modes' one can specify: `date` or `string`. In my case, I would need the `date` infer mode, as I use Dates in my application instead of parsing strings (I use Next.js with tRPC and superjson as the [transformer](https://trpc.io/docs/server/data-transformers) to work around the Date object JSON serialization issue when transferring data between server and client).\r\n\r\nMy temporary workaround to get what I want is to remove all occurrences of `mode: 'string'` from my schema file after running `drizzle-kit introspect:pg`. What is the proper way to do this?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/144/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/143","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/143/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/143/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/143/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/143","id":1837375213,"node_id":"I_kwDOHoY85M5thB7t","number":143,"title":"Support for bun:sqlite","user":{"login":"Atmos4","id":32951942,"node_id":"MDQ6VXNlcjMyOTUxOTQy","avatar_url":"https://avatars.githubusercontent.com/u/32951942?v=4","gravatar_id":"","url":"https://api.github.com/users/Atmos4","html_url":"https://github.com/Atmos4","followers_url":"https://api.github.com/users/Atmos4/followers","following_url":"https://api.github.com/users/Atmos4/following{/other_user}","gists_url":"https://api.github.com/users/Atmos4/gists{/gist_id}","starred_url":"https://api.github.com/users/Atmos4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Atmos4/subscriptions","organizations_url":"https://api.github.com/users/Atmos4/orgs","repos_url":"https://api.github.com/users/Atmos4/repos","events_url":"https://api.github.com/users/Atmos4/events{/privacy}","received_events_url":"https://api.github.com/users/Atmos4/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-08-04T21:41:38Z","updated_at":"2023-11-01T18:33:42Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Drizzle ORM works with bun:sqlite, which is very nice.\r\nHowever, DrizzleKit has no support for it yet. Since better-sqlite3 does not work on Bun, using Drizzle with bun:sqlite is not really possible. Applying migrations works, but generating them is currently not available AFAIK.\r\n\r\nAny plans on supporting it in the future? Maybe I am doing something wrong, any idea or `drizzle.config.ts` sample?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/143/reactions","total_count":8,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/143/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/142","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/142/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/142/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/142/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/142","id":1836645300,"node_id":"I_kwDOHoY85M5tePu0","number":142,"title":"`drizzle-kit introspect:mysql` codegen broken","user":{"login":"205g0","id":74575852,"node_id":"MDQ6VXNlcjc0NTc1ODUy","avatar_url":"https://avatars.githubusercontent.com/u/74575852?v=4","gravatar_id":"","url":"https://api.github.com/users/205g0","html_url":"https://github.com/205g0","followers_url":"https://api.github.com/users/205g0/followers","following_url":"https://api.github.com/users/205g0/following{/other_user}","gists_url":"https://api.github.com/users/205g0/gists{/gist_id}","starred_url":"https://api.github.com/users/205g0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/205g0/subscriptions","organizations_url":"https://api.github.com/users/205g0/orgs","repos_url":"https://api.github.com/users/205g0/repos","events_url":"https://api.github.com/users/205g0/events{/privacy}","received_events_url":"https://api.github.com/users/205g0/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-08-04T12:17:23Z","updated_at":"2023-08-04T12:33:18Z","closed_at":"2023-08-04T12:21:12Z","author_association":"NONE","active_lock_reason":null,"body":"Now, a `drizzle-kit introspect:mysql` forgets the comma after the the generated ...`primaryKey(table.id)` line, check line 6 in following example:\r\n```ts\r\nexport const users = mysqlTable(\"users\", {\r\n        ...\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\tusersId: primaryKey(table.id)\r\n\t\temail: unique(\"email\").on(table.email),\r\n\t}\r\n});\r\n```\r\n\r\n_Originally posted by @205g0 in https://github.com/drizzle-team/drizzle-kit-mirror/issues/124#issuecomment-1665338932_\r\n            ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/142/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/141","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/141/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/141/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/141/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/141","id":1836291156,"node_id":"I_kwDOHoY85M5tc5RU","number":141,"title":"Studio allow to configure listening host","user":{"login":"anbraten","id":6918444,"node_id":"MDQ6VXNlcjY5MTg0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/6918444?v=4","gravatar_id":"","url":"https://api.github.com/users/anbraten","html_url":"https://github.com/anbraten","followers_url":"https://api.github.com/users/anbraten/followers","following_url":"https://api.github.com/users/anbraten/following{/other_user}","gists_url":"https://api.github.com/users/anbraten/gists{/gist_id}","starred_url":"https://api.github.com/users/anbraten/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anbraten/subscriptions","organizations_url":"https://api.github.com/users/anbraten/orgs","repos_url":"https://api.github.com/users/anbraten/repos","events_url":"https://api.github.com/users/anbraten/events{/privacy}","received_events_url":"https://api.github.com/users/anbraten/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-08-04T08:18:32Z","updated_at":"2023-08-18T11:19:43Z","closed_at":"2023-08-18T11:19:43Z","author_association":"NONE","active_lock_reason":null,"body":"If running drizzle-kit studio it currently listens to `127.0.0.1` only. This is a secure default setting, but in some cases like when using dev-container, gitpod, so from inside a container ... it is necessary to listen to sth like `0.0.0.0`.\r\n\r\nAdding an option like `--host 0.0.0.0` similar to  `drizzle-kit studio --port 1234` could solve the problem.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/141/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/140","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/140/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/140/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/140/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/140","id":1834484549,"node_id":"I_kwDOHoY85M5tWANF","number":140,"title":"Running studio config don't accept mysql2 driver","user":{"login":"peterszarvas94","id":28898157,"node_id":"MDQ6VXNlcjI4ODk4MTU3","avatar_url":"https://avatars.githubusercontent.com/u/28898157?v=4","gravatar_id":"","url":"https://api.github.com/users/peterszarvas94","html_url":"https://github.com/peterszarvas94","followers_url":"https://api.github.com/users/peterszarvas94/followers","following_url":"https://api.github.com/users/peterszarvas94/following{/other_user}","gists_url":"https://api.github.com/users/peterszarvas94/gists{/gist_id}","starred_url":"https://api.github.com/users/peterszarvas94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peterszarvas94/subscriptions","organizations_url":"https://api.github.com/users/peterszarvas94/orgs","repos_url":"https://api.github.com/users/peterszarvas94/repos","events_url":"https://api.github.com/users/peterszarvas94/events{/privacy}","received_events_url":"https://api.github.com/users/peterszarvas94/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-08-03T07:47:12Z","updated_at":"2023-08-18T11:19:47Z","closed_at":"2023-08-18T11:19:46Z","author_association":"NONE","active_lock_reason":null,"body":"When I try to run `drizzle-kit studio`, with the config below, _sometimes_ me and [others on Discord](https://discord.com/channels/1043890932593987624/1124768693549797416/1125397377440825384) got an error:\r\n\r\n```ts\r\nimport type { Config } from 'drizzle-kit';\r\nimport * as dotenv from \"dotenv\";\r\ndotenv.config();\r\n\r\nexport default {\r\n  schema: \"src/schema.ts\",\r\n  out: \"/migrations\",\r\n  driver: \"mysql2\",\r\n  dbCredentials: {\r\n    connectionString: process.env.DATABASE_URL!,\r\n  }\r\n} satisfies Config;\r\n```\r\n\r\n> Invalid input  \"mysql2\" is not a valid driver. Available drivers: \"pg\", \"mysql2\", \"better-sqlite\", \"libsql\", \"turso\".\r\n\r\nPackage versions:\r\n\r\n```\r\n\"dotenv\": \"^16.3.1\",\r\n\"drizzle-kit\": \"^0.19.12\",\r\n\"drizzle-orm\": \"^0.27.2\"\r\n```\r\n\r\nI tried this patch:\r\n\r\nI modified `node_modules/drizzle-kit/index.cjs` line 51894:\r\n\r\n```ts\r\n// old code\r\noptions.driver === \"mysql\"\r\n// new code\r\noptions.driver === \"mysql2\"\r\n```\r\n\r\nIt solved for me.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/140/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/139","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/139/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/139/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/139/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/139","id":1826337067,"node_id":"I_kwDOHoY85M5s27Er","number":139,"title":"[BUG]: Data loss warning when changing varchar size","user":{"login":"MendyLanda","id":54242706,"node_id":"MDQ6VXNlcjU0MjQyNzA2","avatar_url":"https://avatars.githubusercontent.com/u/54242706?v=4","gravatar_id":"","url":"https://api.github.com/users/MendyLanda","html_url":"https://github.com/MendyLanda","followers_url":"https://api.github.com/users/MendyLanda/followers","following_url":"https://api.github.com/users/MendyLanda/following{/other_user}","gists_url":"https://api.github.com/users/MendyLanda/gists{/gist_id}","starred_url":"https://api.github.com/users/MendyLanda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MendyLanda/subscriptions","organizations_url":"https://api.github.com/users/MendyLanda/orgs","repos_url":"https://api.github.com/users/MendyLanda/repos","events_url":"https://api.github.com/users/MendyLanda/events{/privacy}","received_events_url":"https://api.github.com/users/MendyLanda/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-07-28T12:26:13Z","updated_at":"2023-09-27T11:06:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":" Changing a VARCHAR size shouldn't cause the table to truncate (At least in `pg` and `mysq`l) but:\r\n ```\r\nWarning  Found data-loss statements:\r\n¬∑ You're about to change name column type from varchar(191) to varchar(255) with 2 items\r\n¬∑ You're about to change logo_url column type from varchar(191) to varchar(255) with 2 items\r\n¬∑ You're about to change ad_city column type from varchar(191) to varchar(255) with 2 items\r\n¬∑ You're about to change ad_first_row column type from varchar(191) to varchar(255) with 2 items\r\n...\r\n\r\nTHIS ACTION WILL CAUSE DATA LOSS AND CANNOT BE REVERTED\r\n```\r\nFrom `MySql` [specification](https://dev.mysql.com/doc/refman/8.0/en/alter-table.html) under operation that support the `INPLACE` algorithm:\r\n>As of MySQL 8.0.14, changing a column character set, when these conditions apply:\r\n> - The column data type is [CHAR](https://dev.mysql.com/doc/refman/8.0/en/char.html), [VARCHAR](https://dev.mysql.com/doc/refman/8.0/en/char.html), a [TEXT](https://dev.mysql.com/doc/refman/8.0/en/blob.html) type, or [ENUM](https://dev.mysql.com/doc/refman/8.0/en/enum.html).\r\n> - The character set change is from utf8mb3 to utf8mb4, or any character set to binary.\r\n> - There is no index on the column.\r\n\r\nContext:\r\ndrizzle-kit: `v0.19.12`\r\ndb: `planetscale`\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/139/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/138","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/138/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/138/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/138/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/138","id":1822377897,"node_id":"I_kwDOHoY85M5sn0ep","number":138,"title":"MySQL - Introspection changes int(11) to int, causing truncation on push","user":{"login":"pedrovrima","id":7888468,"node_id":"MDQ6VXNlcjc4ODg0Njg=","avatar_url":"https://avatars.githubusercontent.com/u/7888468?v=4","gravatar_id":"","url":"https://api.github.com/users/pedrovrima","html_url":"https://github.com/pedrovrima","followers_url":"https://api.github.com/users/pedrovrima/followers","following_url":"https://api.github.com/users/pedrovrima/following{/other_user}","gists_url":"https://api.github.com/users/pedrovrima/gists{/gist_id}","starred_url":"https://api.github.com/users/pedrovrima/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pedrovrima/subscriptions","organizations_url":"https://api.github.com/users/pedrovrima/orgs","repos_url":"https://api.github.com/users/pedrovrima/repos","events_url":"https://api.github.com/users/pedrovrima/events{/privacy}","received_events_url":"https://api.github.com/users/pedrovrima/received_events","type":"User","site_admin":false},"labels":[{"id":4311178956,"node_id":"LA_kwDOHoY85M8AAAABAPdezA","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"}],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-07-26T13:04:36Z","updated_at":"2023-07-26T15:10:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"My db has a lot of int(11) in it. When pulling, it gets set as int(\"\"). But when pushing it back with changes, the CLI warns that the int(11) will be changed to int, which will truncate the tables. \r\n\r\nIs there any solution for this?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/138/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/137","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/137/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/137/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/137/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/137","id":1822374734,"node_id":"I_kwDOHoY85M5snztO","number":137,"title":"MySQL - Introspection generating default(\"NULL\") in int type","user":{"login":"pedrovrima","id":7888468,"node_id":"MDQ6VXNlcjc4ODg0Njg=","avatar_url":"https://avatars.githubusercontent.com/u/7888468?v=4","gravatar_id":"","url":"https://api.github.com/users/pedrovrima","html_url":"https://github.com/pedrovrima","followers_url":"https://api.github.com/users/pedrovrima/followers","following_url":"https://api.github.com/users/pedrovrima/following{/other_user}","gists_url":"https://api.github.com/users/pedrovrima/gists{/gist_id}","starred_url":"https://api.github.com/users/pedrovrima/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pedrovrima/subscriptions","organizations_url":"https://api.github.com/users/pedrovrima/orgs","repos_url":"https://api.github.com/users/pedrovrima/repos","events_url":"https://api.github.com/users/pedrovrima/events{/privacy}","received_events_url":"https://api.github.com/users/pedrovrima/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":11,"created_at":"2023-07-26T13:02:44Z","updated_at":"2023-08-02T01:14:11Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I am not sure if this is actually a bug or not, but my db had some DEFAULT NULL in it which were introspected as .default(\"NULL\").\r\n\r\nThis triggers a TS errors if the variable is int(), for example. Since it is not needed in MySQL, I would recommend ignoring these statements when introspecting.\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/137/timeline","performed_via_github_app":null,"state_reason":"reopened"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/136","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/136/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/136/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/136/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/136","id":1822366945,"node_id":"I_kwDOHoY85M5snxzh","number":136,"title":"MySQL - Introspect not importing int","user":{"login":"pedrovrima","id":7888468,"node_id":"MDQ6VXNlcjc4ODg0Njg=","avatar_url":"https://avatars.githubusercontent.com/u/7888468?v=4","gravatar_id":"","url":"https://api.github.com/users/pedrovrima","html_url":"https://github.com/pedrovrima","followers_url":"https://api.github.com/users/pedrovrima/followers","following_url":"https://api.github.com/users/pedrovrima/following{/other_user}","gists_url":"https://api.github.com/users/pedrovrima/gists{/gist_id}","starred_url":"https://api.github.com/users/pedrovrima/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pedrovrima/subscriptions","organizations_url":"https://api.github.com/users/pedrovrima/orgs","repos_url":"https://api.github.com/users/pedrovrima/repos","events_url":"https://api.github.com/users/pedrovrima/events{/privacy}","received_events_url":"https://api.github.com/users/pedrovrima/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-07-26T12:58:15Z","updated_at":"2023-07-26T15:21:08Z","closed_at":"2023-07-26T15:21:08Z","author_association":"NONE","active_lock_reason":null,"body":"When introspecting from PlaneScale, `int` is not added to `drizzle-orm/mysql-core` default imports.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/136/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/135","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/135/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/135/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/135/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/135","id":1822142899,"node_id":"I_kwDOHoY85M5sm7Gz","number":135,"title":"Introspect:pg breaks on multiple primary keys","user":{"login":"MAST1999","id":48868969,"node_id":"MDQ6VXNlcjQ4ODY4OTY5","avatar_url":"https://avatars.githubusercontent.com/u/48868969?v=4","gravatar_id":"","url":"https://api.github.com/users/MAST1999","html_url":"https://github.com/MAST1999","followers_url":"https://api.github.com/users/MAST1999/followers","following_url":"https://api.github.com/users/MAST1999/following{/other_user}","gists_url":"https://api.github.com/users/MAST1999/gists{/gist_id}","starred_url":"https://api.github.com/users/MAST1999/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MAST1999/subscriptions","organizations_url":"https://api.github.com/users/MAST1999/orgs","repos_url":"https://api.github.com/users/MAST1999/repos","events_url":"https://api.github.com/users/MAST1999/events{/privacy}","received_events_url":"https://api.github.com/users/MAST1999/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":13,"created_at":"2023-07-26T10:55:06Z","updated_at":"2023-12-28T15:41:56Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I was trying to introspect our database but it ends up with this error:\r\n```\r\n[‚úì] 63   tables fetched\r\n[‚£ü] 1537 columns fetching\r\n[‚£ü] 0    enums fetching\r\n[‚£ü] 0    indexes fetching\r\n[‚£ü] 218  foreign keys fetching\r\n/home/mast/workspace/work/mix-optimization-dashboard/node_modules/.pnpm/drizzle-kit@0.19.11/node_modules/drizzle-kit/index.cjs:12431\r\n                  name: tableCompositePkName[0].primary_key,\r\n                                                ^\r\n\r\nTypeError: Cannot read properties of undefined (reading 'primary_key')\r\n    at /home/mast/workspace/work/mix-optimization-dashboard/node_modules/.pnpm/drizzle-kit@0.19.11/node_modules/drizzle-kit/index.cjs:12431:49\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n```\r\n\r\nWe have quite a few tables so it's kinda hard to figure out which table has a problem.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/135/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/134","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/134/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/134/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/134/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/134","id":1822016998,"node_id":"I_kwDOHoY85M5smcXm","number":134,"title":"Suggestion : new cli command : drizzle-kit migrate","user":{"login":"anshour","id":68645489,"node_id":"MDQ6VXNlcjY4NjQ1NDg5","avatar_url":"https://avatars.githubusercontent.com/u/68645489?v=4","gravatar_id":"","url":"https://api.github.com/users/anshour","html_url":"https://github.com/anshour","followers_url":"https://api.github.com/users/anshour/followers","following_url":"https://api.github.com/users/anshour/following{/other_user}","gists_url":"https://api.github.com/users/anshour/gists{/gist_id}","starred_url":"https://api.github.com/users/anshour/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anshour/subscriptions","organizations_url":"https://api.github.com/users/anshour/orgs","repos_url":"https://api.github.com/users/anshour/repos","events_url":"https://api.github.com/users/anshour/events{/privacy}","received_events_url":"https://api.github.com/users/anshour/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-07-26T09:51:44Z","updated_at":"2023-10-04T19:09:06Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I want to run the migrations file that previously generated by command `drizzle-kit generate:sqlite `. i know i can create a js or ts file to do the migration. but i think it will be more comfortable if there is a command to 'migrate' the generated migration file (like laravel have, php artisan migrate)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/134/reactions","total_count":10,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":10,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/134/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/133","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/133/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/133/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/133/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/133","id":1822009568,"node_id":"I_kwDOHoY85M5smajg","number":133,"title":"Drizzle studio doesnt read .env out of the box","user":{"login":"anshour","id":68645489,"node_id":"MDQ6VXNlcjY4NjQ1NDg5","avatar_url":"https://avatars.githubusercontent.com/u/68645489?v=4","gravatar_id":"","url":"https://api.github.com/users/anshour","html_url":"https://github.com/anshour","followers_url":"https://api.github.com/users/anshour/followers","following_url":"https://api.github.com/users/anshour/following{/other_user}","gists_url":"https://api.github.com/users/anshour/gists{/gist_id}","starred_url":"https://api.github.com/users/anshour/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anshour/subscriptions","organizations_url":"https://api.github.com/users/anshour/orgs","repos_url":"https://api.github.com/users/anshour/repos","events_url":"https://api.github.com/users/anshour/events{/privacy}","received_events_url":"https://api.github.com/users/anshour/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-07-26T09:48:13Z","updated_at":"2023-08-24T14:52:06Z","closed_at":"2023-08-24T14:52:06Z","author_association":"NONE","active_lock_reason":null,"body":"i create a file called drizzle.config.ts : \r\n```\r\nimport type { Config } from 'drizzle-kit';\r\n\r\nexport default {\r\n  schema: './src/db/schema.ts',\r\n  out: './src/db/migrations',\r\n  driver: 'turso',\r\n  dbCredentials: {\r\n    url: process.env.TURSO_URL as string,\r\n    authToken: process.env.TURSO_AUTH_TOKEN as string,\r\n  },\r\n} satisfies Config;\r\n```\r\n\r\nbut when i run `npx drizzle-kit studio`. it shows an error\r\n\"url\" is a required option for driver \"turso\".\r\nauthToken\" is a required option for driver \"turso\"\r\n\r\ni check on the .env file and i am sure that i set the correct variable","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/133/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/133/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/132","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/132/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/132/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/132","id":1821847560,"node_id":"I_kwDOHoY85M5slzAI","number":132,"title":"Forcing a schema push","user":{"login":"penberg","id":81939,"node_id":"MDQ6VXNlcjgxOTM5","avatar_url":"https://avatars.githubusercontent.com/u/81939?v=4","gravatar_id":"","url":"https://api.github.com/users/penberg","html_url":"https://github.com/penberg","followers_url":"https://api.github.com/users/penberg/followers","following_url":"https://api.github.com/users/penberg/following{/other_user}","gists_url":"https://api.github.com/users/penberg/gists{/gist_id}","starred_url":"https://api.github.com/users/penberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/penberg/subscriptions","organizations_url":"https://api.github.com/users/penberg/orgs","repos_url":"https://api.github.com/users/penberg/repos","events_url":"https://api.github.com/users/penberg/events{/privacy}","received_events_url":"https://api.github.com/users/penberg/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":13,"created_at":"2023-07-26T08:25:36Z","updated_at":"2024-05-23T11:59:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"It's possible to get a database in a bad state so that `push` stops working. It would be great to have an option to force push a schema change so that you don't have to manually do that:\r\n\r\n```console\r\ndrizzle-kit push:sqlite --force\r\n```\r\n\r\nThe command should probably print out a warning telling the user that this is a destructive operation.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/132/reactions","total_count":27,"+1":27,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/132/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/131","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/131/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/131/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/131/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/131","id":1818742076,"node_id":"I_kwDOHoY85M5sZ808","number":131,"title":"drizzle-kit@0.19.9 Regression","user":{"login":"bestickley","id":35735118,"node_id":"MDQ6VXNlcjM1NzM1MTE4","avatar_url":"https://avatars.githubusercontent.com/u/35735118?v=4","gravatar_id":"","url":"https://api.github.com/users/bestickley","html_url":"https://github.com/bestickley","followers_url":"https://api.github.com/users/bestickley/followers","following_url":"https://api.github.com/users/bestickley/following{/other_user}","gists_url":"https://api.github.com/users/bestickley/gists{/gist_id}","starred_url":"https://api.github.com/users/bestickley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bestickley/subscriptions","organizations_url":"https://api.github.com/users/bestickley/orgs","repos_url":"https://api.github.com/users/bestickley/repos","events_url":"https://api.github.com/users/bestickley/events{/privacy}","received_events_url":"https://api.github.com/users/bestickley/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-07-24T16:19:22Z","updated_at":"2023-07-24T20:52:10Z","closed_at":"2023-07-24T20:52:10Z","author_association":"NONE","active_lock_reason":null,"body":"Starting in drizzle-kit@0.19.9 I've found a regression in drizzle-kit not being able to find tables correctly. The logs below explain in detail, but with drizzle-kit@0.19.9 when I run `generate:pg` I get a migration that wants to delete all my tables. But with drizzle-kit@0.19.8 I get the correct migration.\r\n\r\nI'm using a PNPM Monorepo and I've ensured I only have one installation of drizzle-kit.\r\n\r\ndrizzle.config.ts\r\n```ts\r\nimport type { Config } from \"drizzle-kit\";\r\n\r\nexport default {\r\n  out: `./src/db/drizzle`,\r\n  schema: `./src/modules/**/*.db.ts`,\r\n} satisfies Config;\r\n\r\n```\r\n\r\nCommand Line Logs:\r\n```bash\r\npnpm add drizzle-kit@0.19.9\r\n../infra                                 | ‚ÄâWARN‚Äâ deprecated @aws-cdk/core@1.204.0\r\n../infra                                 | ‚ÄâWARN‚Äâ deprecated querystring@0.2.0\r\n../ui                                    | ‚ÄâWARN‚Äâ deprecated sourcemap-codec@1.4.8\r\n../infra                                 | ‚ÄâWARN‚Äâ deprecated @aws-cdk/cloud-assembly-schema@1.204.0\r\n../infra                                 | ‚ÄâWARN‚Äâ deprecated @aws-cdk/cx-api@1.204.0\r\n../infra                                 | ‚ÄâWARN‚Äâ deprecated @aws-cdk/region-info@1.204.0\r\n..                                       |   +1   -1 +-\r\n..                                       | Progress: resolved 1037, reused 1008, downloaded 0, added 0, done\r\n.. prepare$ husky install\r\n‚îÇ husky - Git hooks installed\r\n‚îî‚îÄ Done in 339ms\r\n\r\ndependencies:\r\n- drizzle-kit 0.19.8\r\n+ drizzle-kit 0.19.9 (0.19.10 is available)\r\n\r\nDone in 9.7s\r\npnpm tsx node_modules/drizzle-kit/index.cjs generate:pg --config ./src/db/drizzle.config.ts\r\ndrizzle-kit: v0.19.9\r\ndrizzle-orm: v0.27.2\r\n\r\nReading config file '/Users/stickb/Code/bayer/seed-sight/core/src/db/drizzle.config.ts'\r\n0 tables\r\n\r\n\r\n[‚úì] Your SQL migration file ‚ûú src/db/drizzle/0013_friendly_wallflower.sql üöÄ\r\npnpm tsx node_modules/drizzle-kit/index.cjs drop --config ./src/db/drizzle.config.ts\r\ndrizzle-kit: v0.19.9\r\ndrizzle-orm: v0.27.2\r\n\r\nReading config file '/Users/stickb/Code/bayer/seed-sight/core/src/db/drizzle.config.ts'\r\n\r\n[‚úì] 0013_friendly_wallflower migration successfully dropped\r\npnpm add drizzle-kit@0.19.8\r\n../infra                                 | ‚ÄâWARN‚Äâ deprecated @aws-cdk/core@1.204.0\r\n../infra                                 | ‚ÄâWARN‚Äâ deprecated querystring@0.2.0\r\n../ui                                    | ‚ÄâWARN‚Äâ deprecated sourcemap-codec@1.4.8\r\n../infra                                 | ‚ÄâWARN‚Äâ deprecated @aws-cdk/cloud-assembly-schema@1.204.0\r\n../infra                                 | ‚ÄâWARN‚Äâ deprecated @aws-cdk/region-info@1.204.0\r\n../infra                                 | ‚ÄâWARN‚Äâ deprecated @aws-cdk/cx-api@1.204.0\r\n..                                       |   +1   -1 +-\r\n..                                       | Progress: resolved 1037, reused 1008, downloaded 0, added 0, done\r\n.. prepare$ husky install\r\n‚îÇ husky - Git hooks installed\r\n‚îî‚îÄ Done in 422ms\r\n\r\ndependencies:\r\n- drizzle-kit 0.19.9\r\n+ drizzle-kit 0.19.8 (0.19.10 is available)\r\n\r\nDone in 9.9s\r\npnpm tsx node_modules/drizzle-kit/index.cjs generate:pg --config ./src/db/drizzle.config.ts\r\ndrizzle-kit: v0.19.8\r\ndrizzle-orm: v0.27.2\r\n\r\nReading config file '/Users/stickb/Code/bayer/seed-sight/core/src/db/drizzle.config.ts'\r\n3 tables\r\nbatch 31 columns 0 indexes 2 fks\r\nbatches_upload 8 columns 0 indexes 2 fks\r\nuser_account 7 columns 0 indexes 0 fks\r\n\r\n[‚úì] Your SQL migration file ‚ûú src/db/drizzle/0013_puzzling_nova.sql üöÄ\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/131/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/131/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/130","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/130/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/130/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/130/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/130","id":1816925296,"node_id":"I_kwDOHoY85M5sTBRw","number":130,"title":"Postgres introspect relation does not exist","user":{"login":"fermentfan","id":19498613,"node_id":"MDQ6VXNlcjE5NDk4NjEz","avatar_url":"https://avatars.githubusercontent.com/u/19498613?v=4","gravatar_id":"","url":"https://api.github.com/users/fermentfan","html_url":"https://github.com/fermentfan","followers_url":"https://api.github.com/users/fermentfan/followers","following_url":"https://api.github.com/users/fermentfan/following{/other_user}","gists_url":"https://api.github.com/users/fermentfan/gists{/gist_id}","starred_url":"https://api.github.com/users/fermentfan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fermentfan/subscriptions","organizations_url":"https://api.github.com/users/fermentfan/orgs","repos_url":"https://api.github.com/users/fermentfan/repos","events_url":"https://api.github.com/users/fermentfan/events{/privacy}","received_events_url":"https://api.github.com/users/fermentfan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-07-22T23:38:05Z","updated_at":"2023-07-25T07:10:02Z","closed_at":"2023-07-24T20:52:07Z","author_association":"NONE","active_lock_reason":null,"body":"In two different Prisma projects I maintain I get the same error trying out the introspect feature. It fails with the following error:\r\n\r\n```bash\r\nnpx drizzle-kit introspect:pg\r\ndrizzle-kit: v0.19.10\r\ndrizzle-orm: v0.27.2\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/xxx/drizzle.config.ts'\r\n[‚úì] 13 tables fetched\r\n[‚£∑] 0  columns fetching\r\n[‚£∑] 0  enums fetching\r\n[‚£∑] 0  indexes fetching\r\n[‚£∑] 0  foreign keys fetching\r\nerror: relation \"public.<RELATION NAME REDACTED>\" does not exist\r\n    at Parser.parseErrorMessage (/xxx/node_modules/drizzle-kit/index.cjs:40646:98)\r\n    at Parser.handlePacket (/xxx/node_modules/drizzle-kit/index.cjs:40487:25)\r\n    at Parser.parse (/xxx/node_modules/drizzle-kit/index.cjs:40411:34)\r\n    at Socket.<anonymous> (/xxx/node_modules/drizzle-kit/index.cjs:40687:44)\r\n    at Socket.emit (node:events:527:28)\r\n    at addChunk (node:internal/streams/readable:315:12)\r\n    at readableAddChunk (node:internal/streams/readable:289:9)\r\n    at Socket.Readable.push (node:internal/streams/readable:228:10)\r\n    at TCP.onStreamRead (node:internal/stream_base_commons:190:23) {\r\n  length: 125,\r\n  severity: 'ERROR',\r\n  code: '42P01',\r\n  detail: undefined,\r\n  hint: undefined,\r\n  position: '1230',\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: undefined,\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: 'namespace.c',\r\n  line: '427',\r\n  routine: 'RangeVarGetRelidExtended'\r\n```\r\n\r\nI redacted the name for the relation but I can go into detail if it's needed. The relation name is different in the other project of course. Sadly I have a hard time debugging this. Any tips? I have the feeling it has to do with case sensitivity...","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/130/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/129","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/129/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/129/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/129/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/129","id":1815205844,"node_id":"I_kwDOHoY85M5sMdfU","number":129,"title":"drizzle studio rearrange tabs through dragging","user":{"login":"deadcoder0904","id":16436270,"node_id":"MDQ6VXNlcjE2NDM2Mjcw","avatar_url":"https://avatars.githubusercontent.com/u/16436270?v=4","gravatar_id":"","url":"https://api.github.com/users/deadcoder0904","html_url":"https://github.com/deadcoder0904","followers_url":"https://api.github.com/users/deadcoder0904/followers","following_url":"https://api.github.com/users/deadcoder0904/following{/other_user}","gists_url":"https://api.github.com/users/deadcoder0904/gists{/gist_id}","starred_url":"https://api.github.com/users/deadcoder0904/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deadcoder0904/subscriptions","organizations_url":"https://api.github.com/users/deadcoder0904/orgs","repos_url":"https://api.github.com/users/deadcoder0904/repos","events_url":"https://api.github.com/users/deadcoder0904/events{/privacy}","received_events_url":"https://api.github.com/users/deadcoder0904/received_events","type":"User","site_admin":false},"labels":[{"id":5669950352,"node_id":"LA_kwDOHoY85M8AAAABUfSTkA","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/improvement","name":"improvement","color":"79DE7D","default":false,"description":""},{"id":5769803325,"node_id":"LA_kwDOHoY85M8AAAABV-g2PQ","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/studio","name":"studio","color":"7F6A16","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2023-07-21T06:03:45Z","updated_at":"2023-07-24T14:33:24Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"i like to keep them in order of tables so i can quickly find them.\r\n\r\nbut right now the only way to do it is close all tabs & re-open them in order.\r\n\r\na drag & drop of tabs would be really useful. seems like a basic feature.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/129/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/128","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/128/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/128/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/128/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/128","id":1812028979,"node_id":"I_kwDOHoY85M5sAV4z","number":128,"title":"Foreign key length","user":{"login":"paul-uz","id":73826774,"node_id":"MDQ6VXNlcjczODI2Nzc0","avatar_url":"https://avatars.githubusercontent.com/u/73826774?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-uz","html_url":"https://github.com/paul-uz","followers_url":"https://api.github.com/users/paul-uz/followers","following_url":"https://api.github.com/users/paul-uz/following{/other_user}","gists_url":"https://api.github.com/users/paul-uz/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-uz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-uz/subscriptions","organizations_url":"https://api.github.com/users/paul-uz/orgs","repos_url":"https://api.github.com/users/paul-uz/repos","events_url":"https://api.github.com/users/paul-uz/events{/privacy}","received_events_url":"https://api.github.com/users/paul-uz/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2023-07-19T14:02:47Z","updated_at":"2024-01-22T21:41:30Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"With succinct table and column names, the foreign key constraint names are sometimes too long, more than 64 characters, which is the limit in mysql.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/128/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/127","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/127/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/127/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/127/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/127","id":1809887682,"node_id":"I_kwDOHoY85M5r4LHC","number":127,"title":"Transforming const to the configured target environment (\"es5\") is not supported yet","user":{"login":"heymage","id":28442090,"node_id":"MDQ6VXNlcjI4NDQyMDkw","avatar_url":"https://avatars.githubusercontent.com/u/28442090?v=4","gravatar_id":"","url":"https://api.github.com/users/heymage","html_url":"https://github.com/heymage","followers_url":"https://api.github.com/users/heymage/followers","following_url":"https://api.github.com/users/heymage/following{/other_user}","gists_url":"https://api.github.com/users/heymage/gists{/gist_id}","starred_url":"https://api.github.com/users/heymage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heymage/subscriptions","organizations_url":"https://api.github.com/users/heymage/orgs","repos_url":"https://api.github.com/users/heymage/repos","events_url":"https://api.github.com/users/heymage/events{/privacy}","received_events_url":"https://api.github.com/users/heymage/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-07-18T13:00:45Z","updated_at":"2023-07-18T13:12:37Z","closed_at":"2023-07-18T13:12:37Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nI just started using drizzle and wanted to run drizzle kit.\r\nI followed the docs and took inspiration from the https://github.com/drizzle-team/drizzle-trpc-zod repository.\r\n\r\nBut when running the command, I get the following errors.\r\n\r\ndrizzle-kit generate:pg\r\n```\r\ndrizzle-kit: v0.19.8\r\ndrizzle-orm: v0.27.2\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file 'root/drizzle.config.ts'\r\nError: Transform failed with 3 errors:\r\nroot/src/db/schema/schema.ts:5:7: ERROR: Transforming const to the configured target environment (\"es5\") is not supported yet\r\nroot/src/db/schema/schema.ts:19:7: ERROR: Transforming const to the configured target environment (\"es5\") is not supported yet\r\nroot/src/db/schema/schema.ts:23:7: ERROR: Transforming const to the configured target environment (\"es5\") is not supported yet\r\n```\r\n\r\nI'm not setting any target environment and not sure where `es5` is coming from\r\n\r\n### `drizzle.config.ts`\r\n```ts\r\nimport type { Config } from \"drizzle-kit\";\r\nimport * as dotenv from \"dotenv\";\r\ndotenv.config()\r\n\r\nexport default {\r\n    schema: \"./src/db/schema/*\",\r\n    out: \"./drizzle\",\r\n    driver: 'pg',\r\n    dbCredentials: {\r\n        connectionString: \"<dburl>\",\r\n    }\r\n} satisfies Config;\r\n```\r\n\r\n### `schema.ts`\r\n```ts\r\nimport {pgTable, serial, text, timestamp, varchar} from \"drizzle-orm/pg-core\";\r\nimport {createInsertSchema} from \"drizzle-zod\";\r\nimport {z} from \"zod\";\r\n\r\nexport const person = pgTable('person', {\r\n    id: serial('id').primaryKey(),\r\n    salutation: varchar('role', { length: 50, enum: ['Frau', 'Herr', 'Divers'] }).notNull(),\r\n    createdAt: timestamp('createdAt').defaultNow(),\r\n    firstName: varchar('firstName', { length: 256 }).notNull(),\r\n    lastName: varchar('lastName', { length: 256 }).notNull(),\r\n    email: text('email').notNull(),\r\n    phone: varchar('phone', { length: 256 }).notNull(),\r\n    plz: varchar('plz', { length: 5}).notNull(),\r\n    city: varchar('city', { length: 256 }).notNull(),\r\n    street: varchar('street', { length: 256 }).notNull(),\r\n    houseNo: varchar('houseNo', { length: 50 }).notNull(),\r\n});\r\n\r\nexport const apiPerson = createInsertSchema(person, {\r\n    salutation: z.enum(['Frau', 'Herr', 'Divers']),\r\n});\r\n\r\nexport const apiCreatePerson = apiPerson.omit({ id: true })\r\n```\r\n\r\nThe project is a basic NextJS app. It is a test project to try things, besides NextJS, React there are no other deps.\r\n\r\nThank you","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/127/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/126","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/126/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/126/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/126/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/126","id":1805606848,"node_id":"I_kwDOHoY85M5rn1_A","number":126,"title":"Add ability to name migrations","user":{"login":"RIP21","id":3940079,"node_id":"MDQ6VXNlcjM5NDAwNzk=","avatar_url":"https://avatars.githubusercontent.com/u/3940079?v=4","gravatar_id":"","url":"https://api.github.com/users/RIP21","html_url":"https://github.com/RIP21","followers_url":"https://api.github.com/users/RIP21/followers","following_url":"https://api.github.com/users/RIP21/following{/other_user}","gists_url":"https://api.github.com/users/RIP21/gists{/gist_id}","starred_url":"https://api.github.com/users/RIP21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RIP21/subscriptions","organizations_url":"https://api.github.com/users/RIP21/orgs","repos_url":"https://api.github.com/users/RIP21/repos","events_url":"https://api.github.com/users/RIP21/events{/privacy}","received_events_url":"https://api.github.com/users/RIP21/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-07-14T21:33:23Z","updated_at":"2024-03-06T22:24:28Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"It would be nice to pass `--name` CLI parameter, to get the migration file named manually.\r\n\r\nE.g. `drizzle-kit generate:mysql --name=\"Add user table\"` > generates `add-user-table.sql`\r\nOr  `drizzle-kit generate:mysql --name=add-users-table` > generates `add-user-table.sql`\r\n\r\nGenerated names are all cool, but having sql files named in a meaningful way would be nice. \r\n\r\nNow I have to go and rename them manually.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/126/reactions","total_count":25,"+1":25,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/126/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/125","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/125/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/125/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/125/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/125","id":1805443149,"node_id":"I_kwDOHoY85M5rnOBN","number":125,"title":"Missing schema in Index and constraints migrations.","user":{"login":"RIP21","id":3940079,"node_id":"MDQ6VXNlcjM5NDAwNzk=","avatar_url":"https://avatars.githubusercontent.com/u/3940079?v=4","gravatar_id":"","url":"https://api.github.com/users/RIP21","html_url":"https://github.com/RIP21","followers_url":"https://api.github.com/users/RIP21/followers","following_url":"https://api.github.com/users/RIP21/following{/other_user}","gists_url":"https://api.github.com/users/RIP21/gists{/gist_id}","starred_url":"https://api.github.com/users/RIP21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RIP21/subscriptions","organizations_url":"https://api.github.com/users/RIP21/orgs","repos_url":"https://api.github.com/users/RIP21/repos","events_url":"https://api.github.com/users/RIP21/events{/privacy}","received_events_url":"https://api.github.com/users/RIP21/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-07-14T19:38:02Z","updated_at":"2023-07-24T14:34:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"As you can see `fleet` schema is missing in INDEX and ALTER TABLE parts causing errors.\r\n\r\n```mysql\r\nCREATE TABLE `fleet`.`flights` (\r\n\t`id` bigint AUTO_INCREMENT PRIMARY KEY NOT NULL,\r\n\t`planeId` bigint,\r\n\t`from` varchar(256),\r\n\t`to` varchar(256),\r\n\t`departed` datetime,\r\n\t`arrived` datetime\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE `fleet`.`planes` (\r\n\t`id` bigint AUTO_INCREMENT PRIMARY KEY NOT NULL,\r\n\t`manufacturer` varchar(256) NOT NULL,\r\n\t`model` varchar(256)\r\n);\r\n--> statement-breakpoint\r\nCREATE INDEX `name_idx` ON `planes` (`manufacturer`);--> statement-breakpoint\r\nALTER TABLE `flights` ADD CONSTRAINT `flights_planeId_planes_id_fk` FOREIGN KEY (`planeId`) REFERENCES `planes`(`id`) ON DELETE no action ON UPDATE no action;\r\n```\r\n\r\nHere is what the schema looks like:\r\n```ts\r\nimport type { InferModel } from \"drizzle-orm\"\r\nimport { bigint, datetime, index, mysqlSchema, varchar } from \"drizzle-orm/mysql-core\"\r\n\r\nexport const fleet = mysqlSchema(\"fleet\")\r\n\r\nconst bigintColumnType = { mode: \"bigint\" } as const\r\n\r\nexport const planes = fleet.table(\r\n  \"planes\",\r\n  {\r\n    id: bigint(\"id\", bigintColumnType).autoincrement().primaryKey(),\r\n    manufacturer: varchar(\"manufacturer\", { length: 256 }).notNull(),\r\n    model: varchar(\"model\", { length: 256 }),\r\n  },\r\n  (planeTable) => ({\r\n    manufacturerIdx: index(\"name_idx\").on(planeTable.manufacturer),\r\n  }),\r\n)\r\n\r\nexport const flights = fleet.table(\"flights\", {\r\n  id: bigint(\"id\", bigintColumnType).autoincrement().primaryKey(),\r\n  planeId: bigint(\"planeId\", bigintColumnType).references(() => planes.id),\r\n  from: varchar(\"from\", { length: 256 }),\r\n  to: varchar(\"to\", { length: 256 }),\r\n  departed: datetime(\"departed\"),\r\n  arrived: datetime(\"arrived\"),\r\n})\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/125/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/124","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/124/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/124/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/124/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/124","id":1803909427,"node_id":"I_kwDOHoY85M5rhXkz","number":124,"title":"Impossible to push schema changes due to ER_DROP_INDEX_FK","user":{"login":"AlessioDP","id":6390810,"node_id":"MDQ6VXNlcjYzOTA4MTA=","avatar_url":"https://avatars.githubusercontent.com/u/6390810?v=4","gravatar_id":"","url":"https://api.github.com/users/AlessioDP","html_url":"https://github.com/AlessioDP","followers_url":"https://api.github.com/users/AlessioDP/followers","following_url":"https://api.github.com/users/AlessioDP/following{/other_user}","gists_url":"https://api.github.com/users/AlessioDP/gists{/gist_id}","starred_url":"https://api.github.com/users/AlessioDP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlessioDP/subscriptions","organizations_url":"https://api.github.com/users/AlessioDP/orgs","repos_url":"https://api.github.com/users/AlessioDP/repos","events_url":"https://api.github.com/users/AlessioDP/events{/privacy}","received_events_url":"https://api.github.com/users/AlessioDP/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":20,"created_at":"2023-07-13T23:48:21Z","updated_at":"2023-12-26T02:04:22Z","closed_at":"2023-07-17T18:51:52Z","author_association":"NONE","active_lock_reason":null,"body":"I am using `drizzle-kit@0.19.5`, `drizzle-orm@0.27.2` and `mysql2`.\r\n\r\nWhen you create some tables with foreign keys:\r\n```typescript\r\nexport const guildMemberTeams = mysqlTable('guild_members_teams', {\r\n    id: int('id').autoincrement().notNull().primaryKey(),\r\n    guildMemberId: int('guild_member_id').references(() => guildMembers.id),\r\n    // ...\r\n});\r\nexport const guildMemberTeamsRelations = relations(guildMemberTeams, ({ one }) => ({\r\n    guildMember: one(guildMembers, {\r\n        fields: [guildMemberTeams.guildMemberId],\r\n        references: [guildMembers.id]\r\n    }),\r\n}));\r\n```\r\n\r\nA SQL code like this is created:\r\n```mysql\r\nCREATE TABLE `guild_members_teams` (\r\n\t`id` int AUTO_INCREMENT PRIMARY KEY NOT NULL,\r\n\t`guild_member_id` int,\r\n\t-- ....\r\n);\r\n-- ...\r\nALTER TABLE `guild_members_teams` ADD CONSTRAINT `guild_members_teams_guild_member_id_guild_members_id_fk` FOREIGN KEY (`guild_member_id`) REFERENCES `guild_members`(`id`) ON DELETE no action ON UPDATE no action;--> statement-breakpoint\r\n```\r\n\r\nAs database empty, I usually execute `drizzle-kit push:mysql` to push and everything works fine.\r\n\r\nBut if you execute again `drizzle-kit push:mysql`, to push new schema changes to the database, I receive this error:\r\n```\r\nError: Cannot drop index 'guild_members_guild_id_guilds_id_fk': needed in a foreign key constraint\r\n    at PromiseConnection.query (...\\node_modules\\drizzle-kit\\index.cjs:35205:26)\r\n    at Command.<anonymous> (...\\node_modules\\drizzle-kit\\index.cjs:52689:33)\r\n    at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r\n  code: 'ER_DROP_INDEX_FK',\r\n  errno: 1553,\r\n  sql: 'DROP INDEX `guild_members_guild_id_guilds_id_fk` ON `guild_members`;',\r\n  sqlState: 'HY000',\r\n  sqlMessage: \"Cannot drop index 'guild_members_guild_id_guilds_id_fk': needed in a foreign key constraint\"\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/124/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/124/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/123","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/123/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/123/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/123/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/123","id":1803821449,"node_id":"I_kwDOHoY85M5rhCGJ","number":123,"title":"Relational queries, many-to-many example with `push:sqlite`","user":{"login":"samburgers","id":1476939,"node_id":"MDQ6VXNlcjE0NzY5Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1476939?v=4","gravatar_id":"","url":"https://api.github.com/users/samburgers","html_url":"https://github.com/samburgers","followers_url":"https://api.github.com/users/samburgers/followers","following_url":"https://api.github.com/users/samburgers/following{/other_user}","gists_url":"https://api.github.com/users/samburgers/gists{/gist_id}","starred_url":"https://api.github.com/users/samburgers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samburgers/subscriptions","organizations_url":"https://api.github.com/users/samburgers/orgs","repos_url":"https://api.github.com/users/samburgers/repos","events_url":"https://api.github.com/users/samburgers/events{/privacy}","received_events_url":"https://api.github.com/users/samburgers/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-07-13T22:02:23Z","updated_at":"2023-07-16T04:34:57Z","closed_at":"2023-07-16T04:34:57Z","author_association":"NONE","active_lock_reason":null,"body":"Hi, having some issues getting this example working with sqlite:push\r\nhttps://orm.drizzle.team/docs/rqb#many-to-many\r\n\r\nHave this schema file, modified to sqlite:\r\n\r\n```typescript\r\nimport {\r\n  sqliteTable,\r\n  text,\r\n  integer,\r\n  primaryKey,\r\n} from \"drizzle-orm/sqlite-core\";\r\nimport { relations } from \"drizzle-orm\";\r\n\r\nexport const users = sqliteTable(\"users\", {\r\n  id: integer(\"id\").primaryKey(),\r\n  name: text(\"name\"),\r\n});\r\n\r\nexport const usersRelations = relations(users, ({ many }) => ({\r\n  usersToGroups: many(usersToGroups),\r\n}));\r\n\r\nexport const groups = sqliteTable(\"groups\", {\r\n  id: integer(\"id\").primaryKey(),\r\n  name: text(\"name\"),\r\n});\r\n\r\nexport const groupsRelations = relations(groups, ({ many }) => ({\r\n  usersToGroups: many(usersToGroups),\r\n}));\r\n\r\nexport const usersToGroups = sqliteTable(\r\n  \"users_to_groups\",\r\n  {\r\n    userId: integer(\"user_id\")\r\n      .notNull()\r\n      .references(() => users.id),\r\n    groupId: integer(\"group_id\")\r\n      .notNull()\r\n      .references(() => groups.id),\r\n  },\r\n  (t) => ({\r\n    pk: primaryKey(t.userId, t.groupId),\r\n  })\r\n);\r\n\r\nexport const usersToGroupsRelations = relations(usersToGroups, ({ one }) => ({\r\n  group: one(groups, {\r\n    fields: [usersToGroups.groupId],\r\n    references: [groups.id],\r\n  }),\r\n  user: one(users, {\r\n    fields: [usersToGroups.userId],\r\n    references: [users.id],\r\n  }),\r\n}));\r\n```\r\n\r\nThe generated migration file looks like this:\r\n\r\n```sql\r\nCREATE TABLE `groups` (\r\n\t`id` integer PRIMARY KEY NOT NULL,\r\n\t`name` text\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE `users` (\r\n\t`id` integer PRIMARY KEY NOT NULL,\r\n\t`name` text\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE `users_to_groups` (\r\n\t`user_id` integer NOT NULL,\r\n\t`group_id` integer NOT NULL,\r\n\tPRIMARY KEY(`group_id`, `user_id`),,\r\n\tFOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON UPDATE no action ON DELETE no action,\r\n\tFOREIGN KEY (`group_id`) REFERENCES `groups`(`id`) ON UPDATE no action ON DELETE no action\r\n);\r\n```\r\n\r\nAnd running `push:sqlite` gives this error\r\n\r\n```\r\nSqliteError: near \",\": syntax error\r\n    at Database.prepare (~~/node_modules/.pnpm/better-sqlite3@8.4.0/node_modules/better-sqlite3/lib/methods/wrappers.js:5:21)\r\n    at BetterSqlite.run (~~/node_modules/.pnpm/drizzle-kit@0.19.4/node_modules/drizzle-kit/index.cjs:46365:17)\r\n    at Command.<anonymous> (~~/node_modules/.pnpm/drizzle-kit@0.19.4/node_modules/drizzle-kit/index.cjs:52785:33) {\r\n  code: 'SQLITE_ERROR'\r\n}\r\n```\r\n\r\nMany thanks!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/123/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/122","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/122/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/122/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/122/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/122","id":1802903287,"node_id":"I_kwDOHoY85M5rdh73","number":122,"title":"`push:sqlite` after adding a nullable reference truncated the table","user":{"login":"arjunkomath","id":2555067,"node_id":"MDQ6VXNlcjI1NTUwNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2555067?v=4","gravatar_id":"","url":"https://api.github.com/users/arjunkomath","html_url":"https://github.com/arjunkomath","followers_url":"https://api.github.com/users/arjunkomath/followers","following_url":"https://api.github.com/users/arjunkomath/following{/other_user}","gists_url":"https://api.github.com/users/arjunkomath/gists{/gist_id}","starred_url":"https://api.github.com/users/arjunkomath/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arjunkomath/subscriptions","organizations_url":"https://api.github.com/users/arjunkomath/orgs","repos_url":"https://api.github.com/users/arjunkomath/repos","events_url":"https://api.github.com/users/arjunkomath/events{/privacy}","received_events_url":"https://api.github.com/users/arjunkomath/received_events","type":"User","site_admin":false},"labels":[{"id":4311178953,"node_id":"LA_kwDOHoY85M8AAAABAPdeyQ","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2023-07-13T12:19:03Z","updated_at":"2023-08-12T23:46:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I added a nullable reference to a table and after running `push:sqlite` the table was truncated without any warning :(\r\nFortunately this was not a production DB, but if this happened in prod it would have been a disaster.\r\n\r\nThis is the schema change I made:\r\n\r\n```ts\r\nexport const document = sqliteTable(\"Document\", {\r\n  id: integer(\"id\", { mode: \"number\" }).primaryKey({ autoIncrement: true }),\r\n  name: text(\"name\").notNull(),\r\n  markdownContent: text(\"markdownContent\").notNull(),\r\n  status: text(\"status\").notNull(),\r\n  createdAt: integer(\"createdAt\", { mode: \"timestamp\" }).notNull(),\r\n  updatedAt: integer(\"updatedAt\", { mode: \"timestamp\" }).notNull(),\r\n  projectId: integer(\"projectId\")\r\n    .notNull()\r\n    .references(() => project.id, { onDelete: \"cascade\", onUpdate: \"cascade\" }),\r\n\r\n// Added this relation\r\n  folderId: integer(\"folderId\").references(() => documentFolder.id, {\r\n    onDelete: \"cascade\",\r\n    onUpdate: \"cascade\",\r\n  }),\r\n\r\n  createdByUser: text(\"createdByUser\")\r\n    .notNull()\r\n    .references(() => user.id, { onDelete: \"cascade\", onUpdate: \"cascade\" }),\r\n});\r\n```\r\n\r\nAfter running `push:sqlite`, I got this error:\r\n```\r\n> drizzle-kit push:sqlite\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/Users/arjunkomath/Developer/manage-v2/drizzle.config.ts'\r\ndrizzle-kit: v0.19.5\r\ndrizzle-orm: v0.27.2\r\n\r\nTypeError: Cannot read properties of undefined (reading 'columns')\r\n    at _moveDataStatements (/Users/arjunkomath/Developer/manage-v2/node_modules/drizzle-kit/index.cjs:52262:61)\r\n    at logSuggestionsAndReturn2 (/Users/arjunkomath/Developer/manage-v2/node_modules/drizzle-kit/index.cjs:52462:39)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async Command.<anonymous> (/Users/arjunkomath/Developer/manage-v2/node_modules/drizzle-kit/index.cjs:52740:11)\r\n```\r\n\r\nI opened drizzle studio and all data in document table is gone. I'm not sure what happened, is there a way to do a dry-run and print the changes before actually applying them? This was a scary experience. ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/122/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/121","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/121/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/121/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/121/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/121","id":1801892275,"node_id":"I_kwDOHoY85M5rZrGz","number":121,"title":"Nix package manager support","user":{"login":"StrayArrow4","id":73500431,"node_id":"MDQ6VXNlcjczNTAwNDMx","avatar_url":"https://avatars.githubusercontent.com/u/73500431?v=4","gravatar_id":"","url":"https://api.github.com/users/StrayArrow4","html_url":"https://github.com/StrayArrow4","followers_url":"https://api.github.com/users/StrayArrow4/followers","following_url":"https://api.github.com/users/StrayArrow4/following{/other_user}","gists_url":"https://api.github.com/users/StrayArrow4/gists{/gist_id}","starred_url":"https://api.github.com/users/StrayArrow4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/StrayArrow4/subscriptions","organizations_url":"https://api.github.com/users/StrayArrow4/orgs","repos_url":"https://api.github.com/users/StrayArrow4/repos","events_url":"https://api.github.com/users/StrayArrow4/events{/privacy}","received_events_url":"https://api.github.com/users/StrayArrow4/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-07-12T23:18:38Z","updated_at":"2023-07-12T23:18:38Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I wish there were support for the Nix package manager, and, by extension NixOS. Prisma has support natively, and Drizzle's lack of it is causing me to consider using Prisma instead despite loving the project.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/121/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/120","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/120/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/120/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/120/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/120","id":1801561396,"node_id":"I_kwDOHoY85M5rYaU0","number":120,"title":"drizzle-kit: v0.19.4 generates ,,","user":{"login":"agotfredsen82","id":8311375,"node_id":"MDQ6VXNlcjgzMTEzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/8311375?v=4","gravatar_id":"","url":"https://api.github.com/users/agotfredsen82","html_url":"https://github.com/agotfredsen82","followers_url":"https://api.github.com/users/agotfredsen82/followers","following_url":"https://api.github.com/users/agotfredsen82/following{/other_user}","gists_url":"https://api.github.com/users/agotfredsen82/gists{/gist_id}","starred_url":"https://api.github.com/users/agotfredsen82/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agotfredsen82/subscriptions","organizations_url":"https://api.github.com/users/agotfredsen82/orgs","repos_url":"https://api.github.com/users/agotfredsen82/repos","events_url":"https://api.github.com/users/agotfredsen82/events{/privacy}","received_events_url":"https://api.github.com/users/agotfredsen82/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-07-12T18:42:55Z","updated_at":"2023-07-12T20:25:15Z","closed_at":"2023-07-12T20:25:14Z","author_association":"NONE","active_lock_reason":null,"body":"Hi in drizzle-kit: v0.19.2 everything worked fine but in drizzle-kit: v0.19.4 this happens\r\n\r\nin v0.19.2\r\n\r\n```\r\nexport const preferences = sqliteTable(\r\n  \"preferences\",\r\n  {\r\n    user_id: integer(\"user_id\")\r\n      .references(() => users.id, {\r\n        onDelete: \"cascade\",\r\n      })\r\n      .notNull(),\r\n    key: text(\"key\").notNull(),\r\n    value: text(\"value\").notNull(),\r\n    createdAt: text(\"createdAt\")\r\n      .default(sql`CURRENT_TIMESTAMP`)\r\n      .notNull(),\r\n    updatedAt: text(\"updatedAt\")\r\n      .default(sql`CURRENT_TIMESTAMP`)\r\n      .notNull(),\r\n  },\r\n  (table) => {\r\n    return {\r\n      pk: primaryKey(table.user_id, table.key),\r\n    };\r\n  }\r\n);\r\n```\r\n\r\ndrizzle-kit generates\r\n\r\n```\r\nCREATE TABLE `preferences` (\r\n\t`user_id` integer NOT NULL,\r\n\t`key` text NOT NULL,\r\n\t`value` text NOT NULL,\r\n\t`createdAt` text DEFAULT CURRENT_TIMESTAMP NOT NULL,\r\n\t`updatedAt` text DEFAULT CURRENT_TIMESTAMP NOT NULL,\r\n\tPRIMARY KEY(`user_id`, `key`),\r\n\tFOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON UPDATE no action ON DELETE cascade\r\n);\r\n```\r\n\r\nbut in v0.19.4 it generates\r\n\r\n```\r\nCREATE TABLE `preferences` (\r\n\t`user_id` integer NOT NULL,\r\n\t`key` text NOT NULL,\r\n\t`value` text NOT NULL,\r\n\t`createdAt` text DEFAULT CURRENT_TIMESTAMP NOT NULL,\r\n\t`updatedAt` text DEFAULT CURRENT_TIMESTAMP NOT NULL,\r\n\tPRIMARY KEY(`user_id`, `key`),,\r\n\tFOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON UPDATE no action ON DELETE cascade\r\n);\r\n```\r\n\r\nnotice the ,, after PRIMARY KEY(`user_id`, `key`),,\r\n\r\nits clearly a bug .. switching back to v0.19.2 fixes the issue\r\n\r\nalso while you maybe fix this is it not possible to generate \r\n\r\n`FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE cascade`\r\n\r\ninstead of \r\n\r\n`FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON UPDATE no action ON DELETE cascade `\r\n\r\nif nothing is set for onUpdate","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/120/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/119","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/119/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/119/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/119/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/119","id":1801323046,"node_id":"I_kwDOHoY85M5rXgIm","number":119,"title":"Wrong syntax for MySQL composite primary key","user":{"login":"AlessioDP","id":6390810,"node_id":"MDQ6VXNlcjYzOTA4MTA=","avatar_url":"https://avatars.githubusercontent.com/u/6390810?v=4","gravatar_id":"","url":"https://api.github.com/users/AlessioDP","html_url":"https://github.com/AlessioDP","followers_url":"https://api.github.com/users/AlessioDP/followers","following_url":"https://api.github.com/users/AlessioDP/following{/other_user}","gists_url":"https://api.github.com/users/AlessioDP/gists{/gist_id}","starred_url":"https://api.github.com/users/AlessioDP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlessioDP/subscriptions","organizations_url":"https://api.github.com/users/AlessioDP/orgs","repos_url":"https://api.github.com/users/AlessioDP/repos","events_url":"https://api.github.com/users/AlessioDP/events{/privacy}","received_events_url":"https://api.github.com/users/AlessioDP/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-07-12T16:13:40Z","updated_at":"2023-07-12T20:25:28Z","closed_at":"2023-07-12T20:25:28Z","author_association":"NONE","active_lock_reason":null,"body":"drizzle-kit is generating a wrong syntax SQL code on create table with multiple primary keys.\r\n\r\nBy following the documentation, we can create a simple table with two primary keys like this:\r\n```typescript\r\nexport const usersToGuilds = mysqlTable('users_to_guilds', {\r\n    userId: int('user_id'),\r\n    guildId: int('guild_id')\r\n}, (table) => ({\r\n    pk: primaryKey(table.userId, table.guildId)\r\n}));\r\n```\r\n\r\nThe generated SQL code is:\r\n```sql\r\nCREATE TABLE `users_to_guilds` (\r\n\t`user_id` int NOT NULL,\r\n\t`guild_id` int NOT NULL,\r\n\tCONSTRAINT `users_to_guilds_user_id_guild_id` PRIMARY KEY(\"user_id\",\"guild_id\")\r\n);\r\n```\r\n\r\nThe part `PRIMARY KEY(\"user_id\",\"guild_id\")` should use back ticks instead of double quote for table columns:\r\n```sql\r\nPRIMARY KEY(`user_id`,`guild_id`)\r\n```\r\n\r\n---\r\n\r\nFurthermore, the documentation says that the result query should be:\r\n```sql\r\nCREATE TABLE `users_to_guilds` (\r\n\t`user_id` int NOT NULL,\r\n\t`guild_id` int NOT NULL,\r\n        PRIMARY KEY(`user_id`,`guild_id`)\r\n);\r\n```\r\nThe CONSTRAINT part should be added into the doc (?)\r\n\r\n---\r\n\r\nUsing `drizzle-orm@0.27.2` and `drizzle-kit@0.19.4` with `mysql2` driver.\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/119/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/118","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/118/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/118/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/118/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/118","id":1800003941,"node_id":"I_kwDOHoY85M5rSeFl","number":118,"title":"Support UNIX socket in MySQL2","user":{"login":"hyunbinseo","id":47051820,"node_id":"MDQ6VXNlcjQ3MDUxODIw","avatar_url":"https://avatars.githubusercontent.com/u/47051820?v=4","gravatar_id":"","url":"https://api.github.com/users/hyunbinseo","html_url":"https://github.com/hyunbinseo","followers_url":"https://api.github.com/users/hyunbinseo/followers","following_url":"https://api.github.com/users/hyunbinseo/following{/other_user}","gists_url":"https://api.github.com/users/hyunbinseo/gists{/gist_id}","starred_url":"https://api.github.com/users/hyunbinseo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hyunbinseo/subscriptions","organizations_url":"https://api.github.com/users/hyunbinseo/orgs","repos_url":"https://api.github.com/users/hyunbinseo/repos","events_url":"https://api.github.com/users/hyunbinseo/events{/privacy}","received_events_url":"https://api.github.com/users/hyunbinseo/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-07-12T01:26:10Z","updated_at":"2024-05-29T19:42:03Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"MySQL2 supports [UNIX domain socket].\r\n\r\n[UNIX domain socket]: https://github.com/sidorares/node-mysql2/blob/9051caf277990c110bb54cb4a8a23c497afb973c/typings/mysql/lib/Connection.d.ts#L143-L146\r\n\r\nIn fact, the following connection works.\r\n\r\n```javascript\r\nimport { drizzle } from 'drizzle-orm/mysql2';\r\nimport { createConnection } from 'mysql2/promise';\r\n\r\n/** @type {import('mysql2/promise').ConnectionOptions} */\r\nexport const dbCredentials = {\r\n  socketPath: '/tmp/mysql.sock',\r\n  user: 'hyunbinseo',\r\n  database: 'abcd'\r\n};\r\n\r\nconst connection = await createConnection(dbCredentials);\r\ndrizzle(connection);\r\n```\r\n\r\nWhile this config does not. (Identical credentials as above)\r\n\r\n```javascript\r\n// drizzle.config.js\r\n\r\n/** @type { import(\"drizzle-kit\").Config } */\r\nexport default {\r\n  out: './drizzle',\r\n  schema: './src/lib/server/db/schema.ts',\r\n  driver: 'mysql2',\r\n  dbCredentials: {\r\n    socketPath: '/tmp/mysql.sock', // Object literal may only specify known properties, and 'socketPath' does not exist in type '{ host: string; port?: number | undefined; user?: string | undefined; password?: string | undefined; database: string; } | { connectionString: string; }'.ts(2322)\r\n    user: 'hyunbinseo',\r\n    database: 'abcd'\r\n  }\r\n};\r\n```\r\n\r\n> We mirror connection params of database drivers ‚Äî [Push and Pull, Drizzle Kit Configuration]\r\n\r\n[Push and Pull, Drizzle Kit Configuration]: https://orm.drizzle.team/kit-docs/conf#push-and-pull\r\n\r\n---\r\n\r\nWhen `drizzle-kit studio` is executed, it shows an incorrect error message. Reference https://github.com/drizzle-team/drizzle-orm/issues/858\r\n\r\n```\r\nInvalid input  \"mysql2\" is not a valid driver. Available drivers: \"pg\", \"mysql2\", \"better-sqlite\", \"libsql\", \"turso\". You can read more about drizzle.config: https://orm.drizzle.team/kit-docs/config-reference\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/118/reactions","total_count":7,"+1":7,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/118/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/117","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/117/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/117/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/117/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/117","id":1797784122,"node_id":"I_kwDOHoY85M5rKAI6","number":117,"title":"Studio - Add License","user":{"login":"zacowan","id":44091329,"node_id":"MDQ6VXNlcjQ0MDkxMzI5","avatar_url":"https://avatars.githubusercontent.com/u/44091329?v=4","gravatar_id":"","url":"https://api.github.com/users/zacowan","html_url":"https://github.com/zacowan","followers_url":"https://api.github.com/users/zacowan/followers","following_url":"https://api.github.com/users/zacowan/following{/other_user}","gists_url":"https://api.github.com/users/zacowan/gists{/gist_id}","starred_url":"https://api.github.com/users/zacowan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zacowan/subscriptions","organizations_url":"https://api.github.com/users/zacowan/orgs","repos_url":"https://api.github.com/users/zacowan/repos","events_url":"https://api.github.com/users/zacowan/events{/privacy}","received_events_url":"https://api.github.com/users/zacowan/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-07-10T23:38:11Z","updated_at":"2024-03-23T11:56:16Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"## Issue\r\n\r\nCurrently, no license exists for `@drizzle-team/studio`. \r\n\r\n<img width=\"1181\" alt=\"Screenshot 2023-07-10 at 7 34 33 PM\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/44091329/1be1178f-61cc-412d-b6c2-6e4d4aab6a63\">\r\n\r\n## Proposed Solution\r\n\r\nAdd a license field to the `package.json`. Presumably, the same license that drizzle-kit uses?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/117/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/117/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/116","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/116/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/116/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/116/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/116","id":1794542294,"node_id":"I_kwDOHoY85M5q9orW","number":116,"title":"introspect:sqlite generates invalid schema for text columns","user":{"login":"gnosticdev","id":64601257,"node_id":"MDQ6VXNlcjY0NjAxMjU3","avatar_url":"https://avatars.githubusercontent.com/u/64601257?v=4","gravatar_id":"","url":"https://api.github.com/users/gnosticdev","html_url":"https://github.com/gnosticdev","followers_url":"https://api.github.com/users/gnosticdev/followers","following_url":"https://api.github.com/users/gnosticdev/following{/other_user}","gists_url":"https://api.github.com/users/gnosticdev/gists{/gist_id}","starred_url":"https://api.github.com/users/gnosticdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gnosticdev/subscriptions","organizations_url":"https://api.github.com/users/gnosticdev/orgs","repos_url":"https://api.github.com/users/gnosticdev/repos","events_url":"https://api.github.com/users/gnosticdev/events{/privacy}","received_events_url":"https://api.github.com/users/gnosticdev/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-07-07T23:42:50Z","updated_at":"2023-07-12T20:25:34Z","closed_at":"2023-07-12T20:25:33Z","author_association":"NONE","active_lock_reason":null,"body":"Some of my text columns were generated with default(NULL) in the schema.ts file. This throws a typescript error (bc NULL isn't the same as null ) but it should probably not be generating any default value since text columns are NULL by default.\r\n\r\nThis happens for existing databases with column that has some NULL values mixed with some TEXT values.\r\n\r\n*Note: The outputted migration files are fine, this is only a schema.ts issue*\r\n\r\n```typescript\r\n// drizzle.config.ts\r\nexport default {\r\nintrospect: {\r\n        casing: 'camel',\r\n    },\r\n    driver: 'better-sqlite',\r\n    out: './drizzle',\r\n    dbCredentials: {\r\n        url: './drizzle/chat-test.db',\r\n    },\r\n} satisfies Config\r\n```\r\n\r\nSchema generated by ```drizzle-kit introspect:sqlite```\r\n```typescript\r\n// drizzle/schema.ts\r\nexport const handle = sqliteTable('handle', {\r\n    ...\r\n    personCentricId: text('person_centric_id').default(NULL),\r\n})\r\n```\r\n\r\nError:\r\n```zsh\r\ndrizzle/schema.ts:73:56 - error TS2304: Cannot find name 'NULL'.\r\n\r\n73     personCentricId: text('person_centric_id').default(NULL),\r\n```\r\n\r\nI found this in the source that might be causing it:\r\n\r\n```typescript\r\n// src/sqlite-introspect.ts\r\nmapColumnDefault2 = (defaultValue) => {\r\n      if (typeof defaultValue === \"string\" && defaultValue.startsWith(\"(\") && defaultValue.endsWith(\")\")) {\r\n        return `sql\\`${defaultValue}\\``;\r\n      }\r\n      return defaultValue;\r\n    };\r\n```\r\n\r\n\r\nThis fixes the error and maintains the migration files, but is probably not the ideal solution.\r\n```typescript\r\nexport const NULL = sql`NULL`\r\n```\r\n\r\nLet me know if you need anymore details, I have reproduced it a few times.\r\n\r\nHope it helps!\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/116/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/115","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/115/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/115/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/115/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/115","id":1787461893,"node_id":"I_kwDOHoY85M5qioEF","number":115,"title":"Support for data types with parameters added by extensions (e.g. pgvector)","user":{"login":"avanderbergh","id":493849,"node_id":"MDQ6VXNlcjQ5Mzg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/493849?v=4","gravatar_id":"","url":"https://api.github.com/users/avanderbergh","html_url":"https://github.com/avanderbergh","followers_url":"https://api.github.com/users/avanderbergh/followers","following_url":"https://api.github.com/users/avanderbergh/following{/other_user}","gists_url":"https://api.github.com/users/avanderbergh/gists{/gist_id}","starred_url":"https://api.github.com/users/avanderbergh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avanderbergh/subscriptions","organizations_url":"https://api.github.com/users/avanderbergh/orgs","repos_url":"https://api.github.com/users/avanderbergh/repos","events_url":"https://api.github.com/users/avanderbergh/events{/privacy}","received_events_url":"https://api.github.com/users/avanderbergh/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":11,"created_at":"2023-07-04T08:47:06Z","updated_at":"2024-03-12T18:42:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I would like to use the `vector` data type provided by [pgvector](https://github.com/pgvector/pgvector)\r\n\r\nThe type can be used with or without a parameter to specify the number of dimensions.\r\n\r\nThe issue is that the generated SQL puts `\"\"` around the type so its seen as a literal.\r\n\r\nI've found the following function in the compiled source:\r\n```javascript\r\nvar isPgNativeType = (it) => {\r\n  if (pgNativeTypes.has(it))\r\n    return true;\r\n  const toCheck = it.replace(/ /g, \"\");\r\n  return toCheck.startsWith(\"varchar(\") || toCheck.startsWith(\"char(\") || toCheck.startsWith(\"numeric(\") || toCheck.startsWith(\"timestamp(\") || toCheck.startsWith(\"intervalyear(\") || toCheck.startsWith(\"intervalmonth(\") || toCheck.startsWith(\"intervalday(\") || toCheck.startsWith(\"intervalhour(\") || toCheck.startsWith(\"intervalminute(\") || toCheck.startsWith(\"intervalsecond(\") || toCheck.startsWith(\"intervalyeartomonth(\") || toCheck.startsWith(\"intervaldaytohour(\") || toCheck.startsWith(\"intervaldaytominute(\") || toCheck.startsWith(\"intervaldaytosecond(\") || toCheck.startsWith(\"intervalhourtominute(\") || toCheck.startsWith(\"intervalhourtosecond(\") || toCheck.startsWith(\"intervalminutetosecond(\") || /^(\\w+)(\\[\\d*])+$/.test(it);\r\n};\r\n```\r\n\r\nThis explains while built-in types don't have the `\"`.\r\n\r\nHow could we use new types introduced by extensions that need to take parameters?\r\n\r\nThe maintainer of pgvector has already created an [implementation](https://github.com/pgvector/pgvector-node#drizzle-orm) for drizzle, but it seems to be blocked by this issue... ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/115/reactions","total_count":9,"+1":9,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/115/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/114","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/114/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/114/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/114/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/114","id":1787148050,"node_id":"I_kwDOHoY85M5qhbcS","number":114,"title":"Studio - Input 0 for integer but it complains 0 is not a number","user":{"login":"plugboy","id":957845,"node_id":"MDQ6VXNlcjk1Nzg0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/957845?v=4","gravatar_id":"","url":"https://api.github.com/users/plugboy","html_url":"https://github.com/plugboy","followers_url":"https://api.github.com/users/plugboy/followers","following_url":"https://api.github.com/users/plugboy/following{/other_user}","gists_url":"https://api.github.com/users/plugboy/gists{/gist_id}","starred_url":"https://api.github.com/users/plugboy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plugboy/subscriptions","organizations_url":"https://api.github.com/users/plugboy/orgs","repos_url":"https://api.github.com/users/plugboy/repos","events_url":"https://api.github.com/users/plugboy/events{/privacy}","received_events_url":"https://api.github.com/users/plugboy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-07-04T05:00:51Z","updated_at":"2023-07-17T19:47:13Z","closed_at":"2023-07-17T19:47:13Z","author_association":"NONE","active_lock_reason":null,"body":"When I input positive and negative numbers in integer column it works but when I input 0 it complains that is not a number ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/114/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/113","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/113/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/113/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/113/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/113","id":1785006724,"node_id":"I_kwDOHoY85M5qZQqE","number":113,"title":"Typescript Path Alias support","user":{"login":"HegarGarcia","id":10493888,"node_id":"MDQ6VXNlcjEwNDkzODg4","avatar_url":"https://avatars.githubusercontent.com/u/10493888?v=4","gravatar_id":"","url":"https://api.github.com/users/HegarGarcia","html_url":"https://github.com/HegarGarcia","followers_url":"https://api.github.com/users/HegarGarcia/followers","following_url":"https://api.github.com/users/HegarGarcia/following{/other_user}","gists_url":"https://api.github.com/users/HegarGarcia/gists{/gist_id}","starred_url":"https://api.github.com/users/HegarGarcia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HegarGarcia/subscriptions","organizations_url":"https://api.github.com/users/HegarGarcia/orgs","repos_url":"https://api.github.com/users/HegarGarcia/repos","events_url":"https://api.github.com/users/HegarGarcia/events{/privacy}","received_events_url":"https://api.github.com/users/HegarGarcia/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-07-02T23:12:44Z","updated_at":"2023-11-28T22:22:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Currently drizzle-kit doesn't support Typescript path aliases, this prevents the usage of the package on big codebases where most of the imports are through aliases.\r\n\r\nUsing absolute paths on the imports works without a problem, but when using any `@/...` path everything breaks. This also applies to the `drizzle.config.ts`.\r\n\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/10493888/6341b5f1-abe0-4e68-9cd1-953aa2b9ad2f)\r\n\r\nRight now I'm working around this problema by denying all imports not coming from `drizzle-orm` with ESLint but that is not a good solution long term.\r\n\r\nLeaving the snippet for anyone having issues with this.\r\n\r\n```js\r\nconst override = {\r\n  files: [\"src/db/schema.ts\"],\r\n  rules: {\r\n    \"@typescript-eslint/no-restricted-imports\": [\r\n      \"error\",\r\n      {\r\n        patterns: [\"*\", \"!drizzle-orm\", \"!drizzle-orm/mysql-core\"],\r\n      },\r\n    ],\r\n  },\r\n};\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/113/reactions","total_count":8,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/113/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/112","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/112/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/112/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/112/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/112","id":1784857971,"node_id":"I_kwDOHoY85M5qYsVz","number":112,"title":"Introspect fails when directory structure is in place","user":{"login":"jakeleventhal","id":15133828,"node_id":"MDQ6VXNlcjE1MTMzODI4","avatar_url":"https://avatars.githubusercontent.com/u/15133828?v=4","gravatar_id":"","url":"https://api.github.com/users/jakeleventhal","html_url":"https://github.com/jakeleventhal","followers_url":"https://api.github.com/users/jakeleventhal/followers","following_url":"https://api.github.com/users/jakeleventhal/following{/other_user}","gists_url":"https://api.github.com/users/jakeleventhal/gists{/gist_id}","starred_url":"https://api.github.com/users/jakeleventhal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakeleventhal/subscriptions","organizations_url":"https://api.github.com/users/jakeleventhal/orgs","repos_url":"https://api.github.com/users/jakeleventhal/repos","events_url":"https://api.github.com/users/jakeleventhal/events{/privacy}","received_events_url":"https://api.github.com/users/jakeleventhal/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-07-02T21:00:17Z","updated_at":"2023-07-02T21:05:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```\r\n‚ñ∂ npx drizzle-kit introspect:pg --driver=pg --connectionString=postgresql://postgres:local@localhost:5432/postgres\r\n\r\ndrizzle-kit: v0.19.3\r\ndrizzle-orm: v0.27.0\r\n\r\nnode:fs:599\r\n  handleErrorFromBinding(ctx);\r\n  ^\r\n\r\nError: ENOENT: no such file or directory, open 'drizzle/meta/_journal.json'\r\n    at Object.openSync (node:fs:599:3)\r\n    at readFileSync (node:fs:467:35)\r\n    at prepareOutFolder2 (/Users/jakeleventhal/Code/rip-technologies/node_modules/.pnpm/drizzle-kit@0.19.3/node_modules/drizzle-kit/index.cjs:17765:62)\r\n    at Command.<anonymous> (/Users/jakeleventhal/Code/rip-technologies/node_modules/.pnpm/drizzle-kit@0.19.3/node_modules/drizzle-kit/index.cjs:52367:34) {\r\n  errno: -2,\r\n  syscall: 'open',\r\n  code: 'ENOENT',\r\n  path: 'drizzle/meta/_journal.json'\r\n}\r\n\r\nNode.js v18.9.1\r\n```\r\n```json\r\n{\r\n  \"dependencies\": {\r\n    ...\r\n    \"drizzle-orm\": \"0.27.0\"\r\n  },\r\n  \"devDependencies\": {\r\n    ...\r\n    \"drizzle-kit\": \"0.19.3\"\r\n  }\r\n```\r\n\r\nthis happened after i ran introspect, discarded untracked files, then ran again. the problem was that the `drizzle/meta` directory still existed. after removing that, it worked. introspect ought to handle this i think","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/112/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/111","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/111/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/111/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/111/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/111","id":1783849089,"node_id":"I_kwDOHoY85M5qU2CB","number":111,"title":"Introspect and generate in github actions (ci)","user":{"login":"nmajor","id":1725397,"node_id":"MDQ6VXNlcjE3MjUzOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1725397?v=4","gravatar_id":"","url":"https://api.github.com/users/nmajor","html_url":"https://github.com/nmajor","followers_url":"https://api.github.com/users/nmajor/followers","following_url":"https://api.github.com/users/nmajor/following{/other_user}","gists_url":"https://api.github.com/users/nmajor/gists{/gist_id}","starred_url":"https://api.github.com/users/nmajor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nmajor/subscriptions","organizations_url":"https://api.github.com/users/nmajor/orgs","repos_url":"https://api.github.com/users/nmajor/repos","events_url":"https://api.github.com/users/nmajor/events{/privacy}","received_events_url":"https://api.github.com/users/nmajor/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-07-01T12:05:23Z","updated_at":"2023-07-10T15:16:46Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm trying to add a github action check to show if the production database schema does not match the drizzle schema of the current commit/pull request.\r\n\r\nSidenote: This is because I'm using planetscale and their branches and deploy requests. But the implementation is not particularly related to planetscale.\r\n\r\nMy github action runs a bash script that runs drizzle-kit introspect and then generate and that is how I check if the database is dirty. The script works on my local machine but not on github actions.\r\n\r\nIn the script I have this:\r\n\r\n```\r\nDIALECT: mysql\r\nDATABASE_URL is defined, but secret\r\n\r\ndrizzle-kit introspect:$DIALECT --connectionString $DATABASE_URL --out $OUTPUT_PATH\r\n```\r\n\r\nand when the github action gets to that line I get this error:\r\n\r\n```\r\n Invalid input  Only \"mysql2\" is available options for \"--driver\"\r\n```\r\n\r\nmysql2 is installed and I tried specifying a --driver parameter in the command but that wasnt allowed.\r\n\r\nVersions:\r\ndrizzle-kit: v0.19.2\r\ndrizzle-orm: v0.27.0\r\n\r\nI hope I'm not overlooking something stupid.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/111/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/110","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/110/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/110/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/110/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/110","id":1783340934,"node_id":"I_kwDOHoY85M5qS5-G","number":110,"title":"Composite Primary Key Order not as expected","user":{"login":"FredBuild","id":103510098,"node_id":"U_kgDOBitwUg","avatar_url":"https://avatars.githubusercontent.com/u/103510098?v=4","gravatar_id":"","url":"https://api.github.com/users/FredBuild","html_url":"https://github.com/FredBuild","followers_url":"https://api.github.com/users/FredBuild/followers","following_url":"https://api.github.com/users/FredBuild/following{/other_user}","gists_url":"https://api.github.com/users/FredBuild/gists{/gist_id}","starred_url":"https://api.github.com/users/FredBuild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FredBuild/subscriptions","organizations_url":"https://api.github.com/users/FredBuild/orgs","repos_url":"https://api.github.com/users/FredBuild/repos","events_url":"https://api.github.com/users/FredBuild/events{/privacy}","received_events_url":"https://api.github.com/users/FredBuild/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-07-01T01:57:14Z","updated_at":"2024-02-28T20:08:30Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, here's an example of my table definition:\r\n\r\n```ts\r\nimport {\r\n  mysqlTable,\r\n  bigint,\r\n  varchar,\r\n  primaryKey,\r\n} from \"drizzle-orm/mysql-core\";\r\n\r\nexport const usersToProjects = mysqlTable(\r\n  \"user_to_project\",\r\n  {\r\n    userId: varchar(\"user_id\", { length: 15 }).notNull(),\r\n    projectId: bigint(\"project_id\", { mode: \"number\" }).notNull(),\r\n    // ...\r\n  },\r\n  (item) => ({\r\n    pk: primaryKey(item.userId, item.projectId), // Composite Primary Key\r\n  }),\r\n);\r\n```\r\n\r\nGenerated SQL:\r\n\r\n```sql\r\nCREATE TABLE `user_to_project` (\r\n\t`user_id` varchar(15) NOT NULL,\r\n\t`project_id` bigint NOT NULL,\r\n\r\n\tPRIMARY KEY(`project_id`,`user_id`) --> The order is inconsistent with the schema\r\n);\r\n```\r\n\r\n`0000_snapshot.json`:\r\n\r\n```json\r\n      \"compositePrimaryKeys\": {\r\n        \"user_to_project_project_id_user_id\": {\r\n          \"name\": \"user_to_project_project_id_user_id\",\r\n          \"columns\": [\r\n            \"project_id\",\r\n            \"user_id\"\r\n          ]\r\n        }\r\n      }\r\n```\r\n\r\nSame issue in `drizzle-kit push:mysql`.\r\n\r\nThanks!\r\n\r\n---\r\n\r\nEnv:\r\n\r\n- `drizzle-kit`: 0.19.2\r\n- `drizzle-orm`: 0.27.0\r\n- MySQL (PlanetScale)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/110/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/110/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/109","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/109/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/109/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/109/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/109","id":1781164750,"node_id":"I_kwDOHoY85M5qKmrO","number":109,"title":"Pulling from MySQL with UNSIGNED columns let drizzzle-kit forgets the imports","user":{"login":"205g0","id":74575852,"node_id":"MDQ6VXNlcjc0NTc1ODUy","avatar_url":"https://avatars.githubusercontent.com/u/74575852?v=4","gravatar_id":"","url":"https://api.github.com/users/205g0","html_url":"https://github.com/205g0","followers_url":"https://api.github.com/users/205g0/followers","following_url":"https://api.github.com/users/205g0/following{/other_user}","gists_url":"https://api.github.com/users/205g0/gists{/gist_id}","starred_url":"https://api.github.com/users/205g0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/205g0/subscriptions","organizations_url":"https://api.github.com/users/205g0/orgs","repos_url":"https://api.github.com/users/205g0/repos","events_url":"https://api.github.com/users/205g0/events{/privacy}","received_events_url":"https://api.github.com/users/205g0/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-06-29T16:30:34Z","updated_at":"2023-06-29T16:30:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"              Put the next issue here because here is the most momentum, when pulling with drizzle-kit from mysql where I have:\r\n```sql\r\nCREATE TABLE some_table {\r\n  ...\r\n  some_column tinyint unsigned;\r\n  ...\r\n```\r\n...drizzle-kit does convert it to `.tinyint()` in its TypeScript declaration but forgots the import `tinyint` in that auto-generated file. Once `unsigned` is removed, all works fine. But then we don't have unsigned on MySQL and waste storage.\r\n\r\n@AndriiSherman apologies for spamming everywhere the UNSIGEND issues, seems there are just not supported nowhere. If you have a preferred way how and/or where deal with them, pls let us know üôÇ\r\n\r\n_Originally posted by @205g0 in https://github.com/drizzle-team/drizzle-orm/issues/258#issuecomment-1613493394_\r\n            ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/109/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/108","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/108/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/108/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/108/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/108","id":1777894336,"node_id":"I_kwDOHoY85M5p-IPA","number":108,"title":"migration for text array type generates \"text[]\" instead text[]","user":{"login":"kenbankspeng","id":26904200,"node_id":"MDQ6VXNlcjI2OTA0MjAw","avatar_url":"https://avatars.githubusercontent.com/u/26904200?v=4","gravatar_id":"","url":"https://api.github.com/users/kenbankspeng","html_url":"https://github.com/kenbankspeng","followers_url":"https://api.github.com/users/kenbankspeng/followers","following_url":"https://api.github.com/users/kenbankspeng/following{/other_user}","gists_url":"https://api.github.com/users/kenbankspeng/gists{/gist_id}","starred_url":"https://api.github.com/users/kenbankspeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kenbankspeng/subscriptions","organizations_url":"https://api.github.com/users/kenbankspeng/orgs","repos_url":"https://api.github.com/users/kenbankspeng/repos","events_url":"https://api.github.com/users/kenbankspeng/events{/privacy}","received_events_url":"https://api.github.com/users/kenbankspeng/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-06-27T23:24:02Z","updated_at":"2023-06-28T00:26:51Z","closed_at":"2023-06-28T00:26:51Z","author_association":"NONE","active_lock_reason":null,"body":"Example schema:\r\n```\r\npgTable('mytable', {\r\n  id: serial('id').primaryKey().notNull()\r\n  example: text('example').array().notNull(),\r\n}\r\n```\r\n\r\nExpected migration SQL:\r\n```\r\nCREATE TABLE IF NOT EXISTS \"mytable\" (\r\n  \"id\" serial PRIMARY KEY NOT NULL,\r\n  \"example\" text[] NOT NULL,\r\n);\r\n```\r\n\r\nObserved migration SQL: text[] in quotations\r\n```\r\nCREATE TABLE IF NOT EXISTS \"mytable\" (\r\n  \"id\" serial PRIMARY KEY NOT NULL,\r\n  \"example\" \"text[]\" NOT NULL,\r\n);\r\n```\r\n\r\nResult on Postgres:\r\nPostgresError: type \"text[]\" does not exist","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/108/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/107","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/107/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/107/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/107/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/107","id":1776542744,"node_id":"I_kwDOHoY85M5p4-QY","number":107,"title":"`push:sqlite` does not recognize `--schema` option","user":{"login":"WPitak","id":17599549,"node_id":"MDQ6VXNlcjE3NTk5NTQ5","avatar_url":"https://avatars.githubusercontent.com/u/17599549?v=4","gravatar_id":"","url":"https://api.github.com/users/WPitak","html_url":"https://github.com/WPitak","followers_url":"https://api.github.com/users/WPitak/followers","following_url":"https://api.github.com/users/WPitak/following{/other_user}","gists_url":"https://api.github.com/users/WPitak/gists{/gist_id}","starred_url":"https://api.github.com/users/WPitak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WPitak/subscriptions","organizations_url":"https://api.github.com/users/WPitak/orgs","repos_url":"https://api.github.com/users/WPitak/repos","events_url":"https://api.github.com/users/WPitak/events{/privacy}","received_events_url":"https://api.github.com/users/WPitak/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-06-27T10:00:20Z","updated_at":"2023-07-12T20:25:38Z","closed_at":"2023-07-12T20:25:38Z","author_association":"NONE","active_lock_reason":null,"body":"## Context\r\n* drizzle-kit: v0.19.2\r\n* drizzle-orm: v0.27.0\r\n* pnpm: v8.6.3\r\n\r\n## Setup\r\n* run `pnpm exec drizzle-kit push:sqlite --schema=./schema.ts --driver=better-sqlite --url=./test.db`\r\n\r\n## Issue\r\nRunning the command result in an error `error: unknown option '--schema=./schema.ts'`\r\n\r\nCurrent `drizzle-kit` [documentation](https://orm.drizzle.team/kit-docs/commands#prototype--push) list param `schema`  as required, but result of running the command with `--help` **does not** list `--schema` as an option\r\n```sh\r\n$ pnpm exec drizzle-kit push:sqlite --help\r\nUsage: index push:sqlite [options]\r\n\r\nOptions:\r\n  --config <config>                      Path to a config.ts file, drizzle.config.ts\r\n                                         by default\r\n  --tableFilters                         Table name filters\r\n  --connectionString <connectionString>  SQLite connection string\r\n  --driver <driver>                      SQLite database path\r\n  --url <url>                            SQLite database path\r\n  --auth-token <authToken>               SQLite database path\r\n  --verbose                              Print all statements for each push\r\n  --strict                               Always ask for confirmation\r\n  -h, --help\r\n```\r\n\r\n`schema` can still be specified and perform `push:sqlite` successfully through configuration file.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/107/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/106","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/106/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/106/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/106/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/106","id":1776500168,"node_id":"I_kwDOHoY85M5p4z3I","number":106,"title":"`generate:sqlite` generates invalid migration statement for integer field that use auto-increment","user":{"login":"WPitak","id":17599549,"node_id":"MDQ6VXNlcjE3NTk5NTQ5","avatar_url":"https://avatars.githubusercontent.com/u/17599549?v=4","gravatar_id":"","url":"https://api.github.com/users/WPitak","html_url":"https://github.com/WPitak","followers_url":"https://api.github.com/users/WPitak/followers","following_url":"https://api.github.com/users/WPitak/following{/other_user}","gists_url":"https://api.github.com/users/WPitak/gists{/gist_id}","starred_url":"https://api.github.com/users/WPitak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WPitak/subscriptions","organizations_url":"https://api.github.com/users/WPitak/orgs","repos_url":"https://api.github.com/users/WPitak/repos","events_url":"https://api.github.com/users/WPitak/events{/privacy}","received_events_url":"https://api.github.com/users/WPitak/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-06-27T09:40:16Z","updated_at":"2023-07-12T20:25:49Z","closed_at":"2023-07-12T20:25:49Z","author_association":"NONE","active_lock_reason":null,"body":"## Context\r\n* drizzle-kit: v0.19.2\r\n* drizzle-orm: v0.27.0\r\n* pnpm: v8.6.3\r\n\r\n## Setup\r\n* schema.ts\r\n```ts\r\nimport {\r\n  sqliteTable,\r\n  integer,\r\n  text,\r\n  uniqueIndex,\r\n  primaryKey,\r\n  foreignKey,\r\n} from \"drizzle-orm/sqlite-core\";\r\n\r\nexport const users = sqliteTable(\r\n  \"users\",\r\n  {\r\n    id: integer(\"id\", { mode: \"number\" }).primaryKey({ autoIncrement: true }),\r\n    name: text(\"name\").notNull(),\r\n  },\r\n  (table) => ({\r\n    uniqueName: uniqueIndex(\"uniqueNameIdx\").on(table.name),\r\n  })\r\n);\r\n\r\nexport const tags = sqliteTable(\r\n  \"tags\",\r\n  {\r\n    userId: integer(\"user_id\", { mode: \"number\" }).notNull(),\r\n    tag: text(\"tag\").notNull(),\r\n  },\r\n  (table) => ({\r\n    pk: primaryKey(table.userId, table.tag),\r\n    userIdFk: foreignKey(() => ({\r\n      columns: [table.userId],\r\n      foreignColumns: [users.id],\r\n    })),\r\n  })\r\n);\r\n```\r\n\r\n* run command `pnpm exec drizzle-kit generate:sqlite --schema=schema.ts`\r\n\r\n## Issue\r\nThe generated migration file contains the following\r\n```sql\r\nCREATE TABLE `tags` (\r\n\t`user_id` integer NOT NULL,\r\n\t`tag` text NOT NULL,\r\n\tPRIMARY KEY(`user_id`, `tag`),\r\n\tFOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON UPDATE no action ON DELETE no action\r\n);\r\n--> statement-breakpoint\r\nCREATE TABLE `users` (\r\n\t`id` integer AUTO_INCREMENT PRIMARY KEY NOT NULL,\r\n\t`name` text NOT NULL\r\n);\r\n--> statement-breakpoint\r\nCREATE UNIQUE INDEX `uniqueNameIdx` ON `users` (`name`);\r\n```\r\n\r\nAfter preparing the database with generated script directly or with `drizzle-kit push:sqlite`, running code inserting data or directly executing insert statement into `users` table with only `users.name` result in error `NOT NULL constraint failed: users.id`.\r\n\r\nAccording to [SQLite documentation](https://www.sqlite.org/lang_createtable.html), the line declaring `users.id` should probably be\r\n```sql\r\n`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\r\n```\r\nwhich is also what is currently shown in `drizzle-kit` [documentation](https://orm.drizzle.team/docs/column-types/sqlite#integer).\r\n\r\nPreparing database with script modified with above fragment seems to fix the issue.\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/106/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/105","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/105/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/105/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/105/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/105","id":1775929157,"node_id":"I_kwDOHoY85M5p2odF","number":105,"title":"[Request] Check DB before trying to truncate table","user":{"login":"TiltedToast","id":57221600,"node_id":"MDQ6VXNlcjU3MjIxNjAw","avatar_url":"https://avatars.githubusercontent.com/u/57221600?v=4","gravatar_id":"","url":"https://api.github.com/users/TiltedToast","html_url":"https://github.com/TiltedToast","followers_url":"https://api.github.com/users/TiltedToast/followers","following_url":"https://api.github.com/users/TiltedToast/following{/other_user}","gists_url":"https://api.github.com/users/TiltedToast/gists{/gist_id}","starred_url":"https://api.github.com/users/TiltedToast/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TiltedToast/subscriptions","organizations_url":"https://api.github.com/users/TiltedToast/orgs","repos_url":"https://api.github.com/users/TiltedToast/repos","events_url":"https://api.github.com/users/TiltedToast/events{/privacy}","received_events_url":"https://api.github.com/users/TiltedToast/received_events","type":"User","site_admin":false},"labels":[{"id":5669950352,"node_id":"LA_kwDOHoY85M8AAAABUfSTkA","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/improvement","name":"improvement","color":"79DE7D","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-06-27T01:22:24Z","updated_at":"2023-07-03T12:40:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I was wondering if it was possible for drizzle-kit to query the database when trying to push a new schema to check if the data inside is maybe already compatible.\n\nAs it is right now, drizzle-kit will just give you the option to wipe the whole table when you're for example lowering a varchar's length and try to push that schema.\n\nIt doesn't matter if all the data inside the database already conforms to the new schema, it'll still try to truncate the table. \n\nI'm sure doing this for every changed schema property would result in a lot of extra work, especially when there are multiple different databases that need to be supported. \n\nAdmittedly the way it works now isn't the end of the world since you can just dump the whole table beforehand and fill it up again but having drizzle-kit handle this automatically would still definitely be a nice quality of life improvement.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/105/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/104","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/104/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/104/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/104/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/104","id":1775873396,"node_id":"I_kwDOHoY85M5p2a10","number":104,"title":"Pressing `escape` while in the `push` confirmation dialog runs the push","user":{"login":"b0o","id":21299126,"node_id":"MDQ6VXNlcjIxMjk5MTI2","avatar_url":"https://avatars.githubusercontent.com/u/21299126?v=4","gravatar_id":"","url":"https://api.github.com/users/b0o","html_url":"https://github.com/b0o","followers_url":"https://api.github.com/users/b0o/followers","following_url":"https://api.github.com/users/b0o/following{/other_user}","gists_url":"https://api.github.com/users/b0o/gists{/gist_id}","starred_url":"https://api.github.com/users/b0o/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b0o/subscriptions","organizations_url":"https://api.github.com/users/b0o/orgs","repos_url":"https://api.github.com/users/b0o/repos","events_url":"https://api.github.com/users/b0o/events{/privacy}","received_events_url":"https://api.github.com/users/b0o/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-06-27T00:12:45Z","updated_at":"2023-10-14T23:09:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"In the `drizzle-kit push:mysql` confirmation step, if you press `escape`, drizzle-kit behaves as if you selected `Yes, I want to execute all statements`.\r\n\r\n```\r\n> drizzle-kit push:mysql\r\n\r\ndrizzle-kit: v0.19.2\r\ndrizzle-orm: v0.27.0\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file 'drizzle.config.ts'\r\nReading schema files:\r\nfoo.ts\r\nbar.ts\r\nbaz.ts\r\n\r\n\r\n Warning  You are about to execute current statements:\r\n\r\nALTER TABLE `foo` MODIFY COLUMN `created_at` timestamp NOT NULL DEFAULT (now());\r\n... etc ...\r\n\r\n‚ùØ No, abort\r\n  Yes, I want to execute all statements\r\n>>> (I pressed escape right here) <<<\r\n[‚úì] Changes applied\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/104/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/104/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/103","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/103/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/103/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/103/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/103","id":1773768795,"node_id":"I_kwDOHoY85M5puZBb","number":103,"title":"drizzle-kit push:mysql needs connection strings to support `sslaccept` to connect to PlanetScale","user":{"login":"jamesandersonwalsh","id":8390638,"node_id":"MDQ6VXNlcjgzOTA2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8390638?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesandersonwalsh","html_url":"https://github.com/jamesandersonwalsh","followers_url":"https://api.github.com/users/jamesandersonwalsh/followers","following_url":"https://api.github.com/users/jamesandersonwalsh/following{/other_user}","gists_url":"https://api.github.com/users/jamesandersonwalsh/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesandersonwalsh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesandersonwalsh/subscriptions","organizations_url":"https://api.github.com/users/jamesandersonwalsh/orgs","repos_url":"https://api.github.com/users/jamesandersonwalsh/repos","events_url":"https://api.github.com/users/jamesandersonwalsh/events{/privacy}","received_events_url":"https://api.github.com/users/jamesandersonwalsh/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-06-26T03:30:48Z","updated_at":"2023-07-02T21:55:16Z","closed_at":"2023-07-02T21:55:16Z","author_association":"NONE","active_lock_reason":null,"body":"## Context\r\n- I'm trying to push schema changes to PlanetScale using `drizzle-kit push:mysql` using the connection string PlanetScale generated for me. \r\n- _*I'll note that the connection string from PlanetScale ends with `?sslaccept=strict`*_\r\n\r\nMy `drizzle.config.ts` looks like this:\r\n```\r\nimport type { Config } from \"drizzle-kit\";\r\nimport 'dotenv/config'\r\n\r\nexport default {\r\n  schema: './db/schemas/**',\r\n  driver: 'mysql2',\r\n  dbCredentials: {\r\n    connectionString: process.env.DATABASE_URL as string\r\n  }\r\n} satisfies Config;\r\n```\r\n\r\n## Problem\r\n- When using the `mysql2` driver, the driver will will ignore this ssl query parameter. \r\n- This is a problem because SSL is required by PlanetScale for proper connection.\r\n- I've listed the output from the npm script below\r\n\r\n## Output\r\n```sh\r\nIgnoring invalid configuration option passed to Connection: sslaccept. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection\r\n~/my-project/node_modules/.pnpm/drizzle-kit@0.19.2/node_modules/drizzle-kit/index.cjs:34259\r\n      const createConnectionErr = new Error();\r\n                                  ^\r\n\r\nError: unknown error: Code: UNAVAILABLE\r\nserver does not allow insecure connections, client must use SSL/TLS\r\n\r\n    at createConnection2 (~/my-project/node_modules/.pnpm/drizzle-kit@0.19.2/node_modules/drizzle-kit/index.cjs:34259:35)\r\n    at connectToMySQL (~/my-project/node_modules/.pnpm/drizzle-kit@0.19.2/node_modules/drizzle-kit/index.cjs:36340:60)\r\n    at Command.<anonymous> (~/my-project/node_modules/.pnpm/drizzle-kit@0.19.2/node_modules/drizzle-kit/index.cjs:51785:28) {\r\n  code: 'ER_UNKNOWN_ERROR',\r\n  errno: 1105,\r\n  sqlState: 'HY000'\r\n}\r\n\r\nNode.js v18.12.1\r\n‚ÄâELIFECYCLE‚Äâ Command failed with exit code 1.\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/103/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/102","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/102/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/102/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/102/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/102","id":1772956518,"node_id":"I_kwDOHoY85M5prStm","number":102,"title":"`drizzle-kit introspect:pg` generates invalid result","user":{"login":"jbl428","id":22140938,"node_id":"MDQ6VXNlcjIyMTQwOTM4","avatar_url":"https://avatars.githubusercontent.com/u/22140938?v=4","gravatar_id":"","url":"https://api.github.com/users/jbl428","html_url":"https://github.com/jbl428","followers_url":"https://api.github.com/users/jbl428/followers","following_url":"https://api.github.com/users/jbl428/following{/other_user}","gists_url":"https://api.github.com/users/jbl428/gists{/gist_id}","starred_url":"https://api.github.com/users/jbl428/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbl428/subscriptions","organizations_url":"https://api.github.com/users/jbl428/orgs","repos_url":"https://api.github.com/users/jbl428/repos","events_url":"https://api.github.com/users/jbl428/events{/privacy}","received_events_url":"https://api.github.com/users/jbl428/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2023-06-24T23:02:27Z","updated_at":"2024-05-21T23:47:37Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"drizzle-kit: v0.19.2\r\ndrizzle-orm: v0.27.0\r\n\r\nHere is postgresql table\r\n\r\n```sql\r\nCREATE TABLE users\r\n(\r\n    id       SERIAL PRIMARY KEY,\r\n    status_a varchar(255) DEFAULT 'ACTIVE':: CHARACTER VARYING NOT NULL,\r\n    status_b varchar      DEFAULT 'ACTIVE':: CHARACTER VARYING NOT NULL\r\n);\r\n\r\n```\r\n\r\nAfter running `drizzle-kit introspect:pg`\r\n\r\n```ts\r\nimport { pgTable, pgEnum, pgSchema, AnyPgColumn, serial, varchar } from \"drizzle-orm/pg-core\"\r\n\r\n\r\nimport { sql } from \"drizzle-orm\"\r\n\r\nexport const users = pgTable(\"users\", {\r\n\tid: serial(\"id\").primaryKey().notNull(),\r\n\tstatusA: varchar(\"status_a\", { length: 255 }).default('ACTIVE'::character varying).notNull(), // invalid\r\n\tstatusB: varchar(\"status_b\").default('ACTIVE').notNull(), // valid\r\n});\r\n```\r\n\r\nIt generates `::character varying` in code if length property of varchar is specified","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/102/reactions","total_count":7,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/102/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/101","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/101/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/101/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/101/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/101","id":1770377945,"node_id":"I_kwDOHoY85M5phdLZ","number":101,"title":"Error [ERR_PACKAGE_PATH_NOT_EXPORTED]","user":{"login":"galacoder","id":13715145,"node_id":"MDQ6VXNlcjEzNzE1MTQ1","avatar_url":"https://avatars.githubusercontent.com/u/13715145?v=4","gravatar_id":"","url":"https://api.github.com/users/galacoder","html_url":"https://github.com/galacoder","followers_url":"https://api.github.com/users/galacoder/followers","following_url":"https://api.github.com/users/galacoder/following{/other_user}","gists_url":"https://api.github.com/users/galacoder/gists{/gist_id}","starred_url":"https://api.github.com/users/galacoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/galacoder/subscriptions","organizations_url":"https://api.github.com/users/galacoder/orgs","repos_url":"https://api.github.com/users/galacoder/repos","events_url":"https://api.github.com/users/galacoder/events{/privacy}","received_events_url":"https://api.github.com/users/galacoder/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-06-22T20:53:08Z","updated_at":"2023-12-10T22:17:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I received an error stating \"can't find module\" as described in #Typescript and ESM not working together. After updating to the latest drizzle-kit, I encountered another error.\r\n\r\nI am using a MacBook Air M1 with 16GB of RAM.\r\n\r\nPlease advise!\r\n\r\n// Error\r\n```\r\n> pnpm drizzle-kit generate:pg\r\n\r\ndrizzle-kit: v0.19.2\r\ndrizzle-orm: v0.27.0\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/Users/galacoder/dev/action/projects/ace/packages/db/drizzle.config.ts'\r\nError [ERR_PACKAGE_PATH_NOT_EXPORTED]: Package subpath './utils' is not defined by \"exports\" in /Users/galacoder/dev/action/projects/ace/node_modules/drizzle-orm/package.json\r\n    at __node_internal_captureLargerStackTrace (node:internal/errors:478:5)\r\n    at new NodeError (node:internal/errors:387:5)\r\n    at throwExportsNotFound (node:internal/modules/esm/resolve:365:9)\r\n    at packageExportsResolve (node:internal/modules/esm/resolve:649:3)\r\n    at resolveExports (node:internal/modules/cjs/loader:554:36)\r\n    at Function.Module._findPath (node:internal/modules/cjs/loader:594:31)\r\n    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:1012:27)\r\n    at Function.Module._load (node:internal/modules/cjs/loader:871:27)\r\n    at Module.require (node:internal/modules/cjs/loader:1098:19)\r\n    at require (node:internal/modules/cjs/helpers:108:18)\r\n    at Object.<anonymous> (/Users/galacoder/dev/action/projects/ace/node_modules/src/index.ts:70:1)\r\n    at Module._compile (node:internal/modules/cjs/loader:1196:14)\r\n    at Module._extensions..js (node:internal/modules/cjs/loader:1250:10)\r\n    at newLoader (/Users/galacoder/dev/action/projects/ace/node_modules/drizzle-kit/index.cjs:8506:13)\r\n    at Object.newLoader (/Users/galacoder/dev/action/projects/ace/node_modules/drizzle-kit/index.cjs:8506:13)\r\n    at Object.extensions..js (/Users/galacoder/dev/action/projects/ace/node_modules/drizzle-kit/index.cjs:11001:28)\r\n    at Module.load (node:internal/modules/cjs/loader:1074:32)\r\n    at Function.Module._load (node:internal/modules/cjs/loader:909:12)\r\n    at Module.require (node:internal/modules/cjs/loader:1098:19)\r\n    at require (node:internal/modules/cjs/helpers:108:18)\r\n    at Object.<anonymous> (/Users/galacoder/dev/action/projects/ace/packages/db/src/activities/schema.ts:23:56)\r\n    at Module._compile (node:internal/modules/cjs/loader:1196:14)\r\n    at Module._compile (/Users/galacoder/dev/action/projects/ace/node_modules/drizzle-kit/index.cjs:8502:30)\r\n    at Module._extensions..js (node:internal/modules/cjs/loader:1250:10)\r\n    at Object.newLoader [as .ts] (/Users/galacoder/dev/action/projects/ace/node_modules/drizzle-kit/index.cjs:8506:13)\r\n    at Module.load (node:internal/modules/cjs/loader:1074:32)\r\n    at Function.Module._load (node:internal/modules/cjs/loader:909:12)\r\n    at Module.require (node:internal/modules/cjs/loader:1098:19)\r\n    at require (node:internal/modules/cjs/helpers:108:18)\r\n    at prepareFromPgImports (/Users/galacoder/dev/action/projects/ace/node_modules/drizzle-kit/index.cjs:11711:20)\r\n    at serializePg (/Users/galacoder/dev/action/projects/ace/node_modules/drizzle-kit/index.cjs:12633:48)\r\n    at async preparePgMigrationSnapshot (/Users/galacoder/dev/action/projects/ace/node_modules/drizzle-kit/index.cjs:12729:26)\r\n    at async prepareAndMigratePg (/Users/galacoder/dev/action/projects/ace/node_modules/drizzle-kit/index.cjs:14110:39)\r\n    at async Command.<anonymous> (/Users/galacoder/dev/action/projects/ace/node_modules/drizzle-kit/index.cjs:51715:3) {\r\n  code: 'ERR_PACKAGE_PATH_NOT_EXPORTED'\r\n}\r\n```\r\n\r\nMy config file\r\n```\r\n\r\nimport * as dotenv from \"dotenv\";\r\n\r\n// import type { Config } from \"drizzle-kit\";\r\n\r\nexport default {\r\n  schema: \"./src/**/schema.ts\",\r\n  out: \"./migration\",\r\n};\r\n\r\n```\r\n\r\nOne of my schema example\r\n\r\n```\r\n/*\r\n * Activity schema\r\n */\r\n\r\nimport { InferModel, relations } from \"drizzle-orm\";\r\nimport {\r\n  boolean,\r\n  foreignKey,\r\n  index,\r\n  integer,\r\n  json,\r\n  pgTable,\r\n  serial,\r\n  text,\r\n  timestamp,\r\n  varchar,\r\n} from \"drizzle-orm/pg-core\";\r\nimport { createInsertSchema, createSelectSchema } from \"drizzle-zod\";\r\n\r\nimport { users } from \"./../users/schema\";\r\n\r\nexport const activities = pgTable(\r\n  \"activities\",\r\n  {\r\n    id: serial(\"id\").primaryKey(),\r\n    _ownerId: varchar(\"owner_id\", { length: 255 })\r\n      .notNull()\r\n      .references(() => users.id),\r\n    _operatorId: text(\"_operator_id\").references(() => users.id),\r\n    operatedBySystem: boolean(\"operatedBySystem\").default(false),\r\n    category: text(\"category\"),\r\n    action: text(\"action\"),\r\n    _target: text(\"_target\"),\r\n    extra: json(\"extra\"),\r\n    createdAt: timestamp(\"createdAt\").defaultNow(),\r\n  },\r\n  (table) => {\r\n    return {\r\n      ownerCategoryIdx: index(\"_owner_id_category_idx\").on(table._ownerId, table.category),\r\n      targetIdx: index(\"_target_idx\").on(table._target),\r\n    };\r\n  },\r\n);\r\n\r\nexport const activitiesRelations = relations(activities, ({ one }) => ({\r\n  owner: one(users, {\r\n    fields: [activities._ownerId],\r\n    references: [users.id],\r\n  }),\r\n  operator: one(users, {\r\n    fields: [activities._operatorId],\r\n    references: [users.id],\r\n  }),\r\n}));\r\n\r\n// Typing for an activity\r\nexport type Activity = InferModel<typeof activities>;\r\nexport type NewActivity = InferModel<typeof activities, \"insert\">;\r\n\r\n// Schema for inserting an activity\r\nconst insertActivitySchema = createInsertSchema(activities);\r\n// Schema for selecting an activity\r\nconst selectActivitySchema = createSelectSchema(activities);\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/101/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/100","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/100/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/100/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/100/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/100","id":1770033029,"node_id":"I_kwDOHoY85M5pgI-F","number":100,"title":"Introspection fails if SQLite database has a `references` without column name","user":{"login":"utkarshkukreti","id":217126,"node_id":"MDQ6VXNlcjIxNzEyNg==","avatar_url":"https://avatars.githubusercontent.com/u/217126?v=4","gravatar_id":"","url":"https://api.github.com/users/utkarshkukreti","html_url":"https://github.com/utkarshkukreti","followers_url":"https://api.github.com/users/utkarshkukreti/followers","following_url":"https://api.github.com/users/utkarshkukreti/following{/other_user}","gists_url":"https://api.github.com/users/utkarshkukreti/gists{/gist_id}","starred_url":"https://api.github.com/users/utkarshkukreti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/utkarshkukreti/subscriptions","organizations_url":"https://api.github.com/users/utkarshkukreti/orgs","repos_url":"https://api.github.com/users/utkarshkukreti/repos","events_url":"https://api.github.com/users/utkarshkukreti/events{/privacy}","received_events_url":"https://api.github.com/users/utkarshkukreti/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-06-22T16:26:30Z","updated_at":"2023-12-19T01:53:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I ran introspection on an existing large SQLite database I had and ran into an error. I finally managed to narrow it down to the fact that the error happens when there is a `references` column constraint with only a table name specified, no column name.\r\n\r\nHere are two databases:\r\n\r\n```\r\n$ sqlite3 a.db .schema\r\nCREATE TABLE users(id integer primary key);\r\nCREATE TABLE posts(user_id integer references users);\r\n$ sqlite3 b.db .schema\r\nCREATE TABLE users(id integer primary key);\r\nCREATE TABLE posts(user_id integer references users(id));\r\n```\r\n\r\nIntrospecting `a.db` fails:\r\n\r\n```\r\n$ pnpm drizzle-kit introspect:sqlite --url a.db --driver better-sqlite\r\ndrizzle-kit: v0.19.2\r\ndrizzle-orm: v0.27.0\r\n\r\n[‚úì] 2 tables fetched\r\n[‚úì] 2 columns fetched\r\n[‚úì] 0 enums fetched\r\n[‚úì] 0 indexes fetched\r\n[‚úì] 1 foreign keys fetched\r\n/private/tmp/foo/node_modules/.pnpm/drizzle-kit@0.19.2/node_modules/drizzle-kit/index.cjs:36446\r\n        return value.camelCase();\r\n                     ^\r\n\r\nTypeError: Cannot read properties of null (reading 'camelCase')\r\n    at withCasing2 (/private/tmp/foo/node_modules/.pnpm/drizzle-kit@0.19.2/node_modules/drizzle-kit/index.cjs:36446:22)\r\n    at /private/tmp/foo/node_modules/.pnpm/drizzle-kit@0.19.2/node_modules/drizzle-kit/index.cjs:36613:18\r\n    at Array.map (<anonymous>)\r\n    at /private/tmp/foo/node_modules/.pnpm/drizzle-kit@0.19.2/node_modules/drizzle-kit/index.cjs:36598:37\r\n    at Array.forEach (<anonymous>)\r\n    at createTableColumns2 (/private/tmp/foo/node_modules/.pnpm/drizzle-kit@0.19.2/node_modules/drizzle-kit/index.cjs:36591:15)\r\n    at /private/tmp/foo/node_modules/.pnpm/drizzle-kit@0.19.2/node_modules/drizzle-kit/index.cjs:36492:22\r\n    at Array.map (<anonymous>)\r\n    at schemaToTypeScript2 (/private/tmp/foo/node_modules/.pnpm/drizzle-kit@0.19.2/node_modules/drizzle-kit/index.cjs:36479:61)\r\n    at sqliteIntrospect (/private/tmp/foo/node_modules/.pnpm/drizzle-kit@0.19.2/node_modules/drizzle-kit/index.cjs:45305:18)\r\n\r\nNode.js v18.4.0\r\n```\r\n\r\nwhile doing the same on `b.db` succeeds:\r\n\r\n```\r\n$ pnpm drizzle-kit introspect:sqlite --url b.db --driver better-sqlite\r\ndrizzle-kit: v0.19.2\r\ndrizzle-orm: v0.27.0\r\n\r\n[‚úì] 2 tables fetched\r\n[‚úì] 2 columns fetched\r\n[‚úì] 0 enums fetched\r\n[‚úì] 0 indexes fetched\r\n[‚úì] 1 foreign keys fetched\r\n\r\n[‚úì] Your SQL migration file ‚ûú drizzle/0000_motionless_leech.sql üöÄ\r\n[‚úì] You schema file is ready ‚ûú drizzle/schema.ts üöÄ\r\n```\r\n\r\nI think the expected behavior is that if there is no column name, then the referenced column is the primary key column of that table.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/100/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/100/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/99","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/99/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/99/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/99/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/99","id":1768416334,"node_id":"I_kwDOHoY85M5pZ-RO","number":99,"title":"Getting Error Executing the Command push:pg","user":{"login":"ShashankSirmour","id":47277747,"node_id":"MDQ6VXNlcjQ3Mjc3NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/47277747?v=4","gravatar_id":"","url":"https://api.github.com/users/ShashankSirmour","html_url":"https://github.com/ShashankSirmour","followers_url":"https://api.github.com/users/ShashankSirmour/followers","following_url":"https://api.github.com/users/ShashankSirmour/following{/other_user}","gists_url":"https://api.github.com/users/ShashankSirmour/gists{/gist_id}","starred_url":"https://api.github.com/users/ShashankSirmour/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShashankSirmour/subscriptions","organizations_url":"https://api.github.com/users/ShashankSirmour/orgs","repos_url":"https://api.github.com/users/ShashankSirmour/repos","events_url":"https://api.github.com/users/ShashankSirmour/events{/privacy}","received_events_url":"https://api.github.com/users/ShashankSirmour/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-06-21T20:23:59Z","updated_at":"2023-09-20T03:01:15Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Drizzle-kit: v0.19.2\r\nfor the remote database using supabase\r\n\r\nAttempting to execute the command `drizzle-kit push:pg`,\r\nbut encountering an error:\r\n\r\nError: Unknown command 'push:pg'.\r\n(Did you mean `drizzle-kit up:pg`?)\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/99/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/99/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/98","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/98/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/98/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/98/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/98","id":1767544967,"node_id":"I_kwDOHoY85M5pWpiH","number":98,"title":"Prisma Studio alternative?","user":{"login":"PhilippMolitor","id":68352974,"node_id":"MDQ6VXNlcjY4MzUyOTc0","avatar_url":"https://avatars.githubusercontent.com/u/68352974?v=4","gravatar_id":"","url":"https://api.github.com/users/PhilippMolitor","html_url":"https://github.com/PhilippMolitor","followers_url":"https://api.github.com/users/PhilippMolitor/followers","following_url":"https://api.github.com/users/PhilippMolitor/following{/other_user}","gists_url":"https://api.github.com/users/PhilippMolitor/gists{/gist_id}","starred_url":"https://api.github.com/users/PhilippMolitor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PhilippMolitor/subscriptions","organizations_url":"https://api.github.com/users/PhilippMolitor/orgs","repos_url":"https://api.github.com/users/PhilippMolitor/repos","events_url":"https://api.github.com/users/PhilippMolitor/events{/privacy}","received_events_url":"https://api.github.com/users/PhilippMolitor/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-06-21T12:55:03Z","updated_at":"2023-07-12T17:01:23Z","closed_at":"2023-07-12T16:48:12Z","author_association":"NONE","active_lock_reason":null,"body":"One thing I really dig with Prisma is their integrated Database web interface tool. This way I don't have to download an SQL tool to each of my dev workstations, there is no need to know about which database dialect I am using, and i can instantly click and select relational types.\r\n\r\nAre there any plans on adding something like Prisma Studio to drizzle-kit (or a dedicated package)? I think this would round off the developer experience even more.\r\n\r\nThanks for your hard work so far with drizzle-orm and drizzle-kit!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/98/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/98/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/97","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/97/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/97/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/97/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/97","id":1766664345,"node_id":"I_kwDOHoY85M5pTSiZ","number":97,"title":"Config type for mysql","user":{"login":"jeremiedubuis","id":2609337,"node_id":"MDQ6VXNlcjI2MDkzMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2609337?v=4","gravatar_id":"","url":"https://api.github.com/users/jeremiedubuis","html_url":"https://github.com/jeremiedubuis","followers_url":"https://api.github.com/users/jeremiedubuis/followers","following_url":"https://api.github.com/users/jeremiedubuis/following{/other_user}","gists_url":"https://api.github.com/users/jeremiedubuis/gists{/gist_id}","starred_url":"https://api.github.com/users/jeremiedubuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeremiedubuis/subscriptions","organizations_url":"https://api.github.com/users/jeremiedubuis/orgs","repos_url":"https://api.github.com/users/jeremiedubuis/repos","events_url":"https://api.github.com/users/jeremiedubuis/events{/privacy}","received_events_url":"https://api.github.com/users/jeremiedubuis/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-06-21T04:39:46Z","updated_at":"2023-06-21T15:20:05Z","closed_at":"2023-06-21T15:20:05Z","author_association":"NONE","active_lock_reason":null,"body":"Hi, first of all thanks for the great work on drizzle-orm and drizzle-kit.\r\nI think I have spotted an error int he Config type exported for drizzle-kit.\r\n\r\nUsing a drizzle.config.ts file on mysql21 project and seeing the following type:\r\n```typescript\r\nexport type Config = {\r\n    out?: string | undefined;\r\n    breakpoints?: boolean | undefined;\r\n    tablesFilter?: string | string[] | undefined;\r\n    schema?: string | string[];\r\n    verbose?: boolean | undefined;\r\n    strict?: boolean | undefined;\r\n} & {\r\n    introspect?: {\r\n        casing: \"camel\" | \"preserve\";\r\n    };\r\n} & ({\r\n    driver: \"turso\";\r\n    dbCredentials: {\r\n        url: string;\r\n        authToken?: string;\r\n    };\r\n} | {\r\n    driver: \"better-sqlite\";\r\n    dbCredentials: {\r\n        url: string;\r\n    };\r\n} | {\r\n    driver: \"libsql\";\r\n    dbCredentials: {\r\n        url: string;\r\n    };\r\n} | {\r\n    driver: \"pg\";\r\n    dbCredentials: {\r\n        host: string;\r\n        port?: number;\r\n        user?: string;\r\n        password?: string;\r\n        database: string;\r\n        ssl?: boolean;\r\n    };\r\n} | {\r\n    driver: \"pg\";\r\n    dbCredentials: {\r\n        connectionString: string;\r\n    };\r\n} | {\r\n    driver: \"mysql2\";\r\n    dbCredentials: {\r\n        host: string;\r\n        port?: number;\r\n        user?: string;\r\n        password?: string;\r\n        database: string;\r\n        connectionString: string;\r\n    };\r\n} | {\r\n    driver: \"mysql2\";\r\n    dbCredentials: {\r\n        connectionString: string;\r\n    };\r\n} | {});\r\n```\r\n\r\nFor the mysql2 driver:\r\n```typescript\r\n{\r\n    driver: \"mysql2\";\r\n    dbCredentials: {\r\n        host: string;\r\n        port?: number;\r\n        user?: string;\r\n        password?: string;\r\n        database: string;\r\n        connectionString: string;\r\n    };\r\n} | {\r\n    driver: \"mysql2\";\r\n    dbCredentials: {\r\n        connectionString: string;\r\n    };\r\n}\r\n```\r\n\r\nIt seems to me the connectionString should not  be present for the first type.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/97/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/97/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/96","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/96/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/96/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/96/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/96","id":1766200402,"node_id":"I_kwDOHoY85M5pRhRS","number":96,"title":"FeatureRequest | Exclude index.ts file when using schema folder","user":{"login":"ShashankSirmour","id":47277747,"node_id":"MDQ6VXNlcjQ3Mjc3NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/47277747?v=4","gravatar_id":"","url":"https://api.github.com/users/ShashankSirmour","html_url":"https://github.com/ShashankSirmour","followers_url":"https://api.github.com/users/ShashankSirmour/followers","following_url":"https://api.github.com/users/ShashankSirmour/following{/other_user}","gists_url":"https://api.github.com/users/ShashankSirmour/gists{/gist_id}","starred_url":"https://api.github.com/users/ShashankSirmour/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShashankSirmour/subscriptions","organizations_url":"https://api.github.com/users/ShashankSirmour/orgs","repos_url":"https://api.github.com/users/ShashankSirmour/repos","events_url":"https://api.github.com/users/ShashankSirmour/events{/privacy}","received_events_url":"https://api.github.com/users/ShashankSirmour/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-06-20T21:17:22Z","updated_at":"2023-06-23T06:42:30Z","closed_at":"2023-06-23T06:42:30Z","author_association":"NONE","active_lock_reason":null,"body":"is there any way to exclude/ ignore files nonrelated to the schema but placed inside the schema?\r\n\r\nI created a schema folder and inside that, I created files but to export schema from one file I keep an index.ts file inside schema but when I am using drizzle-kit with this configuration it gives the error ` code: 'ERR_MODULE_NOT_FOUND'`\r\n\r\nplease add a way to exclude or ignore nonrelated files after using \"schema/*\" in drizzle.config.ts","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/96/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/96/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/95","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/95/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/95/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/95/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/95","id":1765384708,"node_id":"I_kwDOHoY85M5pOaIE","number":95,"title":"Unable to run old versions of drizzle-kit","user":{"login":"iainsproat","id":68657,"node_id":"MDQ6VXNlcjY4NjU3","avatar_url":"https://avatars.githubusercontent.com/u/68657?v=4","gravatar_id":"","url":"https://api.github.com/users/iainsproat","html_url":"https://github.com/iainsproat","followers_url":"https://api.github.com/users/iainsproat/followers","following_url":"https://api.github.com/users/iainsproat/following{/other_user}","gists_url":"https://api.github.com/users/iainsproat/gists{/gist_id}","starred_url":"https://api.github.com/users/iainsproat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iainsproat/subscriptions","organizations_url":"https://api.github.com/users/iainsproat/orgs","repos_url":"https://api.github.com/users/iainsproat/repos","events_url":"https://api.github.com/users/iainsproat/events{/privacy}","received_events_url":"https://api.github.com/users/iainsproat/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2023-06-20T13:11:57Z","updated_at":"2023-06-21T15:20:11Z","closed_at":"2023-06-21T15:20:10Z","author_association":"NONE","active_lock_reason":null,"body":"Since the release of `v0.19.0`, I've been unable to use `v0.18.1` of drizzle-kit. The output of running any command is as follows:\r\n\r\n```\r\ndrizzle-kit: v0.18.1\r\ndrizzle-orm: v0.27.0\r\n\r\nThis version of drizzle-kit is outdated\r\nPlease update drizzle-kit package to the latest version üëç\r\n```\r\n\r\nI expect not to be forced to upgrade, a reminder and gentle nudge is fine but blocking all functionality is not ok.\r\n\r\nI need repeatability and need to pin the version of the tools used to generate artefacts. I need them to work long after new versions have been released. This is required for audit-ability and for maintenance of legacy branches.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/95/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/95/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/94","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/94/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/94/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/94/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/94","id":1764409250,"node_id":"I_kwDOHoY85M5pKr-i","number":94,"title":"ERR_MODULE_NOT_FOUND esbuild","user":{"login":"XMadFoX","id":37180406,"node_id":"MDQ6VXNlcjM3MTgwNDA2","avatar_url":"https://avatars.githubusercontent.com/u/37180406?v=4","gravatar_id":"","url":"https://api.github.com/users/XMadFoX","html_url":"https://github.com/XMadFoX","followers_url":"https://api.github.com/users/XMadFoX/followers","following_url":"https://api.github.com/users/XMadFoX/following{/other_user}","gists_url":"https://api.github.com/users/XMadFoX/gists{/gist_id}","starred_url":"https://api.github.com/users/XMadFoX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XMadFoX/subscriptions","organizations_url":"https://api.github.com/users/XMadFoX/orgs","repos_url":"https://api.github.com/users/XMadFoX/repos","events_url":"https://api.github.com/users/XMadFoX/events{/privacy}","received_events_url":"https://api.github.com/users/XMadFoX/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2023-06-20T00:33:59Z","updated_at":"2023-06-21T15:20:16Z","closed_at":"2023-06-21T15:20:15Z","author_association":"NONE","active_lock_reason":null,"body":"Hi, when upgrading from 0.18 to 0.19 I get this error when executing any drizzle kit command:\r\n```\r\ndrizzle-kit push:sqlite\r\n\r\nnode:internal/process/esm_loader:97\r\n    internalBinding('errors').triggerUncaughtException(\r\n                              ^\r\n\r\nError [ERR_MODULE_NOT_FOUND]: Cannot find package '/path/to/project/node_modules/drizzle-kit/node_modules/esbuild/' imported from /path/to/project/node_modules/drizzle-kit/loader.mjs\r\nDid you mean to import esbuild/lib/main.js?\r\n    at new NodeError (node:internal/errors:399:5)\r\n    at legacyMainResolve (node:internal/modules/esm/resolve:235:9)\r\n    at packageResolve (node:internal/modules/esm/resolve:876:14)\r\n    at moduleResolve (node:internal/modules/esm/resolve:938:20)\r\n    at defaultResolve (node:internal/modules/esm/resolve:1153:11)\r\n    at nextResolve (node:internal/modules/esm/loader:163:28)\r\n    at ESMLoader.resolve (node:internal/modules/esm/loader:838:30)\r\n    at ESMLoader.getModuleJob (node:internal/modules/esm/loader:424:18)\r\n    at ModuleWrap.<anonymous> (node:internal/modules/esm/module_job:77:40)\r\n    at link (node:internal/modules/esm/module_job:76:36) {\r\n  code: 'ERR_MODULE_NOT_FOUND'\r\n}\r\n```\r\n<details>\r\n<summary>System, version details</summary>\r\nOS: Linux 6.3\r\nCPU: x64\r\nNode: 18.16.0 \r\nnpm: 9.5.1 \r\ndrizzle-orm: 0.27.0\r\ndrizzle-kit: 0.19.1\r\n\r\n</details>\r\n\r\nSomething similar discussed [here](https://github.com/drizzle-team/drizzle-kit-mirror/issues/55#issuecomment-1597338432)\r\nI also tried `@win` version [0.19.2-b928697](https://www.npmjs.com/package/drizzle-kit/v/0.19.2-b928697) and got:\r\n```\r\n/usr/bin/env: ‚Äònode --loader @esbuild-kit/esm-loader --loader drizzle-kit/loader.mjs --no-warnings‚Äô: No such file or directory\r\n/usr/bin/env: use -[v]S to pass options in shebang lines\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/94/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/94/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/93","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/93/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/93/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/93/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/93","id":1763791745,"node_id":"I_kwDOHoY85M5pIVOB","number":93,"title":"After updating to 0.19.x the drizzle-kit command is not running anymore","user":{"login":"makuko","id":10809263,"node_id":"MDQ6VXNlcjEwODA5MjYz","avatar_url":"https://avatars.githubusercontent.com/u/10809263?v=4","gravatar_id":"","url":"https://api.github.com/users/makuko","html_url":"https://github.com/makuko","followers_url":"https://api.github.com/users/makuko/followers","following_url":"https://api.github.com/users/makuko/following{/other_user}","gists_url":"https://api.github.com/users/makuko/gists{/gist_id}","starred_url":"https://api.github.com/users/makuko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/makuko/subscriptions","organizations_url":"https://api.github.com/users/makuko/orgs","repos_url":"https://api.github.com/users/makuko/repos","events_url":"https://api.github.com/users/makuko/events{/privacy}","received_events_url":"https://api.github.com/users/makuko/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2023-06-19T15:43:00Z","updated_at":"2023-06-21T15:20:20Z","closed_at":"2023-06-21T15:20:20Z","author_association":"NONE","active_lock_reason":null,"body":"After I updated from v0.18.1 the command is not working anymore. It looks like the problem is coming from the latest version including a loader. When I look at the generated commands in `node_modules/.bin` I find this file:\r\n\r\n``` cmd\r\n@ECHO off\r\nGOTO start\r\n:find_dp0\r\nSET dp0=%~dp0\r\nEXIT /b\r\n:start\r\nSETLOCAL\r\nCALL :find_dp0\r\n\r\nIF EXIST \"%dp0%\\-S.exe\" (\r\n  SET \"_prog=%dp0%\\-S.exe\"\r\n) ELSE (\r\n  SET \"_prog=-S\"\r\n  SET PATHEXT=%PATHEXT:;.JS;=;%\r\n)\r\n\r\nendLocal & goto #_undefined_# 2>NUL || title %COMSPEC% & \"%_prog%\" node --loader drizzle-kit/loader.mjs --no-warnings \"%dp0%\\..\\drizzle-kit\\index.cjs\" %*\r\n```\r\n\r\nNotice that the command that will be executed is `-S.exe` which obviously cannot be found. The command should be `node.exe`. After changing it manually I can run drizzle-kit but run into another error in `loader.mjs`:\r\n\r\n`TypeError [ERR_INVALID_RETURN_PROPERTY_VALUE]: Expected a URL string to be returned for the \"url\" from the \"drizzle-kit/loader.mjs 'resolve'\" function but got instance of String.`\r\n\r\nThis might be a Windows only issue.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/93/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/93/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/92","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/92/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/92/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/92/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/92","id":1763785169,"node_id":"I_kwDOHoY85M5pITnR","number":92,"title":"[BUG] unable to execute drizzle-kit cli after upgrade","user":{"login":"woodybriggs","id":15181066,"node_id":"MDQ6VXNlcjE1MTgxMDY2","avatar_url":"https://avatars.githubusercontent.com/u/15181066?v=4","gravatar_id":"","url":"https://api.github.com/users/woodybriggs","html_url":"https://github.com/woodybriggs","followers_url":"https://api.github.com/users/woodybriggs/followers","following_url":"https://api.github.com/users/woodybriggs/following{/other_user}","gists_url":"https://api.github.com/users/woodybriggs/gists{/gist_id}","starred_url":"https://api.github.com/users/woodybriggs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/woodybriggs/subscriptions","organizations_url":"https://api.github.com/users/woodybriggs/orgs","repos_url":"https://api.github.com/users/woodybriggs/repos","events_url":"https://api.github.com/users/woodybriggs/events{/privacy}","received_events_url":"https://api.github.com/users/woodybriggs/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2023-06-19T15:38:27Z","updated_at":"2023-06-21T15:20:26Z","closed_at":"2023-06-21T15:20:26Z","author_association":"NONE","active_lock_reason":null,"body":"```\r\ndrizzle-kit introspect:mysql\r\n\r\n[redacted]/node_modules/.bin/drizzle-kit: line 16: exec: -S: invalid option\r\nexec: usage: exec [-cl] [-a name] file [redirection ...]\r\n\r\n```\r\n\r\nAfter upgrading to 0.19.1 I am no longer to execute the drizzle-kit cli. \r\n\r\nPackage Manager: pnpm\r\nOS: Mac OS 13.0.1\r\nProcessor Type: Apple Silicon M1\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/92/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/92/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/91","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/91/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/91/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/91/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/91","id":1763349502,"node_id":"I_kwDOHoY85M5pGpP-","number":91,"title":"Adding a \"Not null\" column with default value, still causes data loss.","user":{"login":"MendyLanda","id":54242706,"node_id":"MDQ6VXNlcjU0MjQyNzA2","avatar_url":"https://avatars.githubusercontent.com/u/54242706?v=4","gravatar_id":"","url":"https://api.github.com/users/MendyLanda","html_url":"https://github.com/MendyLanda","followers_url":"https://api.github.com/users/MendyLanda/followers","following_url":"https://api.github.com/users/MendyLanda/following{/other_user}","gists_url":"https://api.github.com/users/MendyLanda/gists{/gist_id}","starred_url":"https://api.github.com/users/MendyLanda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MendyLanda/subscriptions","organizations_url":"https://api.github.com/users/MendyLanda/orgs","repos_url":"https://api.github.com/users/MendyLanda/repos","events_url":"https://api.github.com/users/MendyLanda/events{/privacy}","received_events_url":"https://api.github.com/users/MendyLanda/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2023-06-19T11:34:36Z","updated_at":"2023-07-28T12:27:30Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Adding this:\r\n<img width=\"614\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/54242706/14682af8-f937-4f05-85a5-8a57f197ba9a\">\r\nCauses this:\r\n<img width=\"795\" alt=\"image\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/54242706/21e93098-5086-494d-b0b2-929b02b33f41\">\r\n\r\nAlthough I'm not proficient with the workings of MySQL, I'm aware that in PostgreSQL, such operations are not expected to result in any data loss.\r\n\r\n- drizzle-kit: `v0.19.1`\r\n- drizzle-orm: `v0.27.0`\r\n- db: `PlanetScale`","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/91/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/91/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/90","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/90/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/90/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/90/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/90","id":1762831703,"node_id":"I_kwDOHoY85M5pEq1X","number":90,"title":"drizzle-kit introspect imports AnyMySqlColumn without `type`","user":{"login":"205g0","id":74575852,"node_id":"MDQ6VXNlcjc0NTc1ODUy","avatar_url":"https://avatars.githubusercontent.com/u/74575852?v=4","gravatar_id":"","url":"https://api.github.com/users/205g0","html_url":"https://github.com/205g0","followers_url":"https://api.github.com/users/205g0/followers","following_url":"https://api.github.com/users/205g0/following{/other_user}","gists_url":"https://api.github.com/users/205g0/gists{/gist_id}","starred_url":"https://api.github.com/users/205g0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/205g0/subscriptions","organizations_url":"https://api.github.com/users/205g0/orgs","repos_url":"https://api.github.com/users/205g0/repos","events_url":"https://api.github.com/users/205g0/events{/privacy}","received_events_url":"https://api.github.com/users/205g0/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-06-19T06:21:09Z","updated_at":"2023-06-19T06:21:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"pretty much the title and tsserver shows these errors:\r\n\r\n'AnyMySqlColumn' is declared but its value is never read.ts(6133)\r\n'AnyMySqlColumn' is a type and must be imported using a type-only import when 'preserveValueImports' and 'isolatedModules' are both enabled.ts(1444)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/90/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/90/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/89","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/89/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/89/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/89/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/89","id":1762504740,"node_id":"I_kwDOHoY85M5pDbAk","number":89,"title":"Drizzle-Kit Using Next as client","user":{"login":"jlong5795","id":57104675,"node_id":"MDQ6VXNlcjU3MTA0Njc1","avatar_url":"https://avatars.githubusercontent.com/u/57104675?v=4","gravatar_id":"","url":"https://api.github.com/users/jlong5795","html_url":"https://github.com/jlong5795","followers_url":"https://api.github.com/users/jlong5795/followers","following_url":"https://api.github.com/users/jlong5795/following{/other_user}","gists_url":"https://api.github.com/users/jlong5795/gists{/gist_id}","starred_url":"https://api.github.com/users/jlong5795/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlong5795/subscriptions","organizations_url":"https://api.github.com/users/jlong5795/orgs","repos_url":"https://api.github.com/users/jlong5795/repos","events_url":"https://api.github.com/users/jlong5795/events{/privacy}","received_events_url":"https://api.github.com/users/jlong5795/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-06-18T23:19:51Z","updated_at":"2023-06-20T00:23:29Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm trying to set up my database and I'm getting validation errors about my environment variables. It seems that when I try to push the db drizzle-kit is using my environment variables as though they were being used in the browser. Since I don't want my db connection string in the bundle I am looking for a work-around that won't expose my credentials in the browser.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/89/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/89/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/88","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/88/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/88/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/88/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/88","id":1762377329,"node_id":"I_kwDOHoY85M5pC75x","number":88,"title":"Push:mysql Unrecognized Command","user":{"login":"jlong5795","id":57104675,"node_id":"MDQ6VXNlcjU3MTA0Njc1","avatar_url":"https://avatars.githubusercontent.com/u/57104675?v=4","gravatar_id":"","url":"https://api.github.com/users/jlong5795","html_url":"https://github.com/jlong5795","followers_url":"https://api.github.com/users/jlong5795/followers","following_url":"https://api.github.com/users/jlong5795/following{/other_user}","gists_url":"https://api.github.com/users/jlong5795/gists{/gist_id}","starred_url":"https://api.github.com/users/jlong5795/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlong5795/subscriptions","organizations_url":"https://api.github.com/users/jlong5795/orgs","repos_url":"https://api.github.com/users/jlong5795/repos","events_url":"https://api.github.com/users/jlong5795/events{/privacy}","received_events_url":"https://api.github.com/users/jlong5795/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2023-06-18T16:57:21Z","updated_at":"2023-06-19T10:18:23Z","closed_at":"2023-06-18T19:13:21Z","author_association":"NONE","active_lock_reason":null,"body":"When trying to do an initial push I get the following error:\r\n```bash\r\nnpm run db:push\r\n\r\n> docdb-next@0.1.0 db:push\r\n> drizzle-kit push:mysql --config ./drizzle.config.ts\r\n\r\n'\"-S\"' is not recognized as an internal or external command,\r\noperable program or batch file.\r\n```\r\n\r\nI've tried to clean install drizzle-kit but no change. Including my drizzle.config.ts. Application is NextJS (t3 scaffold) and PlanetScale is the DB.\r\n\r\n```js\r\nexport default {\r\n    schema: \"./src/server/db/schema.ts\",\r\n    connectionString: process.env.DATABASE_CONNECTION_STRING as string,\r\n    out: \"./src/server/db/generated\",\r\n};\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/88/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/88/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/87","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/87/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/87/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/87/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/87","id":1762022154,"node_id":"I_kwDOHoY85M5pBlMK","number":87,"title":"[REQUEST] Allow absolute paths when specifying schema/out paths in config","user":{"login":"Sandy-Garrido","id":33653854,"node_id":"MDQ6VXNlcjMzNjUzODU0","avatar_url":"https://avatars.githubusercontent.com/u/33653854?v=4","gravatar_id":"","url":"https://api.github.com/users/Sandy-Garrido","html_url":"https://github.com/Sandy-Garrido","followers_url":"https://api.github.com/users/Sandy-Garrido/followers","following_url":"https://api.github.com/users/Sandy-Garrido/following{/other_user}","gists_url":"https://api.github.com/users/Sandy-Garrido/gists{/gist_id}","starred_url":"https://api.github.com/users/Sandy-Garrido/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sandy-Garrido/subscriptions","organizations_url":"https://api.github.com/users/Sandy-Garrido/orgs","repos_url":"https://api.github.com/users/Sandy-Garrido/repos","events_url":"https://api.github.com/users/Sandy-Garrido/events{/privacy}","received_events_url":"https://api.github.com/users/Sandy-Garrido/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-06-17T22:48:12Z","updated_at":"2023-06-18T10:16:06Z","closed_at":"2023-06-18T10:15:03Z","author_association":"NONE","active_lock_reason":null,"body":"### Request Context\r\nHi there, I recently ran into an issue when setting my schema and out paths in cofig. I noticed that it automatically just prepends my path with `./` meaning that any absolute path I provide will be incorrect.\r\n\r\nMy request is fairly simple. Could we check if the given path starts with `/` before prepending it with `./`? \r\n\r\nI'd add it myself but, not open source :P \r\n\r\n### Example config\r\n\r\n```Typescript\r\nimport type { Config } from \"drizzle-kit\";\r\nimport path from \"path\";\r\n\r\nexport default {\r\n\tschema: path.join(__dirname, \"schema.ts\"),\r\n\tout: path.join(__dirname, \"migrations\"),\r\n} satisfies Config;\r\n```\r\n\r\n### Observed Error\r\n\r\n```bash\r\n(22:26:13)root@wsl:/workspaces/my-app$ yarn db:generate\r\ndrizzle-kit: v0.18.1\r\ndrizzle-orm: v0.26.5\r\n\r\nReading config file '/workspaces/my-app/app/database/drizzle.config.ts'\r\nError: ENOENT: no such file or directory, open './/workspaces/my-app/app/database/migrations/meta/0000_snapshot.json'\r\n    at Object.openSync (node:fs:601:3)\r\n    at readFileSync (node:fs:469:35)\r\n    at snapshots.reduce.malformed (/workspaces/my-app/node_modules/drizzle-kit/index.js:27412:62)\r\n    at Array.reduce (<anonymous>)\r\n    at validateWithReport (/workspaces/my-app/node_modules/drizzle-kit/index.js:27409:32)\r\n    at prepareMigrationFolder (/workspaces/my-app/node_modules/drizzle-kit/index.js:27452:22)\r\n    at prepareAndMigrateMySql (/workspaces/my-app/node_modules/drizzle-kit/index.js:23904:40)\r\n    at Command2.<anonymous> (/workspaces/my-app/node_modules/drizzle-kit/index.js:51221:9)\r\n    at Command2.listener [as _actionHandler] (/workspaces/my-app/node_modules/drizzle-kit/index.js:832:21)\r\n    at /workspaces/my-app/node_modules/drizzle-kit/index.js:1251:69 {\r\n  errno: -2,\r\n  syscall: 'open',\r\n  code: 'ENOENT',\r\n  path: './/workspaces/my-app/app/database/migrations/meta/0000_snapshot.json'\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/87/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/87/timeline","performed_via_github_app":null,"state_reason":"not_planned"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/86","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/86/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/86/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/86/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/86","id":1761912883,"node_id":"I_kwDOHoY85M5pBKgz","number":86,"title":"New config seems to be incompatible with MySQL","user":{"login":"TiltedToast","id":57221600,"node_id":"MDQ6VXNlcjU3MjIxNjAw","avatar_url":"https://avatars.githubusercontent.com/u/57221600?v=4","gravatar_id":"","url":"https://api.github.com/users/TiltedToast","html_url":"https://github.com/TiltedToast","followers_url":"https://api.github.com/users/TiltedToast/followers","following_url":"https://api.github.com/users/TiltedToast/following{/other_user}","gists_url":"https://api.github.com/users/TiltedToast/gists{/gist_id}","starred_url":"https://api.github.com/users/TiltedToast/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TiltedToast/subscriptions","organizations_url":"https://api.github.com/users/TiltedToast/orgs","repos_url":"https://api.github.com/users/TiltedToast/repos","events_url":"https://api.github.com/users/TiltedToast/events{/privacy}","received_events_url":"https://api.github.com/users/TiltedToast/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-06-17T16:24:42Z","updated_at":"2023-06-21T15:20:32Z","closed_at":"2023-06-21T15:20:32Z","author_association":"NONE","active_lock_reason":null,"body":"I followed the \"guide\" to update my drizzle config file for 0.19 but it seems to not be very happy with something so it just fails every time.\r\n\r\nHere's the new config\r\n\r\n```ts\r\nimport \"dotenv/config\";\r\nimport { Config } from \"drizzle-kit\";\r\n\r\nexport default {\r\n    schema: \"./src/db/models/*.ts\",\r\n    breakpoints: true,\r\n    dbCredentials: {\r\n        connectionString: process.env.PLANETSCALE_URL,\r\n    },\r\n} satisfies Config;\r\n```\r\n\r\nI did try to specify the driver but that changes nothing, neither does playing around with the credentials part of the config. \r\n\r\nHere's the error it throws \r\n\r\n```bash\r\n> drizzle-kit push:mysql --config ./src/db/drizzle.config.ts\r\n\r\ndrizzle-kit: v0.19.1\r\ndrizzle-orm: v0.27.0\r\n\r\nReading config file 'E:\\coding-projects\\hifumi-js\\src\\db\\drizzle.config.ts'\r\nnode:internal/errors:490\r\n    ErrorCaptureStackTrace(err);\r\n    ^\r\n\r\nTypeError [ERR_INVALID_RETURN_PROPERTY_VALUE]: Expected a url string to be returned for the \"url\" from the \"drizzle-kit/loader.mjs 'resolve'\" function but got instance of String.\r\n    at new NodeError (node:internal/errors:399:5)\r\n    at ESMLoader.resolve (node:internal/modules/esm/loader:882:15)\r\n    at async ESMLoader.getModuleJob (node:internal/modules/esm/loader:424:7) {\r\n  code: 'ERR_INVALID_RETURN_PROPERTY_VALUE'\r\n}\r\n\r\nNode.js v18.16.0\r\n```\r\n\r\nI did some more testing and the same thing happens when I try to do anything that involves the config above.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/86/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/86/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/85","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/85/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/85/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/85/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/85","id":1761680279,"node_id":"PR_kwDOHoY85M5TPzIm","number":85,"title":"Update readme.md","user":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-06-17T06:54:48Z","updated_at":"2023-06-17T06:58:20Z","closed_at":"2023-06-17T06:58:19Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/85","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/85","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/85.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/85.patch","merged_at":"2023-06-17T06:58:19Z"},"body":null,"reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/85/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/85/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/84","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/84/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/84/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/84/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/84","id":1758015378,"node_id":"I_kwDOHoY85M5oyS-S","number":84,"title":"Option to generate migration file without foreign key statements.","user":{"login":"namdien177","id":29449869,"node_id":"MDQ6VXNlcjI5NDQ5ODY5","avatar_url":"https://avatars.githubusercontent.com/u/29449869?v=4","gravatar_id":"","url":"https://api.github.com/users/namdien177","html_url":"https://github.com/namdien177","followers_url":"https://api.github.com/users/namdien177/followers","following_url":"https://api.github.com/users/namdien177/following{/other_user}","gists_url":"https://api.github.com/users/namdien177/gists{/gist_id}","starred_url":"https://api.github.com/users/namdien177/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namdien177/subscriptions","organizations_url":"https://api.github.com/users/namdien177/orgs","repos_url":"https://api.github.com/users/namdien177/repos","events_url":"https://api.github.com/users/namdien177/events{/privacy}","received_events_url":"https://api.github.com/users/namdien177/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-06-15T04:32:13Z","updated_at":"2023-10-05T13:19:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Currently, the `drizzle-kit generate:<type>` command will always generate foreign key statements if we use `relations`, which will make us have to remove them manually afterward.\r\n\r\nThe reasons why we should have this option are:\r\n- Some database providers (like PlanetScale) don't allow the table to have foreign keys (for many reasons).\r\n- We don't want FKs, yet still want to use all the features related to relational queries or have a clear relationship described in the schema.\r\n\r\nSuggestion options: `--no-foreign-key`, `--no-fk`","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/84/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/84/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/83","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/83/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/83/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/83/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/83","id":1757143277,"node_id":"I_kwDOHoY85M5ou-Dt","number":83,"title":"drizzle-kit introspect:pg is not generating relations ","user":{"login":"akarabach","id":12261380,"node_id":"MDQ6VXNlcjEyMjYxMzgw","avatar_url":"https://avatars.githubusercontent.com/u/12261380?v=4","gravatar_id":"","url":"https://api.github.com/users/akarabach","html_url":"https://github.com/akarabach","followers_url":"https://api.github.com/users/akarabach/followers","following_url":"https://api.github.com/users/akarabach/following{/other_user}","gists_url":"https://api.github.com/users/akarabach/gists{/gist_id}","starred_url":"https://api.github.com/users/akarabach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akarabach/subscriptions","organizations_url":"https://api.github.com/users/akarabach/orgs","repos_url":"https://api.github.com/users/akarabach/repos","events_url":"https://api.github.com/users/akarabach/events{/privacy}","received_events_url":"https://api.github.com/users/akarabach/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2023-06-14T15:16:40Z","updated_at":"2024-03-16T22:43:26Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Run `drizzle-kit introspect:pg` on existing db. There are a lot of ` one to many` and `many to many` relations. drizzle-kit has generated foreign keys but I don't see any relations created automatically. Is it possible to generate it using the tool or we have to do it manually ? ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/83/reactions","total_count":8,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":8},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/83/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/82","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/82/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/82/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/82/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/82","id":1755384494,"node_id":"I_kwDOHoY85M5ooQqu","number":82,"title":"[BUG]: introspect:pg schema error","user":{"login":"alexgev","id":22056338,"node_id":"MDQ6VXNlcjIyMDU2MzM4","avatar_url":"https://avatars.githubusercontent.com/u/22056338?v=4","gravatar_id":"","url":"https://api.github.com/users/alexgev","html_url":"https://github.com/alexgev","followers_url":"https://api.github.com/users/alexgev/followers","following_url":"https://api.github.com/users/alexgev/following{/other_user}","gists_url":"https://api.github.com/users/alexgev/gists{/gist_id}","starred_url":"https://api.github.com/users/alexgev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexgev/subscriptions","organizations_url":"https://api.github.com/users/alexgev/orgs","repos_url":"https://api.github.com/users/alexgev/repos","events_url":"https://api.github.com/users/alexgev/events{/privacy}","received_events_url":"https://api.github.com/users/alexgev/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-06-13T17:47:26Z","updated_at":"2023-06-13T17:59:58Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"What version of drizzle-orm are you using?\r\n0.26.5\r\n\r\nWhat version of drizzle-kit are you using?\r\n0.18.1\r\n\r\nDescribe the Bug\r\nAfter running `drizzle-kit introspect:pg` i have an error in `schema.ts` for postgres column with `character varying[]` type without fixed length\r\n\r\nit generate this code\r\n```\r\nexport const tableName = pgTable(\"tableName\", {\r\n\t// ...\r\n\tarrayField: varchar(\"arrayField\", { length:  }).array(),\r\n\t// ...\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\t//...\r\n\t}\r\n});\r\n```\r\nwith length property without value, so i need to fix varchar() options manually in schema.ts\r\n\r\nExpected behavior\r\n```\r\nexport const tableName = pgTable(\"tableName\", {\r\n\t// ...\r\n\tarrayField: varchar(\"arrayField\").array(),\r\n\t// ...\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\t//...\r\n\t}\r\n});\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/82/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/82/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/81","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/81/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/81/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/81/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/81","id":1752438267,"node_id":"I_kwDOHoY85M5odBX7","number":81,"title":"Allow absolute path to migration output directory","user":{"login":"namdien177","id":29449869,"node_id":"MDQ6VXNlcjI5NDQ5ODY5","avatar_url":"https://avatars.githubusercontent.com/u/29449869?v=4","gravatar_id":"","url":"https://api.github.com/users/namdien177","html_url":"https://github.com/namdien177","followers_url":"https://api.github.com/users/namdien177/followers","following_url":"https://api.github.com/users/namdien177/following{/other_user}","gists_url":"https://api.github.com/users/namdien177/gists{/gist_id}","starred_url":"https://api.github.com/users/namdien177/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namdien177/subscriptions","organizations_url":"https://api.github.com/users/namdien177/orgs","repos_url":"https://api.github.com/users/namdien177/repos","events_url":"https://api.github.com/users/namdien177/events{/privacy}","received_events_url":"https://api.github.com/users/namdien177/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-06-12T10:37:18Z","updated_at":"2024-04-08T13:21:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm working on a project containing many custom CLI tooling to trigger different CLI commands from different libraries. To have the most reliable file path to execute, we will normally use absolute paths for all configs.\r\n\r\nWith that said, Drizzle-ORM Kit is currently auto-adding a relative prefix path (`./`) to the config path without checking whether it is absolute or not when using `drizzle-kit generate:mysql` command. We can have a workaround to modify our custom CLI to handle this library specifically but it would be best to have the kit to handle it automatically.\r\n\r\nAnother reason is, the same absolute path in the migrate function (provided by `drizzle-orm/<provider>/migrator`) will work perfectly fine. It's better to have this behavior consistent.\r\n\r\nThe idea can be: checking if the path provided is a valid \"absolute\" path, or will add the prefix afterward.\r\n\r\nBelow is the current behavior.\r\n\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/29449869/9c9d1d3a-5be8-4cd2-b0e3-eea70078326c)\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/81/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/81/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/80","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/80/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/80/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/80/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/80","id":1751315657,"node_id":"I_kwDOHoY85M5oYvTJ","number":80,"title":"Postgres Enums not double quoted when used","user":{"login":"tomsjansons","id":1428917,"node_id":"MDQ6VXNlcjE0Mjg5MTc=","avatar_url":"https://avatars.githubusercontent.com/u/1428917?v=4","gravatar_id":"","url":"https://api.github.com/users/tomsjansons","html_url":"https://github.com/tomsjansons","followers_url":"https://api.github.com/users/tomsjansons/followers","following_url":"https://api.github.com/users/tomsjansons/following{/other_user}","gists_url":"https://api.github.com/users/tomsjansons/gists{/gist_id}","starred_url":"https://api.github.com/users/tomsjansons/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomsjansons/subscriptions","organizations_url":"https://api.github.com/users/tomsjansons/orgs","repos_url":"https://api.github.com/users/tomsjansons/repos","events_url":"https://api.github.com/users/tomsjansons/events{/privacy}","received_events_url":"https://api.github.com/users/tomsjansons/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2023-06-11T08:17:33Z","updated_at":"2023-06-17T07:09:50Z","closed_at":"2023-06-17T07:09:50Z","author_association":"NONE","active_lock_reason":null,"body":"When using a postgres enum in table, the type is not double quoted creating a problem for enum names that contain upper case letters.\r\n\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/1428917/3004dff9-2e3e-4d25-98c4-e7ed713cc32b)\r\n\r\nAfter running `drizzle-kit generate:pg`, the resulting migration has not double quoted `somePgEnum` in the table field\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/1428917/72941a7f-5546-48e0-880d-942654cd8545)\r\n\r\nrepro example https://stackblitz.com/edit/drizzle-postgres-enum?file=index.ts","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/80/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/80/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/79","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/79/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/79/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/79/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/79","id":1738808500,"node_id":"I_kwDOHoY85M5npBy0","number":79,"title":"How to run custom SQL in migration?","user":{"login":"bestickley","id":35735118,"node_id":"MDQ6VXNlcjM1NzM1MTE4","avatar_url":"https://avatars.githubusercontent.com/u/35735118?v=4","gravatar_id":"","url":"https://api.github.com/users/bestickley","html_url":"https://github.com/bestickley","followers_url":"https://api.github.com/users/bestickley/followers","following_url":"https://api.github.com/users/bestickley/following{/other_user}","gists_url":"https://api.github.com/users/bestickley/gists{/gist_id}","starred_url":"https://api.github.com/users/bestickley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bestickley/subscriptions","organizations_url":"https://api.github.com/users/bestickley/orgs","repos_url":"https://api.github.com/users/bestickley/repos","events_url":"https://api.github.com/users/bestickley/events{/privacy}","received_events_url":"https://api.github.com/users/bestickley/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-06-02T20:46:04Z","updated_at":"2023-06-05T14:48:53Z","closed_at":"2023-06-05T14:48:53Z","author_association":"NONE","active_lock_reason":null,"body":"Hi, I want to create a user in my PostgreSQL DB within a drizzle migration. Is this possible? Is there a way to run custom SQL within a migration?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/79/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/79/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/78","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/78/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/78/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/78/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/78","id":1737451778,"node_id":"I_kwDOHoY85M5nj2kC","number":78,"title":"PG Schema Missing from Constraint / Index Updates; Index + Constraint Order backwards","user":{"login":"twonil-jordan-stout","id":128093442,"node_id":"U_kgDOB6KNAg","avatar_url":"https://avatars.githubusercontent.com/u/128093442?v=4","gravatar_id":"","url":"https://api.github.com/users/twonil-jordan-stout","html_url":"https://github.com/twonil-jordan-stout","followers_url":"https://api.github.com/users/twonil-jordan-stout/followers","following_url":"https://api.github.com/users/twonil-jordan-stout/following{/other_user}","gists_url":"https://api.github.com/users/twonil-jordan-stout/gists{/gist_id}","starred_url":"https://api.github.com/users/twonil-jordan-stout/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twonil-jordan-stout/subscriptions","organizations_url":"https://api.github.com/users/twonil-jordan-stout/orgs","repos_url":"https://api.github.com/users/twonil-jordan-stout/repos","events_url":"https://api.github.com/users/twonil-jordan-stout/events{/privacy}","received_events_url":"https://api.github.com/users/twonil-jordan-stout/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-06-02T04:42:11Z","updated_at":"2023-06-02T04:52:42Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```sql\r\nDO $$ BEGIN\r\n ALTER TABLE \"audits\" ADD CONSTRAINT \"category_key_fk\" FOREIGN KEY (\"audit_event_category_key\") REFERENCES \"audit_event_categories\"(\"audit_event_category_key\") ON DELETE no action ON UPDATE cascade;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n\r\nCREATE UNIQUE INDEX IF NOT EXISTS \"some_field_idx\" ON \"some_table\" (\"some_field\");\r\nCREATE INDEX IF NOT EXISTS \"is_active_idx\" ON \"users\" (\"is_active\");\r\n```\r\n\r\nSecondly, unique index creation should happen before the addition of constraints for the migrations to pass.\r\n\r\nLast thing I want to note is that FK names can get REALLY long and throw notices in pg:\r\n\r\n`NOTICE:  identifier \"some_really_long_index_goes_here_and_i_get_a_notice_for_it_blah_blah_wtf_fk\" will be truncated to \"some_really_long_index_goes_here_and_i_get_a_notice_for_it\"`\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/78/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/78/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/77","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/77/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/77/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/77/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/77","id":1736924999,"node_id":"I_kwDOHoY85M5nh19H","number":77,"title":"Can not do initial push to Planetscale.","user":{"login":"dakamojo","id":1965416,"node_id":"MDQ6VXNlcjE5NjU0MTY=","avatar_url":"https://avatars.githubusercontent.com/u/1965416?v=4","gravatar_id":"","url":"https://api.github.com/users/dakamojo","html_url":"https://github.com/dakamojo","followers_url":"https://api.github.com/users/dakamojo/followers","following_url":"https://api.github.com/users/dakamojo/following{/other_user}","gists_url":"https://api.github.com/users/dakamojo/gists{/gist_id}","starred_url":"https://api.github.com/users/dakamojo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakamojo/subscriptions","organizations_url":"https://api.github.com/users/dakamojo/orgs","repos_url":"https://api.github.com/users/dakamojo/repos","events_url":"https://api.github.com/users/dakamojo/events{/privacy}","received_events_url":"https://api.github.com/users/dakamojo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-06-01T19:10:54Z","updated_at":"2023-06-02T14:25:54Z","closed_at":"2023-06-02T14:25:53Z","author_association":"NONE","active_lock_reason":null,"body":"Here is my config ts\r\n\r\n```\r\nimport type {Config} from \"drizzle-kit\";\r\n\r\nexport default {\r\n  connectionString: 'mysql://rgxrevhcpsfx7txn1id9:*****@aws.connect.psdb.cloud/akamojo_apps?sslaccept={rejectUnauthorized:true}',\r\n  out: \"./migrations\",\r\n  schema: \"./lib/schema.ts\",\r\n  breakpoints: false\r\n\r\n} satisfies Config;\r\n```\r\n\r\nMy push script\r\n\r\n```\r\n\"pushdb\": \"drizzle-kit push:mysql\"\r\n```\r\n\r\nWhen I run npm run pushdb I get this\r\n\r\n```\r\ndrizzle-kit: v0.18.1\r\ndrizzle-orm: v0.26.3\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/Users/darrelldavis/Development/react/sudoku/drizzle.config.ts'\r\nIgnoring invalid configuration option passed to Connection: sslaccept. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection\r\nError: unknown error: Code: UNAVAILABLE\r\nserver does not allow insecure connections, client must use SSL/TLS\r\n\r\n    at createConnection2 (/Users/darrelldavis/Development/react/sudoku/node_modules/drizzle-kit/index.js:43763:35)\r\n    at connectToMySQL (/Users/darrelldavis/Development/react/sudoku/node_modules/drizzle-kit/index.js:45553:60)\r\n    at Command2.<anonymous> (/Users/darrelldavis/Development/react/sudoku/node_modules/drizzle-kit/index.js:51266:28)\r\n    at Command2.listener [as _actionHandler] (/Users/darrelldavis/Development/react/sudoku/node_modules/drizzle-kit/index.js:832:21)\r\n    at /Users/darrelldavis/Development/react/sudoku/node_modules/drizzle-kit/index.js:1251:69\r\n    at Command2._chainOrCall (/Users/darrelldavis/Development/react/sudoku/node_modules/drizzle-kit/index.js:1183:16)\r\n    at Command2._parseCommand (/Users/darrelldavis/Development/react/sudoku/node_modules/drizzle-kit/index.js:1251:31)\r\n    at /Users/darrelldavis/Development/react/sudoku/node_modules/drizzle-kit/index.js:1120:31\r\n    at Command2._chainOrCall (/Users/darrelldavis/Development/react/sudoku/node_modules/drizzle-kit/index.js:1183:16)\r\n    at Command2._dispatchSubcommand (/Users/darrelldavis/Development/react/sudoku/node_modules/drizzle-kit/index.js:1116:27) {\r\n  code: 'ER_UNKNOWN_ERROR',\r\n  errno: 1105,\r\n  sqlState: 'HY000'\r\n}\r\n\r\nNode.js v17.0.1\r\n```\r\n\r\nIt seems sslaccept is not expected.  I tried removing the sslaccept.  I no longer get the message about an unknown parameter, but I do still get the error that the client must use SSL/TLS.\r\n\r\nIs this a problem with my MySQL2 driver?  Should this driver even be used with Planetscale?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/77/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/77/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/76","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/76/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/76/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/76/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/76","id":1735498209,"node_id":"I_kwDOHoY85M5ncZnh","number":76,"title":"Invalid input from drizzle config","user":{"login":"rkreddy99","id":49095575,"node_id":"MDQ6VXNlcjQ5MDk1NTc1","avatar_url":"https://avatars.githubusercontent.com/u/49095575?v=4","gravatar_id":"","url":"https://api.github.com/users/rkreddy99","html_url":"https://github.com/rkreddy99","followers_url":"https://api.github.com/users/rkreddy99/followers","following_url":"https://api.github.com/users/rkreddy99/following{/other_user}","gists_url":"https://api.github.com/users/rkreddy99/gists{/gist_id}","starred_url":"https://api.github.com/users/rkreddy99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rkreddy99/subscriptions","organizations_url":"https://api.github.com/users/rkreddy99/orgs","repos_url":"https://api.github.com/users/rkreddy99/repos","events_url":"https://api.github.com/users/rkreddy99/events{/privacy}","received_events_url":"https://api.github.com/users/rkreddy99/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-06-01T05:33:29Z","updated_at":"2023-06-05T13:55:32Z","closed_at":"2023-06-05T13:55:32Z","author_association":"NONE","active_lock_reason":null,"body":"I am trying to introspect from postgres db using pg dialect in nodejs\r\n\r\nCommand : `npx drizzle-kit introspect:pg --config=drizzle.config.ts`\r\n\r\nand the drizzle config file contains\r\n```typescript\r\nimport type { Config } from \"drizzle-kit\";\r\n \r\nexport default {\r\n  schema: \"./src/schema.ts\",\r\n  out: \"./drizzle\",\r\n  connectionString: process.env.DATABASE_URL\r\n} satisfies Config;\r\n```\r\n\r\nWhen I run the introspect command I am getting the log\r\n```\r\ndrizzle-kit: v0.18.1\r\ndrizzle-orm: v0.26.3\r\n\r\nReading config file '<dir>\\drizzle.config.ts'\r\nInvalid input\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/76/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/76/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/75","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/75/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/75/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/75/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/75","id":1735321147,"node_id":"I_kwDOHoY85M5nbuY7","number":75,"title":"column xxx cannot be cast automatically to type timestamp without time zone","user":{"login":"warflash","id":22006082,"node_id":"MDQ6VXNlcjIyMDA2MDgy","avatar_url":"https://avatars.githubusercontent.com/u/22006082?v=4","gravatar_id":"","url":"https://api.github.com/users/warflash","html_url":"https://github.com/warflash","followers_url":"https://api.github.com/users/warflash/followers","following_url":"https://api.github.com/users/warflash/following{/other_user}","gists_url":"https://api.github.com/users/warflash/gists{/gist_id}","starred_url":"https://api.github.com/users/warflash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/warflash/subscriptions","organizations_url":"https://api.github.com/users/warflash/orgs","repos_url":"https://api.github.com/users/warflash/repos","events_url":"https://api.github.com/users/warflash/events{/privacy}","received_events_url":"https://api.github.com/users/warflash/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-06-01T02:28:30Z","updated_at":"2023-06-01T02:28:30Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I recon this happens quite often but I didn't find a mention of this error in the discord nor the issues here so figured I'd just ask.\r\nWhen running into a situation like that where kit generates invalid migration code is it safe to manually update the generated migrations? In this case the previous type was a string which pg can't cast to a timestamp.\r\n> ALTER TABLE \"yy\" ALTER COLUMN \"xx\" SET DATA TYPE timestamp;\r\n\r\nJust want to make sure manual actions don't collide with kit internals in the future ‚ò∫\r\n\r\nThank you!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/75/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/75/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/74","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/74/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/74/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/74/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/74","id":1735211953,"node_id":"I_kwDOHoY85M5nbTux","number":74,"title":"`drizzle-kit push:mysql` failing on Planetscale","user":{"login":"skeswa","id":790574,"node_id":"MDQ6VXNlcjc5MDU3NA==","avatar_url":"https://avatars.githubusercontent.com/u/790574?v=4","gravatar_id":"","url":"https://api.github.com/users/skeswa","html_url":"https://github.com/skeswa","followers_url":"https://api.github.com/users/skeswa/followers","following_url":"https://api.github.com/users/skeswa/following{/other_user}","gists_url":"https://api.github.com/users/skeswa/gists{/gist_id}","starred_url":"https://api.github.com/users/skeswa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skeswa/subscriptions","organizations_url":"https://api.github.com/users/skeswa/orgs","repos_url":"https://api.github.com/users/skeswa/repos","events_url":"https://api.github.com/users/skeswa/events{/privacy}","received_events_url":"https://api.github.com/users/skeswa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2023-06-01T00:14:08Z","updated_at":"2023-06-17T07:05:43Z","closed_at":"2023-06-17T07:05:43Z","author_association":"NONE","active_lock_reason":null,"body":"Hey folks,\r\n\r\nThanks for the awesome library! Unfortunately, my team is facing an issue with `drizzle-kit push:mysql`.\r\n```\r\n> chortle@0.1.0 db:migration:push\r\n> npx drizzle-kit push:mysql --config=drizzle.config.ts\r\n\r\ndrizzle-kit: v0.18.1\r\ndrizzle-orm: v0.26.1\r\n\r\nReading config file '/Users/redacted/repos/redacted/chortle/drizzle.config.ts'\r\n/Users/redacted/repos/redacted/chortle/node_modules/drizzle-kit/index.js:43643\r\n        const localErr = new Error();\r\n                         ^\r\n\r\nError: target: chortle.-.primary: vttablet: rpc error: code = InvalidArgument desc = missing bind var __vtschemaname (CallerID: czib4smsrxy4yudt19n5)\r\n    at PromiseConnection.execute (/Users/redacted/repos/redacted/chortle/node_modules/drizzle-kit/index.js:43643:26)\r\n    at fromDatabase (/Users/redacted/repos/redacted/chortle/node_modules/drizzle-kit/index.js:21453:32)\r\n    at mysqlPushIntrospect (/Users/redacted/repos/redacted/chortle/node_modules/drizzle-kit/index.js:45601:25)\r\n    at Command2.<anonymous> (/Users/redacted/repos/redacted/chortle/node_modules/drizzle-kit/index.js:51269:37)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {\r\n  code: 'ER_UNKNOWN_ERROR',\r\n  errno: 1105,\r\n  sql: 'select * from information_schema.columns\\n' +\r\n    \"\\twhere table_schema = '' and table_name != '__drizzle_migrations'\\n\" +\r\n    '\\torder by table_name, ordinal_position;',\r\n  sqlState: 'HY000',\r\n  sqlMessage: 'target: chortle.-.primary: vttablet: rpc error: code = InvalidArgument desc = missing bind var __vtschemaname (CallerID: redacted)'\r\n}\r\n```\r\n\r\nThe repo itself is quite new and has very little in it, you can checkout the state that churned out this error here: https://github.com/khanyakeswa/chortle/tree/64fc3c15b429c0af91beeff2e4d1c5c2a439a713\r\n\r\nI ended up climbing in and debugging this a bit, and it looks like the issue is here:\r\n```\r\n    const columns = await db.execute(`select * from information_schema.columns\r\n\twhere table_schema = '${inputSchema}' and table_name != '__drizzle_migrations'\r\n\torder by table_name, ordinal_position;`);\r\n```\r\n\r\nPlanetscale MySQL is fine with the `table_schema` column, but it seems to have no idea what I'm talking about with `table_name`. Take a look at this (fooling around in the mysql CLI):\r\n\r\n```\r\nchortle/dev> select (table_schema) from information_schema.columns limit 1;\r\n+--------------+\r\n| TABLE_SCHEMA |\r\n+--------------+\r\n| mysql        |\r\n+--------------+\r\nchortle/dev> select (table_schema, table_name) from information_schema.columns limit 1;\r\nERROR 1241 (21000): target: chortle.-.primary: vttablet: rpc error: code = FailedPrecondition desc = Operand should contain 1 column(s) (errno 1241) (sqlstate 21000) (CallerID: planetscale-admin): Sql: \"select (table_schema, table_name) from information_schema.`columns` limit :vtg1\", BindVars: {REDACTED}\r\n```\r\n\r\nAny hunches on why `push:mysql` might be failing? It wouldn't surprise me if I configured something wrong, lol.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/74/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/74/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/73","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/73/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/73/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/73/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/73","id":1734454904,"node_id":"I_kwDOHoY85M5nYa54","number":73,"title":"command not found: drizzle-kit","user":{"login":"sillvva","id":5138384,"node_id":"MDQ6VXNlcjUxMzgzODQ=","avatar_url":"https://avatars.githubusercontent.com/u/5138384?v=4","gravatar_id":"","url":"https://api.github.com/users/sillvva","html_url":"https://github.com/sillvva","followers_url":"https://api.github.com/users/sillvva/followers","following_url":"https://api.github.com/users/sillvva/following{/other_user}","gists_url":"https://api.github.com/users/sillvva/gists{/gist_id}","starred_url":"https://api.github.com/users/sillvva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sillvva/subscriptions","organizations_url":"https://api.github.com/users/sillvva/orgs","repos_url":"https://api.github.com/users/sillvva/repos","events_url":"https://api.github.com/users/sillvva/events{/privacy}","received_events_url":"https://api.github.com/users/sillvva/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-05-31T15:09:57Z","updated_at":"2023-05-31T15:46:40Z","closed_at":"2023-05-31T15:46:40Z","author_association":"NONE","active_lock_reason":null,"body":"I am using pnpm and have installed drizzle-orm as a dependency and drizzle-kit as a dev dependency. I used the commands in the documentation:\r\n\r\n```\r\npnpm add drizzle-orm @planetscale/database\r\npnpm add -D drizzle-kit\r\n```\r\n\r\nWhen I use the command `drizzle-kit introspect:mysql` it gives the error:\r\n\r\n```\r\ncommand not found: drizzle-kit\r\n```\r\n\r\nWhen I use the command `pnpm dlx drizzle-kit introspect:mysql` it gives the error:\r\n\r\n```\r\nplease install required packages: 'drizzle-orm'\r\n```\r\n\r\nHere is my package.json\r\n\r\n```json\r\n{\r\n\t...\r\n\t\"dependencies\": {\r\n\t\t...\r\n\t\t\"drizzle-orm\": \"^0.26.3\",\r\n\t\t...\r\n\t},\r\n\t\"devDependencies\": {\r\n\t\t...\r\n\t\t\"drizzle-kit\": \"^0.18.1\",\r\n\t\t...\r\n\t}\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/73/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/73/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/72","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/72/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/72/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/72/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/72","id":1734421970,"node_id":"I_kwDOHoY85M5nYS3S","number":72,"title":"is there any way to tell introspection to keep snake_cased column names?","user":{"login":"capaj","id":1305378,"node_id":"MDQ6VXNlcjEzMDUzNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1305378?v=4","gravatar_id":"","url":"https://api.github.com/users/capaj","html_url":"https://github.com/capaj","followers_url":"https://api.github.com/users/capaj/followers","following_url":"https://api.github.com/users/capaj/following{/other_user}","gists_url":"https://api.github.com/users/capaj/gists{/gist_id}","starred_url":"https://api.github.com/users/capaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/capaj/subscriptions","organizations_url":"https://api.github.com/users/capaj/orgs","repos_url":"https://api.github.com/users/capaj/repos","events_url":"https://api.github.com/users/capaj/events{/privacy}","received_events_url":"https://api.github.com/users/capaj/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-05-31T14:56:41Z","updated_at":"2023-06-17T07:06:15Z","closed_at":"2023-06-17T07:06:15Z","author_association":"NONE","active_lock_reason":null,"body":"currently this code is generated:\r\n```\r\n    createdAt: timestamp('created_at', {\r\n      precision: 6,\r\n      withTimezone: true,\r\n      mode: 'string'\r\n    })\r\n      .defaultNow()\r\n      .notNull(),\r\n    updatedAt: timestamp('updated_at', {\r\n      precision: 6,\r\n      withTimezone: true,\r\n      mode: 'string'\r\n    }),\r\n    isDeleted: boolean('is_deleted')\r\n```\r\n\r\nI would rather prefer to keep the naming 1:1, is this possible?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/72/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/72/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/71","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/71/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/71/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/71/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/71","id":1734357857,"node_id":"I_kwDOHoY85M5nYDNh","number":71,"title":"all indexes have all the columns doubled","user":{"login":"capaj","id":1305378,"node_id":"MDQ6VXNlcjEzMDUzNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1305378?v=4","gravatar_id":"","url":"https://api.github.com/users/capaj","html_url":"https://github.com/capaj","followers_url":"https://api.github.com/users/capaj/followers","following_url":"https://api.github.com/users/capaj/following{/other_user}","gists_url":"https://api.github.com/users/capaj/gists{/gist_id}","starred_url":"https://api.github.com/users/capaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/capaj/subscriptions","organizations_url":"https://api.github.com/users/capaj/orgs","repos_url":"https://api.github.com/users/capaj/repos","events_url":"https://api.github.com/users/capaj/events{/privacy}","received_events_url":"https://api.github.com/users/capaj/received_events","type":"User","site_admin":false},"labels":[{"id":5615843751,"node_id":"LA_kwDOHoY85M8AAAABTrr5pw","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/can't%20reproduce","name":"can't reproduce","color":"8FA94D","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-31T14:26:14Z","updated_at":"2023-06-16T13:35:25Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I have introspected my schema and all of my indexes have been generated with duplicated columns.\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/1305378/6bcac659-883c-4fb7-b1c4-098caa98ea99)\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/1305378/795a064e-038d-401a-98d1-491a34e1643f)\r\n\r\nthis was my output:\r\n\r\n```\r\n\r\ndrizzle-kit: v0.18.1\r\ndrizzle-orm: v0.26.3\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/home/capaj/work-repos/official/official-graphql2/graphql/drizzle.config.ts'\r\n[‚úì] 101  tables fetched\r\n[‚úì] 1891 columns fetched\r\n[‚úì] 22   enums fetched\r\n[‚úì] 224  indexes fetched\r\n[‚úì] 682  foreign keys fetched\r\n\r\n[‚úì] Your SQL migration file ‚ûú drizzle/0000_blushing_sabra.sql üöÄ\r\n[‚úì] You schema file is ready ‚ûú drizzle/schema.ts üöÄ\r\n\r\n````","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/71/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/71/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/70","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/70/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/70/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/70/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/70","id":1731945592,"node_id":"I_kwDOHoY85M5nO2R4","number":70,"title":"tablesFilter not working with introspect:pg","user":{"login":"ak5","id":3480383,"node_id":"MDQ6VXNlcjM0ODAzODM=","avatar_url":"https://avatars.githubusercontent.com/u/3480383?v=4","gravatar_id":"","url":"https://api.github.com/users/ak5","html_url":"https://github.com/ak5","followers_url":"https://api.github.com/users/ak5/followers","following_url":"https://api.github.com/users/ak5/following{/other_user}","gists_url":"https://api.github.com/users/ak5/gists{/gist_id}","starred_url":"https://api.github.com/users/ak5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ak5/subscriptions","organizations_url":"https://api.github.com/users/ak5/orgs","repos_url":"https://api.github.com/users/ak5/repos","events_url":"https://api.github.com/users/ak5/events{/privacy}","received_events_url":"https://api.github.com/users/ak5/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-05-30T10:09:44Z","updated_at":"2023-06-17T07:06:28Z","closed_at":"2023-06-17T07:06:28Z","author_association":"NONE","active_lock_reason":null,"body":"I expect to be able to filter out tables I don't want to have type declarations for.\r\n\r\n```\r\nimport type { Config } from 'drizzle-kit';\r\n\r\nconst config = {\r\n        out: './migrations',\r\n        schema: './src/lib/db',\r\n        breakpoints: false,\r\n        tablesFilter: ['unwantedPrefix_*'],\r\n        connectionString: process.env.DATABASE_URL\r\n} satisfies Config;\r\n\r\nexport default config;\r\n```\r\n\r\nThis currently exports all tables when running `drizzle-kit introspect:pg`","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/70/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/70/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/69","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/69/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/69/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/69/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/69","id":1731142499,"node_id":"I_kwDOHoY85M5nLyNj","number":69,"title":"PostgreSQL: generated ALTER TABLE incorrectly adds schema on rename","user":{"login":"RRikor","id":6231663,"node_id":"MDQ6VXNlcjYyMzE2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/6231663?v=4","gravatar_id":"","url":"https://api.github.com/users/RRikor","html_url":"https://github.com/RRikor","followers_url":"https://api.github.com/users/RRikor/followers","following_url":"https://api.github.com/users/RRikor/following{/other_user}","gists_url":"https://api.github.com/users/RRikor/gists{/gist_id}","starred_url":"https://api.github.com/users/RRikor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RRikor/subscriptions","organizations_url":"https://api.github.com/users/RRikor/orgs","repos_url":"https://api.github.com/users/RRikor/repos","events_url":"https://api.github.com/users/RRikor/events{/privacy}","received_events_url":"https://api.github.com/users/RRikor/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-05-29T19:04:08Z","updated_at":"2023-06-17T07:06:38Z","closed_at":"2023-06-17T07:06:37Z","author_association":"NONE","active_lock_reason":null,"body":"Follow up from https://github.com/drizzle-team/drizzle-kit-mirror/issues/40\r\n\r\nA table rename from one migration to the next incorrectly adds the schema name on the renamed table. Although it makes some sense, PostgreSQL does not like it. \r\n\r\nexpected:\r\n```sql\r\nALTER TABLE \"foo\".\"bar\" RENAME TO \"baz\";\r\n```\r\n\r\ngenerated:\r\n```sql\r\nALTER TABLE \"foo\".\"bar\" RENAME TO \"foo\".\"baz\";\r\n\r\nERROR:  syntax error at or near \".\"\r\nLINE 1: ...foo\".\"bar\" RENAME TO \"foo\".\"baz...\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/69/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/69/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/68","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/68/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/68/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/68/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/68","id":1729629232,"node_id":"I_kwDOHoY85M5nGAww","number":68,"title":"Use SQL compatible syntax for breakpoints","user":{"login":"machour","id":304450,"node_id":"MDQ6VXNlcjMwNDQ1MA==","avatar_url":"https://avatars.githubusercontent.com/u/304450?v=4","gravatar_id":"","url":"https://api.github.com/users/machour","html_url":"https://github.com/machour","followers_url":"https://api.github.com/users/machour/followers","following_url":"https://api.github.com/users/machour/following{/other_user}","gists_url":"https://api.github.com/users/machour/gists{/gist_id}","starred_url":"https://api.github.com/users/machour/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/machour/subscriptions","organizations_url":"https://api.github.com/users/machour/orgs","repos_url":"https://api.github.com/users/machour/repos","events_url":"https://api.github.com/users/machour/events{/privacy}","received_events_url":"https://api.github.com/users/machour/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2023-05-28T19:23:44Z","updated_at":"2023-05-28T19:42:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"This is affecting `MySQL` migrations.\r\n\r\nInstead of generating \r\n\r\n```mysql\r\n--> statement-breakpoint\r\n```\r\n\r\ncould this be generated instead ?\r\n\r\n```mysql\r\n-- > statement-breakpoint\r\n```\r\n\r\nin order to keep the generated migration file SQL compatible? (`mysql db < drizzle/funky_name.sql`)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/68/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/68/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/67","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/67/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/67/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/67/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/67","id":1725896455,"node_id":"I_kwDOHoY85M5m3xcH","number":67,"title":"Error while pushing changes","user":{"login":"MartelliEnrico","id":2421387,"node_id":"MDQ6VXNlcjI0MjEzODc=","avatar_url":"https://avatars.githubusercontent.com/u/2421387?v=4","gravatar_id":"","url":"https://api.github.com/users/MartelliEnrico","html_url":"https://github.com/MartelliEnrico","followers_url":"https://api.github.com/users/MartelliEnrico/followers","following_url":"https://api.github.com/users/MartelliEnrico/following{/other_user}","gists_url":"https://api.github.com/users/MartelliEnrico/gists{/gist_id}","starred_url":"https://api.github.com/users/MartelliEnrico/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MartelliEnrico/subscriptions","organizations_url":"https://api.github.com/users/MartelliEnrico/orgs","repos_url":"https://api.github.com/users/MartelliEnrico/repos","events_url":"https://api.github.com/users/MartelliEnrico/events{/privacy}","received_events_url":"https://api.github.com/users/MartelliEnrico/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2023-05-25T14:03:19Z","updated_at":"2024-01-16T07:50:49Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"While executing a push:mysql command, I received this error:\r\n\r\n```\r\nTypeError: Cannot read properties of undefined (reading 'compositePrimaryKeys')\r\n    at ./node_modules/drizzle-kit/index.js:25898:51\r\n    at Array.map (<anonymous>)\r\n    at prepareDeleteCompositePrimaryKeyMySql (./node_modules/drizzle-kit/index.js:25893:33)\r\n    at ./node_modules/drizzle-kit/index.js:26200:33\r\n    at Array.forEach (<anonymous>)\r\n    at applySnapshotsDiff (./node_modules/drizzle-kit/index.js:26160:26)\r\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\r\n    at async prepareSQL (./node_modules/drizzle-kit/index.js:24027:14)\r\n    at async prepareMySQLPush (./node_modules/drizzle-kit/index.js:23886:47)\r\n    at async Command2.<anonymous> (./node_modules/drizzle-kit/index.js:51134:22)\r\n```\r\n\r\nThe deployed schema has a composite primary key, while the new schema that I'm trying to push has a new primary key.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/67/reactions","total_count":7,"+1":7,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/67/timeline","performed_via_github_app":null,"state_reason":"reopened"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/66","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/66/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/66/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/66/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/66","id":1725593421,"node_id":"I_kwDOHoY85M5m2ndN","number":66,"title":"`--out` parameter is required for `introspect` even though docs say it's not","user":{"login":"yannxaver","id":17554280,"node_id":"MDQ6VXNlcjE3NTU0Mjgw","avatar_url":"https://avatars.githubusercontent.com/u/17554280?v=4","gravatar_id":"","url":"https://api.github.com/users/yannxaver","html_url":"https://github.com/yannxaver","followers_url":"https://api.github.com/users/yannxaver/followers","following_url":"https://api.github.com/users/yannxaver/following{/other_user}","gists_url":"https://api.github.com/users/yannxaver/gists{/gist_id}","starred_url":"https://api.github.com/users/yannxaver/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yannxaver/subscriptions","organizations_url":"https://api.github.com/users/yannxaver/orgs","repos_url":"https://api.github.com/users/yannxaver/repos","events_url":"https://api.github.com/users/yannxaver/events{/privacy}","received_events_url":"https://api.github.com/users/yannxaver/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-05-25T11:01:33Z","updated_at":"2023-05-25T20:46:40Z","closed_at":"2023-05-25T20:46:40Z","author_association":"NONE","active_lock_reason":null,"body":"https://orm.drizzle.team/kit-docs/commands#introspect--pull\r\n\r\n```\r\nnpx drizzle-kit introspect:pg --connectionString=foo\r\ndrizzle-kit: v0.18.0\r\ndrizzle-orm: v0.26.1\r\n\r\nMissing required params\r\n```\r\n\r\n```\r\nnpx drizzle-kit introspect:pg --out=migrations/ --connectionString=foo\r\ndrizzle-kit: v0.18.0\r\ndrizzle-orm: v0.26.1\r\n\r\n[‚úì] 5  tables fetched\r\n[‚úì] 31 columns fetched\r\n[‚úì] 0  enums fetched\r\n[‚úì] 1  indexes fetched\r\n[‚úì] 2  foreign keys fetched\r\n\r\n[i] No SQL generated, you already have migrations in project\r\n[‚úì] You schema file is ready ‚ûú migrations/schema.ts üöÄ\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/66/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/66/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/65","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/65/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/65/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/65/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/65","id":1725573816,"node_id":"I_kwDOHoY85M5m2iq4","number":65,"title":"Not picking up primary keys from supabase?","user":{"login":"Emsu","id":477917,"node_id":"MDQ6VXNlcjQ3NzkxNw==","avatar_url":"https://avatars.githubusercontent.com/u/477917?v=4","gravatar_id":"","url":"https://api.github.com/users/Emsu","html_url":"https://github.com/Emsu","followers_url":"https://api.github.com/users/Emsu/followers","following_url":"https://api.github.com/users/Emsu/following{/other_user}","gists_url":"https://api.github.com/users/Emsu/gists{/gist_id}","starred_url":"https://api.github.com/users/Emsu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Emsu/subscriptions","organizations_url":"https://api.github.com/users/Emsu/orgs","repos_url":"https://api.github.com/users/Emsu/repos","events_url":"https://api.github.com/users/Emsu/events{/privacy}","received_events_url":"https://api.github.com/users/Emsu/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-05-25T10:48:49Z","updated_at":"2023-05-25T20:46:27Z","closed_at":"2023-05-25T20:46:27Z","author_association":"NONE","active_lock_reason":null,"body":"Here's a sample table definition of a live table in postgres\r\n```\r\ncreate table\r\n  public.knowledge_bases (\r\n    id bigint generated by default as identity not null,\r\n    created_at timestamp with time zone null default now(),\r\n    name text null,\r\n    org_id text null,\r\n    index_name text null,\r\n    constraint knowledge_bases_pkey primary key (id)\r\n  ) tablespace pg_default;\r\n```\r\nIt's picking up id as an int. But doesn't see the primary key constraint. What can I do to fix this?\r\n\r\nHere's what the `npx drizzle-kit introspect:pg` is generating:\r\n```\r\nexport const knowledgeBases = pgTable(\"knowledge_bases\", {\r\n\t// You can use { mode: \"bigint\" } if numbers are exceeding js number limitations\r\n\tid: bigint(\"id\", { mode: \"number\" }).notNull(),\r\n\tcreatedAt: timestamp(\"created_at\", { withTimezone: true, mode: 'string' }).defaultNow(),\r\n\tname: text(\"name\"),\r\n\torgId: text(\"org_id\"),\r\n\tindexName: text(\"index_name\"),\r\n});\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/65/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/65/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/64","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/64/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/64/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/64/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/64","id":1720963007,"node_id":"I_kwDOHoY85M5mk8-_","number":64,"title":"Postgres - migrating from integer to 'serial' generates incorrect migration","user":{"login":"neiled","id":2861,"node_id":"MDQ6VXNlcjI4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/2861?v=4","gravatar_id":"","url":"https://api.github.com/users/neiled","html_url":"https://github.com/neiled","followers_url":"https://api.github.com/users/neiled/followers","following_url":"https://api.github.com/users/neiled/following{/other_user}","gists_url":"https://api.github.com/users/neiled/gists{/gist_id}","starred_url":"https://api.github.com/users/neiled/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neiled/subscriptions","organizations_url":"https://api.github.com/users/neiled/orgs","repos_url":"https://api.github.com/users/neiled/repos","events_url":"https://api.github.com/users/neiled/events{/privacy}","received_events_url":"https://api.github.com/users/neiled/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-23T01:13:44Z","updated_at":"2023-05-23T01:13:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Steps to reproduce:\r\n- Create schema with table with integer primary key\r\n- Generate migration and run it into database\r\n- Realise you meant to create a serial type instead of integer type so change schema\r\n- Generate migration\r\n\r\nMigration will show and ALTER TABLE trying to change the data type to SERIAL. However, that doesn't exist, it's a shortname that can only be used at table creation. Script would have to create a sequence and assign it as the default value of the column instead.\r\n\r\nSee here for more info:\r\nhttps://stackoverflow.com/a/54189007","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/64/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/64/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/63","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/63/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/63/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/63/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/63","id":1718452363,"node_id":"I_kwDOHoY85M5mbYCL","number":63,"title":"`introspect:pg` ends with `process.exit(1)`","user":{"login":"Pr0gramWizard","id":18315564,"node_id":"MDQ6VXNlcjE4MzE1NTY0","avatar_url":"https://avatars.githubusercontent.com/u/18315564?v=4","gravatar_id":"","url":"https://api.github.com/users/Pr0gramWizard","html_url":"https://github.com/Pr0gramWizard","followers_url":"https://api.github.com/users/Pr0gramWizard/followers","following_url":"https://api.github.com/users/Pr0gramWizard/following{/other_user}","gists_url":"https://api.github.com/users/Pr0gramWizard/gists{/gist_id}","starred_url":"https://api.github.com/users/Pr0gramWizard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pr0gramWizard/subscriptions","organizations_url":"https://api.github.com/users/Pr0gramWizard/orgs","repos_url":"https://api.github.com/users/Pr0gramWizard/repos","events_url":"https://api.github.com/users/Pr0gramWizard/events{/privacy}","received_events_url":"https://api.github.com/users/Pr0gramWizard/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-05-21T10:30:49Z","updated_at":"2023-05-25T20:45:49Z","closed_at":"2023-05-25T20:45:48Z","author_association":"NONE","active_lock_reason":null,"body":"Version: 0.18.0\r\nPlatform: macOS\r\n\r\nRunning `drizzle-kit introspect:pg` causes the process to end with an error.\r\nI dug into the source code and found that `introspect:pg` ends with `process.exit(1)`.\r\n![image](https://github.com/drizzle-team/drizzle-kit-mirror/assets/18315564/f5f17a89-5fe2-4073-a6b5-a78a934a5578)\r\nI assume that this is a bug and not intended.\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/63/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/63/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/62","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/62/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/62/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/62/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/62","id":1718423110,"node_id":"I_kwDOHoY85M5mbQ5G","number":62,"title":"run migration manually via cli","user":{"login":"ibnumusyaffa","id":19760223,"node_id":"MDQ6VXNlcjE5NzYwMjIz","avatar_url":"https://avatars.githubusercontent.com/u/19760223?v=4","gravatar_id":"","url":"https://api.github.com/users/ibnumusyaffa","html_url":"https://github.com/ibnumusyaffa","followers_url":"https://api.github.com/users/ibnumusyaffa/followers","following_url":"https://api.github.com/users/ibnumusyaffa/following{/other_user}","gists_url":"https://api.github.com/users/ibnumusyaffa/gists{/gist_id}","starred_url":"https://api.github.com/users/ibnumusyaffa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ibnumusyaffa/subscriptions","organizations_url":"https://api.github.com/users/ibnumusyaffa/orgs","repos_url":"https://api.github.com/users/ibnumusyaffa/repos","events_url":"https://api.github.com/users/ibnumusyaffa/events{/privacy}","received_events_url":"https://api.github.com/users/ibnumusyaffa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-05-21T08:53:57Z","updated_at":"2024-06-03T12:38:15Z","closed_at":"2024-06-03T12:38:15Z","author_association":"NONE","active_lock_reason":null,"body":"instead of running migration on generated sql with code like this\r\n```ts\r\nimport { drizzle } from \"drizzle-orm/mysql2\";\r\nimport { migrate } from \"drizzle-orm/mysql2/migrator\";\r\nimport { createConnection } from \"mysql2\";\r\n \r\nconst connection = createConnection(\"...\")\r\nconst db = drizzle(connection);\r\n \r\nawait migrate(db, { migrationsFolder: \"drizzle\" });\r\n```\r\n\r\ni think its better to provide option to drizze-kit cli, to run migration generate sql, insted of  `drizzle-kit push:mysql` i prefer something like this\r\n```bash\r\ndrizzle-kit migrate:mysql\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/62/reactions","total_count":16,"+1":13,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":2},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/62/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/61","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/61/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/61/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/61/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/61","id":1718168945,"node_id":"I_kwDOHoY85M5maS1x","number":61,"title":"`introspect:pg` does not have a `--config` option","user":{"login":"remorses","id":31321188,"node_id":"MDQ6VXNlcjMxMzIxMTg4","avatar_url":"https://avatars.githubusercontent.com/u/31321188?v=4","gravatar_id":"","url":"https://api.github.com/users/remorses","html_url":"https://github.com/remorses","followers_url":"https://api.github.com/users/remorses/followers","following_url":"https://api.github.com/users/remorses/following{/other_user}","gists_url":"https://api.github.com/users/remorses/gists{/gist_id}","starred_url":"https://api.github.com/users/remorses/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remorses/subscriptions","organizations_url":"https://api.github.com/users/remorses/orgs","repos_url":"https://api.github.com/users/remorses/repos","events_url":"https://api.github.com/users/remorses/events{/privacy}","received_events_url":"https://api.github.com/users/remorses/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2023-05-20T13:14:36Z","updated_at":"2023-05-25T20:45:54Z","closed_at":"2023-05-25T20:45:54Z","author_association":"NONE","active_lock_reason":null,"body":"Trying to use the config option throws \r\n\r\n```\r\ndrizzle-kit introspect:pg --config=drizzle.config.ts\r\nerror: unknown option '--config=drizzle.config.ts'\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/61/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/61/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/60","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/60/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/60/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/60/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/60","id":1718166329,"node_id":"PR_kwDOHoY85M5Q8Luo","number":60,"title":"Remove check:mysql command from docs, command doesn't exist","user":{"login":"christemple","id":157548,"node_id":"MDQ6VXNlcjE1NzU0OA==","avatar_url":"https://avatars.githubusercontent.com/u/157548?v=4","gravatar_id":"","url":"https://api.github.com/users/christemple","html_url":"https://github.com/christemple","followers_url":"https://api.github.com/users/christemple/followers","following_url":"https://api.github.com/users/christemple/following{/other_user}","gists_url":"https://api.github.com/users/christemple/gists{/gist_id}","starred_url":"https://api.github.com/users/christemple/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christemple/subscriptions","organizations_url":"https://api.github.com/users/christemple/orgs","repos_url":"https://api.github.com/users/christemple/repos","events_url":"https://api.github.com/users/christemple/events{/privacy}","received_events_url":"https://api.github.com/users/christemple/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-20T13:04:02Z","updated_at":"2023-05-20T13:04:02Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/60","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/60","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/60.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/60.patch","merged_at":null},"body":"Noticed that the doc includes a `check:mysql` CLI command that doesn't seem to exist.\r\n\r\nI can't find the drizzle-kit source to be 100% sure it doesn't exist, but the CLI output indicates it doesn't:\r\n```shell\r\nerror: unknown command 'check:mysql'\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/60/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/60/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/59","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/59/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/59/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/59/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/59","id":1717981026,"node_id":"I_kwDOHoY85M5mZk9i","number":59,"title":"[BUG]: push:mysql trying to truncate table with boolean ","user":{"login":"TiltedToast","id":57221600,"node_id":"MDQ6VXNlcjU3MjIxNjAw","avatar_url":"https://avatars.githubusercontent.com/u/57221600?v=4","gravatar_id":"","url":"https://api.github.com/users/TiltedToast","html_url":"https://github.com/TiltedToast","followers_url":"https://api.github.com/users/TiltedToast/followers","following_url":"https://api.github.com/users/TiltedToast/following{/other_user}","gists_url":"https://api.github.com/users/TiltedToast/gists{/gist_id}","starred_url":"https://api.github.com/users/TiltedToast/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TiltedToast/subscriptions","organizations_url":"https://api.github.com/users/TiltedToast/orgs","repos_url":"https://api.github.com/users/TiltedToast/repos","events_url":"https://api.github.com/users/TiltedToast/events{/privacy}","received_events_url":"https://api.github.com/users/TiltedToast/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-05-20T01:48:03Z","updated_at":"2023-05-25T20:46:00Z","closed_at":"2023-05-25T20:46:00Z","author_association":"NONE","active_lock_reason":null,"body":"I've been playing around a bit with the new `push:mysql` command and noticed that it's trying to wipe my table any time i run it because it's supposedly trying to change the type to 'boolean' for some reason.\r\n\r\nHere's the message and corresponding table schema:\r\n\r\n```\r\n¬∑ You're about to change over_18 column type from alter_table_alter_column_set_type to boolean with 108 items\r\n```\r\n\r\n```ts\r\nexport const redditPosts = mysqlTable(\r\n    \"reddit_posts\",\r\n    {\r\n        id: int(\"id\").autoincrement().primaryKey(),\r\n        subreddit: varchar(\"subreddit\", { length: 50 }).notNull(),\r\n        title: varchar(\"title\", { length: 255 }).notNull(),\r\n        url: varchar(\"url\", { length: 255 }).notNull(),\r\n        over_18: boolean(\"over_18\").notNull(),\r\n        permalink: varchar(\"permalink\", { length: 255 }).notNull(),\r\n    },\r\n    (table) => {\r\n        return {\r\n            subredditIdx: index(\"subreddit_idx\").on(table.subreddit),\r\n        };\r\n    }\r\n);\r\n```\r\n\r\nI'd assume it's breaking because mysql doesn't actually have a boolean type and it's trying to turn the existing tinyint into a boolean? Doesn't end up actually changing anything apart from wiping the table clean. Not really the end of the world for me, but still pretty annoying having to wipe local data to change the schema.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/59/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/59/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/58","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/58/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/58/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/58/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/58","id":1717899972,"node_id":"PR_kwDOHoY85M5Q7WCL","number":58,"title":"Update readme.md","user":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-19T22:22:40Z","updated_at":"2023-05-19T22:55:54Z","closed_at":"2023-05-19T22:55:50Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/58","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/58","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/58.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/58.patch","merged_at":"2023-05-19T22:55:50Z"},"body":null,"reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/58/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/58/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/57","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/57/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/57/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/57/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/57","id":1717346907,"node_id":"PR_kwDOHoY85M5Q5dJv","number":57,"title":"Update readme.md","user":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-19T14:27:12Z","updated_at":"2023-05-19T14:28:11Z","closed_at":"2023-05-19T14:28:08Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/57","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/57","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/57.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/57.patch","merged_at":"2023-05-19T14:28:08Z"},"body":null,"reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/57/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/57/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/56","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/56/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/56/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/56/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/56","id":1716069239,"node_id":"I_kwDOHoY85M5mSSN3","number":56,"title":"Nothing happens when changing just onUpdate and onDelete for MySQL reference","user":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-05-18T18:19:35Z","updated_at":"2023-05-25T20:46:05Z","closed_at":"2023-05-25T20:46:04Z","author_association":"MEMBER","active_lock_reason":null,"body":null,"reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/56/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/56/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/55","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/55/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/55/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/55/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/55","id":1714496713,"node_id":"I_kwDOHoY85M5mMSTJ","number":55,"title":"Typescript and ESM not working together","user":{"login":"Marsup","id":796194,"node_id":"MDQ6VXNlcjc5NjE5NA==","avatar_url":"https://avatars.githubusercontent.com/u/796194?v=4","gravatar_id":"","url":"https://api.github.com/users/Marsup","html_url":"https://github.com/Marsup","followers_url":"https://api.github.com/users/Marsup/followers","following_url":"https://api.github.com/users/Marsup/following{/other_user}","gists_url":"https://api.github.com/users/Marsup/gists{/gist_id}","starred_url":"https://api.github.com/users/Marsup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Marsup/subscriptions","organizations_url":"https://api.github.com/users/Marsup/orgs","repos_url":"https://api.github.com/users/Marsup/repos","events_url":"https://api.github.com/users/Marsup/events{/privacy}","received_events_url":"https://api.github.com/users/Marsup/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2023-05-17T19:01:52Z","updated_at":"2024-03-27T00:26:03Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nOn a project using typescript and ESM mode, it seems that drizzle-kit generate doesn't resolve imports properly.\r\nFor example, with such a layout:\r\n```\r\n| - schemas\r\n\\-- table1.ts\r\n\\-- table2.ts\r\n```\r\nIf `table1` imports `table2`, it needs to do it with `import { table2 } from './table2.js';` as extensions are mandatory with ESM.\r\nBut this will throw a `Cannot find module ./table2.js` when running drizzle-kit.\r\n\r\nA temporary workaround is to remove all extensions for the migration generation, and then revert to make it work for runtime.\r\n\r\nBtw, isn't drizzle-kit open-source?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/55/reactions","total_count":16,"+1":16,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/55/timeline","performed_via_github_app":null,"state_reason":"reopened"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/54","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/54/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/54/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/54/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/54","id":1714277769,"node_id":"I_kwDOHoY85M5mLc2J","number":54,"title":"How do we apply migrations to our database?","user":{"login":"michealroberts","id":84131395,"node_id":"MDQ6VXNlcjg0MTMxMzk1","avatar_url":"https://avatars.githubusercontent.com/u/84131395?v=4","gravatar_id":"","url":"https://api.github.com/users/michealroberts","html_url":"https://github.com/michealroberts","followers_url":"https://api.github.com/users/michealroberts/followers","following_url":"https://api.github.com/users/michealroberts/following{/other_user}","gists_url":"https://api.github.com/users/michealroberts/gists{/gist_id}","starred_url":"https://api.github.com/users/michealroberts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michealroberts/subscriptions","organizations_url":"https://api.github.com/users/michealroberts/orgs","repos_url":"https://api.github.com/users/michealroberts/repos","events_url":"https://api.github.com/users/michealroberts/events{/privacy}","received_events_url":"https://api.github.com/users/michealroberts/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-17T16:40:50Z","updated_at":"2023-05-21T14:30:02Z","closed_at":"2023-05-21T14:30:02Z","author_association":"NONE","active_lock_reason":null,"body":"So confused as to how to use drizzle-kit, can we use it to apply the generated migrations to our databases?\r\n\r\nWhat is the workflow for applying migrations to a DB?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/54/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/54/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/53","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/53/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/53/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/53/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/53","id":1714200779,"node_id":"I_kwDOHoY85M5mLKDL","number":53,"title":"[BUG]: Declaration files for drizzle-kit?","user":{"login":"michealroberts","id":84131395,"node_id":"MDQ6VXNlcjg0MTMxMzk1","avatar_url":"https://avatars.githubusercontent.com/u/84131395?v=4","gravatar_id":"","url":"https://api.github.com/users/michealroberts","html_url":"https://github.com/michealroberts","followers_url":"https://api.github.com/users/michealroberts/followers","following_url":"https://api.github.com/users/michealroberts/following{/other_user}","gists_url":"https://api.github.com/users/michealroberts/gists{/gist_id}","starred_url":"https://api.github.com/users/michealroberts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michealroberts/subscriptions","organizations_url":"https://api.github.com/users/michealroberts/orgs","repos_url":"https://api.github.com/users/michealroberts/repos","events_url":"https://api.github.com/users/michealroberts/events{/privacy}","received_events_url":"https://api.github.com/users/michealroberts/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-05-17T15:50:16Z","updated_at":"2023-05-17T16:12:38Z","closed_at":"2023-05-17T16:12:37Z","author_association":"NONE","active_lock_reason":null,"body":"I'm attempting to use drizzle.config.ts for some migrations, but the `Config` type imported from this library is not available as the type declarations aren't being shipped with this package.\r\n\r\n<img width=\"479\" alt=\"Screenshot 2023-05-17 at 16 48 51\" src=\"https://github.com/drizzle-team/drizzle-kit-mirror/assets/84131395/9587ac1f-44de-4466-9fe0-e70fe2e4f9dc\">\r\n\r\nNot quite sure what is going on here ?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/53/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/53/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/52","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/52/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/52/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/52/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/52","id":1712878996,"node_id":"I_kwDOHoY85M5mGHWU","number":52,"title":"Cannot find module \"drizzle-orm/version\"","user":{"login":"yamiteru","id":34185465,"node_id":"MDQ6VXNlcjM0MTg1NDY1","avatar_url":"https://avatars.githubusercontent.com/u/34185465?v=4","gravatar_id":"","url":"https://api.github.com/users/yamiteru","html_url":"https://github.com/yamiteru","followers_url":"https://api.github.com/users/yamiteru/followers","following_url":"https://api.github.com/users/yamiteru/following{/other_user}","gists_url":"https://api.github.com/users/yamiteru/gists{/gist_id}","starred_url":"https://api.github.com/users/yamiteru/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yamiteru/subscriptions","organizations_url":"https://api.github.com/users/yamiteru/orgs","repos_url":"https://api.github.com/users/yamiteru/repos","events_url":"https://api.github.com/users/yamiteru/events{/privacy}","received_events_url":"https://api.github.com/users/yamiteru/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2023-05-16T23:47:37Z","updated_at":"2024-04-05T14:02:38Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```bash\r\n$ drizzle-kit generate:sqlite\r\ndrizzle-kit: v0.17.6\r\n\r\nnode:internal/modules/cjs/loader:1082\r\n  const err = new Error(message);\r\n              ^\r\n\r\nError: Cannot find module 'drizzle-orm/version'\r\nRequire stack:\r\n- /Users/yamiteru/dev/h2-organizer/node_modules/drizzle-kit/index.js\r\n    at Module._resolveFilename (node:internal/modules/cjs/loader:1082:15)\r\n    at Module._load (node:internal/modules/cjs/loader:928:27)\r\n    at Module.require (node:internal/modules/cjs/loader:1149:19)\r\n    at require (node:internal/modules/helpers:121:18)\r\n    at assertOrmCoreVersion (/Users/yamiteru/dev/h2-organizer/node_modules/drizzle-kit/index.js:49408:36)\r\n    at Command2.<anonymous> (/Users/yamiteru/dev/h2-organizer/node_modules/drizzle-kit/index.js:49680:3)\r\n    at Command2.listener [as _actionHandler] (/Users/yamiteru/dev/h2-organizer/node_modules/drizzle-kit/index.js:827:21)\r\n    at /Users/yamiteru/dev/h2-organizer/node_modules/drizzle-kit/index.js:1246:69\r\n    at Command2._chainOrCall (/Users/yamiteru/dev/h2-organizer/node_modules/drizzle-kit/index.js:1178:16)\r\n    at Command2._parseCommand (/Users/yamiteru/dev/h2-organizer/node_modules/drizzle-kit/index.js:1246:31) {\r\n  code: 'MODULE_NOT_FOUND',\r\n  requireStack: [\r\n    '/Users/yamiteru/dev/h2-organizer/node_modules/drizzle-kit/index.js'\r\n  ]\r\n}\r\n\r\nNode.js v20.1.0\r\n```\r\n\r\nI can see that the \"version\" files (version.cjs/mjs) are in `drizzle-orm` in node_modules.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/52/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/52/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/51","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/51/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/51/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/51/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/51","id":1711985732,"node_id":"I_kwDOHoY85M5mCtRE","number":51,"title":"Issue using drizzle-kit up:pg","user":{"login":"pcriadoperez","id":12142844,"node_id":"MDQ6VXNlcjEyMTQyODQ0","avatar_url":"https://avatars.githubusercontent.com/u/12142844?v=4","gravatar_id":"","url":"https://api.github.com/users/pcriadoperez","html_url":"https://github.com/pcriadoperez","followers_url":"https://api.github.com/users/pcriadoperez/followers","following_url":"https://api.github.com/users/pcriadoperez/following{/other_user}","gists_url":"https://api.github.com/users/pcriadoperez/gists{/gist_id}","starred_url":"https://api.github.com/users/pcriadoperez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcriadoperez/subscriptions","organizations_url":"https://api.github.com/users/pcriadoperez/orgs","repos_url":"https://api.github.com/users/pcriadoperez/repos","events_url":"https://api.github.com/users/pcriadoperez/events{/privacy}","received_events_url":"https://api.github.com/users/pcriadoperez/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-05-16T13:02:57Z","updated_at":"2023-05-23T17:33:09Z","closed_at":"2023-05-23T17:33:09Z","author_association":"NONE","active_lock_reason":null,"body":"Hi, if I run `drizzle-kit up:pg` \r\nI get the following output but no migration happens in the database:\r\n```\r\ndrizzle-kit: v0.17.6\r\ndrizzle-orm: v0.25.4\r\n\r\nReading drizzle.config.json\r\nEverything's fine üê∂üî•\r\n```\r\n\r\nHowever if I use `import { migrate } from \"drizzle-orm/node-postgres/migrator\";` it works fine.\r\n\r\nIs that expected, or am I doing something wrong.\r\n\r\nSorry for the noob questions, first time trying out drizzle.\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/51/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/51/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/50","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/50/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/50/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/50/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/50","id":1709062661,"node_id":"I_kwDOHoY85M5l3joF","number":50,"title":"Open source and license","user":{"login":"bene","id":6875705,"node_id":"MDQ6VXNlcjY4NzU3MDU=","avatar_url":"https://avatars.githubusercontent.com/u/6875705?v=4","gravatar_id":"","url":"https://api.github.com/users/bene","html_url":"https://github.com/bene","followers_url":"https://api.github.com/users/bene/followers","following_url":"https://api.github.com/users/bene/following{/other_user}","gists_url":"https://api.github.com/users/bene/gists{/gist_id}","starred_url":"https://api.github.com/users/bene/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bene/subscriptions","organizations_url":"https://api.github.com/users/bene/orgs","repos_url":"https://api.github.com/users/bene/repos","events_url":"https://api.github.com/users/bene/events{/privacy}","received_events_url":"https://api.github.com/users/bene/received_events","type":"User","site_admin":false},"labels":[{"id":4311178960,"node_id":"LA_kwDOHoY85M8AAAABAPde0A","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/question","name":"question","color":"d876e3","default":true,"description":"Further information is requested"}],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":18,"created_at":"2023-05-14T20:23:39Z","updated_at":"2024-05-05T05:21:11Z","closed_at":"2023-05-15T08:06:29Z","author_association":"NONE","active_lock_reason":null,"body":"It appears that the code for Drizzle Kit is not available as open source, and furthermore, no licensing information is provided within the repository. Given the significance of this matter for many individuals, I was hopeful that the Drizzle team could provide clarification on the project's intended licensing and their plans with regards to potential open sourcing or commercialization.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/50/reactions","total_count":13,"+1":13,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/50/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/49","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/49/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/49/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/49/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/49","id":1708276332,"node_id":"I_kwDOHoY85M5l0jps","number":49,"title":"PG Migrations using Schemas","user":{"login":"twonil-jordan-stout","id":128093442,"node_id":"U_kgDOB6KNAg","avatar_url":"https://avatars.githubusercontent.com/u/128093442?v=4","gravatar_id":"","url":"https://api.github.com/users/twonil-jordan-stout","html_url":"https://github.com/twonil-jordan-stout","followers_url":"https://api.github.com/users/twonil-jordan-stout/followers","following_url":"https://api.github.com/users/twonil-jordan-stout/following{/other_user}","gists_url":"https://api.github.com/users/twonil-jordan-stout/gists{/gist_id}","starred_url":"https://api.github.com/users/twonil-jordan-stout/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twonil-jordan-stout/subscriptions","organizations_url":"https://api.github.com/users/twonil-jordan-stout/orgs","repos_url":"https://api.github.com/users/twonil-jordan-stout/repos","events_url":"https://api.github.com/users/twonil-jordan-stout/events{/privacy}","received_events_url":"https://api.github.com/users/twonil-jordan-stout/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-05-12T22:15:29Z","updated_at":"2023-06-17T07:08:38Z","closed_at":"2023-06-17T07:08:38Z","author_association":"NONE","active_lock_reason":null,"body":"I noticed a few things when running migrations when everything is within a schema.\r\n\r\nForeign keys are missing the schema.  The output below, \"user_roles\" is in a schema \"users\":\r\n```sql\r\nDO $$ BEGIN\r\n ALTER TABLE \"user_roles\" ADD CONSTRAINT \"user_roles_user_id_users_id_fk\" FOREIGN KEY (\"user_id\") REFERENCES \"users\"(\"id\") ON DELETE cascade ON UPDATE cascade;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```\r\n\r\nSame with creating indexes. \"users\" should be \"users\".\"users\":\r\n\r\n```sql\r\nCREATE UNIQUE INDEX IF NOT EXISTS \"username_idx\" ON \"users\" (\"username\");\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/49/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/49/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/48","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/48/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/48/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/48/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/48","id":1701227283,"node_id":"PR_kwDOHoY85M5QDUM_","number":48,"title":"update index creation in readme.md","user":{"login":"JLarky","id":7026,"node_id":"MDQ6VXNlcjcwMjY=","avatar_url":"https://avatars.githubusercontent.com/u/7026?v=4","gravatar_id":"","url":"https://api.github.com/users/JLarky","html_url":"https://github.com/JLarky","followers_url":"https://api.github.com/users/JLarky/followers","following_url":"https://api.github.com/users/JLarky/following{/other_user}","gists_url":"https://api.github.com/users/JLarky/gists{/gist_id}","starred_url":"https://api.github.com/users/JLarky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JLarky/subscriptions","organizations_url":"https://api.github.com/users/JLarky/orgs","repos_url":"https://api.github.com/users/JLarky/repos","events_url":"https://api.github.com/users/JLarky/events{/privacy}","received_events_url":"https://api.github.com/users/JLarky/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-09T03:00:28Z","updated_at":"2023-05-09T03:00:28Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/48","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/48","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/48.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/48.patch","merged_at":null},"body":"hi, never used drizzle before, but the code from readme is giving typescript error, so...","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/48/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/48/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/47","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/47/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/47/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/47/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/47","id":1699059697,"node_id":"I_kwDOHoY85M5lRZfx","number":47,"title":"[BUG]: uniqueIndex not respecting WHERE clause in postgres","user":{"login":"sudhanshug16","id":9914480,"node_id":"MDQ6VXNlcjk5MTQ0ODA=","avatar_url":"https://avatars.githubusercontent.com/u/9914480?v=4","gravatar_id":"","url":"https://api.github.com/users/sudhanshug16","html_url":"https://github.com/sudhanshug16","followers_url":"https://api.github.com/users/sudhanshug16/followers","following_url":"https://api.github.com/users/sudhanshug16/following{/other_user}","gists_url":"https://api.github.com/users/sudhanshug16/gists{/gist_id}","starred_url":"https://api.github.com/users/sudhanshug16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudhanshug16/subscriptions","organizations_url":"https://api.github.com/users/sudhanshug16/orgs","repos_url":"https://api.github.com/users/sudhanshug16/repos","events_url":"https://api.github.com/users/sudhanshug16/events{/privacy}","received_events_url":"https://api.github.com/users/sudhanshug16/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2023-05-07T13:12:23Z","updated_at":"2024-05-31T15:54:49Z","closed_at":"2024-05-31T15:18:50Z","author_association":"NONE","active_lock_reason":null,"body":"### What version of `drizzle-orm` are you using?\r\n\r\n0.25.4\r\n\r\n### What version of `drizzle-kit` are you using?\r\n\r\n0.17.6\r\n\r\n### Describe the Bug\r\n\r\nin my schema, I have:\r\n\r\n```\r\nindexWithWhere: uniqueIndex(\"index_with_where\")\r\n        .on(table.column_1, table.column_2)\r\n        .where(isNull(table.column_2)),\r\n```\r\n\r\nbut the generated SQL after running `yarn drizzle-kit generate:pg` is:\r\n\r\n```\r\nCREATE UNIQUE INDEX IF NOT EXISTS \"index_with_where\" ON \"logs\" (\"column_1\",\"column_2\");\r\n```\r\n\r\n### Expected behavior\r\n\r\nit should generate the following sql:\r\n\r\n```\r\nCREATE UNIQUE INDEX IF NOT EXISTS \"index_with_where\" ON \"logs\" (\"column_1\",\"column_2\") WHERE \"column_2\" IS NULL;\r\n```\r\n\r\n### Environment & setup\r\n\r\nI am using it with next.js","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/47/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/47/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/46","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/46/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/46/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/46/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/46","id":1698797341,"node_id":"I_kwDOHoY85M5lQZcd","number":46,"title":"[bug + fix] - Wrong casing for `date` fields with MySQL","user":{"login":"machour","id":304450,"node_id":"MDQ6VXNlcjMwNDQ1MA==","avatar_url":"https://avatars.githubusercontent.com/u/304450?v=4","gravatar_id":"","url":"https://api.github.com/users/machour","html_url":"https://github.com/machour","followers_url":"https://api.github.com/users/machour/followers","following_url":"https://api.github.com/users/machour/following{/other_user}","gists_url":"https://api.github.com/users/machour/gists{/gist_id}","starred_url":"https://api.github.com/users/machour/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/machour/subscriptions","organizations_url":"https://api.github.com/users/machour/orgs","repos_url":"https://api.github.com/users/machour/repos","events_url":"https://api.github.com/users/machour/events{/privacy}","received_events_url":"https://api.github.com/users/machour/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-05-06T22:18:30Z","updated_at":"2023-05-25T20:45:02Z","closed_at":"2023-05-25T20:45:02Z","author_association":"NONE","active_lock_reason":null,"body":"While introspecting my database, this schema got generated:\r\n\r\n```ts\r\nexport const news = mysqlTable(\r\n  \"news\",\r\n  {\r\n    id: int(\"id\").autoincrement().primaryKey().notNull(),\r\n    // you can use { mode: 'date' }, if you want to have Date as type for this column\r\n    published_at: date(\"published_at\", { mode: \"string\" }),\r\n\t\t// ... bunch of other fields\r\n    createdAt: datetime(\"created_at\", { mode: \"string\" }),\r\n    updatedAt: datetime(\"updated_at\", { mode: \"string\" }),\r\n  },\r\n  (table) => {\r\n    return {\r\n\t\t\t// my indexes..\r\n      idxNewsPublishedAt: index(\"idx_news_published_at\").on(table.publishedAt),\r\n    };\r\n  }\r\n);\r\n```\r\n\r\nNotice how the field name is still `published_at`, while it's referred to as `publishedAt` in the index.\r\n\r\nThis would fix it in the source code:\r\n\r\n```diff\r\n      if (lowered === \"date\") {\r\n        let out = `// you can use { mode: 'date' }, if you want to have Date as type for this column\r\n-       ${name}: date(\"${name}\", { mode: 'string' })`;\r\n+       ${name.camelCase()}: date(\"${name}\", { mode: 'string' })`;\r\n        defaultValue = defaultValue === \"now()\" ? \".defaultNow()\" : defaultValue ? `.default(${mapColumnDefault(defaultValue)})` : \"\";\r\n        out += defaultValue;\r\n        return out;\r\n      }\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/46/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/46/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/45","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/45/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/45/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/45/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/45","id":1697197072,"node_id":"I_kwDOHoY85M5lKSwQ","number":45,"title":"[ISSUE] MySQL migration produce statements in the wrong order","user":{"login":"JesusTheHun","id":94478,"node_id":"MDQ6VXNlcjk0NDc4","avatar_url":"https://avatars.githubusercontent.com/u/94478?v=4","gravatar_id":"","url":"https://api.github.com/users/JesusTheHun","html_url":"https://github.com/JesusTheHun","followers_url":"https://api.github.com/users/JesusTheHun/followers","following_url":"https://api.github.com/users/JesusTheHun/following{/other_user}","gists_url":"https://api.github.com/users/JesusTheHun/gists{/gist_id}","starred_url":"https://api.github.com/users/JesusTheHun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JesusTheHun/subscriptions","organizations_url":"https://api.github.com/users/JesusTheHun/orgs","repos_url":"https://api.github.com/users/JesusTheHun/repos","events_url":"https://api.github.com/users/JesusTheHun/events{/privacy}","received_events_url":"https://api.github.com/users/JesusTheHun/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-05-05T08:09:38Z","updated_at":"2023-05-25T20:45:08Z","closed_at":"2023-05-25T20:45:07Z","author_association":"NONE","active_lock_reason":null,"body":"Running migration for the following schemas :\r\n```ts\r\nexport const authorsTable = mysqlTable('authors', {\r\n  id: int('id').autoincrement().primaryKey(),\r\n  nickname: varchar('nickname', { length: 255 }).notNull(),\r\n}, (table) => ({\r\n  nickname: index('nickname').on(table.nickname),\r\n}));\r\n\r\nexport const booksTable = mysqlTable('books', {\r\n  id: int('id').autoincrement().primaryKey(),\r\n  authorNickname: int('authorNickname').notNull().references(() => authorsTable.nickname),\r\n});\r\n```\r\n\r\nWill produce the following SQL script :\r\n\r\n```sql\r\nCREATE TABLE `authors` (\r\n\t`id` int AUTO_INCREMENT PRIMARY KEY NOT NULL,\r\n\t`nickname` varchar(255) NOT NULL\r\n);\r\n\r\nCREATE TABLE `books` (\r\n\t`id` int AUTO_INCREMENT PRIMARY KEY NOT NULL,\r\n\t`authorNickname` int NOT NULL\r\n);\r\n\r\nALTER TABLE `books` ADD CONSTRAINT `books_authorNickname_authors_nickname_fk` FOREIGN KEY (`authorNickname`) REFERENCES `authors`(`nickname`);\r\nCREATE INDEX `nickname` ON `authors` (`nickname`);\r\n```\r\n\r\nThis will fail because the **index** should be created **before** adding the **constraint**.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/45/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/45/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/44","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/44/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/44/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/44/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/44","id":1694172008,"node_id":"I_kwDOHoY85M5k-wNo","number":44,"title":"`Cannot use import statement outside a module` when using a TypeScript config file","user":{"login":"michaelschufi","id":2805598,"node_id":"MDQ6VXNlcjI4MDU1OTg=","avatar_url":"https://avatars.githubusercontent.com/u/2805598?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelschufi","html_url":"https://github.com/michaelschufi","followers_url":"https://api.github.com/users/michaelschufi/followers","following_url":"https://api.github.com/users/michaelschufi/following{/other_user}","gists_url":"https://api.github.com/users/michaelschufi/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelschufi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelschufi/subscriptions","organizations_url":"https://api.github.com/users/michaelschufi/orgs","repos_url":"https://api.github.com/users/michaelschufi/repos","events_url":"https://api.github.com/users/michaelschufi/events{/privacy}","received_events_url":"https://api.github.com/users/michaelschufi/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-05-03T14:19:19Z","updated_at":"2023-06-17T07:08:53Z","closed_at":"2023-06-17T07:08:53Z","author_association":"NONE","active_lock_reason":null,"body":"Hi\r\n\r\nI'm running into the problem that I cannot use the TypeScript config file, e.g.  `drizzle.config.ts`.\r\n\r\nNote: I'm using the `@db-push` tag.\r\n\r\nMy config file:\r\n```ts\r\nimport 'dotenv/config';\r\n\r\nimport type { Config } from 'drizzle-kit';\r\n\r\nimport { env } from '@/env.mjs';\r\n\r\nexport default {\r\n  schema: './src/backend/db/schema',\r\n  out: './src/backend/db/migrations',\r\n  host: env.DATABASE_HOST,\r\n  user: env.DATABASE_USERNAME,\r\n  password: env.DATABASE_PASSWORD,\r\n} satisfies Config;\r\n```\r\n\r\nMy terminal output:\r\n\r\n`pnpm exec drizzle-kit push:mysql`\r\n```\r\ndrizzle-kit: v0.17.6\r\ndrizzle-orm: v0.25.4\r\n\r\nNo config path provided, using default 'drizzle.config.ts'\r\nReading config file '/path-to-monorepo/project-folder/app/drizzle.config.ts'\r\n/path-to-monorepo/project-folder/app/src/env.mjs:2\r\nimport { createEnv } from \"@t3-oss/env-nextjs\";\r\n^^^^^^\r\n\r\nSyntaxError: Cannot use import statement outside a module\r\n    at Object.compileFunction (node:vm:360:18)\r\n    at wrapSafe (node:internal/modules/cjs/loader:1048:15)\r\n    at Module._compile (node:internal/modules/cjs/loader:1083:27)\r\n    at Module._compile (/path-to-monorepo/node_modules/.pnpm/drizzle-kit@0.17.6-76e73f3/node_modules/drizzle-kit/index.js:16330:30)\r\n    at Module._extensions..js (node:internal/modules/cjs/loader:1173:10)\r\n    at Object.newLoader [as .mjs] (/path-to-monorepo/node_modules/.pnpm/drizzle-kit@0.17.6-76e73f3/node_modules/drizzle-kit/index.js:16334:13)\r\n    at Module.load (node:internal/modules/cjs/loader:997:32)\r\n    at Module._load (node:internal/modules/cjs/loader:838:12)\r\n    at Module.require (node:internal/modules/cjs/loader:1021:19)\r\n    at require (node:internal/modules/cjs/helpers:103:18)\r\n\r\nNode.js v18.9.1\r\n```\r\n\r\nLast but not least, my tsconfig:\r\n```json\r\n{\r\n  \"ts-node\": {\r\n    \"moduleTypes\": {\r\n      \"src/backend/db\": \"esm\"\r\n    },\r\n    \"cwd\": \"/path-to-monorepo/project-folder/app\",\r\n    \"projectSearchDir\": \"/path-to-monorepo/project-folder/app\",\r\n    \"project\": \"/path-to-monorepo/project-folder/app/tsconfig.json\"\r\n  },\r\n  \"compilerOptions\": {\r\n    \"lib\": [\r\n      \"dom\",\r\n      \"dom.iterable\",\r\n      \"esnext\"\r\n    ],\r\n    \"module\": \"esnext\",\r\n    \"moduleResolution\": \"node\",\r\n    \"jsx\": \"preserve\",\r\n    \"strict\": true,\r\n    \"allowJs\": true,\r\n    \"skipLibCheck\": true,\r\n    \"forceConsistentCasingInFileNames\": true,\r\n    \"noEmit\": false,\r\n    \"esModuleInterop\": true,\r\n    \"resolveJsonModule\": true,\r\n    \"isolatedModules\": true,\r\n    \"useDefineForClassFields\": true,\r\n    \"incremental\": true,\r\n    \"baseUrl\": \"./\",\r\n    \"paths\": {\r\n      \"@/*\": [\r\n        \"./src/*\"\r\n      ]\r\n    },\r\n    \"target\": \"es6\",\r\n    \"sourceMap\": true,\r\n    \"inlineSourceMap\": false,\r\n    \"inlineSources\": true,\r\n    \"declaration\": false,\r\n    \"outDir\": \"./.ts-node\"\r\n  }\r\n}\r\n```\r\n\r\nWhat can I do to make this work?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/44/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/44/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/43","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/43/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/43/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/43/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/43","id":1692251309,"node_id":"I_kwDOHoY85M5k3bSt","number":43,"title":"Issue with dropping a table that contains upper case letters in the name.","user":{"login":"JonoPrest","id":65739024,"node_id":"MDQ6VXNlcjY1NzM5MDI0","avatar_url":"https://avatars.githubusercontent.com/u/65739024?v=4","gravatar_id":"","url":"https://api.github.com/users/JonoPrest","html_url":"https://github.com/JonoPrest","followers_url":"https://api.github.com/users/JonoPrest/followers","following_url":"https://api.github.com/users/JonoPrest/following{/other_user}","gists_url":"https://api.github.com/users/JonoPrest/gists{/gist_id}","starred_url":"https://api.github.com/users/JonoPrest/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonoPrest/subscriptions","organizations_url":"https://api.github.com/users/JonoPrest/orgs","repos_url":"https://api.github.com/users/JonoPrest/repos","events_url":"https://api.github.com/users/JonoPrest/events{/privacy}","received_events_url":"https://api.github.com/users/JonoPrest/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-05-02T11:29:09Z","updated_at":"2023-05-25T20:45:12Z","closed_at":"2023-05-25T20:45:12Z","author_association":"NONE","active_lock_reason":null,"body":"These are the steps to recreate the issues:\r\n\r\nI create a table called \"myTest1\" (contains uppercase \"T\").\r\nThe following migration is generated by drizzle-kit in a file called \"0000_zippy_rage.sql\":\r\n\r\n```sql\r\nCREATE TABLE IF NOT EXISTS \"myTest1\" (\r\n\t\"id\" text PRIMARY KEY NOT NULL,\r\n\t\"owner\" text,\r\n\t\"displayName\" text,\r\n\t\"imageUrl\" text,\r\n\t\"updatesCount\" text\r\n);\r\n\r\n```\r\n\r\nRunning migrate on this works perfectly.\r\n\r\nNext I change the name in my schema to \"myTest2\" and select create table instead of rename table: \r\n<img width=\"533\" alt=\"Screenshot 2023-05-02 at 13 16 47\" src=\"https://user-images.githubusercontent.com/65739024/235653401-752d6efc-c7e9-4815-929e-a8d6a4c96766.png\">\r\n\r\nThe following migration is generated in a file called \"0001_wandering_tana_nile.sql\":\r\n```sql\r\nCREATE TABLE IF NOT EXISTS \"myTest2\" (\r\n\t\"id\" text PRIMARY KEY NOT NULL,\r\n\t\"owner\" text,\r\n\t\"displayName\" text,\r\n\t\"imageUrl\" text,\r\n\t\"updatesCount\" text\r\n);\r\n\r\nDROP TABLE myTest1;\r\n```\r\n\r\nNote how the command `DROP TABLE myTest1;` does not use quotes around \"myTest1\".\r\n\r\nWhen I run this migration I get this error in my terminal: `error: table \"mytest1\" does not exist`\r\n\r\nAs far as I know without quotes this command won't work. Perhaps it's a simple matter of adding these quotes into drizzlekit functionality.\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/43/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/43/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/42","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/42/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/42/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/42/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/42","id":1690034479,"node_id":"I_kwDOHoY85M5ku-Ev","number":42,"title":"Migration Error: The supplied SQL string contains more than one statement after updating to 0.17.6","user":{"login":"toddgeist","id":316792,"node_id":"MDQ6VXNlcjMxNjc5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/316792?v=4","gravatar_id":"","url":"https://api.github.com/users/toddgeist","html_url":"https://github.com/toddgeist","followers_url":"https://api.github.com/users/toddgeist/followers","following_url":"https://api.github.com/users/toddgeist/following{/other_user}","gists_url":"https://api.github.com/users/toddgeist/gists{/gist_id}","starred_url":"https://api.github.com/users/toddgeist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toddgeist/subscriptions","organizations_url":"https://api.github.com/users/toddgeist/orgs","repos_url":"https://api.github.com/users/toddgeist/repos","events_url":"https://api.github.com/users/toddgeist/events{/privacy}","received_events_url":"https://api.github.com/users/toddgeist/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-04-30T18:45:30Z","updated_at":"2023-04-30T20:43:12Z","closed_at":"2023-04-30T20:43:11Z","author_association":"NONE","active_lock_reason":null,"body":"After upgrading to the following, I i get the error below on migration.\r\n\r\n\"drizzle-kit\": \"^0.17.6\",\r\n\"drizzle-orm\": \"^0.25.3\",\r\n\"better-sqlite3\": \"^8.3.0\",\r\n\r\nError\r\n\r\n```\r\nerror: migrations failed\r\nerror: DrizzleError: Failed to run the query 'CREATE TABLE `api_keys` (\r\n        `id` integer PRIMARY KEY NOT NULL,\r\n        `token` text NOT NULL,\r\n        `key` text NOT NULL,\r\n        `user` text NOT NULL,\r\n        `pass` text NOT NULL,\r\n        `database` text NOT NULL,\r\n        `created_at` integer DEFAULT (cast((julianday('now') - 2440587.5)*86400000 as integer)),\r\n        `updated_at` integer DEFAULT (cast((julianday('now') - 2440587.5)*86400000 as integer)) NOT NULL\r\n);\r\n\r\nCREATE UNIQUE INDEX `keyIdx` ON `api_keys` (`key`);': The supplied SQL string contains more than one statement\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/42/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/42/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/41","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/41/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/41/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/41/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/41","id":1688816092,"node_id":"I_kwDOHoY85M5kqUnc","number":41,"title":"PostgreSQL - cannot create index with `using`","user":{"login":"knarfchan","id":8468598,"node_id":"MDQ6VXNlcjg0Njg1OTg=","avatar_url":"https://avatars.githubusercontent.com/u/8468598?v=4","gravatar_id":"","url":"https://api.github.com/users/knarfchan","html_url":"https://github.com/knarfchan","followers_url":"https://api.github.com/users/knarfchan/followers","following_url":"https://api.github.com/users/knarfchan/following{/other_user}","gists_url":"https://api.github.com/users/knarfchan/gists{/gist_id}","starred_url":"https://api.github.com/users/knarfchan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knarfchan/subscriptions","organizations_url":"https://api.github.com/users/knarfchan/orgs","repos_url":"https://api.github.com/users/knarfchan/repos","events_url":"https://api.github.com/users/knarfchan/events{/privacy}","received_events_url":"https://api.github.com/users/knarfchan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-04-28T16:15:40Z","updated_at":"2024-06-03T12:37:07Z","closed_at":"2024-06-03T12:37:07Z","author_association":"NONE","active_lock_reason":null,"body":"Hi, I'm trying to create a GIN index in Postgres on a table like this\r\n\r\n```\r\nCREATE INDEX example_index ON example_table USING gin ((data->'path'->'to'->'field') jsonb_path_ops);\r\n```\r\n\r\nIn this case I don't need to specify any columns, but drizzle's index builder doesn't have a way to specify a table without any columns. It also seems like both the `where` and `using` methods in the index builder do nothing. Passing sql expressions into them does not result in any changes to the generated index.\r\n\r\nUsing\r\n\"drizzle-kit\": \"^0.17.6\",\r\n\"drizzle-orm\": \"^0.25.2\",","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/41/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/41/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/40","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/40/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/40/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/40/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/40","id":1687999946,"node_id":"I_kwDOHoY85M5knNXK","number":40,"title":"ALTER TABLE and CREATE INDEX statements do not add schema to table name.","user":{"login":"erwinkn","id":42368176,"node_id":"MDQ6VXNlcjQyMzY4MTc2","avatar_url":"https://avatars.githubusercontent.com/u/42368176?v=4","gravatar_id":"","url":"https://api.github.com/users/erwinkn","html_url":"https://github.com/erwinkn","followers_url":"https://api.github.com/users/erwinkn/followers","following_url":"https://api.github.com/users/erwinkn/following{/other_user}","gists_url":"https://api.github.com/users/erwinkn/gists{/gist_id}","starred_url":"https://api.github.com/users/erwinkn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erwinkn/subscriptions","organizations_url":"https://api.github.com/users/erwinkn/orgs","repos_url":"https://api.github.com/users/erwinkn/repos","events_url":"https://api.github.com/users/erwinkn/events{/privacy}","received_events_url":"https://api.github.com/users/erwinkn/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-04-28T06:50:21Z","updated_at":"2023-05-25T20:45:18Z","closed_at":"2023-05-25T20:45:18Z","author_association":"NONE","active_lock_reason":null,"body":"**Reproduction:**\r\n\r\n1. Define the following schema:\r\n```ts\r\nimport { integer, pgSchema, serial, text, uniqueIndex } from \"drizzle-orm/pg-core\";\r\n\r\nexport const mySchema = pgSchema(\"my_schema\");\r\n\r\nexport const table1 = mySchema.table(\r\n  \"table1\",\r\n  {\r\n    id: serial(\"id\").primaryKey(),\r\n    text: text(\"text\").notNull(),\r\n  },\r\n  (table1) => {\r\n    return {\r\n      uniqueIdx: uniqueIndex().on(table1.text),\r\n    };\r\n  }\r\n);\r\n\r\nexport const table2 = mySchema.table(\"table2\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  fk: integer(\"fk\").references(() => table1.id),\r\n});\r\n```\r\n\r\n2. Run `drizzle-kit generate:pg`\r\n3. The `ALTER TABLE` statement for the foreign key and the `CREATE UNIQUE INDEX` statement reference `table1` and `table2` without appending the schema name.\r\n\r\n**Expected behavior**\r\nAll table references in the generated migration include the schema name.\r\n\r\n**Package versions**\r\n`drizzle-orm`: 0.25.3\r\n`drizzle-kit`: 0.17.6","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/40/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/40/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/39","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/39/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/39/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/39/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/39","id":1685919639,"node_id":"I_kwDOHoY85M5kfReX","number":39,"title":"Cannot run migration with sound [mysql] SQL (?)","user":{"login":"NicholasFields","id":68744844,"node_id":"MDQ6VXNlcjY4NzQ0ODQ0","avatar_url":"https://avatars.githubusercontent.com/u/68744844?v=4","gravatar_id":"","url":"https://api.github.com/users/NicholasFields","html_url":"https://github.com/NicholasFields","followers_url":"https://api.github.com/users/NicholasFields/followers","following_url":"https://api.github.com/users/NicholasFields/following{/other_user}","gists_url":"https://api.github.com/users/NicholasFields/gists{/gist_id}","starred_url":"https://api.github.com/users/NicholasFields/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NicholasFields/subscriptions","organizations_url":"https://api.github.com/users/NicholasFields/orgs","repos_url":"https://api.github.com/users/NicholasFields/repos","events_url":"https://api.github.com/users/NicholasFields/events{/privacy}","received_events_url":"https://api.github.com/users/NicholasFields/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-04-27T00:44:09Z","updated_at":"2023-04-29T20:37:33Z","closed_at":"2023-04-29T20:34:30Z","author_association":"NONE","active_lock_reason":null,"body":"Error ::\r\n\r\n```\r\nError: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CREATE TABLE `joiner_table` (\r\n`id` serial AUTO_INCREMENT PRIMARY KEY NOT NULL,\r\n' at line 6\r\nat query (/workspaces/amni-sst/node_modules/.pnpm/mysql2@2.3.3/node_modules/mysql2/promise.js:93:22)\r\nat async (/workspaces/amni-sst/node_modules/.pnpm/drizzle-orm@0.25.3_@aws-sdk+client-rds-data@3.319.0_kysely@0.23.5_mysql2@2.3.3/node_modules/src/mysql2/session.ts:79:18)\r\nat execute (/workspaces/amni-sst/node_modules/.pnpm/drizzle-orm@0.25.3_@aws-sdk+client-rds-data@3.319.0_kysely@0.23.5_mysql2@2.3.3/node_modules/src/mysql-core/session.ts:66:5)\r\nat execute (/workspaces/amni-sst/node_modules/.pnpm/drizzle-orm@0.25.3_@aws-sdk+client-rds-data@3.319.0_kysely@0.23.5_mysql2@2.3.3/node_modules/src/mysql-core/db.ts:89:23)\r\nat async (/workspaces/amni-sst/node_modules/.pnpm/drizzle-orm@0.25.3_@aws-sdk+client-rds-data@3.319.0_kysely@0.23.5_mysql2@2.3.3/node_modules/src/mysql-core/dialect.ts:53:16)\r\nat async (/workspaces/amni-sst/node_modules/.pnpm/drizzle-orm@0.25.3_@aws-sdk+client-rds-data@3.319.0_kysely@0.23.5_mysql2@2.3.3/node_modules/src/mysql2/session.ts:200:25)\r\nat process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\nat async (/workspaces/amni-sst/node_modules/.pnpm/drizzle-orm@0.25.3_@aws-sdk+client-rds-data@3.319.0_kysely@0.23.5_mysql2@2.3.3/node_modules/src/mysql-core/dialect.ts:44:40)\r\nat async (/workspaces/amni-sst/node_modules/.pnpm/drizzle-orm@0.25.3_@aws-sdk+client-rds-data@3.319.0_kysely@0.23.5_mysql2@2.3.3/node_modules/src/mysql2/migrator.ts:6:40)\r\nat <anonymous> (/workspaces/amni-sst/packages/functions/src/migrator.ts:9:3)\r\n```\r\n\r\nGenerated SQL file (one of many that fired the same issue) ::\r\n\r\n```\r\nCREATE TABLE `another_table` (\r\n\t`id` int AUTO_INCREMENT PRIMARY KEY NOT NULL,\r\n\t`url` text\r\n);\r\n\r\nCREATE TABLE `joiner_table` (\r\n\t`id` serial AUTO_INCREMENT PRIMARY KEY NOT NULL,\r\n\t`rds_proxy_test_table_id` int,\r\n\t`another_table` int\r\n);\r\n\r\nCREATE TABLE `rds_proxy` (\r\n\t`id` int AUTO_INCREMENT PRIMARY KEY NOT NULL,\r\n\t`url` text\r\n);\r\n\r\nALTER TABLE `joiner_table` ADD CONSTRAINT `joiner_table_rds_proxy_test_table_id_rds_proxy_id_fk` FOREIGN KEY (`rds_proxy_test_table_id`) REFERENCES `rds_proxy`(`id`);\r\nALTER TABLE `joiner_table` ADD CONSTRAINT `joiner_table_another_table_another_table_id_fk` FOREIGN KEY (`another_table`) REFERENCES `another_table`(`id`);\r\n```\r\n\r\nDrizzle Schema :: \r\n\r\n```\r\nimport { int, mysqlTable, serial, text } from 'drizzle-orm/mysql-core';\r\n\r\nexport const rdsProxyTestTable = mysqlTable('rds_proxy', {\r\n  id: int('id').autoincrement().primaryKey(),\r\n  url: text('url'),\r\n});\r\n\r\nexport const anotherTable = mysqlTable('another_table', {\r\n  id: int('id').autoincrement().primaryKey(),\r\n  url: text('url'),\r\n});\r\n\r\nexport const joinerTable = mysqlTable('joiner_table', {\r\n  id: serial('id').primaryKey(),\r\n  rdsProxyTestTableId: int('rds_proxy_test_table_id').references(\r\n    () => rdsProxyTestTable.id,\r\n  ),\r\n  anotherTableId: int('another_table').references(() => anotherTable.id),\r\n});\r\n\r\n\r\n```\r\n\r\nThe SQL, exactly as it is, runs fine in DBA Tool (DBeaver, in my case).\r\n\r\nIn initial renditions of the same problem, \r\nI was on dumb 'ol windows. \r\n\r\nSo I thought, perhaps, there was some windows-specific issue (e.g., EoL formatting) messing with whatever parses the SQL as/before the migrator has it executed by the mysql instance.\r\n\r\nCodeblocks above are from a codespace, exhibiting the same behavior::\r\n\r\n1. Take an arbitrary (?) // incomplete chunk of SQL\r\n2. Try to run it\r\n3. It errors, missing its full context\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/39/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/39/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/38","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/38/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/38/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/38/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/38","id":1685810840,"node_id":"I_kwDOHoY85M5ke26Y","number":38,"title":"Typo in generated migrations script comment","user":{"login":"andreterron","id":1753594,"node_id":"MDQ6VXNlcjE3NTM1OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1753594?v=4","gravatar_id":"","url":"https://api.github.com/users/andreterron","html_url":"https://github.com/andreterron","followers_url":"https://api.github.com/users/andreterron/followers","following_url":"https://api.github.com/users/andreterron/following{/other_user}","gists_url":"https://api.github.com/users/andreterron/gists{/gist_id}","starred_url":"https://api.github.com/users/andreterron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreterron/subscriptions","organizations_url":"https://api.github.com/users/andreterron/orgs","repos_url":"https://api.github.com/users/andreterron/repos","events_url":"https://api.github.com/users/andreterron/events{/privacy}","received_events_url":"https://api.github.com/users/andreterron/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-04-26T22:07:33Z","updated_at":"2023-05-25T21:35:09Z","closed_at":"2023-05-25T20:45:27Z","author_association":"NONE","active_lock_reason":null,"body":"When running `drizzle-kit introspect:pg` we get the following header:\r\n\r\n```sql\r\n-- Current sql file was generated after introspecting the database\r\n-- If you want to run this migration please uncomment this code before executing migraitons\r\n```\r\n\r\nBut there's a typo on the last word: `migraitons` should be `migrations`","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/38/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/38/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/37","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/37/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/37/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/37/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/37","id":1685536390,"node_id":"I_kwDOHoY85M5kdz6G","number":37,"title":"Adding geometry types to introspection","user":{"login":"mfasanya","id":6720841,"node_id":"MDQ6VXNlcjY3MjA4NDE=","avatar_url":"https://avatars.githubusercontent.com/u/6720841?v=4","gravatar_id":"","url":"https://api.github.com/users/mfasanya","html_url":"https://github.com/mfasanya","followers_url":"https://api.github.com/users/mfasanya/followers","following_url":"https://api.github.com/users/mfasanya/following{/other_user}","gists_url":"https://api.github.com/users/mfasanya/gists{/gist_id}","starred_url":"https://api.github.com/users/mfasanya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mfasanya/subscriptions","organizations_url":"https://api.github.com/users/mfasanya/orgs","repos_url":"https://api.github.com/users/mfasanya/repos","events_url":"https://api.github.com/users/mfasanya/events{/privacy}","received_events_url":"https://api.github.com/users/mfasanya/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-04-26T18:48:42Z","updated_at":"2023-04-26T18:48:42Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hey, I'm looking at adding custom geometry types to the introspection CLI. Where can I find the code for this project?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/37/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/37/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/36","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/36/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/36/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/36/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/36","id":1671156711,"node_id":"I_kwDOHoY85M5jm9Pn","number":36,"title":"Runing migrations down","user":{"login":"JeromeBu","id":22095555,"node_id":"MDQ6VXNlcjIyMDk1NTU1","avatar_url":"https://avatars.githubusercontent.com/u/22095555?v=4","gravatar_id":"","url":"https://api.github.com/users/JeromeBu","html_url":"https://github.com/JeromeBu","followers_url":"https://api.github.com/users/JeromeBu/followers","following_url":"https://api.github.com/users/JeromeBu/following{/other_user}","gists_url":"https://api.github.com/users/JeromeBu/gists{/gist_id}","starred_url":"https://api.github.com/users/JeromeBu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JeromeBu/subscriptions","organizations_url":"https://api.github.com/users/JeromeBu/orgs","repos_url":"https://api.github.com/users/JeromeBu/repos","events_url":"https://api.github.com/users/JeromeBu/events{/privacy}","received_events_url":"https://api.github.com/users/JeromeBu/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-04-17T13:14:56Z","updated_at":"2023-04-17T13:15:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I am wondering if there is a way to generate and run migrations down.\r\n\r\nI see 2 common use cases :\r\n- rolling back when something unexpected happens when deploying\r\n- when switching between 2 branches, one might need to go back to a previous migration state\r\n\r\nI see there is a `drop` possibility, but it won't help if the migration was actually ran, as the database has no way to go back to the wanted state.\r\n\r\nIs it something that exists or that is in the road map ?¬†\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/36/reactions","total_count":10,"+1":10,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/36/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/35","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/35/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/35/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/35/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/35","id":1670146050,"node_id":"I_kwDOHoY85M5jjGgC","number":35,"title":"Cannot alter table by adding a primary key","user":{"login":"jalooc","id":6209244,"node_id":"MDQ6VXNlcjYyMDkyNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/6209244?v=4","gravatar_id":"","url":"https://api.github.com/users/jalooc","html_url":"https://github.com/jalooc","followers_url":"https://api.github.com/users/jalooc/followers","following_url":"https://api.github.com/users/jalooc/following{/other_user}","gists_url":"https://api.github.com/users/jalooc/gists{/gist_id}","starred_url":"https://api.github.com/users/jalooc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jalooc/subscriptions","organizations_url":"https://api.github.com/users/jalooc/orgs","repos_url":"https://api.github.com/users/jalooc/repos","events_url":"https://api.github.com/users/jalooc/events{/privacy}","received_events_url":"https://api.github.com/users/jalooc/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2023-04-16T21:26:32Z","updated_at":"2023-04-18T22:51:57Z","closed_at":"2023-04-18T22:51:50Z","author_association":"NONE","active_lock_reason":null,"body":"Going from:\r\n```ts\r\n// migration 1\r\nexport const component = pgTable('component', {\r\n  id: uuid('id').default(sql`uuid_generate_v4()`).notNull(),\r\n})\r\n```\r\nto\r\n```ts\r\n// migration 2\r\nexport const component = pgTable('component', {\r\n  id: uuid('id').default(sql`uuid_generate_v4()`).primaryKey(),\r\n})\r\n```\r\nfails with a Zod error:\r\n```\r\n{\r\n    \"code\": \"unrecognized_keys\",\r\n    \"keys\": [\r\n      \"primaryKey\"\r\n    ],\r\n    \"path\": [\r\n      \"alteredTablesWithColumns\",\r\n      0,\r\n      \"altered\",\r\n      0\r\n    ],\r\n    \"message\": \"Unrecognized key(s) in object: 'primaryKey'\"\r\n  }\r\n```\r\n\r\nNote that if the `migration 2` snippet is the initial migration (not a result of an update) then the primary key is applied successfully.\r\n\r\n---\r\n\r\nI checked that the `diffResult` inside `applySnapshotsDiff()` is:\r\n```\r\n{\r\n  \"addedTables\": [],\r\n  \"deletedTables\": [],\r\n  \"alteredTablesWithColumns\": [\r\n    {\r\n      \"name\": \"component\",\r\n      \"schema\": {\r\n        \"type\": \"none\",\r\n        \"value\": \"\"\r\n      },\r\n      \"deleted\": [],\r\n      \"added\": [],\r\n      \"altered\": [\r\n        {\r\n          \"name\": \"id\",\r\n          \"primaryKey\": {\r\n            \"__old\": false,\r\n            \"__new\": true\r\n          }\r\n        }\r\n      ],\r\n      \"addedIndexes\": {},\r\n      \"deletedIndexes\": {},\r\n      \"addedForeignKeys\": {},\r\n      \"deletedForeignKeys\": {},\r\n      \"alteredForeignKeys\": {},\r\n      \"addedCompositePKs\": {},\r\n      \"deletedCompositePKs\": {},\r\n      \"alteredCompositePKs\": {}\r\n    }\r\n}\r\n```\r\n\r\n---\r\n\r\nI also verified that adding the PK through the callback function way works:\r\n```ts\r\n// migration 2\r\nexport const component = pgTable('component', {\r\n  id: uuid('id').default(sql`uuid_generate_v4()`).notNull(),\r\n}, table => ({\r\n  pk: primaryKey(table.id),\r\n}))\r\n```\r\nbut I believe just replacing `.notNull()` with `.primaryKey()` should work too and it looks much cleaner.\r\n\r\n---\r\n\r\nHope it helps :)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/35/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/35/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/34","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/34/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/34/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/34/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/34","id":1668523855,"node_id":"I_kwDOHoY85M5jc6dP","number":34,"title":"Migrations pgSchema not respect the schema name after initial migration","user":{"login":"tinchoz49","id":819446,"node_id":"MDQ6VXNlcjgxOTQ0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/819446?v=4","gravatar_id":"","url":"https://api.github.com/users/tinchoz49","html_url":"https://github.com/tinchoz49","followers_url":"https://api.github.com/users/tinchoz49/followers","following_url":"https://api.github.com/users/tinchoz49/following{/other_user}","gists_url":"https://api.github.com/users/tinchoz49/gists{/gist_id}","starred_url":"https://api.github.com/users/tinchoz49/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tinchoz49/subscriptions","organizations_url":"https://api.github.com/users/tinchoz49/orgs","repos_url":"https://api.github.com/users/tinchoz49/repos","events_url":"https://api.github.com/users/tinchoz49/events{/privacy}","received_events_url":"https://api.github.com/users/tinchoz49/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-04-14T16:00:51Z","updated_at":"2023-06-02T12:17:57Z","closed_at":"2023-05-25T20:45:31Z","author_association":"NONE","active_lock_reason":null,"body":"```\r\ndrizzle-orm: 0.23.11\r\ndrizzle-kit: 0.17.4\r\n```\r\n\r\nHey guys!\r\n\r\nI started the project having this schema.js:\r\n\r\n```js\r\nimport { pgSchema, text, uuid } from 'drizzle-orm/pg-core/index.js'\r\n\r\nexport const mySchema = pgSchema('my_schema')\r\n\r\nexport const profiles = mySchema.table('profiles', {\r\n  id: uuid('id').defaultRandom().primaryKey(),\r\n  name: text('name').notNull()\r\n})\r\n```\r\n\r\nIt generates a `0000_<funnyName>.sql` migration: \r\n\r\n```sql\r\nCREATE SCHEMA \"my_schema\";\r\n\r\nCREATE TABLE IF NOT EXISTS \"my_schema\".\"profiles\" (\r\n\t\"id\" uuid PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,\r\n\t\"name\" text NOT NULL\r\n);\r\n```\r\n\r\nNow i try to add a new field `email`:\r\n\r\n```js\r\nimport { pgSchema, text, uuid } from 'drizzle-orm/pg-core/index.js'\r\n\r\nexport const mySchema = pgSchema('my_schema')\r\n\r\nexport const profiles = mySchema.table('profiles', {\r\n  id: uuid('id').defaultRandom().primaryKey(),\r\n  name: text('name').notNull(),\r\n  email: text('email').notNull()\r\n})\r\n```\r\n\r\nIt generates a wrong `0001_<funnyName>.sql` migration without the correct schema:\r\n\r\n```sql\r\nALTER TABLE \"profiles\" ADD COLUMN \"email\" text NOT NULL;\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/34/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/34/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/33","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/33/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/33/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/33/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/33","id":1661248920,"node_id":"I_kwDOHoY85M5jBKWY","number":33,"title":"DEFAULT now() with a time zone creates an invalid schema","user":{"login":"tmcw","id":32314,"node_id":"MDQ6VXNlcjMyMzE0","avatar_url":"https://avatars.githubusercontent.com/u/32314?v=4","gravatar_id":"","url":"https://api.github.com/users/tmcw","html_url":"https://github.com/tmcw","followers_url":"https://api.github.com/users/tmcw/followers","following_url":"https://api.github.com/users/tmcw/following{/other_user}","gists_url":"https://api.github.com/users/tmcw/gists{/gist_id}","starred_url":"https://api.github.com/users/tmcw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmcw/subscriptions","organizations_url":"https://api.github.com/users/tmcw/orgs","repos_url":"https://api.github.com/users/tmcw/repos","events_url":"https://api.github.com/users/tmcw/events{/privacy}","received_events_url":"https://api.github.com/users/tmcw/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-04-10T19:31:26Z","updated_at":"2023-08-21T21:33:38Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"We have a table like this:\r\n\r\n![CleanShot 2023-04-10 at 15 29 47@2x](https://user-images.githubusercontent.com/32314/230981491-7f7dfcff-135b-4d83-b26f-4c1e203dcb8b.png)\r\n\r\nAnd it generates a schema like this:\r\n\r\n```ts\r\nexport const timeoutLocks = pgTable(\"timeout_locks\", {\r\n\tacquiredAt: timestamp(\"acquiredAt\", { withTimezone: true, mode: 'string' })\r\n        .default((now() AT TIME ZONE 'utc'::text)),\r\n\tid: uuid(\"id\").notNull(),\r\n},\r\n(table) => {\r\n\treturn {\r\n\t\tidKey: uniqueIndex(\"timeout_locks_id_key\").on(table.id),\r\n\t}\r\n});\r\n```\r\n\r\nWith the line\r\n\r\n```\r\n        .default((now() AT TIME ZONE 'utc'::text)),\r\n```\r\n\r\nBeing an issue - this is invalid JavaScript. Seems like there's special handling of default: now(), while other defaults get expressions with the sql helper, and this is stuck in the middle.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/33/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/33/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/32","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/32/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/32/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/32/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/32","id":1660693808,"node_id":"PR_kwDOHoY85M5N7gyX","number":32,"title":"Add information about the `breakpoints` argument","user":{"login":"filipsobol","id":4145208,"node_id":"MDQ6VXNlcjQxNDUyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/4145208?v=4","gravatar_id":"","url":"https://api.github.com/users/filipsobol","html_url":"https://github.com/filipsobol","followers_url":"https://api.github.com/users/filipsobol/followers","following_url":"https://api.github.com/users/filipsobol/following{/other_user}","gists_url":"https://api.github.com/users/filipsobol/gists{/gist_id}","starred_url":"https://api.github.com/users/filipsobol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/filipsobol/subscriptions","organizations_url":"https://api.github.com/users/filipsobol/orgs","repos_url":"https://api.github.com/users/filipsobol/repos","events_url":"https://api.github.com/users/filipsobol/events{/privacy}","received_events_url":"https://api.github.com/users/filipsobol/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-04-10T12:04:41Z","updated_at":"2023-04-17T07:42:21Z","closed_at":"2023-04-15T14:50:56Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/32","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/32","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/32.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/32.patch","merged_at":"2023-04-15T14:50:56Z"},"body":null,"reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/32/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/32/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/31","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/31/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/31/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/31/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/31","id":1659546607,"node_id":"PR_kwDOHoY85M5N39B9","number":31,"title":"docs(readabilty): added line return to `$ drizzle-kit introspect:pg`","user":{"login":"mountainash","id":27637,"node_id":"MDQ6VXNlcjI3NjM3","avatar_url":"https://avatars.githubusercontent.com/u/27637?v=4","gravatar_id":"","url":"https://api.github.com/users/mountainash","html_url":"https://github.com/mountainash","followers_url":"https://api.github.com/users/mountainash/followers","following_url":"https://api.github.com/users/mountainash/following{/other_user}","gists_url":"https://api.github.com/users/mountainash/gists{/gist_id}","starred_url":"https://api.github.com/users/mountainash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mountainash/subscriptions","organizations_url":"https://api.github.com/users/mountainash/orgs","repos_url":"https://api.github.com/users/mountainash/repos","events_url":"https://api.github.com/users/mountainash/events{/privacy}","received_events_url":"https://api.github.com/users/mountainash/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-04-08T14:52:56Z","updated_at":"2023-04-15T14:51:37Z","closed_at":"2023-04-15T14:51:36Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/31","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/31","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/31.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/31.patch","merged_at":"2023-04-15T14:51:36Z"},"body":"The main fix here is #L153 becoming 2 lines (otherwise it looks like one long command)\r\n\r\n- removing trailing spaces (dang IDE)\r\n- consistent spacing before line return","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/31/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/31/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/30","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/30/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/30/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/30/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/30","id":1656223566,"node_id":"I_kwDOHoY85M5it_dO","number":30,"title":"Extra parenthesis in migration","user":{"login":"janwirth","id":7485959,"node_id":"MDQ6VXNlcjc0ODU5NTk=","avatar_url":"https://avatars.githubusercontent.com/u/7485959?v=4","gravatar_id":"","url":"https://api.github.com/users/janwirth","html_url":"https://github.com/janwirth","followers_url":"https://api.github.com/users/janwirth/followers","following_url":"https://api.github.com/users/janwirth/following{/other_user}","gists_url":"https://api.github.com/users/janwirth/gists{/gist_id}","starred_url":"https://api.github.com/users/janwirth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janwirth/subscriptions","organizations_url":"https://api.github.com/users/janwirth/orgs","repos_url":"https://api.github.com/users/janwirth/repos","events_url":"https://api.github.com/users/janwirth/events{/privacy}","received_events_url":"https://api.github.com/users/janwirth/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-04-05T20:12:53Z","updated_at":"2023-05-23T07:35:23Z","closed_at":"2023-05-23T07:35:23Z","author_association":"NONE","active_lock_reason":null,"body":"In this case, making a column non-nullable.\r\n\r\n```sql\r\nALTER TABLE `help_requests` MODIFY COLUMN `date_created` timestamp NOT NULL DEFAULT (now());\r\n```\r\nshould be\r\n```sql\r\nALTER TABLE `help_requests` MODIFY COLUMN `date_created` timestamp NOT NULL DEFAULT now();\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/30/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/30/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/29","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/29/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/29/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/29/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/29","id":1650967968,"node_id":"PR_kwDOHoY85M5NbvLs","number":29,"title":"add empty migration doc","user":{"login":"rphlmr","id":20722140,"node_id":"MDQ6VXNlcjIwNzIyMTQw","avatar_url":"https://avatars.githubusercontent.com/u/20722140?v=4","gravatar_id":"","url":"https://api.github.com/users/rphlmr","html_url":"https://github.com/rphlmr","followers_url":"https://api.github.com/users/rphlmr/followers","following_url":"https://api.github.com/users/rphlmr/following{/other_user}","gists_url":"https://api.github.com/users/rphlmr/gists{/gist_id}","starred_url":"https://api.github.com/users/rphlmr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rphlmr/subscriptions","organizations_url":"https://api.github.com/users/rphlmr/orgs","repos_url":"https://api.github.com/users/rphlmr/repos","events_url":"https://api.github.com/users/rphlmr/events{/privacy}","received_events_url":"https://api.github.com/users/rphlmr/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-04-02T14:25:49Z","updated_at":"2023-04-02T16:53:48Z","closed_at":"2023-04-02T16:53:47Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/29","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/29","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/29.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/29.patch","merged_at":"2023-04-02T16:53:47Z"},"body":"+ fix new line glitch","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/29/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/29/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/28","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/28/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/28/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/28/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/28","id":1650946950,"node_id":"PR_kwDOHoY85M5NbrCi","number":28,"title":"Fix configuration file schema doc","user":{"login":"rphlmr","id":20722140,"node_id":"MDQ6VXNlcjIwNzIyMTQw","avatar_url":"https://avatars.githubusercontent.com/u/20722140?v=4","gravatar_id":"","url":"https://api.github.com/users/rphlmr","html_url":"https://github.com/rphlmr","followers_url":"https://api.github.com/users/rphlmr/followers","following_url":"https://api.github.com/users/rphlmr/following{/other_user}","gists_url":"https://api.github.com/users/rphlmr/gists{/gist_id}","starred_url":"https://api.github.com/users/rphlmr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rphlmr/subscriptions","organizations_url":"https://api.github.com/users/rphlmr/orgs","repos_url":"https://api.github.com/users/rphlmr/repos","events_url":"https://api.github.com/users/rphlmr/events{/privacy}","received_events_url":"https://api.github.com/users/rphlmr/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-04-02T13:25:55Z","updated_at":"2023-08-18T13:38:42Z","closed_at":"2023-08-18T13:38:33Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/28","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/28","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/28.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/28.patch","merged_at":null},"body":"Just to be like the cmd line example.\r\n\r\nNB: I have a `migrate` script in `./src/db` and `npx drizzle-kit generate:pg` runs everything in `schema` path üòÖ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/28/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/28/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/27","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/27/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/27/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/27/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/27","id":1649998712,"node_id":"I_kwDOHoY85M5iWPt4","number":27,"title":"\"ReferenceError: datetime is not defined\" when instropecting mysql database","user":{"login":"lianhuilui","id":2843170,"node_id":"MDQ6VXNlcjI4NDMxNzA=","avatar_url":"https://avatars.githubusercontent.com/u/2843170?v=4","gravatar_id":"","url":"https://api.github.com/users/lianhuilui","html_url":"https://github.com/lianhuilui","followers_url":"https://api.github.com/users/lianhuilui/followers","following_url":"https://api.github.com/users/lianhuilui/following{/other_user}","gists_url":"https://api.github.com/users/lianhuilui/gists{/gist_id}","starred_url":"https://api.github.com/users/lianhuilui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lianhuilui/subscriptions","organizations_url":"https://api.github.com/users/lianhuilui/orgs","repos_url":"https://api.github.com/users/lianhuilui/repos","events_url":"https://api.github.com/users/lianhuilui/events{/privacy}","received_events_url":"https://api.github.com/users/lianhuilui/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-03-31T20:38:27Z","updated_at":"2023-04-04T11:20:09Z","closed_at":"2023-04-04T11:20:09Z","author_association":"NONE","active_lock_reason":null,"body":"In the schema.ts file that is created, `datetime` is missing from the imports, but it is used in the code.\r\nManually adding `datetime` to the list of imports fixes the issue.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/27/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/27/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/26","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/26/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/26/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/26/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/26","id":1648346424,"node_id":"PR_kwDOHoY85M5NTMp1","number":26,"title":"Fix typos","user":{"login":"tmcw","id":32314,"node_id":"MDQ6VXNlcjMyMzE0","avatar_url":"https://avatars.githubusercontent.com/u/32314?v=4","gravatar_id":"","url":"https://api.github.com/users/tmcw","html_url":"https://github.com/tmcw","followers_url":"https://api.github.com/users/tmcw/followers","following_url":"https://api.github.com/users/tmcw/following{/other_user}","gists_url":"https://api.github.com/users/tmcw/gists{/gist_id}","starred_url":"https://api.github.com/users/tmcw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmcw/subscriptions","organizations_url":"https://api.github.com/users/tmcw/orgs","repos_url":"https://api.github.com/users/tmcw/repos","events_url":"https://api.github.com/users/tmcw/events{/privacy}","received_events_url":"https://api.github.com/users/tmcw/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-03-30T21:27:19Z","updated_at":"2023-03-31T13:29:41Z","closed_at":"2023-03-31T13:29:41Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/26","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/26","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/26.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/26.patch","merged_at":"2023-03-31T13:29:41Z"},"body":"This is a typo-only fix PR - just fixing misspellings and grammar issues.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/26/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/26/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/25","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/25/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/25/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/25/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/25","id":1648340959,"node_id":"I_kwDOHoY85M5iP6_f","number":25,"title":"CLI feedback could be better when a required argument is missing","user":{"login":"tmcw","id":32314,"node_id":"MDQ6VXNlcjMyMzE0","avatar_url":"https://avatars.githubusercontent.com/u/32314?v=4","gravatar_id":"","url":"https://api.github.com/users/tmcw","html_url":"https://github.com/tmcw","followers_url":"https://api.github.com/users/tmcw/followers","following_url":"https://api.github.com/users/tmcw/following{/other_user}","gists_url":"https://api.github.com/users/tmcw/gists{/gist_id}","starred_url":"https://api.github.com/users/tmcw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmcw/subscriptions","organizations_url":"https://api.github.com/users/tmcw/orgs","repos_url":"https://api.github.com/users/tmcw/repos","events_url":"https://api.github.com/users/tmcw/events{/privacy}","received_events_url":"https://api.github.com/users/tmcw/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-03-30T21:22:56Z","updated_at":"2023-05-25T20:45:43Z","closed_at":"2023-05-25T20:45:43Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"When I try to introspect a database but forget the `--migrations` argument, the only feedback is \"Missing required params\" - it'd be great if this CLI listed those required params so one could use it without toggling between `--help` or consulting the readme.\r\n\r\n```\r\n‚ûú  drizzle-test y drizzle-kit introspect:pg --database=drizzledemo --user=tmcw --password=\"\" --host=0.0.0.0\r\nyarn run v1.22.19\r\n$ /Users/tmcw/v/drizzle-test/node_modules/.bin/drizzle-kit introspect:pg --database=drizzledemo --user=tmcw --password= --host=0.0.0.0\r\ndrizzle-kit: v0.17.1\r\ndrizzle-orm: v0.23.2\r\n\r\nMissing required params\r\n‚ú®  Done in 0.20s.\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/25/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/25/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/24","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/24/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/24/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/24/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/24","id":1648171907,"node_id":"I_kwDOHoY85M5iPRuD","number":24,"title":"0 tables - all the time - when generating migration (in neon example deployment) [inside pnpm monorepo]","user":{"login":"sinitsa","id":9321744,"node_id":"MDQ6VXNlcjkzMjE3NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/9321744?v=4","gravatar_id":"","url":"https://api.github.com/users/sinitsa","html_url":"https://github.com/sinitsa","followers_url":"https://api.github.com/users/sinitsa/followers","following_url":"https://api.github.com/users/sinitsa/following{/other_user}","gists_url":"https://api.github.com/users/sinitsa/gists{/gist_id}","starred_url":"https://api.github.com/users/sinitsa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sinitsa/subscriptions","organizations_url":"https://api.github.com/users/sinitsa/orgs","repos_url":"https://api.github.com/users/sinitsa/repos","events_url":"https://api.github.com/users/sinitsa/events{/privacy}","received_events_url":"https://api.github.com/users/sinitsa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":21,"created_at":"2023-03-30T19:13:24Z","updated_at":"2024-06-03T12:20:39Z","closed_at":"2024-06-03T12:20:39Z","author_association":"NONE","active_lock_reason":null,"body":"Hello!\r\n\r\nAfter installing the neon-cf example (on Mac), I first had to update all packages, then run the drizzle-kit up:pg (successful), after which I managed to upload the migration to Neon, and play some with worker insert/select - it works.\r\n\r\nBut when i try to change something in schema and run drizzle-kit generate:pg- seems like no schemes are found, just a migration is created with drop users only: /\r\n0 tables\r\n[‚úì] Your SQL migration file ‚ûú drizzle/0001_blue_mongu.sql üöÄ\r\n\r\nWhy??\r\n\r\nIt all happens in a pnpm monorep - maybe problem depends? I already tried to install it in the root, change paths, etc. - anyway i got the message - 0 tables  ??\r\n\r\nLater, i try to change paths to totally invalid - anyway all the time i got:\r\n\r\n# pn drizzle-kit check:pg\r\ndrizzle-kit: v0.17.1\r\ndrizzle-orm: v0.23.2\r\n\r\nReading drizzle.config.json\r\nEverything's fine üê∂üî•\r\n\r\n# pn drizzle-kit generate:pg\r\ndrizzle-kit: v0.17.1\r\ndrizzle-orm: v0.23.2\r\n\r\n0 tables\r\n\r\nNo schema changes, nothing to migrate üò¥\r\n......\r\n\r\nWhat i'm doing wrong??\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/24/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/24/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/23","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/23/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/23/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/23/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/23","id":1645698375,"node_id":"I_kwDOHoY85M5iF11H","number":23,"title":"drizzle-kit drop does not work","user":{"login":"romanzy313","id":13500086,"node_id":"MDQ6VXNlcjEzNTAwMDg2","avatar_url":"https://avatars.githubusercontent.com/u/13500086?v=4","gravatar_id":"","url":"https://api.github.com/users/romanzy313","html_url":"https://github.com/romanzy313","followers_url":"https://api.github.com/users/romanzy313/followers","following_url":"https://api.github.com/users/romanzy313/following{/other_user}","gists_url":"https://api.github.com/users/romanzy313/gists{/gist_id}","starred_url":"https://api.github.com/users/romanzy313/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romanzy313/subscriptions","organizations_url":"https://api.github.com/users/romanzy313/orgs","repos_url":"https://api.github.com/users/romanzy313/repos","events_url":"https://api.github.com/users/romanzy313/events{/privacy}","received_events_url":"https://api.github.com/users/romanzy313/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-03-29T12:21:31Z","updated_at":"2023-03-29T12:50:37Z","closed_at":"2023-03-29T12:50:37Z","author_association":"NONE","active_lock_reason":null,"body":"Here is my console output when running: `drizzle-kit drop` \r\n\r\n```\r\nyarn drizzle-kit drop\r\nyarn run v1.22.19\r\n$ /node_modules/.bin/drizzle-kit drop\r\ndrizzle-kit: v0.17.1\r\ndrizzle-orm: v0.23.2\r\n\r\nReading drizzle.config.json\r\n\r\n/node_modules/drizzle-kit/index.js:49503\r\n  const sqlFilePath = (0, import_path5.join)(out, `${result.data.tag}.sql`);\r\n                                                                 ^\r\n\r\nTypeError: Cannot read properties of undefined (reading 'tag')\r\n    at dropMigration (/node_modules/drizzle-kit/index.js:49503:66)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n\r\nNode.js v18.14.0\r\nerror Command failed with exit code 1.\r\n```\r\n\r\nWhen running the command, it asks `Please select migration to drop:` without any options I have confirmed that all other CLI commands work correctly.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/23/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/23/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/22","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/22/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/22/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/22/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/22","id":1645660117,"node_id":"I_kwDOHoY85M5iFsfV","number":22,"title":"MySQL BigInt Unsigned","user":{"login":"hatemjaber","id":7838875,"node_id":"MDQ6VXNlcjc4Mzg4NzU=","avatar_url":"https://avatars.githubusercontent.com/u/7838875?v=4","gravatar_id":"","url":"https://api.github.com/users/hatemjaber","html_url":"https://github.com/hatemjaber","followers_url":"https://api.github.com/users/hatemjaber/followers","following_url":"https://api.github.com/users/hatemjaber/following{/other_user}","gists_url":"https://api.github.com/users/hatemjaber/gists{/gist_id}","starred_url":"https://api.github.com/users/hatemjaber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hatemjaber/subscriptions","organizations_url":"https://api.github.com/users/hatemjaber/orgs","repos_url":"https://api.github.com/users/hatemjaber/repos","events_url":"https://api.github.com/users/hatemjaber/events{/privacy}","received_events_url":"https://api.github.com/users/hatemjaber/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-03-29T12:01:22Z","updated_at":"2024-06-03T12:14:23Z","closed_at":"2024-06-03T12:14:23Z","author_association":"NONE","active_lock_reason":null,"body":"I'm trying to generate a field that looks like this:\r\n\r\n`id bigint(20) unsigned NOT NULL`\r\n\r\nusing this in my drizzle schema:\r\n\r\n`id: bigint('id', { mode: 'bigint' }).primaryKey().notNull()`\r\n\r\nI looked through the code and the examples but can't get it to generate an unsigned bigint. At this point I'm not sure if it's supported or not, I'm using the latest version of drizzle.\r\n\r\nThe other thing that I can't seem to figure out is how to run the migration, I tried:\r\n\r\n`npx drizzle-kit up:mysql`\r\n\r\nThank you in advance for your help!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/22/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/22/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/21","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/21/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/21/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/21/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/21","id":1631206915,"node_id":"I_kwDOHoY85M5hOj4D","number":21,"title":"Issue when generating sql using zod for environment variable validation","user":{"login":"STNeto1","id":45022927,"node_id":"MDQ6VXNlcjQ1MDIyOTI3","avatar_url":"https://avatars.githubusercontent.com/u/45022927?v=4","gravatar_id":"","url":"https://api.github.com/users/STNeto1","html_url":"https://github.com/STNeto1","followers_url":"https://api.github.com/users/STNeto1/followers","following_url":"https://api.github.com/users/STNeto1/following{/other_user}","gists_url":"https://api.github.com/users/STNeto1/gists{/gist_id}","starred_url":"https://api.github.com/users/STNeto1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/STNeto1/subscriptions","organizations_url":"https://api.github.com/users/STNeto1/orgs","repos_url":"https://api.github.com/users/STNeto1/repos","events_url":"https://api.github.com/users/STNeto1/events{/privacy}","received_events_url":"https://api.github.com/users/STNeto1/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2023-03-20T01:11:00Z","updated_at":"2024-02-06T09:43:43Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When using `npx drizzle-kit generate:mysql` with other source for env variables, an error is thrown.\r\n\r\n\r\n```sh\r\nnpx drizzle-kit generate:mysql       \r\ndrizzle-kit: v0.17.0\r\ndrizzle-orm: v0.22.0-88c1ad3\r\n\r\n/home/stneto/apps/edge-shortener/src/env.mjs:2\r\nimport { z } from \"zod\";\r\n^^^^^^\r\n\r\nSyntaxError: Cannot use import statement outside a module\r\n```\r\n\r\nThe .env validation comes from [here](https://create.t3.gg/en/usage/env-variables/)\r\n\r\nThe issue on code can be found [here](https://github.com/STNeto1/edge-shortener/blob/main/src/db/db.ts#L13-L17)","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/21/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/21/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/20","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/20/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/20/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/20/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/20","id":1630549464,"node_id":"I_kwDOHoY85M5hMDXY","number":20,"title":"[MySQL] generate timestamp .defaultNow() bug","user":{"login":"peppasd","id":11796143,"node_id":"MDQ6VXNlcjExNzk2MTQz","avatar_url":"https://avatars.githubusercontent.com/u/11796143?v=4","gravatar_id":"","url":"https://api.github.com/users/peppasd","html_url":"https://github.com/peppasd","followers_url":"https://api.github.com/users/peppasd/followers","following_url":"https://api.github.com/users/peppasd/following{/other_user}","gists_url":"https://api.github.com/users/peppasd/gists{/gist_id}","starred_url":"https://api.github.com/users/peppasd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peppasd/subscriptions","organizations_url":"https://api.github.com/users/peppasd/orgs","repos_url":"https://api.github.com/users/peppasd/repos","events_url":"https://api.github.com/users/peppasd/events{/privacy}","received_events_url":"https://api.github.com/users/peppasd/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-03-18T19:40:13Z","updated_at":"2023-04-15T14:52:32Z","closed_at":"2023-04-15T14:52:32Z","author_association":"NONE","active_lock_reason":null,"body":"I'm using drizzle-kit v0.17.0 and a planetscale db. I have the following demo schema:\r\n\r\n```ts\r\nexport const accounts = mysqlTable(\r\n  \"accounts\",\r\n  {\r\n    id: serial(\"id\").primaryKey(),\r\n    email: varchar(\"email\", { length: 30 }).notNull(),\r\n    lastLogin: timestamp(\"last_login\").notNull().defaultNow(),\r\n  },\r\n  (accounts) => ({\r\n    emailIdx: uniqueIndex(\"email_unq\").on(accounts.email),\r\n  })\r\n);\r\n```\r\n\r\nUsing `drizzle-kit generate:mysql` I get the following SQL:\r\n\r\n```sql\r\nCREATE TABLE `accounts` (\r\n\t`id` serial AUTO_INCREMENT PRIMARY KEY NOT NULL,\r\n\t`email` varchar(30) NOT NULL,\r\n\t`last_login` timestamp NOT NULL DEFAULT (now())\r\n);\r\n\r\nCREATE UNIQUE INDEX email_unq ON accounts (`email`);\r\n```\r\n\r\nIf I try to apply those changes to my database, I get the error `SQL Error [1067] [42000]` warning me that the `last_login` field is not set right. Following the [MySQL documentation](https://dev.mysql.com/doc/refman/8.0/en/timestamp-initialization.html) on how to initialize timestamps, I changed `(now())` to `CURRENT_TIMESTAMP` and now works it works just fine. Curiously enough, those two expressions should be the same. ","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/20/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/20/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/19","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/19/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/19/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/19/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/19","id":1630412801,"node_id":"I_kwDOHoY85M5hLiAB","number":19,"title":"Escape table names","user":{"login":"jens-ox","id":5368029,"node_id":"MDQ6VXNlcjUzNjgwMjk=","avatar_url":"https://avatars.githubusercontent.com/u/5368029?v=4","gravatar_id":"","url":"https://api.github.com/users/jens-ox","html_url":"https://github.com/jens-ox","followers_url":"https://api.github.com/users/jens-ox/followers","following_url":"https://api.github.com/users/jens-ox/following{/other_user}","gists_url":"https://api.github.com/users/jens-ox/gists{/gist_id}","starred_url":"https://api.github.com/users/jens-ox/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jens-ox/subscriptions","organizations_url":"https://api.github.com/users/jens-ox/orgs","repos_url":"https://api.github.com/users/jens-ox/repos","events_url":"https://api.github.com/users/jens-ox/events{/privacy}","received_events_url":"https://api.github.com/users/jens-ox/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-03-18T16:31:31Z","updated_at":"2023-04-04T11:20:36Z","closed_at":"2023-04-04T11:20:35Z","author_association":"NONE","active_lock_reason":null,"body":"When generating migrations, table names don't get escaped. For example, if a table is to be called \"user\" and has some foreign key constraint, this will be generated:\r\n\r\n```sql\r\nDO $$ BEGIN\r\n ALTER TABLE user ADD CONSTRAINT user_office_id_office_id_fk FOREIGN KEY (\"office_id\") REFERENCES office(\"id\") ON DELETE no action ON UPDATE no action;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```\r\n\r\n`user` is a reserved word, but a valid table name. Escaping it makes this a valid query:\r\n\r\n```sql\r\nDO $$ BEGIN\r\n ALTER TABLE \"user\" ADD CONSTRAINT user_office_id_office_id_fk FOREIGN KEY (\"office_id\") REFERENCES office(\"id\") ON DELETE no action ON UPDATE no action;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/19/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/19/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/18","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/18/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/18/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/18/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/18","id":1629494620,"node_id":"I_kwDOHoY85M5hIB1c","number":18,"title":"Support for multiple schemas in postgre","user":{"login":"digoburigo","id":28462822,"node_id":"MDQ6VXNlcjI4NDYyODIy","avatar_url":"https://avatars.githubusercontent.com/u/28462822?v=4","gravatar_id":"","url":"https://api.github.com/users/digoburigo","html_url":"https://github.com/digoburigo","followers_url":"https://api.github.com/users/digoburigo/followers","following_url":"https://api.github.com/users/digoburigo/following{/other_user}","gists_url":"https://api.github.com/users/digoburigo/gists{/gist_id}","starred_url":"https://api.github.com/users/digoburigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/digoburigo/subscriptions","organizations_url":"https://api.github.com/users/digoburigo/orgs","repos_url":"https://api.github.com/users/digoburigo/repos","events_url":"https://api.github.com/users/digoburigo/events{/privacy}","received_events_url":"https://api.github.com/users/digoburigo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":22,"created_at":"2023-03-17T15:19:18Z","updated_at":"2024-06-03T09:34:07Z","closed_at":"2024-06-03T09:34:07Z","author_association":"NONE","active_lock_reason":null,"body":"I'm trying to introspect a postgre database with multiple schemas and it's not generating all the tables in all schemas. \r\n\r\nIs there a support for multiple schemas?","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/18/reactions","total_count":19,"+1":19,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/18/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/17","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/17/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/17/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/17/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/17","id":1629395789,"node_id":"I_kwDOHoY85M5hHptN","number":17,"title":"Introspect:mysql invalid params","user":{"login":"AidanNichol","id":7499249,"node_id":"MDQ6VXNlcjc0OTkyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/7499249?v=4","gravatar_id":"","url":"https://api.github.com/users/AidanNichol","html_url":"https://github.com/AidanNichol","followers_url":"https://api.github.com/users/AidanNichol/followers","following_url":"https://api.github.com/users/AidanNichol/following{/other_user}","gists_url":"https://api.github.com/users/AidanNichol/gists{/gist_id}","starred_url":"https://api.github.com/users/AidanNichol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AidanNichol/subscriptions","organizations_url":"https://api.github.com/users/AidanNichol/orgs","repos_url":"https://api.github.com/users/AidanNichol/repos","events_url":"https://api.github.com/users/AidanNichol/events{/privacy}","received_events_url":"https://api.github.com/users/AidanNichol/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-03-17T14:16:11Z","updated_at":"2023-04-15T14:52:53Z","closed_at":"2023-04-15T14:52:53Z","author_association":"NONE","active_lock_reason":null,"body":"I wanted to introspect my existing databases \r\n\r\nI tried\r\n```\r\ndrizzle-kit introspect:mysql --out=migrations/ --host=localhost --port=3306 --user=user --password=pass database=db_name\r\n```\r\nWhich failed with the following\r\n```\r\ndrizzle-kit: v0.17.0\r\ndrizzle-orm: v0.22.0\r\n\r\nMissing required params\r\n```\r\nI eventually noticed that I had missed the ```--``` from the ```database``` option.\r\nThe error message should have told me that  it was missing ```--database```.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/17/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/17/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/16","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/16/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/16/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/16/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/16","id":1628081295,"node_id":"I_kwDOHoY85M5hCoyP","number":16,"title":"[PG] Generated sql for \"ALTER TABLE\" commands contains table name with no quotes, making it case insensitive.","user":{"login":"Froidland","id":7199366,"node_id":"MDQ6VXNlcjcxOTkzNjY=","avatar_url":"https://avatars.githubusercontent.com/u/7199366?v=4","gravatar_id":"","url":"https://api.github.com/users/Froidland","html_url":"https://github.com/Froidland","followers_url":"https://api.github.com/users/Froidland/followers","following_url":"https://api.github.com/users/Froidland/following{/other_user}","gists_url":"https://api.github.com/users/Froidland/gists{/gist_id}","starred_url":"https://api.github.com/users/Froidland/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Froidland/subscriptions","organizations_url":"https://api.github.com/users/Froidland/orgs","repos_url":"https://api.github.com/users/Froidland/repos","events_url":"https://api.github.com/users/Froidland/events{/privacy}","received_events_url":"https://api.github.com/users/Froidland/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-03-16T18:46:56Z","updated_at":"2023-04-04T11:20:52Z","closed_at":"2023-04-04T11:20:52Z","author_association":"NONE","active_lock_reason":null,"body":"The following example is provided for many-to-many relations in the drizzle-orm postgres docs (added the export keyword to each of them):\r\n\r\n```ts\r\nimport { integer, pgTable, serial, text } from \"drizzle-orm/pg-core\"\r\n\r\nexport const users = pgTable('users', {\r\n  id: serial('id').primaryKey(),\r\n  name: text('name'),\r\n});\r\n\r\nexport const chatGroups = pgTable('chat_groups', {\r\n  id: serial('id').primaryKey(),\r\n  name: text('name'),\r\n});\r\n\r\nexport const usersToChatGroups = pgTable('usersToChatGroups', {\r\n  userId: integer('user_id').notNull().references(() => users.id),\r\n  groupId: integer('group_id').notNull().references(() => chatGroups.id),\r\n});\r\n```\r\n\r\nThe generated SQL for this schema is:\r\n```sql\r\nCREATE TABLE IF NOT EXISTS \"chat_groups\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"name\" text\r\n);\r\n\r\nCREATE TABLE IF NOT EXISTS \"users\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"name\" text\r\n);\r\n\r\nCREATE TABLE IF NOT EXISTS \"usersToChatGroups\" (\r\n\t\"user_id\" integer NOT NULL,\r\n\t\"group_id\" integer NOT NULL\r\n);\r\n\r\nDO $$ BEGIN\r\n ALTER TABLE usersToChatGroups ADD CONSTRAINT usersToChatGroups_user_id_users_id_fk FOREIGN KEY (\"user_id\") REFERENCES users(\"id\") ON DELETE no action ON UPDATE no action;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n\r\nDO $$ BEGIN\r\n ALTER TABLE usersToChatGroups ADD CONSTRAINT usersToChatGroups_group_id_chat_groups_id_fk FOREIGN KEY (\"group_id\") REFERENCES chat_groups(\"id\") ON DELETE no action ON UPDATE no action;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```\r\n\r\nWhen executed in Postgres, the following error is thrown:\r\n`ERROR: relation \"userstochatgroups\" does not exist`\r\n\r\nThis is to be expected because if the table name is not in quotes, it gets treated as case insensitive.\r\n\r\nIdeally the query would look something like this:\r\n\r\n```sql\r\nCREATE TABLE IF NOT EXISTS \"chat_groups\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"name\" text\r\n);\r\n\r\nCREATE TABLE IF NOT EXISTS \"users\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"name\" text\r\n);\r\n\r\nCREATE TABLE IF NOT EXISTS \"usersToChatGroups\" (\r\n\t\"user_id\" integer NOT NULL,\r\n\t\"group_id\" integer NOT NULL\r\n);\r\n\r\nDO $$ BEGIN\r\n ALTER TABLE \"usersToChatGroups\" ADD CONSTRAINT usersToChatGroups_user_id_users_id_fk FOREIGN KEY (\"user_id\") REFERENCES users(\"id\") ON DELETE no action ON UPDATE no action;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n\r\nDO $$ BEGIN\r\n ALTER TABLE \"usersToChatGroups\" ADD CONSTRAINT usersToChatGroups_group_id_chat_groups_id_fk FOREIGN KEY (\"group_id\") REFERENCES chat_groups(\"id\") ON DELETE no action ON UPDATE no action;\r\nEXCEPTION\r\n WHEN duplicate_object THEN null;\r\nEND $$;\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/16/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/16/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/15","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/15/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/15/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/15/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/15","id":1623379067,"node_id":"I_kwDOHoY85M5gwsx7","number":15,"title":"drizzle-orm is missing for introspecting with npx","user":{"login":"birdy90","id":4995346,"node_id":"MDQ6VXNlcjQ5OTUzNDY=","avatar_url":"https://avatars.githubusercontent.com/u/4995346?v=4","gravatar_id":"","url":"https://api.github.com/users/birdy90","html_url":"https://github.com/birdy90","followers_url":"https://api.github.com/users/birdy90/followers","following_url":"https://api.github.com/users/birdy90/following{/other_user}","gists_url":"https://api.github.com/users/birdy90/gists{/gist_id}","starred_url":"https://api.github.com/users/birdy90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/birdy90/subscriptions","organizations_url":"https://api.github.com/users/birdy90/orgs","repos_url":"https://api.github.com/users/birdy90/repos","events_url":"https://api.github.com/users/birdy90/events{/privacy}","received_events_url":"https://api.github.com/users/birdy90/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-03-14T12:27:28Z","updated_at":"2023-03-14T13:00:53Z","closed_at":"2023-03-14T13:00:53Z","author_association":"NONE","active_lock_reason":null,"body":"I'm really excetied to start working with drizzle, but it won't let me start. I have an existing DB, and I want to get its' schema\r\nusing `introspect`, but I'm getting error `please install required packages: drizzle-orm`. as you can see on a screenshot, I already have it installed:\r\n\r\n![image](https://user-images.githubusercontent.com/4995346/224999375-a7ab3b7f-1102-4b1e-b656-d22ba6ccff25.png)\r\n\r\nenvironment:\r\nwindows: 10\r\nnodejs: v18.14.2\r\nnpm: 9.5.1\r\nterminal: powershell inside ItelliJ IDEA","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/15/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/15/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/14","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/14/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/14/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/14/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/14","id":1619324630,"node_id":"I_kwDOHoY85M5ghO7W","number":14,"title":"Feature request:  option to match generated column name case to db column name","user":{"login":"robkallen","id":26876370,"node_id":"MDQ6VXNlcjI2ODc2Mzcw","avatar_url":"https://avatars.githubusercontent.com/u/26876370?v=4","gravatar_id":"","url":"https://api.github.com/users/robkallen","html_url":"https://github.com/robkallen","followers_url":"https://api.github.com/users/robkallen/followers","following_url":"https://api.github.com/users/robkallen/following{/other_user}","gists_url":"https://api.github.com/users/robkallen/gists{/gist_id}","starred_url":"https://api.github.com/users/robkallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robkallen/subscriptions","organizations_url":"https://api.github.com/users/robkallen/orgs","repos_url":"https://api.github.com/users/robkallen/repos","events_url":"https://api.github.com/users/robkallen/events{/privacy}","received_events_url":"https://api.github.com/users/robkallen/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2023-03-10T17:15:12Z","updated_at":"2023-06-17T07:09:13Z","closed_at":"2023-06-17T07:09:13Z","author_association":"NONE","active_lock_reason":null,"body":"**Feature Request:**\r\n\r\nI posted this in your Discord and was asked to create an issue.  It would be nice if you included an option in the `introspect` command to have the column  field names match the case of the corresponding column name from the database. For example, for this column, `userId: bigint(\"user_id\", { mode: \"number\" }),`, instead of the column field name being generated as `userId` it would match the table column name of `user_id`.  Thanks!","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/14/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/14/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/13","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/13/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/13/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/13/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/13","id":1619293305,"node_id":"PR_kwDOHoY85M5LyKMq","number":13,"title":"Update package import in example","user":{"login":"ddanielcruzz","id":20308945,"node_id":"MDQ6VXNlcjIwMzA4OTQ1","avatar_url":"https://avatars.githubusercontent.com/u/20308945?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielcruzz","html_url":"https://github.com/ddanielcruzz","followers_url":"https://api.github.com/users/ddanielcruzz/followers","following_url":"https://api.github.com/users/ddanielcruzz/following{/other_user}","gists_url":"https://api.github.com/users/ddanielcruzz/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielcruzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielcruzz/subscriptions","organizations_url":"https://api.github.com/users/ddanielcruzz/orgs","repos_url":"https://api.github.com/users/ddanielcruzz/repos","events_url":"https://api.github.com/users/ddanielcruzz/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielcruzz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-03-10T16:56:53Z","updated_at":"2023-03-10T18:32:16Z","closed_at":"2023-03-10T18:32:15Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/13","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/13","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/13.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/13.patch","merged_at":"2023-03-10T18:32:15Z"},"body":"Docs [here](https://github.com/drizzle-team/drizzle-orm/blob/main/drizzle-orm/src/pg-core/README.md#connect-using-node-postgres-pool-recommended) use the package `drizzle-orm/pg-core`, which I think is the latest version. If this is wrong please disregard my PR.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/13/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/13/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/12","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/12/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/12/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/12/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/12","id":1618677607,"node_id":"I_kwDOHoY85M5gew9n","number":12,"title":"Introspection breaks when the primary key is defined on multiple columns ","user":{"login":"ridem","id":3911747,"node_id":"MDQ6VXNlcjM5MTE3NDc=","avatar_url":"https://avatars.githubusercontent.com/u/3911747?v=4","gravatar_id":"","url":"https://api.github.com/users/ridem","html_url":"https://github.com/ridem","followers_url":"https://api.github.com/users/ridem/followers","following_url":"https://api.github.com/users/ridem/following{/other_user}","gists_url":"https://api.github.com/users/ridem/gists{/gist_id}","starred_url":"https://api.github.com/users/ridem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ridem/subscriptions","organizations_url":"https://api.github.com/users/ridem/orgs","repos_url":"https://api.github.com/users/ridem/repos","events_url":"https://api.github.com/users/ridem/events{/privacy}","received_events_url":"https://api.github.com/users/ridem/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2023-03-10T09:56:00Z","updated_at":"2023-04-04T11:20:23Z","closed_at":"2023-04-04T11:20:22Z","author_association":"NONE","active_lock_reason":null,"body":"- Command: `drizzle-kit introspect:pg`\r\n- PostgreSQL 12\r\n\r\nError:\r\n```\r\n/.../node_modules/drizzle-kit/index.js:26434\r\n                  name: tableCompositePkName.rows[0].primary_key,\r\n                                                     ^\r\n\r\nTypeError: Cannot read properties of undefined (reading 'primary_key')\r\n    at /.../node_modules/drizzle-kit/index.js:26434:54\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n\r\nNode.js v18.14.0\r\n```\r\n\r\nIn order to get the introspection running, I've had to replace this bit in drizzle-kit:\r\n\r\n```ts\r\n                const tableCompositePkName = await db.query(\r\n                  `SELECT conname AS primary_key\r\n              FROM   pg_constraint \r\n              WHERE  contype = 'p' \r\n              AND    connamespace = 'public'::regnamespace  \r\n              AND    conrelid::regclass::text = $1;`,\r\n                  [tableName]\r\n                );\r\n```\r\n\r\nwith something like this, that accounts for the fact that the names in `conrelid::regclass::text` are surrounded with quotes:\r\n\r\n```ts\r\n                const tableCompositePkName = await db.query(\r\n                  `SELECT conname AS primary_key\r\n              FROM   pg_constraint \r\n              WHERE  contype = 'p' \r\n              AND    connamespace = 'public'::regnamespace  \r\n              AND    conrelid::regclass::text = $1;`,\r\n                  [`\"${tableName}\"`]\r\n                );\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/12/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/12/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/11","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/11/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/11/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/11/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/11","id":1614610353,"node_id":"PR_kwDOHoY85M5LiXfz","number":11,"title":"fix deprecated option","user":{"login":"vscncls","id":47672257,"node_id":"MDQ6VXNlcjQ3NjcyMjU3","avatar_url":"https://avatars.githubusercontent.com/u/47672257?v=4","gravatar_id":"","url":"https://api.github.com/users/vscncls","html_url":"https://github.com/vscncls","followers_url":"https://api.github.com/users/vscncls/followers","following_url":"https://api.github.com/users/vscncls/following{/other_user}","gists_url":"https://api.github.com/users/vscncls/gists{/gist_id}","starred_url":"https://api.github.com/users/vscncls/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vscncls/subscriptions","organizations_url":"https://api.github.com/users/vscncls/orgs","repos_url":"https://api.github.com/users/vscncls/repos","events_url":"https://api.github.com/users/vscncls/events{/privacy}","received_events_url":"https://api.github.com/users/vscncls/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-03-08T03:53:45Z","updated_at":"2023-03-10T11:30:33Z","closed_at":"2023-03-10T11:30:32Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/11","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/11","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/11.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/11.patch","merged_at":"2023-03-10T11:30:32Z"},"body":null,"reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/11/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/11/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/10","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/10/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/10/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/10/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/10","id":1608721608,"node_id":"PR_kwDOHoY85M5LOwo_","number":10,"title":"Update docs for 0.17.0 release","user":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-03-03T14:13:27Z","updated_at":"2023-03-03T16:24:56Z","closed_at":"2023-03-03T16:24:52Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/10","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/10","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/10.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/10.patch","merged_at":"2023-03-03T16:24:52Z"},"body":null,"reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/10/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/10/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/9","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/9/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/9/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/9/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/9","id":1580104080,"node_id":"I_kwDOHoY85M5eLnmQ","number":9,"title":"[PG] char is undefined during introspection","user":{"login":"AlexandrLi","id":12869457,"node_id":"MDQ6VXNlcjEyODY5NDU3","avatar_url":"https://avatars.githubusercontent.com/u/12869457?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexandrLi","html_url":"https://github.com/AlexandrLi","followers_url":"https://api.github.com/users/AlexandrLi/followers","following_url":"https://api.github.com/users/AlexandrLi/following{/other_user}","gists_url":"https://api.github.com/users/AlexandrLi/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexandrLi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexandrLi/subscriptions","organizations_url":"https://api.github.com/users/AlexandrLi/orgs","repos_url":"https://api.github.com/users/AlexandrLi/repos","events_url":"https://api.github.com/users/AlexandrLi/events{/privacy}","received_events_url":"https://api.github.com/users/AlexandrLi/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"assignees":[{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-02-10T17:57:57Z","updated_at":"2023-03-03T16:29:32Z","closed_at":"2023-03-03T16:29:31Z","author_association":"NONE","active_lock_reason":null,"body":"Hello everyone. I'm trying to run introspect for my existing pg database. In resulted schema columns with data-type char marked as undefined.\r\n![image](https://user-images.githubusercontent.com/12869457/218162152-edfe5f43-a8c3-48f4-a1a6-fa016b2a309a.png)\r\n\r\nAnother observation is that [customer_id, interchange, part_code] declared as composite key, but in schema they are defined as separate primary keys.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/9/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/9/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/8","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/8/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/8/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/8/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/8","id":1567786399,"node_id":"I_kwDOHoY85M5dcoWf","number":8,"title":"when unknown type is detected, would be nice to emit a TODO comment instead of undefined","user":{"login":"capaj","id":1305378,"node_id":"MDQ6VXNlcjEzMDUzNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1305378?v=4","gravatar_id":"","url":"https://api.github.com/users/capaj","html_url":"https://github.com/capaj","followers_url":"https://api.github.com/users/capaj/followers","following_url":"https://api.github.com/users/capaj/following{/other_user}","gists_url":"https://api.github.com/users/capaj/gists{/gist_id}","starred_url":"https://api.github.com/users/capaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/capaj/subscriptions","organizations_url":"https://api.github.com/users/capaj/orgs","repos_url":"https://api.github.com/users/capaj/repos","events_url":"https://api.github.com/users/capaj/events{/privacy}","received_events_url":"https://api.github.com/users/capaj/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"assignees":[{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-02-02T10:39:25Z","updated_at":"2023-03-03T16:29:41Z","closed_at":"2023-03-03T16:29:41Z","author_association":"NONE","active_lock_reason":null,"body":"currently for unknown types the \"undefined\" is emitted. \r\n![image](https://user-images.githubusercontent.com/1305378/216302181-4c424e9a-2735-4b6b-b21c-0d29547e449f.png)\r\n\r\n\r\nWould be much nicer to do something like:\r\n![image](https://user-images.githubusercontent.com/1305378/216302555-e52f15f5-7bcb-430a-bd50-9a02d92e37c7.png)\r\n","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/8/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/8/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/7","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/7/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/7/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/7/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/7","id":1567775636,"node_id":"I_kwDOHoY85M5dcluU","number":7,"title":"\"post_id\" integer DEFAULT currval('posts_id_seq'::regclass) generates invalid TS","user":{"login":"capaj","id":1305378,"node_id":"MDQ6VXNlcjEzMDUzNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1305378?v=4","gravatar_id":"","url":"https://api.github.com/users/capaj","html_url":"https://github.com/capaj","followers_url":"https://api.github.com/users/capaj/followers","following_url":"https://api.github.com/users/capaj/following{/other_user}","gists_url":"https://api.github.com/users/capaj/gists{/gist_id}","starred_url":"https://api.github.com/users/capaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/capaj/subscriptions","organizations_url":"https://api.github.com/users/capaj/orgs","repos_url":"https://api.github.com/users/capaj/repos","events_url":"https://api.github.com/users/capaj/events{/privacy}","received_events_url":"https://api.github.com/users/capaj/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-02-02T10:32:23Z","updated_at":"2023-03-03T16:29:50Z","closed_at":"2023-03-03T16:29:49Z","author_association":"NONE","active_lock_reason":null,"body":"for this table:\r\n\r\n```\r\n-- CreateTable\r\nCREATE TABLE \"MyTable\" (\r\n    \"post_id\" integer DEFAULT currval('posts_id_seq'::regclass)\r\n);\r\n\r\n```\r\n\r\noutput is\r\n\r\n```ts\r\nexport const sessions = pgTable(\"MyTable\", {\r\n\tpostId: integer(\"post_id\").default(currval('posts_id_seq'::regclass)),\r\n})\r\n```\r\nwhich is not valid TS also `currval` is not defined anywhere in schema.ts","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/7/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/7/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/6","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/6/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/6/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/6/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/6","id":1567768072,"node_id":"I_kwDOHoY85M5dcj4I","number":6,"title":"\"ip\" INET NOT NULL is not supported","user":{"login":"capaj","id":1305378,"node_id":"MDQ6VXNlcjEzMDUzNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1305378?v=4","gravatar_id":"","url":"https://api.github.com/users/capaj","html_url":"https://github.com/capaj","followers_url":"https://api.github.com/users/capaj/followers","following_url":"https://api.github.com/users/capaj/following{/other_user}","gists_url":"https://api.github.com/users/capaj/gists{/gist_id}","starred_url":"https://api.github.com/users/capaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/capaj/subscriptions","organizations_url":"https://api.github.com/users/capaj/orgs","repos_url":"https://api.github.com/users/capaj/repos","events_url":"https://api.github.com/users/capaj/events{/privacy}","received_events_url":"https://api.github.com/users/capaj/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"assignees":[{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-02-02T10:27:37Z","updated_at":"2023-03-03T16:29:56Z","closed_at":"2023-03-03T16:29:56Z","author_association":"NONE","active_lock_reason":null,"body":"for this table:\r\n\r\n```\r\n-- CreateTable\r\nCREATE TABLE \"MyTable\" (\r\n    \"ip\" INET NOT NULL,\r\n);\r\n\r\n```\r\n\r\noutput of introspection is\r\n\r\n```ts\r\nexport const sessions = pgTable(\"MyTable\", {\r\n\tundefined.notNull(),\r\n})\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/6/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/6/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/5","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/5/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/5/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/5/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/5","id":1567766805,"node_id":"I_kwDOHoY85M5dcjkV","number":5,"title":" \"id\" UUID NOT NULL DEFAULT uuid_generate_v4() type is not supported","user":{"login":"capaj","id":1305378,"node_id":"MDQ6VXNlcjEzMDUzNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1305378?v=4","gravatar_id":"","url":"https://api.github.com/users/capaj","html_url":"https://github.com/capaj","followers_url":"https://api.github.com/users/capaj/followers","following_url":"https://api.github.com/users/capaj/following{/other_user}","gists_url":"https://api.github.com/users/capaj/gists{/gist_id}","starred_url":"https://api.github.com/users/capaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/capaj/subscriptions","organizations_url":"https://api.github.com/users/capaj/orgs","repos_url":"https://api.github.com/users/capaj/repos","events_url":"https://api.github.com/users/capaj/events{/privacy}","received_events_url":"https://api.github.com/users/capaj/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"assignees":[{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-02-02T10:26:49Z","updated_at":"2023-03-03T16:30:05Z","closed_at":"2023-03-03T16:30:04Z","author_association":"NONE","active_lock_reason":null,"body":"for this table:\r\n\r\n```\r\n-- CreateTable\r\nCREATE TABLE \"MyTable\" (\r\n    \"id\" UUID NOT NULL DEFAULT uuid_generate_v4(),\r\n);\r\n\r\n```\r\n\r\noutput or introspection is\r\n\r\n```ts\r\nexport const sessions = pgTable(\"MyTable\", {\r\n\tundefined.primaryKey().notNull(),\r\n})\r\n```","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/5/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/5/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/4","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/4/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/4/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/4/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/4","id":1567763202,"node_id":"I_kwDOHoY85M5dcisC","number":4,"title":"array fields end up as \"undefined\" in the schema","user":{"login":"capaj","id":1305378,"node_id":"MDQ6VXNlcjEzMDUzNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1305378?v=4","gravatar_id":"","url":"https://api.github.com/users/capaj","html_url":"https://github.com/capaj","followers_url":"https://api.github.com/users/capaj/followers","following_url":"https://api.github.com/users/capaj/following{/other_user}","gists_url":"https://api.github.com/users/capaj/gists{/gist_id}","starred_url":"https://api.github.com/users/capaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/capaj/subscriptions","organizations_url":"https://api.github.com/users/capaj/orgs","repos_url":"https://api.github.com/users/capaj/repos","events_url":"https://api.github.com/users/capaj/events{/privacy}","received_events_url":"https://api.github.com/users/capaj/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false},"assignees":[{"login":"AndriiSherman","id":29543764,"node_id":"MDQ6VXNlcjI5NTQzNzY0","avatar_url":"https://avatars.githubusercontent.com/u/29543764?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriiSherman","html_url":"https://github.com/AndriiSherman","followers_url":"https://api.github.com/users/AndriiSherman/followers","following_url":"https://api.github.com/users/AndriiSherman/following{/other_user}","gists_url":"https://api.github.com/users/AndriiSherman/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriiSherman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriiSherman/subscriptions","organizations_url":"https://api.github.com/users/AndriiSherman/orgs","repos_url":"https://api.github.com/users/AndriiSherman/repos","events_url":"https://api.github.com/users/AndriiSherman/events{/privacy}","received_events_url":"https://api.github.com/users/AndriiSherman/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-02-02T10:24:34Z","updated_at":"2023-03-03T16:30:13Z","closed_at":"2023-03-03T16:30:13Z","author_association":"NONE","active_lock_reason":null,"body":"I have a table like this:\r\n\r\n```sql\r\nCREATE TABLE \"MyTable\" (\r\n    \"photos\" TEXT[],\r\n);\r\n```\r\n\r\nideally \r\n - the generator should skip fields which it cannot map into a concrete type and emit a warning\r\n - the generator should ideally support array fields","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/4/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/4/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/3","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/3/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/3/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/3/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/3","id":1567733588,"node_id":"I_kwDOHoY85M5dcbdU","number":3,"title":"timestamp is not in the import statement in schema.ts","user":{"login":"capaj","id":1305378,"node_id":"MDQ6VXNlcjEzMDUzNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1305378?v=4","gravatar_id":"","url":"https://api.github.com/users/capaj","html_url":"https://github.com/capaj","followers_url":"https://api.github.com/users/capaj/followers","following_url":"https://api.github.com/users/capaj/following{/other_user}","gists_url":"https://api.github.com/users/capaj/gists{/gist_id}","starred_url":"https://api.github.com/users/capaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/capaj/subscriptions","organizations_url":"https://api.github.com/users/capaj/orgs","repos_url":"https://api.github.com/users/capaj/repos","events_url":"https://api.github.com/users/capaj/events{/privacy}","received_events_url":"https://api.github.com/users/capaj/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"assignees":[{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-02-02T10:07:56Z","updated_at":"2023-03-03T16:30:20Z","closed_at":"2023-03-03T16:30:19Z","author_association":"NONE","active_lock_reason":null,"body":"Today I used `drizzle-kit introspect:pg --out=migrations/ --connectionString=postgresql://user:pass@host:port/db_name` on my current work project and wow, it's so fast. It generated 2k of TS code in couple hundred miliseconds. Nicely done. Much faster than prisma again.\r\nI bumped into this though:\r\n\r\n![image](https://user-images.githubusercontent.com/1305378/216294948-7e0c3ed8-8250-4680-9305-a698ef0faa51.png)\r\n\r\nI would expect the generated `schema.ts` file to be free from type errors.\r\nI can provide the full output and migration sql file if needed.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/3/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/3/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/2","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/2/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/2/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/2/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/issues/2","id":1567727702,"node_id":"I_kwDOHoY85M5dcaBW","number":2,"title":"generated enums are not camel cased","user":{"login":"capaj","id":1305378,"node_id":"MDQ6VXNlcjEzMDUzNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1305378?v=4","gravatar_id":"","url":"https://api.github.com/users/capaj","html_url":"https://github.com/capaj","followers_url":"https://api.github.com/users/capaj/followers","following_url":"https://api.github.com/users/capaj/following{/other_user}","gists_url":"https://api.github.com/users/capaj/gists{/gist_id}","starred_url":"https://api.github.com/users/capaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/capaj/subscriptions","organizations_url":"https://api.github.com/users/capaj/orgs","repos_url":"https://api.github.com/users/capaj/repos","events_url":"https://api.github.com/users/capaj/events{/privacy}","received_events_url":"https://api.github.com/users/capaj/received_events","type":"User","site_admin":false},"labels":[{"id":4311178953,"node_id":"LA_kwDOHoY85M8AAAABAPdeyQ","url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false},"assignees":[{"login":"AlexBlokh","id":4045375,"node_id":"MDQ6VXNlcjQwNDUzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4045375?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexBlokh","html_url":"https://github.com/AlexBlokh","followers_url":"https://api.github.com/users/AlexBlokh/followers","following_url":"https://api.github.com/users/AlexBlokh/following{/other_user}","gists_url":"https://api.github.com/users/AlexBlokh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexBlokh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexBlokh/subscriptions","organizations_url":"https://api.github.com/users/AlexBlokh/orgs","repos_url":"https://api.github.com/users/AlexBlokh/repos","events_url":"https://api.github.com/users/AlexBlokh/events{/privacy}","received_events_url":"https://api.github.com/users/AlexBlokh/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-02-02T10:05:01Z","updated_at":"2023-03-03T16:30:28Z","closed_at":"2023-03-03T16:30:28Z","author_association":"NONE","active_lock_reason":null,"body":"I used command `drizzle-kit introspect:pg --out=migrations/ --connectionString=postgresql://user:pass@host:port/db_name` and\r\n![image](https://user-images.githubusercontent.com/1305378/216294318-954f5b31-b3a3-48dd-9477-d34704ecc20c.png)\r\n\r\nwhy are these not camel cased?\r\nSure I can go in and fix it manually, but I think camel casing is best practice when it comes to naming stuff in JS/TS.","reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/2/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/2/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/1","repository_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror","labels_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/1/labels{/name}","comments_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/1/comments","events_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/1/events","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/1","id":1534468691,"node_id":"PR_kwDOHoY85M5HcSDi","number":1,"title":"Fix typos in Readme","user":{"login":"StCatfish","id":22256277,"node_id":"MDQ6VXNlcjIyMjU2Mjc3","avatar_url":"https://avatars.githubusercontent.com/u/22256277?v=4","gravatar_id":"","url":"https://api.github.com/users/StCatfish","html_url":"https://github.com/StCatfish","followers_url":"https://api.github.com/users/StCatfish/followers","following_url":"https://api.github.com/users/StCatfish/following{/other_user}","gists_url":"https://api.github.com/users/StCatfish/gists{/gist_id}","starred_url":"https://api.github.com/users/StCatfish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/StCatfish/subscriptions","organizations_url":"https://api.github.com/users/StCatfish/orgs","repos_url":"https://api.github.com/users/StCatfish/repos","events_url":"https://api.github.com/users/StCatfish/events{/privacy}","received_events_url":"https://api.github.com/users/StCatfish/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-01-16T08:04:02Z","updated_at":"2023-03-10T14:52:47Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/pulls/1","html_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/1","diff_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/1.diff","patch_url":"https://github.com/drizzle-team/drizzle-kit-mirror/pull/1.patch","merged_at":null},"body":null,"reactions":{"url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/1/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/drizzle-team/drizzle-kit-mirror/issues/1/timeline","performed_via_github_app":null,"state_reason":null}]